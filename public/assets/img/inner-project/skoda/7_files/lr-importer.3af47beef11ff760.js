/*! For license information please see lr-importer.3af47beef11ff760.js.LICENSE.txt */
(()=>{var e={8534:(e,t,r)=>{"use strict";var i=r(686248),n=r(912752),s=n.aTypedArray,o=n.exportTypedArrayMethod,a=n.TYPED_ARRAY_CONSTRUCTOR;o("toReversed",(function(){return i(s(this),this[a])}),!0)},18536:(e,t,r)=>{var i={};i[r(107647)("toStringTag")]="z",e.exports="[object z]"===String(i)},21063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.profile=null,this.tokenFields=e,this.profile=t};t.TokenProfileResponse=r},29770:(e,t,r)=>{var i=r(578887),n=r(162009),s=r(658369),o=r(178326),a=i.TypeError;e.exports=function(e,t){var r,i;if("string"===t&&s(r=e.toString)&&!o(i=n(r,e)))return i;if(s(r=e.valueOf)&&!o(i=n(r,e)))return i;if("string"!==t&&s(r=e.toString)&&!o(i=n(r,e)))return i;throw a("Can't convert object to primitive value")}},31049:e=>{var t,r,i,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return n.lastIndex=0,n.test(e)?'"'+e.replace(n,(function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function a(e,n){var s,l,u,c,d,h=t,p=n[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof i&&(p=i.call(n,e,p)),typeof p){case"string":return o(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(t+=r,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(c=p.length,s=0;s<c;s+=1)d[s]=a(s,p)||"null";return u=0===d.length?"[]":t?"[\n"+t+d.join(",\n"+t)+"\n"+h+"]":"["+d.join(",")+"]",t=h,u}if(i&&"object"==typeof i)for(c=i.length,s=0;s<c;s+=1)"string"==typeof(l=i[s])&&(u=a(l,p))&&d.push(o(l)+(t?": ":":")+u);else for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&(u=a(l,p))&&d.push(o(l)+(t?": ":":")+u);return u=0===d.length?"{}":t?"{\n"+t+d.join(",\n"+t)+"\n"+h+"}":"{"+d.join(",")+"}",t=h,u}}e.exports=function(e,n,s){var o;if(t="",r="","number"==typeof s)for(o=0;o<s;o+=1)r+=" ";else"string"==typeof s&&(r=s);if(i=n,n&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw new Error("JSON.stringify");return a("",{"":e})}},42974:(e,t,r)=>{var i=r(366740),n=r(658369),s=r(927449),o=i(Function.toString);n(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},45825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.TYPE1="type1",e.TYPE3="type3",e.TYPE2E="type2e",e.GUEST="guest"}(t.IAccountType||(t.IAccountType={}))},57990:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(331456)),s=function(){function e(){}return e.prototype.fragmentToObject=function(e){var t=this.getHashFromURL(e);if(!t)return null;var r=this.processHashUrl(t),i=this.getOldHash(r),s=i?r.slice(r.indexOf("old_hash")):r,o=this.removeOldHash(s),a=this.getQueryParamsAsMap(o);i&&(a.old_hash=i);var l=a.state;return l&&(a.state=n.default.toJson(l)),a},e.prototype.getOldHash=function(e){if(!e)return"";var t=e.match("old_hash=(.*?)&from_ims=true");return t?t[1]:""},e.prototype.removeOldHash=function(e){return e?e.replace(/old_hash=(.*?)&from_ims=true/gi,"from_ims=true"):e},e.prototype.removeAccessToken=function(e){return void 0===e&&(e=window.location.hash),!e&&e.length<1?e:e.startsWith("#")?"#"+this.removeAccessToken(e.substring(1)):e.replace(/(^access_token=[^&]+&?)|(&access_token=[^&]+)/g,"")},e.prototype.getHashFromURL=function(e){void 0===e&&(e=window.location.href);var t=e.indexOf("#");return-1!==t?e.substring(t+1):""},e.prototype.getQueryParamsAsMap=function(e){if(!e)return{};var t={};return(e=e.replace(/^(#\/|\/|#|\?|&)/,"")).split("&").forEach((function(e){if(e.length){var r=e.split("=");t[r[0]]=decodeURIComponent(r[1])}})),t},e.prototype.processHashUrl=function(e){return e.replace("?error","#error").replace(/#/gi,"&").replace("from_ims=true?","from_ims=true&")},e}();t.default=new s},58626:(e,t,r)=>{var i=r(578887).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},59678:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(r(217509)),o=n(r(889387)),a=r(720852),l=r(847924),u=function(){var e=this;this.composeRedirectUrl=function(e){var t="authorize",r=e.apiParameters,n=e.externalParameters,s=void 0===n?{}:n,u=e.adobeIdRedirectUri,c=void 0===u?"":u,d=e.clientId,h=e.locale,p=e.state,f=void 0===p?{}:p,g=e.scope,m=void 0===g?s.scope||r.scope||"":g,y=a.RedirectHelper.mergeApiParamsWithExternalParams(r,s,t);f&&(y.state=l.merge(y.state||{},f));var v=a.RedirectHelper.createRedirectUrl(c,d,y,t,m),b=s.locale||h||"",_=e.response_type,A=void 0===_?y.response_type||"":_;return i(i({},y),{client_id:d,scope:m,locale:b,response_type:A,jslVersion:o.default.jslibver,redirect_uri:v})},this.createRedirectUrl=function(t){var r=e.composeRedirectUrl(t),i=s.default.uriEncodeData(r);return o.default.baseUrlAdobe+"/ims/authorize/v1?"+i}};t.BaseSignInService=u},63519:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(720852),o=n(r(217509)),a=n(r(889387)),l=r(597818);function u(e,t){void 0===t&&(t=void 0);var r="logout",n=e.apiParameters,l=e.externalParameters,u=e.adobeIdRedirectUri,c=void 0===u?"":u,d=e.clientId,h=s.RedirectHelper.mergeApiParamsWithExternalParams(n,l,r),p=s.RedirectHelper.createDefaultRedirectUrl(c,d,h,r),f=i(i({},h),{client_id:d,redirect_uri:p,jslVersion:a.default.jslibver});t&&(f=Object.assign(f,{probing_results:t}));var g=o.default.uriEncodeData(f),m=a.default.baseUrlAdobe+"/ims/logout/v1?"+g;o.default.replaceUrl(m)}var c=function(){this.signOut=function(e){var t=e.clientId;a.default.checkTokenEndpoint.proxied?(new l.ThirdPartyProbingService).probe([a.default.checkTokenEndpoint.url],t).then((function(t){u(e,t)})).catch((function(){u(e)})):u(e)}};t.SignOutService=c},63582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdobeIdKey="adobeid",t.AdobeIMSKey="adobeIMS",t.AdobeImsFactory="adobeImsFactory",t.DEFAULT_LANGUAGE="en_US",function(e){e.LocalStorage="local",e.SessionStorage="session",e.MemoryStorage="memory"}(t.STORAGE_MODE||(t.STORAGE_MODE={})),t.HEADERS={AUTHORIZATION:"Authorization",X_IMS_CLIENT_ID:"X-IMS-ClientId",RETRY_AFTER:"Retry-after"},t.PROFILE_STORAGE_KEY="adobeid_ims_profile",t.TOKEN_STORAGE_KEY="adobeid_ims_access_token",t.ON_IMSLIB_INSTANCE="onImsLibInstance",t.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME="getImsLibInstance"},63944:(e,t,r)=>{"use strict";function i(e,t,r){var i="_"+t,n=r.get;if(!n)throw new Error("@Memoize can only be applied on getters.");r.get=function(){if(Object.prototype.hasOwnProperty.call(this,i))return this[i];var e=n.call(this);return this[i]=e,Object.defineProperty(this,t,{configurable:!0,value:e}),e}}r.d(t,{A:()=>i})},71786:e=>{e.exports={hostnames:{"lightroom.adobe.com":{api_host:"pps.adobe.io",api_key:"LrWebPPSProd"},"dev.adobelr.com":{api_host:"pps-stage.adobe.io",api_key:"LrWebPPSStage"},default:{api_host:"pps-stage.adobe.io",api_key:"LrWebPPSStage"}}}},74118:e=>{e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},76309:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i=r(157688).A.makeClassDecorator(((e,t,r)=>{if(t&&(e.prototype._xrayClassName=t),r){const t=e.prototype.events;Object.assign(e.prototype,r),r.events&&t&&(e.prototype.events=t.concat(r.events))}}))},81076:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i="ontouchstart"in document||navigator.maxTouchPoints>0},82979:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(235404),s=r(63582),o=i(r(139573)),a=function(){function e(){this.memoryStorageInstance=null}return Object.defineProperty(e.prototype,"memoryStorage",{get:function(){return this.memoryStorageInstance||(this.memoryStorageInstance=new n.MemoryStorage),this.memoryStorageInstance},enumerable:!0,configurable:!0}),e.prototype.getStorageByName=function(e){var t=this.getStorageInstanceByName(e);return t&&this.verifyStorage(t)?t:this.memoryStorage},e.prototype.getStorageInstanceByName=function(e){if(e===s.STORAGE_MODE.MemoryStorage)return this.memoryStorage;try{return e===s.STORAGE_MODE.LocalStorage?window.localStorage:window.sessionStorage}catch(e){return o.default.warn("Please change your cookies settings in order to allow local data to be set"),null}},e.prototype.getAvailableStorage=function(){var e=this.getStorageByName(s.STORAGE_MODE.LocalStorage);return e instanceof n.MemoryStorage?this.getStorageByName(s.STORAGE_MODE.SessionStorage):e},e.prototype.verifyStorage=function(e){var t="test";try{return e.setItem(t,"true"),"true"===e.getItem(t)&&(e.removeItem(t),!0)}catch(e){return!1}},e}();t.default=new a},88717:(e,t,r)=>{var i=r(366740),n=r(452873),s=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(n(e),t)}},92940:(e,t,r)=>{function i(e,t,r){"object"==typeof t&&(r=t.depth,t=t.circular);var i=[],n=[];return void 0===t&&(t=!0),void 0===r&&(r=1/0),function e(r,s){if(null===r)return null;if(0===s)return r;var o,a,l;if("object"!=typeof r)return r;if(r instanceof Map)o=new Map;else if(r instanceof Set)o=new Set;else if(r instanceof Promise)o=new Promise((function(t,i){r.then((function(r){t(e(r,s-1))}),(function(t){i(e(t,s-1))}))}));else if(Array.isArray(r))o=[];else{if((l=r)instanceof ArrayBuffer||l instanceof Int8Array||l instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)return r.slice(0);r instanceof RegExp?(o=new RegExp(r.source,(r.global?"g":"")+(r.ignoreCase?"i":"")+(r.multiline?"m":"")),r.lastIndex&&(o.lastIndex=r.lastIndex)):r instanceof Date?o=new Date(r.getTime()):r instanceof Error?o=Object.create(r):(a=Object.getPrototypeOf(r),o=Object.create(a))}if(t){var u=i.indexOf(r);if(-1!==u)return n[u];i.push(r),n.push(o)}r instanceof Map&&r.forEach((function(t,r){var i=e(r,s-1),n=e(t,s-1);o.set(i,n)})),r instanceof Set&&r.forEach((function(t){var r=e(t,s-1);o.add(r)}));for(let t in r){var c;a&&(c=Object.getOwnPropertyDescriptor(a,t)),c&&null===c.set||(o[t]=e(r[t],s-1))}if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(let t=0;t<d.length;t++){var h=d[t],p=Object.getOwnPropertyDescriptor(r,h);p&&!p.enumerable||(o[h]=e(r[h],s-1),p.enumerable||Object.defineProperty(o,h,{enumerable:!1}))}}return o}(e,r)}r(528510),r(317779),r(8534),r(864113),r(380190),e.exports={shallowClone:e=>i(e,!0,1),deepClone:e=>i(e,!0)}},106256:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(406190),n=r(712942),s=r(685530);class o extends s.A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;super(),this._swapItems(e)}_swapItems(e){if(e instanceof Set)this.base=e;else{if("function"!=typeof e[Symbol.iterator])throw new Error("ObservableSet expects either a Set object or an iterable object.");this.base=new Set(e)}}swapItems(e){this._swapItems(e),i.A.trigger(this,"change")}get size(){return n.A.active&&n.A.recordEvent(this,"change"),this.base.size}get length(){return this.size}[Symbol.iterator](){return this.base.values()}}var a=Set.prototype,l=o.prototype,u=["add","clear","delete"];function c(e,t){return t?function(){var t=e.apply(this.base,arguments);return i.A.trigger(this,"change"),t}:function(){return n.A.active&&n.A.recordEvent(this,"change"),e.apply(this.base,arguments)}}for(var d=Object.getOwnPropertyNames(a),h=0,p=d.length;h<p;++h){var f=d[h];Object.prototype.hasOwnProperty.call(l,f)||(l[f]=c(a[f],-1!==u.indexOf(f)))}},107647:(e,t,r)=>{var i=r(578887),n=r(829405),s=r(88717),o=r(579764),a=r(643604),l=r(276788),u=n("wks"),c=i.Symbol,d=c&&c.for,h=l?c:c&&c.withoutSetter||o;e.exports=function(e){if(!s(u,e)||!a&&"string"!=typeof u[e]){var t="Symbol."+e;a&&s(c,e)?u[e]=c[e]:u[e]=l&&d?d(t):h(t)}return u[e]}},121570:(e,t,r)=>{var i=r(797250);e.exports=function(e){return i(e.length)}},122450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.STAGE="stg1",e.PROD="prod"}(t.IEnvironment||(t.IEnvironment={}))},127507:(e,t,r)=>{"use strict";function i(e){e.dispose?e.dispose():"function"==typeof e&&e()}r.d(t,{A:()=>n});class n{link(e){var t=this._disposables;return t||(t=this._disposables=[]),t.push(e),e}unlink(e){var t=this._disposables;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}disposeLink(e){this.unlink(e),i(e)}dispose(){this.isDisposed=!0;var e=this._disposables;if(e){this._disposables=null;for(var t=e.length-1;t>=0;--t)i(e[t])}}}},133650:e=>{"use strict";var t={__proto__:null,foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof r)}},135151:(e,t,r)=>{var i=r(950176),n=r(162009),s=r(895545),o=r(141296),a=r(798793),l=r(558621),u=r(88717),c=r(314369),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=a(e),t=l(t),c)try{return d(e,t)}catch(e){}if(u(e,t))return o(!n(s.f,e,t),e[t])}},135708:(e,t,r)=>{"use strict";function i(e,t,r,i,n){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}r.d(t,{A:()=>i})},139573:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.logEnabled=!1,this.print=function(t,r){e.logEnabled&&t.apply(void 0,i(r))},this.assert=function(t,r){e.print(console.assert,[t,r])},this.assertCondition=function(t,r){t()||e.print(console.error,[r])},this.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.error,t)},this.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.warn,t)},this.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.print(console.info,t)}}return e.prototype.enableLogging=function(){this.logEnabled=!0},e.prototype.disableLogging=function(){this.logEnabled=!1},e}();t.default=new n},141296:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},141770:(e,t,r)=>{var i=r(578887),n=r(135151).f,s=r(555119),o=r(838110),a=r(380936),l=r(295624),u=r(560232);e.exports=function(e,t){var r,c,d,h,p,f=e.target,g=e.global,m=e.stat;if(r=g?i:m?i[f]||a(f,{}):(i[f]||{}).prototype)for(c in t){if(h=t[c],d=e.noTargetGet?(p=n(r,c))&&p.value:r[c],!u(g?c:f+(m?".":"#")+c,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),o(r,c,h,e)}}},147681:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i="3.4.0"},147968:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(906161)),l=function(e){function t(t,r){var i=e.call(this)||this;return i.signIn=function(e){e.state=s(s({},e.state),{imslibmodal:!0});var t=e.state.nonce,r=i.createRedirectUrl(e);a.default.openSignInWindow(r,t,i.popupSettings,i.onPopupMessage)},i.onPopupMessage=t,i.popupSettings=r,i}return n(t,e),t}(r(59678).BaseSignInService);t.SignInModalService=l},151185:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i=new class{constructor(){this.token=!1,this.environment="prod",this.clientId="PhotoSDK3rdParty1",this.ozHost="https://photos.adobe.io"}}},157625:(e,t,r)=>{var i=r(578887),n=r(727691),s=r(658369),o=r(984557),a=r(276788),l=i.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return s(t)&&o(t.prototype,l(e))}},157688:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});class i{static _isDirectClassInvocation(e){return 1===e.length&&"function"==typeof e[0]}static _isDirectPropertyInvocation(e){return 3===e.length&&e[2]&&Object.prototype.hasOwnProperty.call(e[2],"configurable")}static wrapPropertyDecorator(e,t,r){const n=i.getInitialValue(r);return delete r.value,delete r.writable,r.get=function(){if(e===this)return n;const r=i.makePropertyDecorator(n.bind(this));return Object.defineProperty(this,t,{configurable:!0,enumerable:!1,value:r}),r},r}static makePropertyDecorator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(i._isDirectPropertyInvocation(n))return e.apply(this,n);if(t.throwOnClassInvocation&&i._isDirectClassInvocation(n))throw new Error(t.throwOnClassInvocation);return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.apply(this,r.concat(n))}}}static makeClassDecorator(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i._isDirectClassInvocation(r)?e.apply(this,r):function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i.concat(r))}}}static getInitialValue(e){return e.initializer?e.initializer():e.value}}},162009:(e,t,r)=>{var i=r(382740),n=Function.prototype.call;e.exports=i?n.bind(n):function(){return n.apply(n,arguments)}},162247:(e,t,r)=>{var i=r(578887),n=r(18536),s=r(658369),o=r(647148),a=r(107647)("toStringTag"),l=i.Object,u="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=l(e),a))?r:u?o(t):"Object"==(i=o(t))&&s(t.callee)?"Arguments":i}},171354:e=>{function t(e,t){for(let r=0,i=this.length;r<i;r++){const i=this[r];if(e.call(t,i,r))return i}}function r(e,r,i){if(e)return(Array.prototype.find||t).call(e,r,i)}r.polyfill=function(){Array.prototype.find||(Array.prototype.find=t)},e.exports=r},172228:(e,t,r)=>{var i,n=r(378531),s=r(996829),o=r(626947),a=r(774665),l=r(916929),u=r(599363),c=r(702739),d="prototype",h="script",p=c("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;m=document.domain&&i?function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):(t=u("iframe"),r="java"+h+":",t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F);for(var n=o.length;n--;)delete m[d][o[n]];return m()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=n(e),r=new f,f[d]=null,r[p]=e):r=m(),void 0===t?r:s.f(r,t)}},178326:(e,t,r)=>{var i=r(658369);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},189795:(e,t,r)=>{var i="undefined"!=typeof JSON?JSON:r(254216);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var o,a="boolean"==typeof t.cycles&&t.cycles,l=t.replacer||function(e,t){return t},u=t.cmp&&(o=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},n={key:r,value:e[r]};return o(i,n)}}),c=[];return function e(t,o,d,h){var p=r?"\n"+new Array(h+1).join(r):"",f=r?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=l.call(t,o,d))){if("object"!=typeof d||null===d)return i.stringify(d);if(n(d)){for(var g=[],m=0;m<d.length;m++){var y=e(d,m,d[m],h+1)||i.stringify(null);g.push(p+r+y)}return"["+g.join(",")+p+"]"}if(-1!==c.indexOf(d)){if(a)return i.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(d);var v=s(d).sort(u&&u(d));for(g=[],m=0;m<v.length;m++){var b=e(d,o=v[m],d[o],h+1);if(b){var _=i.stringify(o)+f+b;g.push(p+r+_)}}return c.splice(c.indexOf(d),1),"{"+g.join(",")+p+"}"}}({"":e},"",e,0)};var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},s=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var i in e)t.call(e,i)&&r.push(i);return r}},191448:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(151185),n=r(891348);const s=new class{set session(e){i.A.token=e.accessToken,i.A.clientId=e.apiKey,i.A.ozHost=e.host}getOzUrlP(e,t,r){return this.requestOzUrlP("GET",e,t,void 0,r)}requestOzUrlP(e,t,r,s,o){var a=new n.A,l=new XMLHttpRequest;if(/^http/.test(t)||(i.A.ozHost||console.error("Please initialize OzProvider with an ozHost"),t=`${i.A.ozHost}${t}`),l.open(e,t,!0),l.setRequestHeader("x-api-key",i.A.clientId),l.setRequestHeader("x-creativesdk-versions","CreativeSDK/0.1.<development>"),l.setRequestHeader("Authorization",`Bearer ${i.A.token}`),s)for(const[e,t]of Object.entries(s))l.setRequestHeader(e,t);return r&&(l.responseType=r),l.onload=()=>{if(200<=l.status&&l.status<300){var e={response:l.response,contentType:l.getResponseHeader("content-type"),type:l.responseType};if("application/json"===e.contentType||"application/json;charset=utf-8"===e.contentType)try{e.responseObject=JSON.parse(this._trimWhileExpression(l.responseText))}catch(e){return console.log("Failed JSON Parse"),console.log("URL",t),console.log("Response",l.responseText),void a.reject("Failed JSON Parse")}""!==l.responseType&&"text"!==l.responseType||(e.responseText=l.responseText),a.resolve(e)}else a.reject(l.status)},o&&o.then((()=>{l.abort(),a.reject("aborted")})),l.onerror=()=>{var e=`XHR call to Oz failed with status ${l.status}`;a.reject(e),console.error(e)},l.send(),a.promise}_trimWhileExpression(e){return e.replace(/^while\s*\(\s*1\s*\)\s*{\s*}\s*/,"")}}},197056:e=>{"use strict";e.exports=URIError},200596:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var i=r(555902),n=r(213431),s=r(739506),o=r(226405),a=r(489756),l=r.n(a),u=null,c={};const d=Symbol("addToChildAttributes"),h=Symbol("shouldPropagateChildAttribute"),p=Symbol("attachSpreads"),f=Symbol("getChildTemplate"),g=Symbol("renderChildTemplate");class m extends s.A{constructor(){if(super(),u){var{scope:e,factory:t,data:r,spreads:i}=u;r.$_component=this,this.scope=e,this.$_depth=t.depth,this.$_factory=t,this.$_view=r,i&&this[p](i)}}attached(){}detached(){}[f](e){if(this.childrenBlocks)return this.childrenBlocks[e]||this.childrenBlocks[e.replace(/:/g,"_")]}[g](e,t){let r={template:e,$_parent:this.$_view};return t&&(r.$_injectScope=e=>{for(var r=0,i=t.length;r<i;++r)e[`v${r}`]=t[r]}),r}renderChildren(e,t){if(e=e||"children",!t&&e instanceof Array&&(t=e,e="children"),t&&!(t instanceof Array))throw new Error("args parameter to renderChildren() must be an array");let r=this[f](e);return r?this[g](r,t):null}hasChildren(e){return e=e||"children",void 0!==this[f](e)}get children(){return this.renderChildren()}[h](e){if(e.isEvent){if(this.events&&(this.events.indexOf(e.name)>-1||this.events.indexOf(e.normalizedName)>-1))return!1}else if(this.definedAttributes&&this.definedAttributes[e.normalizedName])return!1;return!0}[d](e,t,r){t.matchesNamespace(r)&&this[h](t)&&e.push(t.toChildAttribute(this,!r))}undeclaredAttributes(e){const t=[];if(this.sourceAttributes)for(let r of this.sourceAttributes)this[d](t,new i.A(r),e);if(this.spreadAttributes&&i.A.forEachSpread(this.$_view,this.spreadAttributes,(r=>{this[d](t,r,e)})),this.eventAttributes)for(let r of this.eventAttributes)this[d](t,new i.A(r,!0),e);return t}static attachAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return t;for(var n=0,s=e.length;n<s;++n){const s=new i.A(e[n]),o=s.normalizedName,a=t.definedAttributes&&t.definedAttributes[o];if(!a){const e=o in t;if(t.definedObservables&&t.definedObservables[o])console.warn(`WARNING: The JSX attribute "${o}" was passed to a component declaring an @Observable of the same name. The JSX attribute will be ignored in a future Torq release. Use the @Attribute decorator to declare JSX attributes.`);else{if(e){console.warn(`ERROR: The JSX attribute "${o}" was passed to a component declaring a property of the same name. Ignoring the JSX attribute.`);continue}if(r)continue}}Object.defineProperty(t,a||o,s)}return t}[p](e){const t=this.events,r=this.definedAttributes;(r||t)&&i.A.forEachSpread(this.$_view,e,(e=>{const i=e.name,n=e.normalizedName,s=r&&r[n];s?Object.defineProperty(this,s,e):e.isEvent&&t&&t.indexOf(i)>-1&&!e.namespace&&e.value&&this.on(i,e.value)}))}static getBlockTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children";if(e)for(var r=0,i=e.length;r<i;++r){var n=e[r];if(n.name===t)return n.template}}static attachBlockTemplates(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e)for(var r=0,i=e.length;r<i;++r){var n=e[r];t[n.name]=n.template}return t}static make(e){var t,r,s,a,l,d,h,p,f,g,{attributes:y,spreads:v,blocks:b,init:_,events:A}=e||{};C(this);var w,P,S,x=n.Ay.make({render:function(e,t){var i=u;u=c||{},c=null,u.scope=s?e.scope.fork():e.scope,u.data=t,u.factory=e,u.spreads=v,u.definedAttributes=f;var o=new r;u.scope=null,u.data=null,c=u,u=i,_&&_(t,o),p&&O(o);var d,h=e.pushScope(o.scope),{parentNode:g,nextNode:m}=e,y=a&&a.call(o);y&&y.template?((d=y.template.make(e)).$_parent=t,d.$_scope=y):d=n.Ay.EmptyTemplate.make(e);e.parentNode=g,e.nextNode=m,t.$_view=d,d.template.run(e,d),e.restoreScope(h),l&&l.call(o),w&&(t.$_hotReloadFactory=e,t.$_hotReloadScope=e.scope,t.$_hotReloadNext=P,P&&(P.$_hotReloadPrevious=t),P=t)},reuse:k,dispose:T,move:function(e,t){var r=t.$_view;r.template.move(e,r)},firstChild:function(e,t){var r=t.$_view;return r.template.firstChild(e,r)},lastChild:function(e,t){var r=t.$_view;return r.template.lastChild(e,r)}});return(w=t.hotReloader)&&(S=new Set,w.signal.add((()=>{o.A.log("[HMR] Patching component",w.name);let e=0;for(let t=P;t;t=t.$_hotReloadNext)++e,T(t.$_hotReloadFactory,t,!0);o.A.log("[HMR] Disposed ",e," instances of ",w.name),C(w.instance),S.forEach((e=>x.releaseCache(e))),e=0;for(let t=P;t;t=t.$_hotReloadNext){++e;let r=t.$_hotReloadFactory,i=r.pushScope(t.$_hotReloadScope);k(r,t,!0),r.restoreScope(i)}o.A.log("[HMR] Updated ",e," instances of ",w.name)}))),x;function C(e){if(t=e,r=class extends t{},m.attachAttributes(y,r.prototype,!0),r.prototype.childrenBlocks=m.attachBlockTemplates(b),r.prototype.sourceAttributes=y,r.prototype.spreadAttributes=v,r.prototype.eventAttributes=A,s=r.prototype.fork,a=r.prototype.render,l=r.prototype.attached,d=r.prototype.detached,l===m.prototype.attached&&(l=null),d===m.prototype.detached&&(d=null),h=r.prototype.dispose,f=r.prototype.definedAttributes,(g=r.prototype.events)&&A){p=[];for(let e=0,t=A.length;e<t;++e){const t=A[e];if(g.indexOf(t.name)>-1)p.push(t);else{var n=i.A.normalizeName(t.name);g.indexOf(n)>-1&&(t.name=n,p.push(t))}}}}function O(e){for(var t=0,r=p.length;t<r;++t){var i=p[t];e.on(i.name,i.value)}}function k(e,t,i){var o=u;u=c||{},c=null,u.scope=s?e.scope.fork():e.scope,u.data=t,u.factory=e,u.spreads=v,u.definedAttributes=f;var d=new r;u.scope=null,u.data=null,c=u,u=o,_&&_(t,d),p&&O(d);var h=e.pushScope(d.scope);e.gotoAfterView(t.$_view),t.$_view.template.cache(e,t.$_view);var g,{parentNode:m,nextNode:y}=e,b=a&&a.call(d);b&&b.template?((g=b.template.make(e)).$_parent=t,g.$_scope=b):g=n.Ay.EmptyTemplate.make(e),e.parentNode=m,e.nextNode=y,t.$_view=g,g.template.run(e,g),e.restoreScope(h),l&&l.call(d),!i&&w&&(t.$_hotReloadFactory=e,t.$_hotReloadScope=e.scope,t.$_hotReloadNext=P,P&&(P.$_hotReloadPrevious=t),P=t)}function T(e,t,r){var i=t.$_component;!r&&w&&(t.$_hotReloadFactory=e,P===t&&(P=t.$_hotReloadNext),t.$_hotReloadNext&&(t.$_hotReloadNext.$_hotReloadPrevious=t.$_hotReloadPrevious),t.$_hotReloadPrevious&&(t.$_hotReloadPrevious.$_hotReloadNext=t.$_hotReloadNext),t.$_hotReloadScope=null,t.$_hotReloadNext=null,t.$_hotReloadPrevious=null,t.$_hotReloadFactory=null,S.add(e)),d&&d.call(i);var n=t.$_view;n.template.dispose(e,n),p&&function(e){for(var t=0,r=p.length;t<r;++t){var i=p[t];e.off(i.name,i.value)}}(i),_&&_(t,null),h&&h.call(i),n.$_parent=null,n.$_scope=null,n.$_factory=null,i.scope=null,i.$_view=null,t.$_component=null}}static makeDynamic(e){var t=l()("_dynamicTemplate");return{make(r,i){if(!i)return n.Ay.EmptyTemplate;var s=i[t];return s&&s.$_base===i||((s=i[t]=r.makeComponent(i,e)).$_base=i),s}}}}},201534:e=>{e.exports={environments:{stage:{host:"abp-profile-service-stage.adobe.io",apiKey:"LrWebABPStage"},production:{host:"abp-profile-service.adobe.io",apiKey:"LrWebABPProd"}}}},213431:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>l});var i=r(784040),n=r.n(i),s=!0;const o={render(){},init(){},dispose(){},move(){},reuse(){}};var a=0;class l{static make(e){if(!e.firstChild)return console.warn("Template didn't provide a first child method, so we cannot use it. Switching to EmptyTemplate.",e),l.EmptyTemplate;e.lastChild||(e.lastChild=e.firstChild);var t=++a;const r=!1!==e.cache;var i=n()(e,o),{render:u,init:c,dispose:d,move:h,reuse:p,prepare:f}=i,g={};return i.render=function(e,t){++e.depth,u(e,t),c(e,t),--e.depth},i.dispose=function(e,t){if(t.$_disposed)throw new Error("Invalid dispose on disposed template.");var{parentNode:r,nextNode:i}=e;d(e,t),t.$_disposed=!0,e.parentNode=r,e.nextNode=i},i.reuse=function(e,t){if(!t.$_disposed)throw new Error("Invalid reuse on live template.");t.$_disposed=!1;var{parentNode:r,nextNode:i}=e;++e.depth,p(e,t),c(e,t),--e.depth,e.parentNode=r,e.nextNode=i},i.cache=function(e,i){var n=e.parentNode,o=e.nextNode;i.$_disposed||(i.$_disposed=!0,d(e,i)),i.$_cache||(e.parentNode=i.$_cache=e.makeFragment(),e.nextNode=null,h(e,i),s&&r&&e.templates.put(t,i)),e.parentNode=n,e.nextNode=o},i.run=function(e,t){if(!t.$_cache)return++e.depth,u(e,t),c(e,t),void--e.depth;e.pushNode(t.$_cache),t.$_cache=null,t.$_disposed=!1;var{parentNode:r,nextNode:i}=e;++e.depth,p(e,t),c(e,t),--e.depth,e.parentNode=r,e.nextNode=i},i.make=function(e){if(g[e.id]||(f&&f(e),g[e.id]=!0,s&&r&&e.templates.init(t)),s&&r){var n=e.templates.take(t);if(n)return n}return{template:i,$_cache:null,$_disposed:!1}},i.releaseCache=function(e){e.templates.removeAll(t)},i}}l.EmptyTemplate=l.make({render(e,t){t.comment=e.pushCommentNode("empty template")},move(e,t){e.pushNode(t.comment)},firstChild:(e,t)=>t.comment})},215849:(e,t,r)=>{"use strict";r.d(t,{A:()=>M});var i=r(742623),n=r(875472),s=r(636550),o=(r(315715),r(477749)),a=r.n(o),l=r(739506),u=r(670734),c=r(680898),d=r.n(c),h=r(732486),p=r(797419),f=r(682826),g=r(622733),m=r(239758),y=r(403909),v=r(586564),b=r(747107),_=r(384089),A=r(872636),w=r(147681),P=r(456702),S=r(547826),x=r(528975),C=r(307980),O=r(246218),k=r(227507),T=r(341857).A;const E=(0,y.A)("metrics_track:info"),I=(0,y.A)("metrics_report:info"),D=(0,y.A)("metrics_verbose:info"),R=new u.A,j=new URLSearchParams(window.location.search);var F=(0,s.A)("getSanitizedUrl");class N extends l.A{constructor(){var e;(super(),Object.defineProperty(this,F,{value:L}),T.sdk)?this.disabled=!0:(this.disabled=!1,this.setPage(null!==(e=window.metricsPageName)&&void 0!==e?e:"unknown"),this.setViewChangeSource("pageLoad"),this.initPromise=this._initializeJP().then((()=>this.initPromise=null)).catch((e=>{f.A.is_enabled("debug")&&console.error("Metrics initialization failed. Error:",e)})),this.reportPageLoad(),this.watch((()=>g.A.locale),(e=>{null!=e&&this._updateLocale()})))}get ingestPage(){return p.pageNames[this.page]}setPage(e){null!=p.pageNames[e]?(this.page=e,this.wildcardPath||(this.wildcardPath="/")):console.error("Invalid page name key",e)}spaPageChanged(e){this.ingestPage!==p.pageNames[e]&&(this.setPage(e),this.reportPageLoad(!0))}async _initializeJP(){this._initializeIngestDefaults(),await Promise.all([new Promise((e=>_.A.complete.push(e))),g.A.readyJP,S.A.readyJP,P.A.readyJP,C.A.consentedJP,x.A.readyJP]),await this._initializeIngestJP(),this._initializeAdobeExperiencePlatform();try{this._debuglogMetricStatus()}catch{}}_updateLocale(){this._canTrackIngest()&&(this._ingestDefaultPayload["event.language"]=g.A.getLocaleWithUnderscore()),this._canReportAdobe()&&null!=window.alloy_all?.data._adobe_corpnew?.web?.webPageDetails&&(window.alloy_all.data._adobe_corpnew.web.webPageDetails.language=g.A.locale)}async _getImsUtilsJP(){if(null!=this.ImsUtils)return this.ImsUtils;const{default:e}=await new i.A(((e,t)=>Promise.resolve().then(r.bind(r,880594)).then(e,t)));return this.ImsUtils=e,e}_initializeIngestDefaults(){this._ingestDefaultPayload={"event.session_guid":"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),"event.offline":!1,"event.user_agent":navigator.userAgent,"event.category":"WEB","event.referrer":document.referrer,"source.name":"Lightroom","source.platform":"Web","source.device":v.A.mobile?"mobile":"desktop","source.version":w.A},this._ingestCustomPageKeys=[]}async _initializeIngestJP(){if(this.disabled)return;const e={async getAccessToken(e){let t;try{await S.A.readyJP,t=S.A.getToken()}catch{}e(null,t)},getAgent(e,t){t(null,{keepalive:!0})}};this._debugLog&&(e.log=e=>D(e));const t={ENVIRONMENT:(()=>{switch(window.location.hostname){case"lightroom.adobe.com":return"prod";case"stage.adobelr.com":return"stage";default:return"dev"}})(),ALLOW_NO_TOKEN:!0,ANALYTICS_MAX_QUEUED_EVENTS:100,ANALYTICS_API_KEY:"LightroomMobileWeb1",ANALYTICS_X_PRODUCT:`${window.location.hostname}/${w.A}`,ANALYTICS_PROJECT:"lr-web-service"};this._ingest=new(d())(e,t),this._ingest.enable(!0);const r=j,i=[];r.has("sdid")&&i.push(`sdid=${r.get("sdid")}`),r.has("promoid")&&i.push(`promoid=${r.get("promoid")}`),r.has("cgen")&&i.push(`cgen=${r.get("cgen")}`),this._ingestDefaultPayload["event.language"]=g.A.getLocaleWithUnderscore();const{account:n}=h.A;if(null!=n){this._ingestDefaultPayload["event.user_guid"]=n.getWCDGuid();const e=x.A.enabled("twp_unconverted")?"subscriber_twp":n.getStatus();this._ingestDefaultPayload["user.service_level"]=e;const t=n.getIsFreemium();t&&(this._ingestDefaultPayload["settings.lightroom_web.freemium"]=t)}const s=await this._getImsUtilsJP(),{adobeid:o}=s;let a;if(null!=o?.client_id&&(this._ingestDefaultPayload["source.client_id"]=o.client_id),!T.sdk)try{a=await s.getProfileJP()}catch{}if(null!=a){const e=a.serviceAccounts?.[0];null!=e&&(this._ingestDefaultPayload["user.service_code"]=e.serviceCode)}await Promise.all([P.A.readyJP,A.A.readyJP]),null!=A.A.code&&(this._ingestDefaultPayload["custom.country_code"]=A.A.code),null!=R.get("lrig")&&(this._ingestDefaultPayload["event.context_guid"]="internal");const l=await P.A.loadVisitorGuid();if(null!=l&&(this._ingestDefaultPayload["event.visitor_guid"]=l),await k.A.readyJP,k.A.isCCStandardUser&&(this._ingestDefaultPayload["user.cc_standard"]=!0),f.A.is_enabled("on_the_house")&&!f.A.is_enabled("on_the_house_worldwide")&&(await O.A.readyJP,O.A.active&&(i.push("test_id=LRW020"),this._ingestDefaultPayload["exp.treatment_id"]=O.A.variant)),i.length>0&&(this._ingestDefaultPayload["exp.campaign_id"]=i.join("&")),this._debugLog){E("Ingest common variables:");for(const e in this._ingestDefaultPayload){const t=this._ingestDefaultPayload[e];E(`\t${e}: ${t}`)}}}addIngestCustomPageVariable(e,t){this._ingestCustomPageKeys.push(e),this._ingestDefaultPayload[e]=t}setAdobePageVariables(e){this.pageVariables=e}setNewNavigationContext(e){this.navView=e,this.contextSequence=1}setViewChangeSource(e){this.viewChangeSource=e}reportViewChange(e,t,r){this.view=e,this.wildcardPath=t,this._reportAdobeViewChange(this.view),this._reportNRViewChange(this.view,this.wildcardPath,r)}reportWithView(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._report(t,e,r)}report(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t)}track(e,t,r){let i,n;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];if(1===o.length){const e=o[0];"string"==typeof e||e instanceof String?i=e:n=e}else o.length>1&&([i,n]=o);this._track(e,t,r,i,n)}trackIngestEvents(e,t,r,i,n){this._track(e,t,r,i,n,"ingest")}_debuglogMetricStatus(){f.A.is_enabled("debug")&&(null!=this.debugLogTimeout&&clearTimeout(this.debugLogTimeout),this.debugLogTimeout=setTimeout((()=>{console.group("Metrics State"),console.log("Adobe metrics (Launch) enabled : ",this._canReportAdobe()),console.log("NewRelic metrics enabled: ",this._canReportNewrelic()),console.log("Ingest metrics enabled: ",null!=this._ingest),console.groupEnd(),this.debugLogTimeout=null}),500))}reportAdobeOnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t,"adobe")}reportNROnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._report(e,this.view,t,"newrelic")}reportPageLoad(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{const{page:t,ingestPage:r}=this;if("libraries"===t)return;if(null!=t){const i=(0,n.A)(this,F)[F]();"Landing"===r?this.track(r,"Default","page","render",{"event.url":i}):this.track("Default","Page",r,"render",{"event.url":i});const s=e;this._reportAdobeViewChange(`${t}Load`,s),this.flush()}else f.A.is_enabled("debug")&&console.error("No page name on page load.")}catch(e){console.error(`Error: ${e}`)}}reportFailure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.failure="true",this._report(e,this.view,t)}reportClickWithView(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.reportWithView(e,t,r)}get _debugLog(){return!this.disabled&&(f.A.is_enabled("debug_log_metrics_track")||f.A.is_enabled("debug_log_metrics_report")||f.A.is_enabled("debug_log_metrics_verbose"))}async _report(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{if(f.A.is_enabled("automation")&&(r.automation=!0),this._debugLog){if(this.initPromise)try{await this.initPromise}catch{return}const n=null!=t?` view[${t}]`:"";let s;s="adobe"===i?"Adobe":"newrelic"===i?"NewRelic":"",I(`${s}: [${e}]${n} path[${this.wildcardPath}]`,r);for(const e in r){const t=r[e];D(`\t\t${e}: ${t}`)}}null!=i&&"adobe"!==i||this._reportAdobe(e,t,r),null!=i&&"newrelic"!==i||this._reportNR(e,t,r);const n={};for(const e in r){const t=r[e];"automation"!==e&&(n[`lrw.${e}`]=t)}null!=i&&"adobe"!==i||this._track("Legacy","Metric",e,"click",n,"ingest")}catch(e){return console.log(`Error: ${e}`)}}async _reportNR(e,t,r){var i;if(!this._canReportNewrelic())return;const n={page:this.page};if(this.initPromise)try{await this.initPromise}catch{return}null!=t&&(n.view=t);for(const e in r){const t=r[e];n[e]=t}n.visitor_guid=null!==(i=P.A.visitorGuid)&&void 0!==i?i:"",window.newrelic.addPageAction(e,n)}async _reportNRViewChange(e,t,r){if(this.initPromise)try{await this.initPromise}catch{return}const i=`${window.location.host}${t}`,{newrelic:n}=window,s=n?.interaction();if(this._debugLog){var o;const t=[];for(const e in r){const i=r[e];t.push(`query-${e}=${i}`)}null==this.viewChangeSource&&console.warn("No view change source"),I(`NewRelic View: view[${e}], interaction[${i}], changeSource[${null!==(o=this.viewChangeSource)&&void 0!==o?o:""}] vars[${t.join("&")}]`)}if(this._canReportNewrelic())if(null!=s){s.setName(i),s.setAttribute("view",e),null!=this.viewChangeSource&&(s.setAttribute("view-change-source",this.viewChangeSource),this.viewChangeSource=null);for(const e in r){const t=r[e];s.setAttribute(`query-${e}`,t)}s.save()}else this.viewChangeSource=null}_canReport(){return!this.disabled&&[C.W.CORE,C.W.PERFORMANCE].every((e=>C.A.consentedGroups.includes(e)))}_canReportAdobe(){return this._canReport()&&null!=window._satellite}_canReportNewrelic(){return this._canReport()&&null!=window.newrelic}_canTrackIngest(){return this._canReport()&&null!=this._ingest}_initializeAdobeExperiencePlatform(){var e;this.adobeExperiencePlatformGlobalsInitialized||(this.digitalData={page:{pageInfo:{siteSection:"lightroom.adobe.com",language:null!==(e=g.A.locale)&&void 0!==e?e:"en-US",pageName:this.page}},primaryProduct:{productInfo:{productName:"Lightroom"}}},this.adobeExperiencePlatformGlobalsInitialized=!0)}async _reportAdobe(e,t,r){if(!this._canReportAdobe())return;if(this.initPromise)try{await this.initPromise}catch{return}const i=a()(this.digitalData);if(i.primaryEvent={eventInfo:{eventName:e}},i.page.attributes=r,window._satellite.track("event",{xdm:{},data:{web:{webInteraction:{name:e,URL:this.wildcardPath}},_adobe_corpnew:{digitalData:i}}}),this._debugLog){const t=i;D(`Report Launch event [${e}]`);const r=Object.assign({eventName:t.primaryEvent.eventInfo.eventName},t.page.attributes);D("\t\tDigitalData",t);for(const e in r){const t=r[e];D(`\t\t${e}: ${JSON.stringify(t)}`)}}}async _reportAdobeViewChange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._canReportAdobe())return;if(this.initPromise)try{await this.initPromise}catch{return}const r=t?"pageload":"state",i={webPageDetails:{name:e,URL:this.wildcardPath}};window._satellite.track(r,{xdm:{},data:{web:i,_adobe_corpnew:{digitalData:this.digitalData}}}),this._debugLog&&(I(`Adobe Launch View: view[${e}] hierarchy[${this.wildcardPath}] asPageLoad: ${t}`),this._canReportAdobe()||I("\t\tNOT ACTUALLY SENDING"),D("\t\tDigitalData",this.digitalData))}async _track(e,t,r,i,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;try{var o;if(f.A.is_enabled("automation"))null!==(o=n)&&void 0!==o||(n={}),n.automation=!0,m.G.metricTriggered(`${e}:${t}:${r}`);let l=`${null!=e?e:""}:${null!=t?t:""}:${null!=r?r:""}`;if(null!=i&&(l+=`:${i}`),this._debugLog){var a;if(this.initPromise)try{await this.initPromise}catch{return}let e;e="adobe"===s?"Adobe":"newrelic"===s?"NewRelic":"ingest"===s?"Ingest":"",E(`${e}: ${l} path[${this.wildcardPath}]`),this._canTrackIngest()||E("\t\tNOT ACTUALLY TRACKING");const t=null!==(a=this._ingestCustomPageKeys)&&void 0!==a?a:[];for(const e of t){const t=this._ingestDefaultPayload[e];E(`\t\t${e}: ${t}`)}for(const e in n){const t=n[e];E(`\t\t${e}: ${t}`)}}null!=s&&"adobe"!==s||this._reportAdobe(l,this.view,n),null!=s&&"newrelic"!==s||this._reportNR(l,this.view,n),null!=s&&"ingest"!==s||this._trackIngest(e,t,r,i,n)}catch(e){return console.error(`Error: ${e}`)}}async _trackIngest(e,t,r,i,n){if(this.initPromise)try{await this.initPromise}catch{return}if(!this._canTrackIngest())return;let s=b.A.extend(!0,{},this._ingestDefaultPayload);if(s=b.A.extend(s,n),null!=r&&(s["event.subtype"]=r.toLowerCase().replace(/[^a-z\-]/,"")),null!=t&&(s["event.subcategory"]=t),null!=i&&(s["event.type"]=i.toLowerCase().replace(/[^a-z\-]/,"")),null!=e&&(s["event.workflow"]=e),f.A.is_enabled("debug")&&"Legacy"!==e){let e,t;null!=i&&(e=Boolean(i.match(/[^a-z\-]/))),null!=r&&(t=Boolean(r.match(/[^a-z\-]/))),(e||t)&&console.warn("invalid metric format",{type:i,action:r})}this._ingestDefaultPayload["event.contextSequence"]=this.contextSequence++,this._ingest.postEvent(s)}flush(){this._flush()}async _flush(){if(this.initPromise)try{await this.initPromise}catch{return}this._ingest?.flush(!0)}}function L(){const e=window.location,t=new URLSearchParams(e.search);t.delete("code"),t.delete("password");const r=t.size>0?`?${t.toString()}`:"";return`${e.host}${e.pathname}${r}`}const M=new N},217509:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.uriEncodeData=function(e){if("object"!=typeof e)return"";var t,r=[],i="";for(var n in e)void 0!==(t=e[n])&&(i=this.encodeValue(t),r.push(encodeURIComponent(n)+"="+i));return r.join("&")},e.prototype.encodeValue=function(e){return null===e?"null":"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)},e.prototype.replaceUrl=function(e){e&&window.location.replace(e)},e.prototype.sleep=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))},e.prototype.replaceUrlAndWait=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return e?(window.location.replace(e),[4,this.sleep(t)]):[2,Promise.resolve()];case 1:return r.sent(),[2,Promise.resolve()]}}))}))},e.prototype.setHrefUrl=function(e){e&&(window.location.href=e)},e.prototype.setHash=function(e){void 0===e&&(e=""),window.location.hash=e},e}();t.default=new n},218686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.GUEST="guest"}(t.IAtpValues||(t.IAtpValues={}))},218971:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.wndRedirectPropName="",this.wndRedirectPropName=e};t.ModalSignInEvent=r},222905:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i={SUBSCRIBER:"subscriber",TRIAL:"trial",TRIAL_EXPIRED:"trial_expired",EXPIRED:"expired",FREE:"free",BLOCKED:"blocked",UNKNOWN:"unknown"}},224209:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});class i{static initClass(){this.prototype.prodHostName="lightroom.adobe.com"}get hostName(){return window?.location.hostname||this.prodHostName}get pathName(){return window?.location.pathname||""}get isProd(){return this.hostName===this.prodHostName}get isStage(){return!this.isProd}objectToUrlParamString(e){return new URLSearchParams(e).toString()}}i.initClass();const n=new i},225512:function(e,t,r){"use strict";r(389375);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(331456)),s=i(r(139573)),o=r(267555),a=r(218686),l=function(){function e(e,t){var r=this;this.REAUTH_SCOPE="reauthenticated",this.valid=!1,this.isReauth=function(){return r.scope.indexOf(r.REAUTH_SCOPE)>=0},this.client_id="",this.scope="",this.expire=new Date,this.user_id="",this.tokenValue="",this.sid="",this.state=null,this.fromFragment=!1,this.impersonatorId="",this.isImpersonatedSession=!1;var i=e.valid,s=e.tokenValue,o=e.access_token,l=e.state,u=e.other,c=s||o,d=this.parseJwt(c);if(!d)throw new Error("token cannot be decoded "+c);this.state=n.default.toJson(l);var h=d.client_id,p=d.user_id,f=d.scope,g=d.sid,m=d.imp_id,y=d.imp_sid,v=d.pba,b=d.atp,_=d.gse;this.atp=b,this.client_id=h,this.expire=t,this.user_id=p,this.scope=f,this.valid=i,this.tokenValue=c,this.sid=g,this.other=u,this.impersonatorId=m||"",this.isImpersonatedSession=!!y,this.pbaSatisfiedPolicies=v&&v.split(",")||[],this.isGuestToken=this.atp===a.IAtpValues.GUEST,this.gse=_}return e.prototype.parseJwt=function(e){if(!e)return null;try{return JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")))}catch(t){return s.default.error("error on decoding token ",e,t),null}},e.prototype.validate=function(e,t){var r=this,i=r.valid,n=r.client_id,a=r.scope,l=r.expire;return l<new Date?(s.default.error("token invalid  --\x3e expires_at",l),!1):null==i||i?n!==e?(s.default.error("token invalid  --\x3e client id",n,e),!1):!!o.validateScopeInclusion(t,a)||(s.default.error("token invalid  --\x3e scope"," token scope =",a,"vs adobeIdScope =",t,"."),!1):(s.default.error("token invalid  --\x3e valid"),!1)},e}();t.TokenFields=l},226405:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});class i{static log(){console.log.apply(console,arguments)}static assert(){console.assert.apply(console,arguments)}static table(){console.table.apply(console,arguments)}static groupStart(){console.group.apply(console,arguments)}static groupEnd(){console.groupEnd.apply(console,arguments)}}},227507:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var i=r(875472),n=r(636550),s=(r(315715),r(389375),r(732486)),o=r(282749),a=r(201534),l=r(547826),u=r(222905),c=r(224209),d=r(682826),h=r(215849),p=r(622733);var f=(0,n.A)("fetchCall"),g=(0,n.A)("fetchABPProfile"),m=(0,n.A)("checkCCStandardSubscription"),y=(0,n.A)("decodeProfileStatus");class v{constructor(){Object.defineProperty(this,y,{value:w}),Object.defineProperty(this,m,{value:A}),Object.defineProperty(this,g,{value:_}),Object.defineProperty(this,f,{value:b}),this.readyJP=new Promise(((e,t)=>{this._readyResolve=e,this._readyReject=t})),this._init()}get status(){if(d.A.is_enabled("debug_account_trial_expired"))return u.A.FREE;if(d.A.is_enabled("debug_account_sub_expired"))return u.A.EXPIRED;if(d.A.is_enabled("debug_just_access_platform"))return this._apStatus;if([u.A.BLOCKED,u.A.SUBSCRIBER].includes(this._apStatus))return this._apStatus;{const e=s.A.account;return null!=e?e.isTrialExpired()?u.A.FREE:e.isSubscriptionExpired()?u.A.EXPIRED:"trial"===e.getStatus()?u.A.TRIAL:"subscriber"===e.getStatus()?u.A.SUBSCRIBER:"created"===e.getStatus()?u.A.FREE:u.A.UNKNOWN:u.A.UNKNOWN}}get isExpired(){return[u.A.TRIAL_EXPIRED,u.A.EXPIRED].includes(this.status)}get isFreeUser(){return d.A.is_enabled("debug_account_free")||(!s.A.account?.sharePolicy?.allowFreeStorage||!s.A.account.settings.getFreemiumTag())&&[u.A.FREE,u.A.TRIAL_EXPIRED,u.A.EXPIRED].includes(this.status)||this.status===u.A.UNKNOWN}get isFreemiumUser(){return d.A.is_enabled("debug_account_freemium")||s.A.account?.sharePolicy?.allowFreeStorage&&s.A.account.settings.getFreemiumTag()&&[u.A.FREE,u.A.TRIAL_EXPIRED,u.A.EXPIRED].includes(this.status)}get isCCStandardUser(){return d.A.is_enabled("debug_account_ccstandard")||this._apStatus===u.A.FREE&&this.status===u.A.SUBSCRIBER&&this._hasCCStandardPACode}get haveCatalogAccess(){return d.A.is_enabled("on_the_house")?!this.isFreeUser&&(this.isFreemiumUser||this.isCCStandardUser||[u.A.TRIAL,u.A.SUBSCRIBER].includes(this.status)):[u.A.TRIAL,u.A.SUBSCRIBER].includes(this.status)}get havePremiumFeatures(){return!this.isFreeUser&&!this.isFreemiumUser&&!this.isCCStandardUser}get canViewDiscoverMode(){return[u.A.FREE,u.A.TRIAL_EXPIRED].includes(this.status)}async _init(){const e=l.A.signedIn;try{await Promise.all([l.A.readyJP,p.A.readyJP,this._fetchProfileStatusWithTimeout()]),l.A.signedIn&&!e&&await this._fetchProfileStatusWithTimeout(),null==this.status&&l.A.signedIn?this._readyReject():this._readyResolve()}catch(e){this._readyReject(),console.error("Access Platform initialization failed:",e)}}async _fetchProfileStatusWithTimeout(){if(d.A.is_enabled("debug_just_access_platform"))return this._fetchProfileStatus();await new Promise(((e,t)=>{let r=!1;const i=d.A.is_enabled("debug_access_platform_timeout")?0:3e3,n=setTimeout((()=>{d.A.is_enabled("debug")&&console.log("Access Platorm init timeout -- falling back to Oz"),h.A.report("accessPlatformTimeoutFailure"),r=!0,e()}),i);this._fetchProfileStatus().then((()=>{r||(clearTimeout(n),e())}),(()=>{r||(clearTimeout(n),e())}))}))}async fetchAccessPlatformProfileStatus(){const e=await(0,i.A)(this,f)[f]();if(200===e.status){const t=await e.json();return(0,i.A)(this,y)[y](t)}return null}async fetchABPProfile(){try{return(await(0,i.A)(this,g)[g]()).json()}catch(e){return console.error("Failed to fetch ABP Profile:",e),null}}async _fetchProfileStatus(){if(this._apStatus=u.A.UNKNOWN,l.A.signedIn)try{const e=await(0,i.A)(this,f)[f]();if(200===e.status){const t=await e.json(),r=(0,i.A)(this,y)[y](t);switch(r){case"PROFILE_AVAILABLE":this._apStatus=u.A.SUBSCRIBER;break;case"PROFILE_UNAVAILABLE":this._apStatus=u.A.FREE,this._hasCCStandardPACode=await(0,i.A)(this,m)[m]();break;case"PROFILE_EXPIRED":this._apStatus=u.A.EXPIRED;break;case"PROFILE_DENIED":this._apStatus=u.A.BLOCKED;break;default:this._apStatus=u.A.UNKNOWN}d.A.is_enabled("debug_access_platform_blocked")&&(this._apStatus=u.A.BLOCKED),d.A.is_enabled("debug")&&(console.log(`Access Platform Status: profileStatus: ${r} ozStatus: ${s.A.account?.getStatus()} webStatus: ${this.status}`),d.A.is_enabled("on_the_house")&&(console.log(`isFreeUser: ${this.isFreeUser} isFreemiumUser: ${this.isFreemiumUser} isCCStandardUser: ${this.isCCStandardUser}`),console.log(`haveCatalogAccess: ${this.haveCatalogAccess} havePremiumFeatures: ${this.havePremiumFeatures} canViewDiscoverMode: ${this.canViewDiscoverMode}`)))}else this._apStatus=u.A.UNKNOWN}catch(e){console.error("Access Platform initialization failed:",e),h.A.report("accessPlatformInitFailure"),this._apStatus=u.A.UNKNOWN}}}async function b(){const e=c.A.isProd?"production":"stage",{host:t}=o.environments[e];return await fetch(`https://${t}/webapps/access_profile/v3?include_profiles_as_string=true`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":"LightroomMobileWeb1",Authorization:`Bearer ${l.A.getToken()}`},body:JSON.stringify({appDetails:{nglAppId:"LightroomWebApp1",nglAppVersion:"1.0",locale:p.A.locale}})})}async function _(){const e=c.A.isProd?"production":"stage",{host:t,apiKey:r}=a.environments[e];return await fetch(`https://${t}/abp_profile/v1?include_sections=FULFILLABLE_ITEMS`,{method:"GET",headers:{"x-api-key":r,Authorization:`Bearer ${l.A.getToken()}`}})}async function A(){try{const e=await(0,i.A)(this,g)[g](),t=await e.json();return(t?.commerce_profile?.subscriptions||[]).some((e=>"LICENSE"===e?.source?.type&&(e.offer_details||[]).some((e=>"PA-1517"===e?.product_arrangement?.code))))}catch(e){return h.A.reportFailure("ABPProfileFetchFailure"),console.error("Failed to fetch CC Standard Status:",e),!1}}function w(e){return JSON.parse(atob(e?.asnp?.payload||"")).profileStatus}v.readyJP=void 0,v._apStatus=u.A.UNKNOWN,v._hasCCStandardPACode=!1;const P=new v},229711:(e,t,r)=>{var i=r(685139);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},229895:e=>{var t=1e3,r=60*t,i=60*r,n=24*i,s=7*n,o=365.25*n;function a(e,t,r,i){var n=t>=1.5*r;return Math.round(e/r)+" "+i+(n?"s":"")}e.exports=function(e,l){l=l||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*n;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===u&&isFinite(e))return l.long?function(e){var s=Math.abs(e);if(s>=n)return a(e,s,n,"day");if(s>=i)return a(e,s,i,"hour");if(s>=r)return a(e,s,r,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=n)return Math.round(e/n)+"d";if(s>=i)return Math.round(e/i)+"h";if(s>=r)return Math.round(e/r)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},235404:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.data={},this.length=0}return e.prototype.clear=function(){this.data={},this.length=0},e.prototype.getItem=function(e){var t=this.data[e];return t||null},e.prototype.removeItem=function(e){return!!this.data[e]&&(delete this.data[e],--this.length,!0)},e.prototype.setItem=function(e,t){this.data[e]||++this.length,this.data[e]=t},e.prototype.key=function(e){throw new Error("Method not implemented. "+e)},e}();t.MemoryStorage=r},237338:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var i,n=r(135708),s=r(631811),o=r(750665),a=r(865584),l=r(611546),u=function(e){setTimeout(e,0)},c=a.A.requestAnimationFrame||a.A.webkitRequestAnimationFrame||a.A.mozRequestAnimationFrame||u,d=c;const h=new(i=class extends o.A{constructor(){super(...arguments),this.tickTime=(0,l.A)()}get background(){return d===u}set background(e){d=e?u:c}register(){d.call(a.A,this.run)}request(e){d.call(a.A,e)}wrapAll(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach((t=>e[t]=this.wrap(e[t].bind(e))))}wrap(e){return()=>this.push(e)}tick(){(0,l.A)()-this.tickTime>=5&&this.run()}run(){this.tickTime=(0,l.A)();super.run.call(this)}},(0,n.A)(i.prototype,"run",[s.A],Object.getOwnPropertyDescriptor(i.prototype,"run"),i.prototype),i)},237692:(e,t,r)=>{var i=r(727691);e.exports=i("navigator","userAgent")||""},239293:(e,t,r)=>{"use strict";var i=r(877276),n=r(426919),s=r(512656),o=r(904919);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new s("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,c=arguments.length>6&&arguments[6],d=!!o&&o(e,t);if(i)i(e,t,{configurable:null===u&&d?d.configurable:!u,enumerable:null===a&&d?d.enumerable:!a,value:r,writable:null===l&&d?d.writable:!l});else{if(!c&&(a||l||u))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},239758:(e,t,r)=>{"use strict";r.d(t,{G:()=>l});var i=r(529444),n=r(135708),s=r(355141),o=r(739506),a=r(682826);let l,u;if(a.A.is_enabled("automation")){var c,d;const e=function(e,t){const r=document.createElement("a");return r.download=t,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},t={};let r={},h=(c=class extends o.A{metricTriggered(e){return null==r[e]&&(r[e]=0),r[e]++}constructor(){super(),(0,i.A)(this,"forceGridHover",d,this),this.enabled=!0,this.forceGridHover=a.A.is_enabled("automation_force_grid_hover")}},d=(0,n.A)(c.prototype,"forceGridHover",[s.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c);window.Automation=l=new h,window.AutomationManager=u={set:(e,r,i)=>(t[e]=r,window.Automation[e]=i),remove:e=>(delete window.Debug[e],delete t[e])},u.set("scrollGridto","Scroll the current torq grid to (left, top)",((e,t)=>setTimeout((()=>null!=window.Automation.controller?.virtualScroll?.scroll?.scrollTo?window.Automation.controller.virtualScroll.scroll.scrollTo(e,t):null!=window.Automation.controller.scroll?.scrollTo?window.Automation.controller.scroll.scrollTo?.(e,t):void 0),300))),u.set("animateGridto","Animate the current torq grid to (left, top)",((e,t)=>window.Automation.controller?.virtualScroll?.scroll?.animateTo?.(e,t))),u.set("setGridHover","true/false - Force torq grid to hovered state",(e=>window.Automation.forceGridHover=e)),u.set("getVisibleGridAssets","idsOnly(=true), includePartiallyVisible(=false) - Get visible grid assets",((e,t)=>null!=window.Automation.controller?.gridViewRef?.getAssetsInView?window.Automation.controller?.gridViewRef?.getAssetsInView(e,t):null!=window.Automation.controller?.getAssetsInView?window.Automation.controller?.getAssetsInView(e,t):void 0)),u.set("didMetricTrigger","Check if a metric was triggered. Pass a count if you need to confirm the number of times it fired.",((e,t)=>null!=r[e]&&(null==t||r[e]===t))),u.set("clearMetricCache","Clears the cache used to track automation for metrics.",(()=>r={})),u.set("downloadRendition","In Loupe view, download the 2048 renditon for the current image",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2048";const{asset:r}=window.Automation;if(null==r)return console.error("Automation.downloadRendition() will only work in Loupe view");const i=r.getRenditionHref("2048"),n=`image${t}.jpg`;return e(i,n),n})),u.set("getNamedVersionMasks","In Loupe view, get the masks (an object) for a named version at the given index",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{asset:t}=window.Automation;return null==t?console.error("Automation.getNamedVersionMasks() will only work in Loupe view"):t.namedVersions.at(e).getDevelopPixelMasks()})),u.set("deleteAllDiscovers","Delete discovers for the current logged-in author. Will delete all by default, or `numToDelete` if given.",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=window.Automation.controller?.scope.store;return null==t?.author?.me?console.error("Error accessing store"):await t.author.me.debugDeleteAllDiscovers(e)})),u.set("resetProfileEdits","Reset your author profile in Community.",(async()=>{const e=window.Automation.controller?.scope.store;return null==e?.author?.me?console.error("Error accessing store"):await e.author.me.debugResetAllProfileEdits()})),u.set("help","list available commands",(()=>{let e="";for(var r in t){var i=t[r];e+=`\n${r}:${Array(22-r.length).join(" ")}${i}`}return e}))}else window.Automation=l={},window.AutomationManager=u={set(){},remove(){}}},246218:(e,t,r)=>{"use strict";r.d(t,{A:()=>_});var i,n,s=r(529444),o=r(135708),a=r(355141),l=r(891348),u=r(739506),c=r(682826),d=r(622733),h=r(477907),p=r(227507),f=r(456702),g=r(923015),m=r(880594),y=r(552142),v=r(586564);const b=new l.A;const _=new(i=class extends u.A{constructor(){super(),(0,s.A)(this,"_variant",n,this),c.A.is_enabled("on_the_house")&&window.requestAnimationFrame((()=>this._initTestEnablement()))}_initTestEnablement(){this._initialize().then((()=>b.resolve()),(()=>b.reject()))}get invalidDeviceForTest(){return v.A.mobile||v.A.iOS||v.A.android||h.A.touch&&v.A.mac}async _initialize(){if(await Promise.all([f.A.readyJP,p.A.readyJP,d.A.readyJP,m.default.readyJP]),c.A.is_enabled("on_the_house")&&!this.invalidDeviceForTest)try{if(c.A.is_enabled("debug)")&&console.log("Enabling Freemium test"),c.A.is_enabled("force_freemium_a_variant"))return void(this._variant="A");if(c.A.is_enabled("force_freemium_b_variant")&&!this.invalidDeviceForTest)return void(this._variant="B");const e=await(0,g.A)(y.A.FREEMIUM_MBOX,{});c.A.is_enabled("debug")&&console.log("Target freemium test loaded with variant",e),this._variant=e}catch(e){console.error("Freemium test not initialized:",e)}}get variant(){return this._variant}get readyJP(){return b.promise}get active(){return!!c.A.is_enabled("on_the_house")&&null!=this.variant}get aGroupActive(){return!!c.A.is_enabled("on_the_house")&&"A"===this.variant}get bGroupActive(){return!!c.A.is_enabled("on_the_house")&&"B"===this.variant}},n=(0,o.A)(i.prototype,"_variant",[a.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i)},246627:(e,t,r)=>{var i=r(366740),n=r(378531),s=r(480030);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),s(i),t?e(r,i):r.__proto__=i,r}}():void 0)},254216:(e,t,r)=>{t.parse=r(957959),t.stringify=r(31049)},254225:(e,t,r)=>{"use strict";var i=r(877276),n=function(){return!!i};n.hasArrayLengthDefineBug=function(){if(!i)return null;try{return 1!==i([],"length",{value:1}).length}catch(e){return!0}},e.exports=n},262535:e=>{e.exports=!1},267555:(e,t,r)=>{"use strict";r(315715),Object.defineProperty(t,"__esModule",{value:!0});var i=/\s|,/g;t.sortScopes=function(e){return e.split(i).sort().join(",")},t.validateScopeInclusion=function(e,t){var r=(null==t?void 0:t.split(i))||[];return((null==e?void 0:e.split(i))||[]).every((function(e){return r.includes(e)}))}},268534:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(406190),n=r(237338);function s(e){this.name=e,this.signal=new i.A}function o(e,t,r){return function(i){var o=e(i)||i,a=t.hot;if(a){var l="component"+r,u=a.data&&a.data[l];a.accept(),a.dispose((e=>e[l]=u)),u?(u.instance=o,n.A.push((()=>u.signal.triggerNoArgs()))):u=new s(r),o.hotReloader=u}return o}}},268749:(e,t,r)=>{var i=r(578887),n=r(162009),s=r(178326),o=r(157625),a=r(448498),l=r(29770),u=r(107647),c=i.TypeError,d=u("toPrimitive");e.exports=function(e,t){if(!s(e)||o(e))return e;var r,i=a(e,d);if(i){if(void 0===t&&(t="default"),r=n(i,e,t),!s(r)||o(r))return r;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},276284:function(){function e(e){this.size=0,this.limit=e,this._keymap={}}e.prototype.put=function(e,t){var r={key:e,value:t};if(this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit)return item=this.shift(),item.value&&item.value.dispose&&item.value.dispose(),item;this.size++},e.prototype.shift=function(){var e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,e.newer=e.older=void 0,delete this._keymap[e.key]),e},e.prototype.get=function(e,t){var r=this._keymap[e];if(void 0!==r)return r===this.tail||(r.newer&&(r===this.head&&(this.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=this.tail,this.tail&&(this.tail.newer=r),this.tail=r),t?r:r.value},e.prototype.find=function(e){return this._keymap[e]},e.prototype.set=function(e,t){var r,i=this.get(e,!0);return i?(r=i.value,i.value=t):(r=this.put(e,t))&&(r=r.value),r},e.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):this.head=this.tail=void 0,this.size--,t.value},e.prototype.removeAll=function(){this.head=this.tail=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?e.prototype.keys=function(){return Object.keys(this._keymap)}:e.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},e.prototype.forEach=function(e,t,r){var i;if(!0===t?(r=!0,t=void 0):"object"!=typeof t&&(t=this),r)for(i=this.tail;i;)e.call(t,i.key,i.value,this),i=i.older;else for(i=this.head;i;)e.call(t,i.key,i.value,this),i=i.newer},e.prototype.toJSON=function(){for(var e=[],t=this.head;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e},e.prototype.toString=function(){for(var e="",t=this.head;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=e)},276788:(e,t,r)=>{var i=r(643604);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},282749:e=>{e.exports={environments:{stage:{host:"aps-web-stage.adobe.io"},production:{host:"aps-web.adobe.io"}}}},287045:(e,t,r)=>{var i=r(366740)("".replace),n=String(Error("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,o=s.test(n);e.exports=function(e,t){if(o&&"string"==typeof e)for(;t--;)e=i(e,s,"");return e}},290617:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(633035),n=r.n(i);function s(e,t){if(n()(t)){var r=t._torq_binding;if(r)return r.resolved||e.push({eventName:"update",obj:r}),r}}},295624:(e,t,r)=>{var i=r(88717),n=r(333643),s=r(135151),o=r(732725);e.exports=function(e,t,r){for(var a=n(t),l=o.f,u=s.f,c=0;c<a.length;c++){var d=a[c];i(e,d)||r&&i(r,d)||l(e,d,u(t,d))}}},297191:(e,t,r)=>{var i=r(578887),n=r(88717),s=r(658369),o=r(452873),a=r(702739),l=r(602551),u=a("IE_PROTO"),c=i.Object,d=c.prototype;e.exports=l?c.getPrototypeOf:function(e){var t=o(e);if(n(t,u))return t[u];var r=t.constructor;return s(r)&&t instanceof r?r.prototype:t instanceof c?d:null}},301344:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var s,o,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))r.call(s,u)&&(a[u]=s[u]);if(t){o=t(s);for(var c=0;c<o.length;c++)i.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},307980:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,W:()=>s});var i=r(682826),n=r(384089);const s={CORE:"C0001",PERFORMANCE:"C0002",EXTEND:"C0003",ADVERTISING:"C0004"};class o{get consented(){return o.consented}get consentedJP(){return o.consentedJP}get consentedGroups(){return o.consentedGroups}constructor(){var e;window.adobePrivacy?.hasUserProvidedConsent()?(o.consented=!0,o.consentedGroups=null!==(e=window.adobePrivacy?.activeCookieGroups?.())&&void 0!==e?e:[],o.consentedJP=Promise.resolve()):o.consentedJP=new Promise(((e,t)=>{const r=()=>{var t;o.consented=!0,o.consentedGroups=null!==(t=window.adobePrivacy?.activeCookieGroups?.())&&void 0!==t?t:[],e()},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"privacy not consented";o.consented=!1,o.consentedGroups=[],t(e)};window.addEventListener("adobePrivacy:PrivacyConsent",r),window.addEventListener("adobePrivacy:PrivacyReject",i),window.addEventListener("adobePrivacy:PrivacyCustom",r),n.A.interactive.push((()=>{null==window.adobePrivacy&&i("privacy script did not load")}))}));i.A.is_enabled("debug")&&o.consentedJP.finally((()=>{null==window.adobePrivacy?console.log("Privacy Status: script not loaded (not on VPN?)"):o.consented?console.log("Privacy Status: consented"):console.log("Privacy Status: rejected")})),o.consentedJP.catch((()=>{}))}}o.consented=void 0,o.consentedGroups=[],o.consentedJP=void 0;const a=new o},314369:(e,t,r)=>{var i=r(950176),n=r(406227),s=r(599363);e.exports=!i&&!n((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},315715:(e,t,r)=>{"use strict";var i=r(141770),n=r(857005).includes,s=r(834601);i({target:"Array",proto:!0},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},317779:(e,t,r)=>{"use strict";var i=r(912752),n=r(800107).findLastIndex,s=i.aTypedArray;(0,i.exportTypedArrayMethod)("findLastIndex",(function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)}))},331456:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(847924),n=function(){function e(){this.getCustomApiParameters=function(e,t){return e[t]||{}}}return e.prototype.mergeExternalParameters=function(e,t,r){return i.merge(this.getCustomApiParameters(t,r),e)},e.prototype.toJson=function(e){try{return"string"!=typeof e?e:JSON.parse(e)}catch(e){return null}},e}();t.default=new n},333074:(e,t,r)=>{var i=r(950176),n=r(88717),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=n(s,"name"),l=a&&"something"===function(){}.name,u=a&&(!i||i&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:u}},333643:(e,t,r)=>{var i=r(727691),n=r(366740),s=r(812732),o=r(503249),a=r(378531),l=n([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(a(e)),r=o.f;return r?l(t,r(e)):t}},334753:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INITIALIZE_ERROR="initialize_error",e.HTTP="http",e.FRAGMENT="fragment",e.CSRF="csrf",e.NOT_ALLOWED="not_allowed",e.PROFILE_EXCEPTION="profile_exception",e.TOKEN_EXPIRED="token_expired",e.SOCIAL_PROVIDERS="SOCIAL_PROVIDERS",e.RIDE_EXCEPTION="ride_exception"}(t.IErrorType||(t.IErrorType={}))},336831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.exception=null,this.exception=e};t.TokenExpiredException=r},339100:(e,t,r)=>{var i=r(537592),n=r(626947);e.exports=Object.keys||function(e){return i(e,n)}},339318:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(63582),o=n(r(217509)),a=n(r(331456)),l=n(r(889387)),u=n(r(745950)),c=function(){function e(e){void 0===e&&(e={}),this.CONTENT_FORM_ENCODED="application/x-www-form-urlencoded;charset=utf-8",this.apiParameters=e}return e.prototype.validateToken=function(e){var t=e.token,r=e.client_id,n=e.type,s=o.default.uriEncodeData(i(i({},a.default.getCustomApiParameters(this.apiParameters,"validate_token")),{type:n||"access_token",client_id:r,token:t})),c=l.default.baseUrlAdobe+"/ims/validate_token/v1?jslVersion="+l.default.jslibver,d=this.formEncoded();return this.addClientIdInHeader(r,d),u.default.post(c,s,d)},e.prototype.getProfile=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"profile")),s=this.createAuthorizationHeader(t);this.addClientIdInHeader(r,s);var c=o.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/profile/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,s)},e.prototype.getUserInfo=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"userinfo")),s=this.createAuthorizationHeader(t);this.addClientIdInHeader(r,s);var c=o.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/userinfo/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,s)},e.prototype.logoutToken=function(e){var t=e.client_id,r=e.token,n=i({},a.default.getCustomApiParameters(this.apiParameters,"logout_token")),s=l.default.baseUrlServices+"/ims/logout/v1?jslVersion="+l.default.jslibver,o=this.addClientIdInHeader(t);return u.default.post(s,i({client_id:t,access_token:r},n),o)},e.prototype.checkStatus=function(){var e=l.default.baseUrlServices+"/ims/check/v1/status";return u.default.get(e)},e.prototype.checkToken=function(e,t,r){var n=e.client_id,s=e.scope,u=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),c=i(i({},u),{client_id:n,scope:s});return r&&(c.user_id=r),this.callCheckToken(o.default.uriEncodeData(c),n,"/check/v6/token?jslVersion="+l.default.jslibver)},e.prototype.switchProfile=function(e,t,r){void 0===r&&(r="");var n=e.client_id,s=e.scope,u=void 0===s?"":s,c=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),d=o.default.uriEncodeData(i(i({},c),{client_id:n,scope:u,user_id:r}));return this.callCheckToken(d,n,"/check/v6/token?jslVersion="+l.default.jslibver)},e.prototype.listSocialProviders=function(e){var t=e.client_id,r=i({},a.default.getCustomApiParameters(this.apiParameters,"providers")),n=o.default.uriEncodeData(i({client_id:t},r)),s=l.default.baseUrlServices+"/ims/social/v2/providers?"+n+"&jslVersion="+l.default.jslibver,c=this.addClientIdInHeader(t);return u.default.get(s,c)},e.prototype.exchangeIjt=function(e,t){var r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"ijt")),s=l.default.baseUrlServices+"/ims/jump/implicit/"+t,c=o.default.uriEncodeData(i({client_id:r},n)),d=s+"?"+c+"&jslVersion="+l.default.jslibver;d.length>2048&&(delete n.redirect_uri,d=s+"?"+(c=o.default.uriEncodeData(n)));var h=this.addClientIdInHeader(r);return u.default.get(d,h)},e.prototype.avatarUrl=function(e){return l.default.baseUrlAdobe+"/ims/avatar/download/"+e},e.prototype.getReleaseFlags=function(e){var t=e.token,r=e.client_id,n=i({},a.default.getCustomApiParameters(this.apiParameters,"fg_value")),s=this.createAuthorizationHeader(t);this.addClientIdInHeader(r,s);var c=o.default.uriEncodeData(i({client_id:r},n)),d=l.default.baseUrlAdobe+"/ims/fg/value/v1?"+c+"&jslVersion="+l.default.jslibver;return u.default.get(d,s)},e.prototype.getTransitoryAuthorizationCode=function(e,t,r){void 0===t&&(t={});var n=i({},a.default.mergeExternalParameters(t,this.apiParameters,"check_token")),s=o.default.uriEncodeData(i(i({},n),e));return this.callCheckToken(s,r,"/check/v6/token?client_id="+r+"&jslVersion="+l.default.jslibver)},e.prototype.getTokenFromCode=function(e,t){void 0===t&&(t={});var r=i({},a.default.mergeExternalParameters(t,this.apiParameters,"token"));r.grant_type="authorization_code",delete e.other;var n=l.default.baseUrlServices+"/ims/token/v3?jslVersion="+l.default.jslibver,s=o.default.uriEncodeData(i(i({},r),e)),c=this.formEncoded();return this.addClientIdInHeader(e.client_id,c),u.default.post(n,s,c)},e.prototype.jumpToken=function(e,t,r){void 0===t&&(t={});var n=i({},a.default.mergeExternalParameters(t,this.apiParameters,"jumptoken")),s=l.default.baseUrlServices+"/ims/jumptoken/v1?client_id="+r+"&jslVersion="+l.default.jslibver,c=o.default.uriEncodeData(i(i({},n),e)),d=this.formEncoded();return this.addClientIdInHeader(r,d),u.default.post(s,c,d)},e.prototype.socialHeadlessSignIn=function(e,t){void 0===t&&(t={});var r=i({},a.default.mergeExternalParameters(t,this.apiParameters,"jumptoken")),n=l.default.baseUrlServices+"/ims/social/v2/native?jslVersion="+l.default.jslibver,s=o.default.uriEncodeData(i(i(i({},r),e),{response_type:"implicit_jump"}));return u.default.post(n,s,this.formEncoded())},e.prototype.createAuthorizationHeader=function(e){var t={};return e&&(t[s.HEADERS.AUTHORIZATION]="Bearer "+e),t},e.prototype.formEncoded=function(e){return void 0===e&&(e={}),e["content-type"]=this.CONTENT_FORM_ENCODED,e},e.prototype.addClientIdInHeader=function(e,t){return void 0===t&&(t={}),t.client_id=e,t},e.prototype.callCheckToken=function(e,t,r){var i=this.formEncoded();return this.addClientIdInHeader(t,i),u.default.post(l.default.checkTokenEndpoint.url+"/ims"+r,e,i).catch((function(t){if(!l.default.checkTokenEndpoint.shouldFallbackToAdobe(t))throw t;return u.default.post(l.default.checkTokenEndpoint.fallbackUrl+"/ims"+r,e,i)}))},e}();t.ImsApis=c},341857:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const i={app:!0,shareType:null};window.siteCheck=()=>{console.log("Entry.app",i.app),console.log("Entry.embed",i.embed),console.log("Entry.site",i.site),console.log("Entry.sdk",i.sdk),console.log("Entry.shareType",i.shareType)};const n=i},341891:(e,t,r)=>{"use strict";var i=r(341857);delete i.A.app,i.A.sdk=!0},345654:(e,t,r)=>{var i=r(121570);e.exports=function(e,t){for(var r=0,n=i(t),s=new e(n);n>r;)s[r]=t[r++];return s}},355141:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(712942);const n=i.A.recordEvent,s=i.A.recordChange,o={defaultValue:!0};function a(e,t,r){const a="_"+t,l=r.initializer;if(l)Object.defineProperty(e,a,{configurable:!0,enumerable:!1,writable:!0,value:o});else if(e[a]===o)return{configurable:!0,enumerable:!1,get(){return delete e[t],this[t]},set(r){delete e[t],this[t]=r}};var u=e.definedObservables;return Object.prototype.hasOwnProperty.call(e,"definedObservables")||(u=u?Object.assign({},u):{},Object.defineProperty(e,"definedObservables",{configurable:!0,enumerable:!1,writable:!0,value:u})),u[t]=!0,{configurable:!0,enumerable:!1,get(){i.A.active&&n(this,t);var e=this[a];return e===o&&(e=this[a]=l.call(this)),e},set(e){var r=this[a];r===o&&(r=this[a]=l.call(this)),r!==e&&(this[a]=e,s(this,t,e,r))}}}},355379:(e,t,r)=>{var i=r(658369),n=r(178326),s=r(246627);e.exports=function(e,t,r){var o,a;return s&&i(o=t.constructor)&&o!==r&&n(a=o.prototype)&&a!==r.prototype&&s(e,a),e}},362589:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(217509)),a=s(r(889387)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.signIn=function(e){var r=t.createRedirectUrl(e);o.default.setHrefUrl(r)},t.authorizeToken=function(e,r){var i=t.composeRedirectUrl(r);e&&(i.user_assertion=e,i.user_assertion_type="urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),t.createAuthorizeForm(i).submit()},t}return n(t,e),t.prototype.createAuthorizeForm=function(e){var t=a.default.baseUrlAdobe+"/ims/authorize/v1",r=document.createElement("form");r.style.display="none",r.setAttribute("method","post"),r.setAttribute("action",t);var i=null,n=null,s="";for(var o in e){if("object"==typeof(n=e[o])){if(0===Object.keys(n).length)continue;s=JSON.stringify(n)}else s=n;""!==s&&(i=this.createFormElement("input","text",o,s),r.appendChild(i))}return document.getElementsByTagName("body")[0].appendChild(r),r},t.prototype.createFormElement=function(e,t,r,i){var n=document.createElement(e);return n.setAttribute("type",t),n.setAttribute("name",r),n.setAttribute("value",i),n},t}(r(59678).BaseSignInService);t.SignInService=l},363294:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(82979)),s=r(63582),o=r(673468),a=r(411010),l=r(267555),u=function(){function e(e){this.profileServiceRequest=e,this.storage=n.default.getStorageByName(s.STORAGE_MODE.SessionStorage)}return e.prototype.getProfile=function(e){var t=this,r=this.profileServiceRequest,i=r.clientId,n=r.imsApis,s=this.getProfileFromStorage();return s?Promise.resolve(s):n.getProfile({client_id:i,token:e}).then((function(e){if(!e)throw new o.ProfileException("NO profile response");if(0===Object.keys(e).length)throw new o.ProfileException("NO profile value");return t.saveProfileToStorage(e),Promise.resolve(e)})).catch((function(e){return e instanceof a.HttpErrorResponse||t.removeProfile(),Promise.reject(e)}))},e.prototype.getProfileStorageKey=function(){var e=this.profileServiceRequest,t=e.clientId,r=e.scope;return s.PROFILE_STORAGE_KEY+"/"+t+"/"+!1+"/"+l.sortScopes(r)},e.prototype.getProfileFromStorage=function(){var e=this.getProfileStorageKey(),t=this.storage.getItem(e);return t&&JSON.parse(t)},e.prototype.saveProfileToStorage=function(e){var t=this.getProfileStorageKey();this.storage.setItem(t,JSON.stringify(e))},e.prototype.removeProfile=function(){var e=this.getProfileStorageKey();this.storage.removeItem(e)},e.prototype.removeProfileIfOtherUser=function(e){if(e){var t=this.getProfileFromStorage();t&&t.userId!==e&&this.removeProfile()}},e}();t.ProfileService=u},366740:(e,t,r)=>{var i=r(382740),n=Function.prototype,s=n.bind,o=n.call,a=i&&s.bind(o,o);e.exports=i?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},374026:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i,n=r(135708),s=r(631811),o=r(685530),a=r(712942),l=r(406190);let u=(i=class extends a.A{update(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{previousValue:r}=this;return r===e?!!this.lengthChanged&&(this.lengthChanged=!1,t&&this.invokeCallback(e),!0):(r===this.FirstExecutionMarker?this.previousValue=e:r&&"object"==typeof r&&l.A.stopListening(this,r),this.lengthChanged=!1,e&&"object"==typeof e&&l.A.listenTo(this,e,"change",this.onLengthChanged),t&&this.invokeCallback(e),!0)}onLengthChanged(){this.lengthChanged=!0,this.invalidate()}invokeCallback(e){e instanceof o.A?this.callback(e.base):this.callback(e)}},(0,n.A)(i.prototype,"onLengthChanged",[s.A],Object.getOwnPropertyDescriptor(i.prototype,"onLengthChanged"),i.prototype),i)},376260:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,i=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r};e.exports=function(e){var n=this;if("function"!=typeof n||"[object Function]"!==t.apply(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var s,o=function(e,t){for(var r=[],i=t||0,n=0;i<e.length;i+=1,n+=1)r[n]=e[i];return r}(arguments,1),a=r(0,n.length-o.length),l=[],u=0;u<a;u++)l[u]="$"+u;if(s=Function("binder","return function ("+function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof s){var t=n.apply(this,i(o,arguments));return Object(t)===t?t:this}return n.apply(e,i(o,arguments))})),n.prototype){var c=function(){};c.prototype=n.prototype,s.prototype=new c,c.prototype=null}return s}},378531:(e,t,r)=>{var i=r(578887),n=r(178326),s=i.String,o=i.TypeError;e.exports=function(e){if(n(e))return e;throw o(s(e)+" is not an object")}},380190:(e,t,r)=>{"use strict";var i=r(555996),n=r(912752),s=n.aTypedArray,o=n.exportTypedArrayMethod,a=n.TYPED_ARRAY_CONSTRUCTOR;o("with",{with:function(e,t){return i(s(this),this[a],e,t)}}.with,!0)},380936:(e,t,r)=>{var i=r(578887),n=Object.defineProperty;e.exports=function(e,t){try{n(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t}},382740:(e,t,r)=>{var i=r(406227);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},384089:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var i,n=r(135708),s=r(631811),o=(r(315715),r(750665));let a=(i=class extends o.A{constructor(e,t){super(),this.readyState=e,this.eventName=t}register(){return this.readyState.includes(document.readyState)?setTimeout(this.run,0):window.addEventListener(this.eventName,this.exec)}exec(){return this.run()}},(0,n.A)(i.prototype,"exec",[s.A],Object.getOwnPropertyDescriptor(i.prototype,"exec"),i.prototype),i);const l={interactive:new a(["interactive","complete"],"DOMContentLoaded"),complete:new a(["complete"],"load")}},388271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(532898);t.default=new(function(){function e(){}return e.prototype.http=function(e){return new Promise((function(t,r){var n=new(0,window.XMLHttpRequest);"boolean"==typeof e.withCredentials?n.withCredentials=e.withCredentials:n.withCredentials=!0,"number"==typeof e.timeout&&(n.timeout=e.timeout),n.open(e.method,e.url,!0);var s;n.onload=function(){return this.status>=200&&this.status<300?t(new i.ApiResponse(this.status,this.response)):r(new i.ApiResponse(this.status,this.response))},n.onerror=function(){var e=new i.ApiResponse(this.status,this.response);return r(e)},n.ontimeout=function(){var e=new i.ApiResponse(0,"timeout");return r(e)},n.onabort=function(){var e=new i.ApiResponse(0,"aborted");return r(e)},(s=e.headers)&&Object.keys(s).forEach((function(e){n.setRequestHeader(e,s[e])})),n.send(e.data)}))},e.prototype.post=function(e,t,r,i,n){return void 0===r&&(r={}),this.http({headers:r,method:"POST",url:e,data:t,withCredentials:i,timeout:n})},e.prototype.get=function(e,t,r,i){return void 0===t&&(t={}),this.http({headers:t,method:"GET",url:e,withCredentials:r,timeout:i})},e}())},389219:e=>{const t=(e,t)=>t.toUpperCase();e.exports=function(e){return e.replace(/-+([^-]?)/g,t)}},389375:(e,t,r)=>{"use strict";var i=r(141770),n=r(727691),s=r(141296),o=r(732725).f,a=r(88717),l=r(430155),u=r(355379),c=r(229711),d=r(74118),h=r(287045),p=r(262535),f="DOMException",g=n("Error"),m=n(f),y=function(){l(this,v);var e=arguments.length,t=c(e<1?void 0:arguments[0]),r=c(e<2?void 0:arguments[1],"Error"),i=new m(t,r),n=g(t);return n.name=f,o(i,"stack",s(1,h(n.stack,1))),u(i,this,y),i},v=y.prototype=m.prototype,b="stack"in g(f),_="stack"in new m(1,2),A=b&&!_;i({global:!0,forced:p||A},{DOMException:A?y:m});var w=n(f),P=w.prototype;if(P.constructor!==w)for(var S in p||o(P,"constructor",s(1,w)),d)if(a(d,S)){var x=d[S],C=x.s;a(w,C)||o(w,C,s(6,x.c))}},394221:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var i,n,s,o=r(529444),a=r(135708),l=r(63944),u=r(355141),c=r(891348),d=r(739506),h=r(803358);function p(e,t,r,i){if(0===t.length)return e;var n=t[0],s=t.slice(1),o=`{${n}}`,a=e.split(o).map((e=>p(e,s,r,i))),l=[].concat(a.shift());if(i)var u=r[n];else(u={})[n]=r[n];for(var c of a)l=l.concat(u,c);return i?l.join(""):l}let f=(i=class extends d.A{constructor(){super(),(0,o.A)(this,"locale",n,this),(0,o.A)(this,"translations",s,this),this._readyDeferred=new c.A,this._isReady=!1,this.watch((()=>this.locale),(e=>{null==e||this._isReady||(this._isReady=!0,this._readyDeferred.resolve())}))}get readyJP(){return this._readyDeferred.promise}get language_display_name(){return this.locale_hash[this.locale]}get language_code(){return this.locale.split("-")[0]}translate(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var i=e.indexOf("="),n=e.slice(0,i),s=e.slice(i+1),o=this.translations?this.translations[n]:void 0;return o=o||s,n.match(/^\$\$\$/)||console.log(`ZString should start with '$$$': ${e}`),t&&(o=p(o,Object.getOwnPropertyNames(t),t,r)),o}addTextTranslations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("en-US"===this.locale)return;const{translations:r}=this,i="$".repeat(3)+t;for(let t of e.split("\n")){const{length:e}=t,n='"'===t.charAt(0)?1:0,s='"'===t.charAt(e-1)?e-1:e;if(t=t.substring(n,s),t.startsWith(i)){const[e,i]=t.split("=");r[e]=i.replace(/\\["']/g,(e=>e[1])).replace(/\\n/g,(e=>"\n"))}}}getLocaleWithUnderscore(){return this.locale.replace("-","_")}humanFileSizeValue(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=1024;let i=0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])i=3,e/=Math.pow(r,i);else for(;Math.abs(e)>=r&&i<t;)e/=r,++i;return[e,i]}humanFileSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[this.translate("$$$/js/zstring/common/bytes=B"),this.translate("$$$/js/zstring/common/kilobytes=KB"),this.translate("$$$/js/zstring/common/megabytes=MB"),this.translate("$$$/js/zstring/common/gigabytes=GB"),this.translate("$$$/js/zstring/common/terabytes=TB")],[n,s]=this.humanFileSizeValue(e,r,i.length);t=s<1?0:t;const o=this.translate("$$$/js/zstring/common/decimal_separator=.");return this.translate("$$$/js/zstring/common/storage_format={number} {unit}",{number:n.toFixed(t).replace(".",o),unit:i[s]})}humanCountValue(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const r=1e3;let i;for(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?(i=2,e/=Math.pow(r,i)):i=0;Math.abs(e)>=r&&i<t;)e/=r,++i;return[e,i]}humanCount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=["",this.translate("$$$/js/zstring/common/thousand=K"),this.translate("$$$/js/zstring/common/million=M"),this.translate("$$$/js/zstring/common/billion=B"),this.translate("$$$/js/zstring/common/trillion=T")],[n,s]=this.humanCountValue(e,r,i.length);s<1&&(t=0);const o=this.translate("$$$/js/zstring/common/decimal_separator=."),a=n.toFixed(t).replace(/\.0+$/,"").replace(".",o);return this.translate("$$$/js/zstring/compact_storage_format={count}{units}",{count:a,units:i[s]})}humanDurationValue(e,t){const r=[1e3,60,60,24];let i=0;for(;Math.abs(e)>=r[0]&&i<t;)e/=r[0],r.shift(),++i;return[e,i]}humanDuration(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=this.translate("$$$/js/zstring/duration={duration} {unit_string}"),s=[this.translate("$$$/js/zstring/common/milliseconds=ms"),this.translate("$$$/js/zstring/common/seconds=seconds"),this.translate("$$$/js/zstring/common/minutes=minutes"),this.translate("$$$/js/zstring/common/hours=hours"),this.translate("$$$/js/zstring/common/days=days")],o=[this.translate("$$$/js/zstring/common/milliseconds=ms"),this.translate("$$$/js/zstring/common/second=second"),this.translate("$$$/js/zstring/common/minute=minute"),this.translate("$$$/js/zstring/common/hour=hour"),this.translate("$$$/js/zstring/common/day=day")],a=[this.translate("$$$/js/zstring/common/milliseconds_short=ms"),this.translate("$$$/js/zstring/common/seconds_short=sec"),this.translate("$$$/js/zstring/common/minutes_short=min"),this.translate("$$$/js/zstring/common/hours_short=hr")];let l,u;[l,u]=i?this.humanDurationValue(e,a.length):this.humanDurationValue(e,s.length),t>0&&(l=Math.ceil(l/t)*t);const c=l.toFixed(r);let d;return d=i?a[u]:"1"===c?o[u]:s[u],n.replace("{duration}",c).replace("{unit_string}",d)}humanDimensions(e){const t=e[0],r=e[1];return null!=t&&null!=r?`${Math.round(t)} x ${Math.round(r)}`:""}humanNumber(e){const t=this.translate("$$$/js/zstring/common/decimal_separator=."),r=this.translate("$$$/js/zstring/common/thousand_separator=,");return e.toString().replace(".",t).replace(/\B(?=(\d{3})+(?!\d))/g,r)}ok_string(){return this.translate("$$$/zstring/common/ok=OK")}cancel_string(){return this.translate("$$$/zstring/common/cancel=Cancel")}continue_string(){return this.translate("$$$/zstring/common/continue=Continue")}submit_string(){return this.translate("$$$/zstring/common/submit=Submit")}close_string(){return this.translate("$$$/zstring/common/close=Close")}retry_string(){return this.translate("$$$/zstring/common/retry=Retry")}or_cap_string(){return this.translate("$$$/zstring/common/or_caps=OR")}or_string(){return this.translate("$$$/zstring/common/or=or")}back_string(){return this.translate("$$$/js/zstring/common/back=Back")}on_string(){return this.translate("$$$/js/zstring/common/on=On")}off_string(){return this.translate("$$$/js/zstring/common/off=Off")}next_string(){return this.translate("$$$/js/zstring/common/next=Next")}try_again_string(){return this.translate("$$$/js/zstring/common/try_again=Try Again")}get_started_string(){return this.translate("$$$/js/zstring/common/get_started=Get Started")}select_files_string(){return this.translate("$$$/js/zstring/common/select_files=Select files")}add_photos_string(){return this.translate("$$$/js/zstring/common/add_photos=Add photos")}got_it_string(){return this.translate("$$$/js/confirm/gotit=Got it")}done_string(){return this.translate("$$$/js/zstring/common/done=Done")}get locale_hash(){const e={};for(const t of h.supported){const r=h.display_names[t];r&&(e[t]=r)}return e}},n=(0,a.A)(i.prototype,"locale",[u.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,a.A)(i.prototype,"translations",[u.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,a.A)(i.prototype,"locale_hash",[l.A],Object.getOwnPropertyDescriptor(i.prototype,"locale_hash"),i.prototype),i)},403909:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i=r(656413),n=r.n(i),s=r(682826);const o=/^debug_log_((?:_(?!_)|[^_])*[^_])(?:__(.*))?/,a=[];for(const e of s.A.all_enabled()){const t=o.exec(e);if(null!=t){const[,e,r="*"]=t;a.push(`${e}:${r}`)}}const l=a.join(",");n().enable(l);const u=n()},403983:function(e,t,r){"use strict";r(389375),r(528510),r(317779),r(8534),r(864113),r(380190);var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(82979));t.ONE_HOUR=1296e4;var a=function(){function e(){this.storage=o.default.getAvailableStorage()}return e.prototype.b64Uri=function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},e.prototype.createCodeChallenge=function(e,t){var r=this;void 0===t&&(t=43);for(var i=window.msCrypto||window.crypto,s=this.b64Uri(Array.prototype.map.call(i.getRandomValues(new Uint8Array(t)),(function(e){return String.fromCharCode(e)})).join("")).substring(0,t),o=new Uint8Array(s.length),a=0;a<s.length;a++)o[a]=s.charCodeAt(a);var l=i.subtle.digest("SHA-256",o);return new Promise((function(t,i){window.CryptoOperation?(l.onerror=function(e){return i(e)},l.oncomplete=function(i){var o=new Uint8Array(i.target.result),a=r.b64Uri(String.fromCharCode.apply(String,n(o)));return t(r.saveVerifierAndReturn(e,{verifier:s,challenge:a}))}):l.then((function(i){var o=new Uint8Array(i),a=r.b64Uri(String.fromCharCode.apply(String,n(o)));return t(r.saveVerifierAndReturn(e,{verifier:s,challenge:a}))}))}))},e.prototype.saveVerifierAndReturn=function(e,t){var r=this.getVerifierValuesFromStorage(),i={verifier:t.verifier||"",expiry:(new Date).getTime().toString()};return r[e]=i,this.storage.setItem("verifiers",JSON.stringify(r)),Promise.resolve(t)},e.prototype.getVerifierValuesFromStorage=function(){var e=this.storage.getItem("verifiers"),t=e?JSON.parse(e):{};return this.clearOlderVerifiers(t)},e.prototype.clearOlderVerifiers=function(e,r){void 0===r&&(r=t.ONE_HOUR);var i=Date.now()-r;return Object.keys(e).forEach((function(t){parseInt(e[t])<i&&delete e[t]})),e},e.prototype.getVerifierByKey=function(e){var t=this.getVerifierValuesFromStorage(),r=t?t[e]:{};return delete t[e],this.storage.setItem("verifiers",JSON.stringify(t)),r?r.verifier:""},e}();t.CodeChallenge=a},406190:(e,t,r)=>{"use strict";r.d(t,{$:()=>i,A:()=>o});var i="_signals";const n=Symbol("owner"),s=function(e){return null!==e};class o{constructor(e){this[n]=void 0,this[n]=e,this.handlers=[],this.nullHandlers=0}add(e){this.handlers.push(e)}remove(e){var t=this.handlers,r=t.indexOf(e);-1!==r&&(t[r]=null,this.nullHandlers++,this.nullHandlers>t.length/4&&(this.handlers=t.filter(s),this.nullHandlers=0))}trigger(){for(var e=this.handlers.slice(),t=this[n],r=0,i=e.length;r<i;++r){var s=e[r];s&&s.apply(t,arguments)}}triggerNoArgs(){for(var e=this.handlers.slice(),t=this[n],r=0,i=e.length;r<i;++r){var s=e[r];s&&s.call(t)}}triggerWithArray(e){for(var t=this.handlers.slice(),r=this[n],i=0,s=t.length;i<s;++i){var o=t[i];o&&o.apply(r,e)}}static trigger(e,t){var r=e._signals;if(r&&r[n]===e){var i=r[t];if(i)return i.triggerWithArray(Array.prototype.slice.call(arguments,2)),i}}static triggerNoArgs(e,t){var r=e._signals;if(r&&r[n]===e){var i=r[t];if(i)return i.triggerNoArgs(),i}}static on(e,t,r){var s=e._signals;s&&s[n]===e||((s={})[n]=e,Object.defineProperty(e,i,{enumerable:!1,configurable:!1,value:s}));var a=s[t];return a||(a=s[t]=new o(e)),a.handlers.push(r),a}static off(e,t,r){var i=e._signals;if(i&&i[n]===e){var s=i[t];s&&s.remove(r)}}static listenTo(e,t,r,i){var n=e._listening;n||(e._listening=n=[]);var s=function(){i.apply(e,arguments)};n.push({obj:t,name:r,method:i,handler:s}),o.on(t,r,s)}static stopListening(e,t,r,i){var n=e._listening;if(n)for(var s=0,a=n.length;s<a;){var l=n[s];t&&l.obj!==t||r&&l.name!==r||i&&l.method!==i?++s:(o.off(l.obj,l.name,l.handler),n.splice(s,1),--a)}}}},406227:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},409612:(e,t,r)=>{var i=r(366740),n=r(563294),s=r(382740),o=i(i.bind);e.exports=function(e,t){return n(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},411010:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=e.error,r=e.retryAfter,i=void 0===r?0:r,n=e.message,s=void 0===n?"":n;this.error=t,this.retryAfter=i,this.message=s};t.HttpErrorResponse=r},416625:(e,t,r)=>{var i,n,s,o=r(879979),a=r(578887),l=r(366740),u=r(178326),c=r(555119),d=r(88717),h=r(927449),p=r(702739),f=r(774665),g="Object already initialized",m=a.TypeError,y=a.WeakMap;if(o||h.state){var v=h.state||(h.state=new y),b=l(v.get),_=l(v.has),A=l(v.set);i=function(e,t){if(_(v,e))throw new m(g);return t.facade=e,A(v,e,t),t},n=function(e){return b(v,e)||{}},s=function(e){return _(v,e)}}else{var w=p("state");f[w]=!0,i=function(e,t){if(d(e,w))throw new m(g);return t.facade=e,c(e,w,t),t},n=function(e){return d(e,w)?e[w]:{}},s=function(e){return d(e,w)}}e.exports={set:i,get:n,has:s,enforce:function(e){return s(e)?n(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=n(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return r}}}},421263:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var i,n=r(268534),s=r(200596),o=r(76309),a=r(712942),l=r(127507);e=r.hmd(e);const u=a.A.recordEvent,c=a.A.recordChange;let d=(0,n.A)((0,o.A)("UIComponent"),e,"UIComponent")(i=class extends s.A{})||i;function h(e,t,r){if(!r.get)throw new Error("@Cache can only be applied on getters.");if("function"==typeof e)throw new Error("@Cache cannot be used with static getters.");if(!(e instanceof l.A||e instanceof d.__proto__))throw new Error("@Cache can only be used on a Disposable class.");const i="_"+t,n="_binder_"+t,s=function(){if(a.A.mutator){const e=this[i],r=this[n].get();if(e===r)return;return this[i]=r,void c(this,t,r,e)}c(this,t)},o=r.get;r.get=function(){a.A.active&&u(this,t);let e=this[n];if(!e){const t=o.bind(this);e=this.link(new a.A(t,void 0,!0,s.bind(this),void 0,this)),this[n]=e,this[i]=e.previousValue}return e.dirty&&(this[i]=e.get()),this[i]}}},426706:e=>{"use strict";e.exports=EvalError},426919:e=>{"use strict";e.exports=SyntaxError},430155:(e,t,r)=>{var i=r(578887),n=r(984557),s=i.TypeError;e.exports=function(e,t){if(n(t,e))return e;throw s("Incorrect invocation")}},432203:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(610206),n=r(237338);const s=new i.A(n.A,"UI Task Queue",100)},437122:function(e,t,r){"use strict";r(528510),r(317779),r(8534),r(864113),r(380190);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(82979)),s=r(235404),o=r(63582);t.ONE_HOUR=1296e4;var a="csrf_verified",l=function(){function e(e,t){void 0===t&&(t=o.AdobeIMSKey),this.storageInstance=null,this.nonceStorageKey="",this.nonceStorageKey="nonce"+t+e}return Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageInstance||(this.storageInstance=n.default.getAvailableStorage()),this.storageInstance},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){if(window[a]=!1,!this.isStorageAvailable())return"";var t=e.generateNonce(),r=this.getNonceFromStorage()||{};return r=this.clearOlderNonceKeys(r),this.addNonceToObject(r,t),this.saveNonceValuesToStorage(r),t.value},e.prototype.addNonceToObject=function(e,t){e[t.value]=t.expiry},e.prototype.clearOlderNonceKeys=function(e,r){void 0===r&&(r=t.ONE_HOUR);var i=Date.now()-r;return Object.keys(e).forEach((function(t){parseInt(e[t])<i&&delete e[t]})),e},e.prototype.verify=function(e){if(!0===window[a])return!0;if(window[a]=!0,!this.isStorageAvailable())return!0;var t=this.getNonceFromStorage();if(!t)return!1;var r=this.clearOlderNonceKeys(t),i=null!==(r[e]||null);return i&&this.clearNonceValueFromStorage(r,e),i},e.prototype.clearNonceValueFromStorage=function(e,t){delete e[t],this.saveNonceValuesToStorage(e)},e.prototype.getNonceFromStorage=function(){var e=this.storage.getItem(this.nonceStorageKey);return e?JSON.parse(e):null},e.prototype.saveNonceValuesToStorage=function(e){this.storage.setItem(this.nonceStorageKey,JSON.stringify(e))},e.prototype.isStorageAvailable=function(){return!(this.storage instanceof s.MemoryStorage)},e.cryptoRndomString=function(){if(!window.crypto)return"";var e=new Uint32Array(3);return window.crypto.getRandomValues(e),e.join("").substr(0,16)},e.randomString=function(){var t=e.cryptoRndomString();if(t)return t;for(var r="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<16;n++)r+=i.charAt(Math.floor(62*Math.random()));return r},e.generateNonce=function(){return{value:e.randomString(),expiry:(new Date).getTime().toString()}},e}();t.CsrfService=l},447891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){void 0===r&&(r=!1),this.jump="",this.code=e,this.jump=t,this.isPbaExpiredIdleSessionWorkaround=r};t.RideException=r},448498:(e,t,r)=>{var i=r(563294);e.exports=function(e,t){var r=e[t];return null==r?void 0:i(r)}},452873:(e,t,r)=>{var i=r(578887),n=r(58626),s=i.Object;e.exports=function(e){return s(n(e))}},456702:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var i=r(682826),n=r(923015),s=r(552142),o=r(341857).A;class a{get launchEnvironment(){return"lightroom.adobe.com"===window.location.hostname?"production":"stage"}get readyJP(){return a.readyJP}async loadVisitorGuid(){return null==a.visitorGuidPromise&&(a.visitorGuidPromise=this._loadVisitorGuid()),await a.visitorGuidPromise}async _loadVisitorGuid(){var e;await this.readyJP;const t=await window.alloy_getIdentity;return this.visitorGuid=null!==(e=t?.identity?.ECID)&&void 0!==e?e:"",this.visitorGuid}constructor(){if(o.sdk)a.readyJP=Promise.resolve();else{const e=async()=>{const e=new Promise((async(e,t)=>{if(i.A.is_enabled("disable_adobe_launch_and_metrics"))t("Adobe Launch disabled by debug feature");else{if(null==window.__satelliteLoadedPromise&&await window.__satelliteLoadedPromise,i.A.is_enabled("debug")){const e=await(0,n.A)(s.A.DEBUG_MBOX,{});console.log("Target debug test loaded with variant",e)}e()}})),t=new Promise(((e,t)=>{setTimeout((()=>t("Adobe Launch timeout")),7500)}));await Promise.any([e,t])};a.readyJP=e()}i.A.is_enabled("debug")&&a.readyJP.then((()=>{console.log("Adobe Launch Status: initialized")}),(e=>console.log("Adobe Launch Status: error initializing",e)))}}a.readyJP=void 0,a.visitorGuidPromise=void 0;const l=new a},457081:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,i="RFC1738",n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:i,RFC3986:n}},459998:(e,t,r)=>{var i=r(470463),n=Math.max,s=Math.min;e.exports=function(e,t){var r=i(e);return r<0?n(r+t,0):s(r,t)}},469688:(e,t,r)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,n=r(635562);e.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"==typeof i("foo")&&("symbol"==typeof Symbol("bar")&&n())))}},470463:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){var i=+e;return i!=i||0===i?0:(i>0?r:t)(i)}},474521:function(e,t,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(63582),o=r(122450),a=n(r(889387)),l=r(791748),u=n(r(139573)),c=r(863687),d=r(914047),h=r(403983),p=function(){function e(e){void 0===e&&(e=null),this.analyticsParameters=new l.AnalyticsParameters,this.api_parameters={},this.locale="",this.scope="AdobeID",this.client_id="",this.environment=o.IEnvironment.PROD,this.useLocalStorage=!1,this.alwaysRemoveTokenFromUrl=!1,this.onReady=null,this.onModalModeSignInComplete=null,this.proxiedCheckToken=!1;var t=e||window[s.AdobeIdKey];if(!t||!t.client_id)throw new Error("Please provide required adobeId, client_id information");var r=t.api_parameters,i=t.client_id,n=t.locale,c=t.scope,d=t.ijt,h=t.environment,p=void 0===h?o.IEnvironment.PROD:h,f=t.redirect_uri,g=t.useLocalStorage,m=t.logsEnabled,y=t.onReady,v=t.rideRedirectUri,b=t.proxiedCheckToken;this.environment=p,this.api_parameters=r||{},this.client_id=i,this.locale=n||s.DEFAULT_LANGUAGE,this.scope=c?c.replace(/\s/gi,""):"",this.redirect_uri=f,this.ijt=d,this.useLocalStorage=g,m?u.default.enableLogging():u.default.disableLogging(),this.onReady=y||null,this.rideRedirectUri=v,this.proxiedCheckToken=b,this.fillAnalyticsParameters(t),a.default.loadEnvironment(p,b,window.location.hostname)}return e.prototype.fillAnalyticsParameters=function(e){var t=e.analytics,r=void 0===t?{}:t,i=r.appCode,n=void 0===i?"":i,s=r.appVersion,o=void 0===s?"":s,a=this.analyticsParameters;a.appCode=n,a.appVersion=o},e.prototype.createSocialProviderRedirectRequest=function(e,t,r,n,s){var o={idp_flow:"social.deep_link.web",provider_id:e},a=i(i({},t),o);return this.createRedirectRequest(a,r,n,s)},e.prototype.createReAuthenticateRedirectRequest=function(e,t,r,n,s){void 0===n&&(n=c.IReauth.check),void 0===s&&(s=d.IGrantTypes.token);var o={reauth:n},a=i(i({},e),o);return this.createRedirectRequest(a,t,r,s)},e.prototype.createSignUpRedirectRequest=function(e,t,r){var n=i(i({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,d.IGrantTypes.token)},e.prototype.createRedirectRequest=function(e,t,r,i){var n=this,s=this,o=s.api_parameters,a=void 0===o?{}:o,l=s.client_id,u=s.redirect_uri,c=void 0===u?"":u,p=s.scope,f=s.locale,g=this.createRedirectState(t,r),m={adobeIdRedirectUri:c,apiParameters:a,clientId:l,externalParameters:e,scope:p,locale:f,response_type:i,state:g};return i===d.IGrantTypes.token?Promise.resolve(m):(new h.CodeChallenge).createCodeChallenge(r).then((function(i){e.code_challenge=i.challenge,e.code_challenge_method="S256";var s=n.createRedirectState(t,r);return m.state=s,Promise.resolve(m)}))},e.prototype.createRedirectState=function(e,t){var r=this.analyticsParameters,i=r.appCode,n=void 0===i?"":i,s=r.appVersion,o=void 0===s?"":s,l=void 0===e?{}:{context:e};return n&&(l.ac=n),o&&(l.av=o),l.jslibver=a.default.jslibver,l.nonce=t,Object.keys(l).length?l:null},e.prototype.triggerOnReady=function(){this.onReady&&this.onReady(void 0)},e.prototype.computeRideRedirectUri=function(e){return this.rideRedirectUri?"string"==typeof this.rideRedirectUri?"DEFAULT"===this.rideRedirectUri?null:this.rideRedirectUri:this.rideRedirectUri(e):window.location.href},e}();t.AdobeIdThinData=p},477749:(e,t,r)=>{e.exports=r(92940).deepClone},477907:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(840752),n=r(81076),s=r(586564);let o;const a={COMPACT_SIZE:668,MINIMAL_SIZE:320,touch:n.A,gesture:i.A,mouse:!n.A||s.A.win,hover:window.matchMedia("(hover: hover)").matches,geolocation:null!=navigator.geolocation,pixelDensity:null!=window.devicePixelRatio?window.devicePixelRatio:1,wasm:null!=window.WebAssembly,hasLocalStorage:(()=>{try{return localStorage.setItem("dummy_key","dummy_key"),localStorage.removeItem("dummy_key"),!0}catch(e){return o=e,!1}})(),viewportWidth:()=>document.documentElement.clientWidth,viewportHeight:()=>document.documentElement.clientHeight,isCompact(e,t){return this.isCompactWidth(e)||this.isCompactHeight(t)},isCompactWidth(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportWidth())<=this.COMPACT_SIZE},isCompactHeight(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportHeight())<=this.COMPACT_SIZE},isCompactScreen(){return screen.width<=this.COMPACT_SIZE||screen.height<=this.COMPACT_SIZE},isMinimal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportWidth(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.viewportHeight();return e<=this.MINIMAL_SIZE||t<=this.MINIMAL_SIZE},isFullscreen:()=>document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,isFullscreenEnabled:()=>!s.A.silk&&(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled),isVideoSupported(){try{return null!=document.createElement("video").canPlayType}catch(e){return!1}}}},480030:(e,t,r)=>{var i=r(578887),n=r(658369),s=i.String,o=i.TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw o("Can't set "+s(e)+" as a prototype")}},481196:function(e,t,r){"use strict";r(315715);var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(437122),l=o(r(139573)),u=r(362589),c=r(147968),d=r(63519),h=r(928490),p=r(339318),f=r(863687),g=r(673468),m=r(363294),y=r(806334),v=o(r(217509)),b=o(r(57990)),_=r(334753),A=r(336831),w=r(447891),P=r(411010),S=o(r(922583)),x=r(63582),C=o(r(889387)),O=r(914047),k=r(218971),T=r(403983),E=r(225512),I=r(720852),D=r(987562),R=r(45825),j=function(){function e(e,t){var r=this;void 0===e&&(e=null),this.initialized=!1,this.instanceKey=x.AdobeIMSKey,this.onPopupMessage=function(e){if(e&&r.adobeIdData.onModalModeSignInComplete){var t=r.tokenService.getTokenFromFragment(e);if(t instanceof E.TokenFields&&(r.tokenService.addTokenToStorage(t),r.adobeIdData.onModalModeSignInComplete(t)))return Promise.resolve()}return v.default.replaceUrl(e),r.initialize()},this.signIn=function(e,t,i){return void 0===e&&(e={}),void 0===i&&(i=O.IGrantTypes.token),n(r,void 0,void 0,(function(){var r,n,o,a,l;return s(this,(function(s){switch(s.label){case 0:return this.checkInitialized(),n=(r=this).adobeIdData,o=r.csrfService,a=o.initialize(),[4,n.createRedirectRequest(e,t,a,i)];case 1:return l=s.sent(),this.signInservice.signIn(l),[2,Promise.resolve()]}}))}))},this.authorizeToken=function(e,t,i,n){void 0===e&&(e=""),void 0===t&&(t={}),void 0===n&&(n=O.IGrantTypes.token);var s=r,o=s.adobeIdData,a=s.csrfService.initialize();return o.createRedirectRequest(t,i,a,n).then((function(t){(new u.SignInService).authorizeToken(e,t)}))},this.reAuthenticate=function(e,t,i,n){void 0===e&&(e={}),void 0===t&&(t=f.IReauth.check),void 0===n&&(n=O.IGrantTypes.token),r.checkInitialized();var s=r,o=s.adobeIdData,a=s.csrfService.initialize();return o.createReAuthenticateRedirectRequest(e,i,a,t,n).then((function(e){r.signInservice.signIn(e)}))},this.signInWithSocialProvider=function(e,t,i,n){if(void 0===t&&(t={}),void 0===n&&(n=O.IGrantTypes.token),r.checkInitialized(),!e)throw new Error("please provide the provider name");var s=r,o=s.adobeIdData,a=s.csrfService.initialize();o.createSocialProviderRedirectRequest(e,t,i,a,n).then((function(e){r.signInservice.signIn(e)}))},this.signOut=function(e){void 0===e&&(e={}),r.checkInitialized(),r.tokenService.purge(),r.profileService.removeProfile();var t=r.adobeIdData,i=t.api_parameters,n=void 0===i?{}:i,s=t.client_id,o={adobeIdRedirectUri:t.redirect_uri,apiParameters:n,clientId:s,externalParameters:e};(new d.SignOutService).signOut(o)},this.getTokenForPBAPolicy=function(e,t,i,n){var s;void 0===e&&(e=""),void 0===t&&(t=1e4),void 0===n&&(n={});var o=r.getAccessToken();if(o&&Date.now()+t<o.expire.getTime()&&(!e||(null===(s=o.pbaSatisfiedPolicies)||void 0===s?void 0:s.includes(e))))return Promise.resolve(o);var a=r,l=a.adobeIdData,u=a.csrfService.initialize();return n.state=l.createRedirectState(i,u),n.redirect_uri=I.RedirectHelper.createRedirectUrl(l.redirect_uri,l.client_id,n,"check_token",l.scope),e&&(n.pba_policy=e),r.refreshToken(n)},this.refreshToken=function(e,t){if(void 0===e&&(e={}),void 0===t&&(t=!1),!t&&e.userInactiveSince){var i=e.userInactiveSince,n=Date.now()-1e3*i;n>S.default.lastUserInteraction&&(S.default.lastUserInteraction=n)}return r.tokenService.refreshToken(e).then((function(e){return r.onTokenProfileReceived(e)})).catch((function(e){if(l.default.error("refresh token error",e),e instanceof P.HttpErrorResponse)return Promise.reject(e);var t=r.verifyRideErrorExceptionStrict(e);return t||(r.profileService.removeProfile(),r.onTokenExpired(),Promise.reject(e))}))},this.switchProfile=function(e,t){return void 0===t&&(t={}),e?r.tokenService.switchProfile(e,t).then((function(e){return r.onTokenProfileReceived(e)})).catch((function(e){return r.verifyRideErrorException(e)})):Promise.reject(new Error("Please provide the user id for switchProfile"))},this.executeErrorCallback=function(e){if(l.default.info("initialize exception ended",e),!e||e.type!==D.IFragmentExceptionType.LOGOUT){var t=r.adobeIdData.onError;t&&t(_.IErrorType.HTTP,"Initialization error")}},this.triggerOnImsInstance=function(e){var t=document.createEvent("CustomEvent"),i={clientId:r.adobeIdData.client_id,instance:e};t.initCustomEvent(x.ON_IMSLIB_INSTANCE,!1,!1,i),window.dispatchEvent(t)},this.processInitializeException=function(e){return void 0===e&&(e={}),l.default.warn("initialize",e),r.restoreHash(),Promise.reject(e)},this.verifyModalSignInEvent=function(e){return e instanceof k.ModalSignInEvent?r.notifyParentAboutModalSignIn(e):Promise.reject(e)},this.verifyTokenExpiredException=function(e){return e instanceof A.TokenExpiredException?(r.adobeIdData.handlers.triggerOnAccessTokenHasExpired(),Promise.resolve()):Promise.reject(e)},this.verifyRideErrorException=function(e){return n(r,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return e instanceof w.RideException?this.adobeIdData.overrideErrorHandler&&!this.adobeIdData.overrideErrorHandler(e)?[2,Promise.reject(e)]:e.isPbaExpiredIdleSessionWorkaround?[4,this.signIn()]:[3,2]:[3,4];case 1:return t.sent(),[3,4];case 2:return e.jump?[4,v.default.replaceUrlAndWait(e.jump,1e4)]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2,Promise.reject(e)]}}))}))},this.verifyRideErrorExceptionStrict=function(e){return e instanceof w.RideException?r.verifyRideErrorException(e):null},this.verifyCsrfException=function(e){var t=e.type;return t&&t===_.IErrorType.CSRF&&r.signOut(),Promise.reject(e)},this.processTokenResponse=function(e){var t=r.adobeIdData.handlers,i=e.tokenFields,n=e.profile,s=i.tokenValue,o=i.state,a=i.expire,u=i.sid,c=i.user_id,d=i.other,h=void 0===d?{}:d,p=i.impersonatorId,f=i.isImpersonatedSession,g=i.pbaSatisfiedPolicies,m=i.isGuestToken,y=i.gse;l.default.info("token",s),h.from_ims&&v.default.setHash(h.old_hash||""),r.profileService.removeProfileIfOtherUser(c);var b={token:s,expire:a,sid:u,impersonatorId:p,isImpersonatedSession:f,pbaSatisfiedPolicies:g,isGuestToken:m,gse:y};return i.isReauth()?t.triggerOnReauthAccessToken(b):r.tokenReceived(b),n&&r.profileService.saveProfileToStorage(n),Promise.resolve(o)},this.exchangeIjt=function(e){var t=r.adobeIdData.ijt;return e||t?r.tokenService.exchangeIjt(e||t).then((function(e){return e.profile?r.profileService.saveProfileToStorage(e.profile):r.profileService.removeProfile(),Promise.resolve(e)})):Promise.reject(new Error("please set the adobeid.ijt value"))},this.adobeIdData=new h.AdobeIdData(e),t&&(this.instanceKey=t);var o=this.adobeIdData,g=o.api_parameters,b=void 0===g?{}:g,C=o.client_id,T=o.scope,R=o.useLocalStorage,j=o.autoValidateToken,F=o.modalMode,N=o.modalSettings;this.imsApis=new p.ImsApis(b),this.csrfService=new a.CsrfService(C,this.instanceKey),this.serviceRequest={clientId:C,scope:T,imsApis:this.imsApis},this.tokenService=new y.TokenService(i(i({},this.serviceRequest),{useLocalStorage:R,autoValidateToken:j}),this.csrfService),this.profileService=new m.ProfileService(this.serviceRequest),this.signInservice=F?new c.SignInModalService(this.onPopupMessage,N):new u.SignInService}return Object.defineProperty(e.prototype,"version",{get:function(){return C.default.jslibver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adobeid",{get:function(){return i({},this.adobeIdData)},enumerable:!0,configurable:!0}),e.prototype.enableLogging=function(){l.default.enableLogging()},e.prototype.disableLogging=function(){l.default.disableLogging()},e.prototype.checkInitialized=function(){this.initialized},e.prototype.signUp=function(e,t){var r=this;void 0===e&&(e={}),this.checkInitialized();var i=this.adobeIdData,n=this.csrfService;if(!i)throw new Error("no adobeId on reAuthenticate");var s=n.initialize();return i.createSignUpRedirectRequest(e,t,s).then((function(e){r.signInservice.signIn(e)}))},e.prototype.isSignedInUser=function(){var e=this.getAccessToken();return(!e||!e.isGuestToken)&&!(!e&&!this.getReauthAccessToken())},e.prototype.getProfile=function(){var e=this,t=this.profileService.getProfileFromStorage();if(t)return Promise.resolve(t);var r=this.getAccessToken()||this.getReauthAccessToken();if(!r){var i="please login before getting the profile";return Promise.reject(new g.ProfileException(i))}if(r.isGuestToken){i="guest account does not have a profile";return Promise.reject(new g.ProfileException(i))}return this.profileService.getProfile(r.token).then((function(e){return Promise.resolve(e)})).catch((function(t){return l.default.error("get profile exception ",t),t instanceof P.HttpErrorResponse?e.refreshToken().then((function(e){return Promise.resolve(e.profile)})):Promise.reject(new g.ProfileException(t.message||t))}))},e.prototype.avatarUrl=function(e){return this.imsApis.avatarUrl(e)},e.prototype.getReleaseFlags=function(e){return void 0===e&&(e=!1),e?this.tokenService.getDecodedReleaseFlags():this.tokenService.getReleaseFlags()},e.prototype.getAccessToken=function(){return this.getTokenFromStorage(!1)},e.prototype.getReauthAccessToken=function(){return this.getTokenFromStorage(!0)},e.prototype.getTokenFromStorage=function(e){var t=this.tokenService.getTokenFieldsFromStorage(e);return t?{token:t.tokenValue,expire:t.expire,sid:t.sid,impersonatorId:t.impersonatorId,isImpersonatedSession:t.isImpersonatedSession,pbaSatisfiedPolicies:t.pbaSatisfiedPolicies,isGuestToken:t.isGuestToken,gse:t.gse}:null},e.prototype.listSocialProviders=function(){var e=this;return new Promise((function(t,r){var i=e.adobeIdData.client_id;e.imsApis.listSocialProviders({client_id:i}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},e.prototype.tokenReceived=function(e){this.adobeIdData.handlers.triggerOnAccessToken(e),S.default.startAutoRefreshFlow({expire:e.expire,refreshTokenMethod:this.refreshToken})},e.prototype.onTokenProfileReceived=function(e){var t=e.tokenInfo,r=e.profile;return l.default.info("token",t),this.tokenReceived(t),this.profileService.saveProfileToStorage(r),Promise.resolve(e)},e.prototype.validateToken=function(){var e=this;return this.tokenService.validateToken().then((function(){return Promise.resolve(!0)})).catch((function(t){return l.default.warn("validate token exception",t),t instanceof P.HttpErrorResponse||e.profileService.removeProfile(),Promise.reject(!1)}))},e.prototype.onTokenExpired=function(){var e=this.adobeIdData.handlers;this.tokenService.purge(),e.triggerOnAccessTokenHasExpired()},e.prototype.setStandAloneToken=function(e){return this.tokenService.setStandAloneToken(e)},e.prototype.initialize=function(){var e,t=this,r=this.adobeIdData,i=r.handlers,n=r.standalone,s=r.ijt,o=r.alwaysRemoveTokenFromUrl,a=r.enableGuestAccounts,u=r.enableGuestTokenForceRefresh,c=null;switch(n&&this.setStandAloneToken(n),!0){case!!s:e=this.exchangeIjt;break;case a:e=this.tokenService.getGuestToken.bind(this.tokenService,{},{enableGuestAccounts:a,enableGuestTokenForceRefresh:u});break;default:e=this.tokenService.getTokenAndProfile}return e().then(this.processTokenResponse,this.processError.apply(this)).then((function(e){c=e})).finally((function(){l.default.info("onReady initialization"),window.addEventListener(x.ASK_FOR_IMSLIB_INSTANCE_DOM_EVENT_NAME,(function(){t.triggerOnImsInstance(t)}),!1),o&&v.default.setHash(b.default.removeAccessToken()),i.triggerOnReady(c?c.context:null),t.triggerOnImsInstance(t),t.initialized=!0}))},e.prototype.processError=function(){var e=this;return function(t){return e.verifyModalSignInEvent(t).catch(e.processInitializeException).catch(e.verifyTokenExpiredException).catch(e.verifyRideErrorException).catch(e.verifyCsrfException).catch(e.executeErrorCallback)}},e.prototype.notifyParentAboutModalSignIn=function(e){var t=window.location.href.replace("imslibmodal","wasmodal");if(window.opener)window.opener.postMessage(t,window.location.origin),window.close();else{var r=new BroadcastChannel("imslib");r.postMessage(t),r.close(),window.close()}return Promise.reject("popup")},e.prototype.restoreHash=function(){var e=b.default.fragmentToObject();e&&e.from_ims&&v.default.setHash(e.old_hash||"")},e.prototype.getTransitoryAuthorizationCode=function(e,t){return void 0===t&&(t={}),(e=e||{}).response_type=e.response_type||"code",e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.getTransitoryAuthorizationCode(e,t,this.adobeIdData.client_id)},e.prototype.jumpToken=function(e,t){return void 0===t&&(t={}),e.target_client_id=e.target_client_id||this.adobeIdData.client_id,e.target_scope=e.target_scope||this.adobeIdData.scope,this.imsApis.jumpToken(e,t,this.adobeIdData.client_id)},e.prototype.getVerifierByKey=function(e){return(new T.CodeChallenge).getVerifierByKey(e)},e.prototype.socialHeadlessSignIn=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,(function(){var r=this;return s(this,(function(i){return[2,this.imsApis.socialHeadlessSignIn(e,t).then((function(e){return r.exchangeIjt(e.token)})).catch((function(t){return"ride_AdobeID_social"===t.error&&r.signIn({idp_flow:"social.native",provider_id:e.provider_id,idp_token:e.idp_token}),Promise.reject(t)}))]}))}))},e.prototype.getAccountType=function(){var e=this.getAccessToken();if(!e)throw new Error("please login before getting the account type");if(e.isGuestToken)return R.IAccountType.GUEST;var t=this.profileService.getProfileFromStorage();if(!t)throw new Error("you need to first get the profile before getting the account type");return t.account_type},e.prototype.getSessionExpiration=function(){var e=this.getAccessToken();if(!e)throw new Error("please obtain a token before getting the session expiration");return e.gse},e}();t.AdobeIMS=j},489756:e=>{let t=0;e.exports=function(e){return(e||"")+ ++t}},495538:(e,t,r)=>{"use strict";e=r.nmd(e);var i=function(e,t){return e<t};function n(e){if(!(this instanceof n))return new n(e);this.array=[],this.size=0,this.compare=e||i}n.prototype.add=function(e){var t,r,i=this.size;for(this.array[this.size]=e,this.size+=1;i>0&&(t=i-1>>1,r=this.array[t],this.compare(e,r));)this.array[i]=r,i=t;this.array[i]=e},n.prototype.heapify=function(e){var t;for(this.array=e,this.size=e.length,t=this.size>>1;t>=0;t--)this._percolateDown(t)},n.prototype._percolateUp=function(e){for(var t,r,i=this.array[e];e>0&&(t=e-1>>1,r=this.array[t],this.compare(i,r));)this.array[e]=r,e=t;this.array[e]=i},n.prototype._percolateDown=function(e){for(var t,r,i,n=this.size,s=this.size>>>1,o=this.array[e];e<s&&(r=(t=1+(e<<1))+1,i=this.array[t],r<n&&this.compare(this.array[r],i)&&(t=r,i=this.array[r]),this.compare(i,o));)this.array[e]=i,e=t;this.array[e]=o},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var e=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,e}},n.prototype.replaceTop=function(e){if(0!=this.size){var t=this.array[0];return this.array[0]=e,this._percolateDown(0),t}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size};r.c[r.s]===e&&function(){var e=new n((function(e,t){return e<t}));for(e.add(1),e.add(0),e.add(5),e.add(4),e.add(3);!e.isEmpty();)console.log(e.poll())}(),e.exports=n},500626:(e,t,r)=>{"use strict";var i=Function.prototype.call,n=Object.prototype.hasOwnProperty,s=r(652896);e.exports=s.call(i,n)},503249:(e,t)=>{t.f=Object.getOwnPropertySymbols},507521:(e,t,r)=>{"use strict";var i=r(656664),n=r(527254),s=r(457081);e.exports={formats:s,parse:n,stringify:i}},512656:e=>{"use strict";e.exports=TypeError},520839:e=>{e.exports=["mobile_referral_v2","imsb_4111153_mitigation","on_the_house","loupe_compare_before_after_named_versions","social_preview_when_needed","browser_grid_scroll","firefly_erase","ai_people_update_support","cloud_seed","refresh_people_masks","not_herd_mentality","roadside_cleanup","people_distraction_parallelize_requests","multipart_clio_erase","chrono_trigger","jasons_all_community_rejects","copycat_point_color","on_the_house_copycat","grid_load_ahead","app_level_freemium_upsell_dialogs"]},527254:(e,t,r)=>{"use strict";var i=r(985452),n=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(s),u=a?s.slice(0,a.index):s,c=[];if(u){if(!r.plainObjects&&n.call(Object.prototype,u)&&!r.allowPrototypes)return;c.push(u)}for(var d=0;r.depth>0&&null!==(a=o.exec(s))&&d<r.depth;){if(d+=1,!r.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+s.slice(a.index)+"]"),function(e,t,r,i){for(var n=i?t:l(t,r),s=e.length-1;s>=0;--s){var o,a=e[s];if("[]"===a&&r.parseArrays)o=[].concat(n);else{o=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);r.parseArrays||""!==u?!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[])[c]=n:o[u]=n:o={0:n}}n=o}return n}(c,t,r,i)}};e.exports=function(e,t){var r=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:o.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){var r,u={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,h=c.split(t.delimiter,d),p=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<h.length;++r)0===h[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===h[r]?f="utf-8":"utf8=%26%2310003%3B"===h[r]&&(f="iso-8859-1"),p=r,r=h.length);for(r=0;r<h.length;++r)if(r!==p){var g,m,y=h[r],v=y.indexOf("]="),b=-1===v?y.indexOf("="):v+1;-1===b?(g=t.decoder(y,o.decoder,f,"key"),m=t.strictNullHandling?null:""):(g=t.decoder(y.slice(0,b),o.decoder,f,"key"),m=i.maybeMap(l(y.slice(b+1),t),(function(e){return t.decoder(e,o.decoder,f,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===f&&(m=a(m)),y.indexOf("[]=")>-1&&(m=s(m)?[m]:m),n.call(u,g)?u[g]=i.combine(u[g],m):u[g]=m}return u}(e,r):e,d=r.plainObjects?Object.create(null):{},h=Object.keys(c),p=0;p<h.length;++p){var f=h[p],g=u(f,c[f],r,"string"==typeof e);d=i.merge(d,g,r)}return!0===r.allowSparse?d:i.compact(d)}},528510:(e,t,r)=>{"use strict";var i=r(912752),n=r(800107).findLast,s=i.aTypedArray;(0,i.exportTypedArrayMethod)("findLast",(function(e){return n(s(this),e,arguments.length>1?arguments[1]:void 0)}))},528975:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i=r(875472),n=r(636550),s=r(547826),o=r(682826),a=r(215849);var l=(0,n.A)("features");const u=new class{constructor(){Object.defineProperty(this,l,{writable:!0,value:new Set}),this.readyJP=this.init()}enabled(e){return(0,i.A)(this,l)[l].has(e)}async init(){const e=new AbortController,t=setTimeout((()=>e.abort("TimeoutError")),5e3);try{await this._init(e)}catch(t){"TimeoutError"===e.signal.reason?a.A.reportFailure("floodgateTimeoutFailure"):a.A.reportFailure("floodgateInitFailure"),console.error("floodgate initialization failed",t)}clearTimeout(t)}async _init(e){await s.A.readyJP;const t=s.A.getToken();if(o.A.is_enabled("debug_floodgate_timeout")&&await new Promise((e=>setTimeout(e,5500))),t){var r;const[n,s]={"lightroom.adobe.com":["https://p13n.adobe.io","LrWebFloodgateProd"]}[window.location.hostname]||["https://p13n-stage.adobe.io","LrWebFloodgateStage"],a=await fetch(`${n}/fg/api/v3/feature?clientId=${s}`,{headers:{Authorization:`Bearer ${t}`,"x-api-key":s},signal:e.signal}),u=null!==(r=(await a.json())?.releases?.[0]?.features)&&void 0!==r?r:[];for(const e of u)(0,i.A)(this,l)[l].add(e);o.A.is_enabled("debug")&&console.log("Floodgate features: ",u.join(","))}}}},529444:(e,t,r)=>{"use strict";function i(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}r.d(t,{A:()=>i})},531107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){void 0===e&&(e={}),this.title="Adobe ID",this.width=600,this.top=100,this.left=100;var t=e.title,r=void 0===t?"Adobe ID":t,i=e.width,n=void 0===i?600:i,s=e.height,o=void 0===s?700:s,a=e.top,l=void 0===a?100:a,u=e.left,c=void 0===u?100:u,d=e.allowedOrigin;this.title=r,this.width=n,this.height=o,this.top=l,this.left=c,this.allowOrigin=d};t.PopupSettings=r},532898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.status=0,this.data="",this.status=e,this.data=this.toJson(t)}return e.prototype.toJson=function(e){try{return"string"!=typeof e?e:JSON.parse(e)}catch(t){return e}},e}();t.ApiResponse=r},537592:(e,t,r)=>{var i=r(366740),n=r(88717),s=r(798793),o=r(857005).indexOf,a=r(774665),l=i([].push);e.exports=function(e,t){var r,i=s(e),u=0,c=[];for(r in i)!n(a,r)&&n(i,r)&&l(c,r);for(;t.length>u;)n(i,r=t[u++])&&(~o(c,r)||l(c,r));return c}},547826:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});class i{constructor(){i.readyJP=new Promise((e=>{this._readyResolve=e}))}setGetTokenMethod(e){this.getTokenMethod=e}setAuthReady(){this.isReady=!0,this._readyResolve()}getToken(){if(null!=this.getTokenMethod)return this.getTokenMethod()}get readyJP(){return i.readyJP}get signedIn(){return null!=this.getToken()}}i.readyJP=void 0,i.isReady=!1;const n=new i},551359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="abcdefghijklmnopqrstuvwxyz234567".split("").reduce((function(e,t,r){return e[t]=r,e}),{"=":0}),i=function(e){return function(e,t,r){var i=t-r.length;return i>0&&(r=new Array(i+1).join(e)+r),r}("0",5,e.toString(2))};t.decodeToBitstring=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("Data is not a string");var n=e.toLowerCase().split("");!function(e){if(e.length%8!=0)throw new Error("Data length is not a multiple of 8");e.forEach((function(e){if(!(e in r))throw new Error("Unknown encoded character "+e)}));var t=!1;e.forEach((function(e){if("="!==e&&t)throw new Error("Found padding char in the middle of the string");"="===e&&(t=!0)}))}(n);var s=function(e){for(var t=e.length-1,r=0;"="===e[t];)++r,--t;return r}(n),o=[];n.forEach((function(e){o.push(i(r[e]))}));var a=o.join("");return s>0&&(a=a.slice(0,-5*s)),a.length%8!=0&&(a=a.slice(0,a.length%8*-1)),t?function(e){var t="";if(e.length%8!=0)throw new Error("Length must be a multiple of 8");for(var r=0,i=e.length;r<i;r+=8)t+=e.slice(r,r+8).split("").reverse().join("");return t}(a):a}},552142:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i={DEBUG_MBOX:"LrDebugMbox",DEFAULT_MBOX:"LrDefaultTestMbox",CANADA_PLG_MBOX:"LrPlgMbox",FREEMIUM_MBOX:"LrWebFreemiumMbox",WEB_MOBILE_GROWTH_MBOX:"LrWebMobileGrowthMbox"}},555119:(e,t,r)=>{var i=r(950176),n=r(732725),s=r(141296);e.exports=i?function(e,t,r){return n.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},555723:e=>{"use strict";e.exports=ReferenceError},555902:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(389219),n=r.n(i);const s=/^(?:(.+?):)?(on-)?(.*)$/,o=function(){};class a{constructor(e,t){this.isEvent=t,this.configurable=!0,this.enumerable=!1,e.get?(this.get=e.get,this.set=e.set||o):this.value=e.value;const r=s.exec(e.original||e.name||"");this.namespace=r[1],this.name=r[3],this.normalizedName=a.normalizeName(r[3]),this.isEvent=this.isEvent||!!r[2]}static normalizeName(e){return n()(e)}isValid(){return!!this.name}toChildAttribute(e,t){let r=t&&this.namespace?this.namespace+":":"";return this.isEvent?{name:r+"on-"+this.name,value:this.value.bind(e)}:this.get?{name:r+this.name,get:this.get.bind(e),set:this.set.bind(e)}:{name:r+this.name,value:this.value}}matchesNamespace(e){return!e||e===this.namespace}static forEachSpread(e,t,r){for(let i of t){const t=i(e);if(t instanceof Array)for(let e of t){const t=new a(e);t.isValid()&&r(t)}else if("object"==typeof t)for(let e in t){let i=t[e];if(Object.prototype.hasOwnProperty.call(t,e)){let t;i&&(Object.prototype.hasOwnProperty.call(i,"value")||Object.prototype.hasOwnProperty.call(i,"get"))?(i.name=e,t=i):t={name:e,value:i};const n=new a(t);n.isValid()&&r(n)}}}}}},555996:(e,t,r)=>{var i=r(578887),n=r(121570),s=r(470463),o=i.RangeError;e.exports=function(e,t,r,i){var a=n(e),l=s(r),u=l<0?a+l:l;if(u>=a||u<0)throw o("Incorrect index");for(var c=new t(a),d=0;d<a;d++)c[d]=d===u?i:e[d];return c}},558621:(e,t,r)=>{var i=r(268749),n=r(157625);e.exports=function(e){var t=i(e,"string");return n(t)?t:t+""}},559522:()=>{},560232:(e,t,r)=>{var i=r(406227),n=r(658369),s=/#|\.prototype\./,o=function(e,t){var r=l[a(e)];return r==c||r!=u&&(n(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},560945:(e,t,r)=>{e.exports=r(92940).shallowClone},563294:(e,t,r)=>{var i=r(578887),n=r(658369),s=r(636763),o=i.TypeError;e.exports=function(e){if(n(e))return e;throw o(s(e)+" is not a function")}},568723:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.DEBOUNCE_TIME=1e3,this.cache={},this.storeApiResponse=function(t,r,i){void 0===t&&(t=""),void 0===r&&(r=""),e.cacheApiResponse(t,r,i)}}return e.prototype.getCachedApiResponse=function(e,t){void 0===t&&(t="");var r="string"==typeof t?t:JSON.stringify(t),i=this.cache[e];if(!i)return null;var n=i[r];return n?n.data:null},e.prototype.cacheApiResponse=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t="");var n=this.cache[e];n||(n={},this.cache[e]=n);var s=this.createClearCachedDataTimer(e,t);n[t]={timerId:s,data:r({},i)}},e.prototype.createClearCachedDataTimer=function(e,t){var r=this;return setTimeout((function(){var i=r.cache[e]||{},n=i[t];n&&n&&n.timerId&&(clearTimeout(n.timerId),delete i[t])}),this.DEBOUNCE_TIME)},e}();t.default=new i},573451:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=0,n="__object_id__";function s(e){if(!e||"number"==typeof e||"string"==typeof e)return e;if(!Object.prototype.hasOwnProperty.call(e,n)){var t="_"+ ++i;return Object.defineProperty(e,n,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}return e[n]}s.set=function(e,t){Object.defineProperty(e,n,{enumerable:!1,configurable:!1,writable:!1,value:t})};const o=s},578887:(e,t,r)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i(window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},579764:(e,t,r)=>{var i=r(366740),n=0,s=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++n+s,36)}},586564:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i=new class{constructor(){this.userAgent=null}get _userAgent(){return this.userAgent?this.userAgent:window.navigator.userAgent}_version(e){const t=this._userAgent.match(e);if(t&&t.length>1){const e=parseInt(t[1],10);if(t.length>2){return{major:e,minor:parseInt(t[2],10)}}return e}}get iOS(){return this._version(/(?:CPU iPhone|iPod|iPad; CPU) OS ([0-9]+)_([0-9]+)/)}get edge(){return this._version(/Edge\/([\d]+)\./)}get edgeChromium(){return this._version(/Edg\/([\d]+)\./)}get android(){return/Android|Silk/.test(this._userAgent)}get silk(){return/Silk/.test(this._userAgent)}get ie(){return/MSIE|Trident/.test(this._userAgent)}get mobile(){return/Mobile|Android/i.test(this._userAgent)}get win(){return/Windows/.test(this._userAgent)}get win32(){return this.win&&!/Win64|WOW64/.test(this._userAgent)}get mac(){return!this.silk&&/Macintosh/.test(this._userAgent)}get chromebook(){return/CrOS/.test(this._userAgent)}get chromebook32(){return this.chromebook&&/x86_32/.test(this._userAgent)}get chrome(){return this._version(/Chrome\/([\d]+)/i)}get safari(){if(/Safari/i.test(this._userAgent)&&!/(?:CriOS|Silk|Android)/i.test(this._userAgent))return this._version(/Version\/([\d]+)/)}get safariMajorMinor(){if(/Safari/i.test(this._userAgent)&&!/(?:CriOS|Silk|Android)/i.test(this._userAgent))return this._version(/Version\/([\d]+)\.([\d]+)/)}get firefox(){return this._version(/Firefox\/([\d]+)/)}get device(){return this.iOS?"iOS":this.android?"android":this.mac?"macOS":this.win||this.win32?"windows":this.chromebook||this.chromebook32?"chromeOS":"na"}get lrmEmbedded(){return/lightroom\-ios/.test(this._userAgent)}}},594993:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=[r(290617).A],n=1;const s={add(e){i.push(e),n=i.length},remove(e){var t=i.indexOf(e);-1!==t&&i.splice(t,1),n=i.length},filter(e,t){for(var r=0,s=n;r<s;++r){var o=i[r](e,t);if(o)return o.value}return t}}},595642:(e,t)=>{var r,i,n;i="undefined"!=typeof window?window:this,n=function(i,n){var s=[],o=s.slice,a=s.concat,l=s.push,u=s.indexOf,c={},d=c.toString,h=c.hasOwnProperty,p={},f=i.document,g="2.1.3",m=function(e,t){return new m.fn.init(e,t)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,b=/-([\da-z])/gi,_=function(e,t){return t.toUpperCase()};function A(e){var t=e.length,r=m.type(e);return"function"!==r&&!m.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}m.fn=m.prototype={jquery:g,constructor:m,selector:"",length:0,toArray:function(){return o.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:o.call(this)},pushStack:function(e){var t=m.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return m.each(this,e,t)},map:function(e){return this.pushStack(m.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:l,sort:s.sort,splice:s.splice},m.extend=m.fn.extend=function(){var e,t,r,i,n,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||m.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=o[t],o!==(i=e[t])&&(u&&i&&(m.isPlainObject(i)||(n=m.isArray(i)))?(n?(n=!1,s=r&&m.isArray(r)?r:[]):s=r&&m.isPlainObject(r)?r:{},o[t]=m.extend(u,s,i)):void 0!==i&&(o[t]=i));return o},m.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===m.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!m.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return!("object"!==m.type(e)||e.nodeType||m.isWindow(e)||e.constructor&&!h.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[d.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;(e=m.trim(e))&&(1===e.indexOf("use strict")?((t=f.createElement("script")).text=e,f.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(v,"ms-").replace(b,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i=0,n=e.length,s=A(e);if(r){if(s)for(;i<n&&!1!==t.apply(e[i],r);i++);else for(i in e)if(!1===t.apply(e[i],r))break}else if(s)for(;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(y,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(A(Object(e))?m.merge(r,"string"==typeof e?[e]:e):l.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:u.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,s=e.length,o=!r;n<s;n++)!t(e[n],n)!==o&&i.push(e[n]);return i},map:function(e,t,r){var i,n=0,s=e.length,o=[];if(A(e))for(;n<s;n++)null!=(i=t(e[n],n,r))&&o.push(i);else for(n in e)null!=(i=t(e[n],n,r))&&o.push(i);return a.apply([],o)},guid:1,proxy:function(e,t){var r,i,n;if("string"==typeof t&&(r=e[t],t=e,e=r),m.isFunction(e))return i=o.call(arguments,2),n=function(){return e.apply(t||this,i.concat(o.call(arguments)))},n.guid=e.guid=e.guid||m.guid++,n},now:Date.now,support:p}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){c["[object "+t+"]"]=t.toLowerCase()}));var w=function(e){var t,r,i,n,s,o,a,l,u,c,d,h,p,f,g,m,y,v,b,_="sizzle"+1*new Date,A=e.document,w=0,P=0,S=oe(),x=oe(),C=oe(),O=function(e,t){return e===t&&(d=!0),0},k=1<<31,T={}.hasOwnProperty,E=[],I=E.pop,D=E.push,R=E.push,j=E.slice,F=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",U=M.replace("w","w#"),$="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+L+"*\\]",z=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),J=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),q=new RegExp("^"+L+"*,"+L+"*"),V=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),B=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),W=new RegExp(z),G=new RegExp("^"+U+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,re=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ie=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ne=function(){h()};try{R.apply(E=j.call(A.childNodes),A.childNodes),E[A.childNodes.length].nodeType}catch(e){R={apply:E.length?function(e,t){D.apply(e,j.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}function se(e,t,i,n){var s,a,u,c,d,f,y,v,w,P;if((t?t.ownerDocument||t:A)!==p&&h(t),i=i||[],c=(t=t||p).nodeType,"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return i;if(!n&&g){if(11!==c&&(s=Z.exec(e)))if(u=s[1]){if(9===c){if(!(a=t.getElementById(u))||!a.parentNode)return i;if(a.id===u)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(u))&&b(t,a)&&a.id===u)return i.push(a),i}else{if(s[2])return R.apply(i,t.getElementsByTagName(e)),i;if((u=s[3])&&r.getElementsByClassName)return R.apply(i,t.getElementsByClassName(u)),i}if(r.qsa&&(!m||!m.test(e))){if(v=y=_,w=t,P=1!==c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(f=o(e),(y=t.getAttribute("id"))?v=y.replace(te,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",d=f.length;d--;)f[d]=v+me(f[d]);w=ee.test(e)&&fe(t.parentNode)||t,P=f.join(",")}if(P)try{return R.apply(i,w.querySelectorAll(P)),i}catch(e){}finally{y||t.removeAttribute("id")}}}return l(e.replace(J,"$1"),t,i,n)}function oe(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function ae(e){return e[_]=!0,e}function le(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var r=e.split("|"),n=e.length;n--;)i.attrHandle[r[n]]=t}function ce(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function pe(e){return ae((function(t){return t=+t,ae((function(r,i){for(var n,s=e([],r.length,t),o=s.length;o--;)r[n=s[o]]&&(r[n]=!(i[n]=r[n]))}))}))}function fe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=se.support={},s=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=se.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:A;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,f=o.documentElement,(n=o.defaultView)&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ne,!1):n.attachEvent&&n.attachEvent("onunload",ne)),g=!s(o),r.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=le((function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Q.test(o.getElementsByClassName),r.getById=le((function(e){return f.appendChild(e).id=_,!o.getElementsByName||!o.getElementsByName(_).length})),r.getById?(i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}},i.filter.ID=function(e){var t=e.replace(re,ie);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(re,ie);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,s=t.getElementsByTagName(e);if("*"===e){for(;r=s[n++];)1===r.nodeType&&i.push(r);return i}return s},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(g)return t.getElementsByClassName(e)},y=[],m=[],(r.qsa=Q.test(o.querySelectorAll))&&(le((function(e){f.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+N+")"),e.querySelectorAll("[id~="+_+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]")})),le((function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(r.matchesSelector=Q.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&le((function(e){r.disconnectedMatch=v.call(e,"div"),v.call(e,"[s!='']:x"),y.push("!=",z)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),t=Q.test(f.compareDocumentPosition),b=t||Q.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===o||e.ownerDocument===A&&b(A,e)?-1:t===o||t.ownerDocument===A&&b(A,t)?1:c?F(c,e)-F(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var r,i=0,n=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!n||!s)return e===o?-1:t===o?1:n?-1:s?1:c?F(c,e)-F(c,t):0;if(n===s)return ce(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;a[i]===l[i];)i++;return i?ce(a[i],l[i]):a[i]===A?-1:l[i]===A?1:0},o):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(B,"='$1']"),r.matchesSelector&&g&&(!y||!y.test(t))&&(!m||!m.test(t)))try{var i=v.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var n=i.attrHandle[t.toLowerCase()],s=n&&T.call(i.attrHandle,t.toLowerCase())?n(e,t,!g):void 0;return void 0!==s?s:r.attributes||!g?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],n=0,s=0;if(d=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(O),d){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return c=null,e},n=se.getText=function(e){var t,r="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)r+=n(t);return r},i=se.selectors={cacheLength:50,createPseudo:ae,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(re,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(re,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&W.test(r)&&(t=o(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(re,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i){var n=se.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n.replace(H," ")+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,l){var u,c,d,h,p,f,g=s!==o?"nextSibling":"previousSibling",m=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a;if(m){if(s){for(;g;){for(d=t;d=d[g];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&v){for(p=(u=(c=m[_]||(m[_]={}))[e]||[])[0]===w&&u[1],h=u[0]===w&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){c[e]=[w,p,h];break}}else if(v&&(u=(t[_]||(t[_]={}))[e])&&u[0]===w)h=u[1];else for(;(d=++p&&d&&d[g]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++h||(v&&((d[_]||(d[_]={}))[e]=[w,h]),d!==t)););return(h-=n)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return n[_]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ae((function(e,r){for(var i,s=n(e,t),o=s.length;o--;)e[i=F(e,s[o])]=!(r[i]=s[o])})):function(e){return n(e,0,r)}):n}},pseudos:{not:ae((function(e){var t=[],r=[],i=a(e.replace(J,"$1"));return i[_]?ae((function(e,t,r,n){for(var s,o=i(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,n,s){return t[0]=e,i(t,null,s,r),t[0]=null,!r.pop()}})),has:ae((function(e){return function(t){return se(e,t).length>0}})),contains:ae((function(e){return e=e.replace(re,ie),function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}})),lang:ae((function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(re,ie).toLowerCase(),function(t){var r;do{if(r=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe((function(){return[0]})),last:pe((function(e,t){return[t-1]})),eq:pe((function(e,t,r){return[r<0?r+t:r]})),even:pe((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:pe((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:pe((function(e,t,r){for(var i=r<0?r+t:r;--i>=0;)e.push(i);return e})),gt:pe((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=he(t);function ge(){}function me(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function ye(e,t,r){var i=t.dir,n=r&&"parentNode"===i,s=P++;return t.first?function(t,r,s){for(;t=t[i];)if(1===t.nodeType||n)return e(t,r,s)}:function(t,r,o){var a,l,u=[w,s];if(o){for(;t=t[i];)if((1===t.nodeType||n)&&e(t,r,o))return!0}else for(;t=t[i];)if(1===t.nodeType||n){if((a=(l=t[_]||(t[_]={}))[i])&&a[0]===w&&a[1]===s)return u[2]=a[2];if(l[i]=u,u[2]=e(t,r,o))return!0}}}function ve(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function be(e,t,r,i,n){for(var s,o=[],a=0,l=e.length,u=null!=t;a<l;a++)(s=e[a])&&(r&&!r(s,i,n)||(o.push(s),u&&t.push(a)));return o}function _e(e,t,r,i,n,s){return i&&!i[_]&&(i=_e(i)),n&&!n[_]&&(n=_e(n,s)),ae((function(s,o,a,l){var u,c,d,h=[],p=[],f=o.length,g=s||function(e,t,r){for(var i=0,n=t.length;i<n;i++)se(e,t[i],r);return r}(t||"*",a.nodeType?[a]:a,[]),m=!e||!s&&t?g:be(g,h,e,a,l),y=r?n||(s?e:f||i)?[]:o:m;if(r&&r(m,y,a,l),i)for(u=be(y,p),i(u,[],a,l),c=u.length;c--;)(d=u[c])&&(y[p[c]]=!(m[p[c]]=d));if(s){if(n||e){if(n){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(m[c]=d);n(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=n?F(s,d):h[c])>-1&&(s[u]=!(o[u]=d))}}else y=be(y===o?y.splice(f,y.length):y),n?n(null,o,y,l):R.apply(o,y)}))}function Ae(e){for(var t,r,n,s=e.length,o=i.relative[e[0].type],a=o||i.relative[" "],l=o?1:0,c=ye((function(e){return e===t}),a,!0),d=ye((function(e){return F(t,e)>-1}),a,!0),h=[function(e,r,i){var n=!o&&(i||r!==u)||((t=r).nodeType?c(e,r,i):d(e,r,i));return t=null,n}];l<s;l++)if(r=i.relative[e[l].type])h=[ye(ve(h),r)];else{if((r=i.filter[e[l].type].apply(null,e[l].matches))[_]){for(n=++l;n<s&&!i.relative[e[n].type];n++);return _e(l>1&&ve(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(J,"$1"),r,l<n&&Ae(e.slice(l,n)),n<s&&Ae(e=e.slice(n)),n<s&&me(e))}h.push(r)}return ve(h)}return ge.prototype=i.filters=i.pseudos,i.setFilters=new ge,o=se.tokenize=function(e,t){var r,n,s,o,a,l,u,c=x[e+" "];if(c)return t?0:c.slice(0);for(a=e,l=[],u=i.preFilter;a;){for(o in r&&!(n=q.exec(a))||(n&&(a=a.slice(n[0].length)||a),l.push(s=[])),r=!1,(n=V.exec(a))&&(r=n.shift(),s.push({value:r,type:n[0].replace(J," ")}),a=a.slice(r.length)),i.filter)!(n=X[o].exec(a))||u[o]&&!(n=u[o](n))||(r=n.shift(),s.push({value:r,type:o,matches:n}),a=a.slice(r.length));if(!r)break}return t?a.length:a?se.error(e):x(e,l).slice(0)},a=se.compile=function(e,t){var r,n=[],s=[],a=C[e+" "];if(!a){for(t||(t=o(e)),r=t.length;r--;)(a=Ae(t[r]))[_]?n.push(a):s.push(a);a=C(e,function(e,t){var r=t.length>0,n=e.length>0,s=function(s,o,a,l,c){var d,h,f,g=0,m="0",y=s&&[],v=[],b=u,_=s||n&&i.find.TAG("*",c),A=w+=null==b?1:Math.random()||.1,P=_.length;for(c&&(u=o!==p&&o);m!==P&&null!=(d=_[m]);m++){if(n&&d){for(h=0;f=e[h++];)if(f(d,o,a)){l.push(d);break}c&&(w=A)}r&&((d=!f&&d)&&g--,s&&y.push(d))}if(g+=m,r&&m!==g){for(h=0;f=t[h++];)f(y,v,o,a);if(s){if(g>0)for(;m--;)y[m]||v[m]||(v[m]=I.call(l));v=be(v)}R.apply(l,v),c&&!s&&v.length>0&&g+t.length>1&&se.uniqueSort(l)}return c&&(w=A,u=b),y};return r?ae(s):s}(s,n)),a.selector=e}return a},l=se.select=function(e,t,n,s){var l,u,c,d,h,p="function"==typeof e&&e,f=!s&&o(e=p.selector||e);if(n=n||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&r.getById&&9===t.nodeType&&g&&i.relative[u[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(re,ie),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(l=X.needsContext.test(e)?0:u.length;l--&&(c=u[l],!i.relative[d=c.type]);)if((h=i.find[d])&&(s=h(c.matches[0].replace(re,ie),ee.test(u[0].type)&&fe(t.parentNode)||t))){if(u.splice(l,1),!(e=s.length&&me(u)))return R.apply(n,s),n;break}}return(p||a(e,f))(s,t,!g,n,ee.test(e)&&fe(t.parentNode)||t),n},r.sortStable=_.split("").sort(O).join("")===_,r.detectDuplicates=!!d,h(),r.sortDetached=le((function(e){return 1&e.compareDocumentPosition(p.createElement("div"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ue(N,(function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),se}(i);m.find=w,m.expr=w.selectors,m.expr[":"]=m.expr.pseudos,m.unique=w.uniqueSort,m.text=w.getText,m.isXMLDoc=w.isXML,m.contains=w.contains;var P=m.expr.match.needsContext,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,x=/^.[^:#\[\.,]*$/;function C(e,t,r){if(m.isFunction(t))return m.grep(e,(function(e,i){return!!t.call(e,i,e)!==r}));if(t.nodeType)return m.grep(e,(function(e){return e===t!==r}));if("string"==typeof t){if(x.test(t))return m.filter(t,e,r);t=m.filter(t,e)}return m.grep(e,(function(e){return u.call(t,e)>=0!==r}))}m.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?m.find.matchesSelector(i,e)?[i]:[]:m.find.matches(e,m.grep(t,(function(e){return 1===e.nodeType})))},m.fn.extend({find:function(e){var t,r=this.length,i=[],n=this;if("string"!=typeof e)return this.pushStack(m(e).filter((function(){for(t=0;t<r;t++)if(m.contains(n[t],this))return!0})));for(t=0;t<r;t++)m.find(e,n[t],i);return(i=this.pushStack(r>1?m.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&P.test(e)?m(e):e||[],!1).length}});var O,k=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(m.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:k.exec(e))||!r[1]&&t)return!t||t.jquery?(t||O).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof m?t[0]:t,m.merge(this,m.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),S.test(r[1])&&m.isPlainObject(t))for(r in t)m.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=f.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=f,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):m.isFunction(e)?void 0!==O.ready?O.ready(e):e(m):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),m.makeArray(e,this))}).prototype=m.fn,O=m(f);var T=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}m.extend({dir:function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&m(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}}),m.fn.extend({has:function(e){var t=m(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(m.contains(this,t[e]))return!0}))},closest:function(e,t){for(var r,i=0,n=this.length,s=[],o=P.test(e)||"string"!=typeof e?m(e,t||this.context):0;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&m.find.matchesSelector(r,e))){s.push(r);break}return this.pushStack(s.length>1?m.unique(s):s)},index:function(e){return e?"string"==typeof e?u.call(m(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(m.unique(m.merge(this.get(),m(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),m.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return m.dir(e,"parentNode")},parentsUntil:function(e,t,r){return m.dir(e,"parentNode",r)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return m.dir(e,"nextSibling")},prevAll:function(e){return m.dir(e,"previousSibling")},nextUntil:function(e,t,r){return m.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return m.dir(e,"previousSibling",r)},siblings:function(e){return m.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return m.sibling(e.firstChild)},contents:function(e){return e.contentDocument||m.merge([],e.childNodes)}},(function(e,t){m.fn[e]=function(r,i){var n=m.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=m.filter(i,n)),this.length>1&&(E[e]||m.unique(n),T.test(e)&&n.reverse()),this.pushStack(n)}}));var D,R=/\S+/g,j={};function F(){f.removeEventListener("DOMContentLoaded",F,!1),i.removeEventListener("load",F,!1),m.ready()}m.Callbacks=function(e){e="string"==typeof e?j[e]||function(e){var t=j[e]={};return m.each(e.match(R)||[],(function(e,r){t[r]=!0})),t}(e):m.extend({},e);var t,r,i,n,s,o,a=[],l=!e.once&&[],u=function(d){for(t=e.memory&&d,r=!0,o=n||0,n=0,s=a.length,i=!0;a&&o<s;o++)if(!1===a[o].apply(d[0],d[1])&&e.stopOnFalse){t=!1;break}i=!1,a&&(l?l.length&&u(l.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function t(r){m.each(r,(function(r,i){var n=m.type(i);"function"===n?e.unique&&c.has(i)||a.push(i):i&&i.length&&"string"!==n&&t(i)}))}(arguments),i?s=a.length:t&&(n=r,u(t))}return this},remove:function(){return a&&m.each(arguments,(function(e,t){for(var r;(r=m.inArray(t,a,r))>-1;)a.splice(r,1),i&&(r<=s&&s--,r<=o&&o--)})),this},has:function(e){return e?m.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],s=0,this},disable:function(){return a=l=t=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,t||c.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!a||r&&!l||(t=[e,(t=t||[]).slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return m.Deferred((function(r){m.each(t,(function(t,s){var o=m.isFunction(e[t])&&e[t];n[s[1]]((function(){var e=o&&o.apply(this,arguments);e&&m.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[s[0]+"With"](this===i?r.promise():this,o?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?m.extend(e,i):i}},n={};return i.pipe=i.then,m.each(t,(function(e,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add((function(){r=a}),t[1^e][2].disable,t[2][2].lock),n[s[0]]=function(){return n[s[0]+"With"](this===n?i:this,arguments),this},n[s[0]+"With"]=o.fireWith})),i.promise(n),e&&e.call(n,n),n},when:function(e){var t,r,i,n=0,s=o.call(arguments),a=s.length,l=1!==a||e&&m.isFunction(e.promise)?a:0,u=1===l?e:m.Deferred(),c=function(e,r,i){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,i===t?u.notifyWith(r,i):--l||u.resolveWith(r,i)}};if(a>1)for(t=new Array(a),r=new Array(a),i=new Array(a);n<a;n++)s[n]&&m.isFunction(s[n].promise)?s[n].promise().done(c(n,i,s)).fail(u.reject).progress(c(n,r,t)):--l;return l||u.resolveWith(i,s),u.promise()}}),m.fn.ready=function(e){return m.ready.promise().done(e),this},m.extend({isReady:!1,readyWait:1,holdReady:function(e){e?m.readyWait++:m.ready(!0)},ready:function(e){(!0===e?--m.readyWait:m.isReady)||(m.isReady=!0,!0!==e&&--m.readyWait>0||(D.resolveWith(f,[m]),m.fn.triggerHandler&&(m(f).triggerHandler("ready"),m(f).off("ready"))))}}),m.ready.promise=function(e){return D||(D=m.Deferred(),"complete"===f.readyState?setTimeout(m.ready):(f.addEventListener("DOMContentLoaded",F,!1),i.addEventListener("load",F,!1))),D.promise(e)},m.ready.promise();var N=m.access=function(e,t,r,i,n,s,o){var a=0,l=e.length,u=null==r;if("object"===m.type(r))for(a in n=!0,r)m.access(e,t,a,r[a],!0,s,o);else if(void 0!==i&&(n=!0,m.isFunction(i)||(o=!0),u&&(o?(t.call(e,i),t=null):(u=t,t=function(e,t,r){return u.call(m(e),r)})),t))for(;a<l;a++)t(e[a],r,o?i:i.call(e[a],a,t(e[a],r)));return n?e:u?t.call(e):l?t(e[0],r):s};function L(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=m.expando+L.uid++}m.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},L.uid=1,L.accepts=m.acceptData,L.prototype={key:function(e){if(!L.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=L.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,m.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,n=this.key(e),s=this.cache[n];if("string"==typeof t)s[t]=r;else if(m.isEmptyObject(s))m.extend(this.cache[n],t);else for(i in t)s[i]=t[i];return s},get:function(e,t){var r=this.cache[this.key(e)];return void 0===t?r:r[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?void 0!==(i=this.get(e,t))?i:this.get(e,m.camelCase(t)):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,n,s=this.key(e),o=this.cache[s];if(void 0===t)this.cache[s]={};else{m.isArray(t)?i=t.concat(t.map(m.camelCase)):(n=m.camelCase(t),i=t in o?[t,n]:(i=n)in o?[i]:i.match(R)||[]),r=i.length;for(;r--;)delete o[i[r]]}},hasData:function(e){return!m.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var M=new L,U=new L,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/([A-Z])/g;function H(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(z,"-$1").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:$.test(r)?m.parseJSON(r):r)}catch(e){}U.set(e,t,r)}else r=void 0;return r}m.extend({hasData:function(e){return U.hasData(e)||M.hasData(e)},data:function(e,t,r){return U.access(e,t,r)},removeData:function(e,t){U.remove(e,t)},_data:function(e,t,r){return M.access(e,t,r)},_removeData:function(e,t){M.remove(e,t)}}),m.fn.extend({data:function(e,t){var r,i,n,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(n=U.get(s),1===s.nodeType&&!M.get(s,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&0===(i=o[r].name).indexOf("data-")&&(i=m.camelCase(i.slice(5)),H(s,i,n[i]));M.set(s,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each((function(){U.set(this,e)})):N(this,(function(t){var r,i=m.camelCase(e);if(s&&void 0===t)return void 0!==(r=U.get(s,e))||void 0!==(r=U.get(s,i))||void 0!==(r=H(s,i,void 0))?r:void 0;this.each((function(){var r=U.get(this,i);U.set(this,i,t),-1!==e.indexOf("-")&&void 0!==r&&U.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){U.remove(this,e)}))}}),m.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=M.get(e,t),r&&(!i||m.isArray(r)?i=M.access(e,t,m.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=m.queue(e,t),i=r.length,n=r.shift(),s=m._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete s.stop,n.call(e,(function(){m.dequeue(e,t)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return M.get(e,r)||M.access(e,r,{empty:m.Callbacks("once memory").add((function(){M.remove(e,[t+"queue",r])}))})}}),m.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?m.queue(this[0],e):void 0===t?this:this.each((function(){var r=m.queue(this,e,t);m._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&m.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){m.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=m.Deferred(),s=this,o=this.length,a=function(){--i||n.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=M.get(s[o],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),n.promise(t)}});var J,q,V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,B=["Top","Right","Bottom","Left"],W=function(e,t){return e=t||e,"none"===m.css(e,"display")||!m.contains(e.ownerDocument,e)},G=/^(?:checkbox|radio)$/i;J=f.createDocumentFragment().appendChild(f.createElement("div")),(q=f.createElement("input")).setAttribute("type","radio"),q.setAttribute("checked","checked"),q.setAttribute("name","t"),J.appendChild(q),p.checkClone=J.cloneNode(!0).cloneNode(!0).lastChild.checked,J.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!J.cloneNode(!0).lastChild.defaultValue;var X="undefined";p.focusinBubbles="onfocusin"in i;var K=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,Q=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;function ee(){return!0}function te(){return!1}function re(){try{return f.activeElement}catch(e){}}m.event={global:{},add:function(e,t,r,i,n){var s,o,a,l,u,c,d,h,p,f,g,y=M.get(e);if(y)for(r.handler&&(r=(s=r).handler,n=s.selector),r.guid||(r.guid=m.guid++),(l=y.events)||(l=y.events={}),(o=y.handle)||(o=y.handle=function(t){return typeof m!==X&&m.event.triggered!==t.type?m.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(R)||[""]).length;u--;)p=g=(a=Z.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=m.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,d=m.event.special[p]||{},c=m.extend({type:p,origType:g,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&m.expr.match.needsContext.test(n),namespace:f.join(".")},s),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,o)||e.addEventListener&&e.addEventListener(p,o,!1)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),n?h.splice(h.delegateCount++,0,c):h.push(c),m.event.global[p]=!0)},remove:function(e,t,r,i,n){var s,o,a,l,u,c,d,h,p,f,g,y=M.hasData(e)&&M.get(e);if(y&&(l=y.events)){for(u=(t=(t||"").match(R)||[""]).length;u--;)if(p=g=(a=Z.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=m.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)c=h[s],!n&&g!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(s,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,y.handle)||m.removeEvent(e,p,y.handle),delete l[p])}else for(p in l)m.event.remove(e,p+t[u],r,i,!0);m.isEmptyObject(l)&&(delete y.handle,M.remove(e,"events"))}},trigger:function(e,t,r,n){var s,o,a,l,u,c,d,p=[r||f],g=h.call(e,"type")?e.type:e,y=h.call(e,"namespace")?e.namespace.split("."):[];if(o=a=r=r||f,3!==r.nodeType&&8!==r.nodeType&&!Q.test(g+m.event.triggered)&&(g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[m.expando]?e:new m.Event(g,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=y.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:m.makeArray(t,[e]),d=m.event.special[g]||{},n||!d.trigger||!1!==d.trigger.apply(r,t))){if(!n&&!d.noBubble&&!m.isWindow(r)){for(l=d.delegateType||g,Q.test(l+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(r.ownerDocument||f)&&p.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)e.type=s>1?l:d.bindType||g,(c=(M.get(o,"events")||{})[e.type]&&M.get(o,"handle"))&&c.apply(o,t),(c=u&&o[u])&&c.apply&&m.acceptData(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=g,n||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!m.acceptData(r)||u&&m.isFunction(r[g])&&!m.isWindow(r)&&((a=r[u])&&(r[u]=null),m.event.triggered=g,r[g](),m.event.triggered=void 0,a&&(r[u]=a)),e.result}},dispatch:function(e){e=m.event.fix(e);var t,r,i,n,s,a,l=o.call(arguments),u=(M.get(this,"events")||{})[e.type]||[],c=m.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(a=m.event.handlers.call(this,e,u),t=0;(n=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,r=0;(s=n.handlers[r++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(s.namespace)||(e.handleObj=s,e.data=s.data,void 0!==(i=((m.event.special[s.origType]||{}).handle||s.handler).apply(n.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,n,s,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(i=[],r=0;r<a;r++)void 0===i[n=(s=t[r]).selector+" "]&&(i[n]=s.needsContext?m(n,this).index(l)>=0:m.find(n,this,null,[l]).length),i[n]&&i.push(s);i.length&&o.push({elem:l,handlers:i})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,i,n,s=t.button;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||f).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[m.expando])return e;var t,r,i,n=e.type,s=e,o=this.fixHooks[n];for(o||(this.fixHooks[n]=o=Y.test(n)?this.mouseHooks:K.test(n)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new m.Event(s),t=i.length;t--;)e[r=i[t]]=s[r];return e.target||(e.target=f),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==re()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===re()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&m.nodeName(this,"input"))return this.click(),!1},_default:function(e){return m.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var n=m.extend(new m.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?m.event.trigger(n,null,t):m.event.dispatch.call(t,n),n.isDefaultPrevented()&&r.preventDefault()}},m.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r,!1)},m.Event=function(e,t){if(!(this instanceof m.Event))return new m.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ee:te):this.type=e,t&&m.extend(this,t),this.timeStamp=e&&e.timeStamp||m.now(),this[m.expando]=!0},m.Event.prototype={isDefaultPrevented:te,isPropagationStopped:te,isImmediatePropagationStopped:te,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ee,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ee,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ee,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||m.contains(this,i))||(e.type=n.origType,r=n.handler.apply(this,arguments),e.type=t),r}}})),p.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){m.event.simulate(t,e.target,m.event.fix(e),!0)};m.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=M.access(i,t);n||i.addEventListener(e,r,!0),M.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=M.access(i,t)-1;n?M.access(i,t,n):(i.removeEventListener(e,r,!0),M.remove(i,t))}}})),m.fn.extend({on:function(e,t,r,i,n){var s,o;if("object"==typeof e){for(o in"string"!=typeof t&&(r=r||t,t=void 0),e)this.on(o,t,r,e[o],n);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),!1===i)i=te;else if(!i)return this;return 1===n&&(s=i,i=function(e){return m().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=m.guid++)),this.each((function(){m.event.add(this,e,i,r,t)}))},one:function(e,t,r,i){return this.on(e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,m(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=te),this.each((function(){m.event.remove(this,e,r,t)}))},trigger:function(e,t){return this.each((function(){m.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return m.event.trigger(e,t,r,!0)}});var ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ne=/<([\w:]+)/,se=/<|&#?\w+;/,oe=/<(?:script|style|link)/i,ae=/checked\s*(?:[^=]|=\s*.checked.)/i,le=/^$|\/(?:java|ecma)script/i,ue=/^true\/(.*)/,ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){return m.nodeName(e,"table")&&m.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function fe(e){var t=ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ge(e,t){for(var r=0,i=e.length;r<i;r++)M.set(e[r],"globalEval",!t||M.get(t[r],"globalEval"))}function me(e,t){var r,i,n,s,o,a,l,u;if(1===t.nodeType){if(M.hasData(e)&&(s=M.access(e),o=M.set(t,s),u=s.events))for(n in delete o.handle,o.events={},u)for(r=0,i=u[n].length;r<i;r++)m.event.add(t,n,u[n][r]);U.hasData(e)&&(a=U.access(e),l=m.extend({},a),U.set(t,l))}}function ye(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&m.nodeName(e,t)?m.merge([e],r):r}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td,m.extend({clone:function(e,t,r){var i,n,s,o,a,l,u,c=e.cloneNode(!0),d=m.contains(e.ownerDocument,e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||m.isXMLDoc(e)))for(o=ye(c),i=0,n=(s=ye(e)).length;i<n;i++)a=s[i],l=o[i],u=void 0,"input"===(u=l.nodeName.toLowerCase())&&G.test(a.type)?l.checked=a.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=a.defaultValue);if(t)if(r)for(s=s||ye(e),o=o||ye(c),i=0,n=s.length;i<n;i++)me(s[i],o[i]);else me(e,c);return(o=ye(c,"script")).length>0&&ge(o,!d&&ye(e,"script")),c},buildFragment:function(e,t,r,i){for(var n,s,o,a,l,u,c=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((n=e[h])||0===n)if("object"===m.type(n))m.merge(d,n.nodeType?[n]:n);else if(se.test(n)){for(s=s||c.appendChild(t.createElement("div")),o=(ne.exec(n)||["",""])[1].toLowerCase(),a=de[o]||de._default,s.innerHTML=a[1]+n.replace(ie,"<$1></$2>")+a[2],u=a[0];u--;)s=s.lastChild;m.merge(d,s.childNodes),(s=c.firstChild).textContent=""}else d.push(t.createTextNode(n));for(c.textContent="",h=0;n=d[h++];)if((!i||-1===m.inArray(n,i))&&(l=m.contains(n.ownerDocument,n),s=ye(c.appendChild(n),"script"),l&&ge(s),r))for(u=0;n=s[u++];)le.test(n.type||"")&&r.push(n);return c},cleanData:function(e){for(var t,r,i,n,s=m.event.special,o=0;void 0!==(r=e[o]);o++){if(m.acceptData(r)&&(n=r[M.expando])&&(t=M.cache[n])){if(t.events)for(i in t.events)s[i]?m.event.remove(r,i):m.removeEvent(r,i,t.handle);M.cache[n]&&delete M.cache[n]}delete U.cache[r[U.expando]]}}}),m.fn.extend({text:function(e){return N(this,(function(e){return void 0===e?m.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||he(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=he(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var r,i=e?m.filter(e,this):this,n=0;null!=(r=i[n]);n++)t||1!==r.nodeType||m.cleanData(ye(r)),r.parentNode&&(t&&m.contains(r.ownerDocument,r)&&ge(ye(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(m.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return m.clone(this,e,t)}))},html:function(e){return N(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!oe.test(e)&&!de[(ne.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ie,"<$1></$2>");try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(m.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,m.cleanData(ye(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=a.apply([],e);var r,i,n,s,o,l,u=0,c=this.length,d=this,h=c-1,f=e[0],g=m.isFunction(f);if(g||c>1&&"string"==typeof f&&!p.checkClone&&ae.test(f))return this.each((function(r){var i=d.eq(r);g&&(e[0]=f.call(this,r,i.html())),i.domManip(e,t)}));if(c&&(i=(r=m.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===r.childNodes.length&&(r=i),i)){for(s=(n=m.map(ye(r,"script"),pe)).length;u<c;u++)o=r,u!==h&&(o=m.clone(o,!0,!0),s&&m.merge(n,ye(o,"script"))),t.call(this[u],o,u);if(s)for(l=n[n.length-1].ownerDocument,m.map(n,fe),u=0;u<s;u++)o=n[u],le.test(o.type||"")&&!M.access(o,"globalEval")&&m.contains(l,o)&&(o.src?m._evalUrl&&m._evalUrl(o.src):m.globalEval(o.textContent.replace(ce,"")))}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){m.fn[e]=function(e){for(var r,i=[],n=m(e),s=n.length-1,o=0;o<=s;o++)r=o===s?this:this.clone(!0),m(n[o])[t](r),l.apply(i,r.get());return this.pushStack(i)}}));var ve,be={};function _e(e,t){var r,n=m(t.createElement(e)).appendTo(t.body),s=i.getDefaultComputedStyle&&(r=i.getDefaultComputedStyle(n[0]))?r.display:m.css(n[0],"display");return n.detach(),s}function Ae(e){var t=f,r=be[e];return r||("none"!==(r=_e(e,t))&&r||((t=(ve=(ve||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),r=_e(e,t),ve.detach()),be[e]=r),r}var we=/^margin/,Pe=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),Se=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):i.getComputedStyle(e,null)};function xe(e,t,r){var i,n,s,o,a=e.style;return(r=r||Se(e))&&(o=r.getPropertyValue(t)||r[t]),r&&(""!==o||m.contains(e.ownerDocument,e)||(o=m.style(e,t)),Pe.test(o)&&we.test(t)&&(i=a.width,n=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=r.width,a.width=i,a.minWidth=n,a.maxWidth=s)),void 0!==o?o+"":o}function Ce(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){var e,t,r=f.documentElement,n=f.createElement("div"),s=f.createElement("div");function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(n);var o=i.getComputedStyle(s,null);e="1%"!==o.top,t="4px"===o.width,r.removeChild(n)}s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===s.style.backgroundClip,n.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",n.appendChild(s),i.getComputedStyle&&m.extend(p,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(f.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(n),e=!parseFloat(i.getComputedStyle(t,null).marginRight),r.removeChild(n),s.removeChild(t),e}}))}(),m.swap=function(e,t,r,i){var n,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in n=r.apply(e,i||[]),t)e.style[s]=o[s];return n};var Oe=/^(none|table(?!-c[ea]).+)/,ke=new RegExp("^("+V+")(.*)$","i"),Te=new RegExp("^([+-])=("+V+")","i"),Ee={position:"absolute",visibility:"hidden",display:"block"},Ie={letterSpacing:"0",fontWeight:"400"},De=["Webkit","O","Moz","ms"];function Re(e,t){if(t in e)return t;for(var r=t[0].toUpperCase()+t.slice(1),i=t,n=De.length;n--;)if((t=De[n]+r)in e)return t;return i}function je(e,t,r){var i=ke.exec(t);return i?Math.max(0,i[1]-(r||0))+(i[2]||"px"):t}function Fe(e,t,r,i,n){for(var s=r===(i?"border":"content")?4:"width"===t?1:0,o=0;s<4;s+=2)"margin"===r&&(o+=m.css(e,r+B[s],!0,n)),i?("content"===r&&(o-=m.css(e,"padding"+B[s],!0,n)),"margin"!==r&&(o-=m.css(e,"border"+B[s]+"Width",!0,n))):(o+=m.css(e,"padding"+B[s],!0,n),"padding"!==r&&(o+=m.css(e,"border"+B[s]+"Width",!0,n)));return o}function Ne(e,t,r){var i=!0,n="width"===t?e.offsetWidth:e.offsetHeight,s=Se(e),o="border-box"===m.css(e,"boxSizing",!1,s);if(n<=0||null==n){if(((n=xe(e,t,s))<0||null==n)&&(n=e.style[t]),Pe.test(n))return n;i=o&&(p.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+Fe(e,t,r||(o?"border":"content"),i,s)+"px"}function Le(e,t){for(var r,i,n,s=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(s[o]=M.get(i,"olddisplay"),r=i.style.display,t?(s[o]||"none"!==r||(i.style.display=""),""===i.style.display&&W(i)&&(s[o]=M.access(i,"olddisplay",Ae(i.nodeName)))):(n=W(i),"none"===r&&n||M.set(i,"olddisplay",n?r:m.css(i,"display"))));for(o=0;o<a;o++)(i=e[o]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[o]||"":"none"));return e}function Me(e,t,r,i,n){return new Me.prototype.init(e,t,r,i,n)}m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=xe(e,"opacity");return""===r?"1":r}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,s,o,a=m.camelCase(t),l=e.style;if(t=m.cssProps[a]||(m.cssProps[a]=Re(l,a)),o=m.cssHooks[t]||m.cssHooks[a],void 0===r)return o&&"get"in o&&void 0!==(n=o.get(e,!1,i))?n:l[t];"string"==(s=typeof r)&&(n=Te.exec(r))&&(r=(n[1]+1)*n[2]+parseFloat(m.css(e,t)),s="number"),null!=r&&r==r&&("number"!==s||m.cssNumber[a]||(r+="px"),p.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,i))||(l[t]=r))}},css:function(e,t,r,i){var n,s,o,a=m.camelCase(t);return t=m.cssProps[a]||(m.cssProps[a]=Re(e.style,a)),(o=m.cssHooks[t]||m.cssHooks[a])&&"get"in o&&(n=o.get(e,!0,r)),void 0===n&&(n=xe(e,t,i)),"normal"===n&&t in Ie&&(n=Ie[t]),""===r||r?(s=parseFloat(n),!0===r||m.isNumeric(s)?s||0:n):n}}),m.each(["height","width"],(function(e,t){m.cssHooks[t]={get:function(e,r,i){if(r)return Oe.test(m.css(e,"display"))&&0===e.offsetWidth?m.swap(e,Ee,(function(){return Ne(e,t,i)})):Ne(e,t,i)},set:function(e,r,i){var n=i&&Se(e);return je(0,r,i?Fe(e,t,i,"border-box"===m.css(e,"boxSizing",!1,n),n):0)}}})),m.cssHooks.marginRight=Ce(p.reliableMarginRight,(function(e,t){if(t)return m.swap(e,{display:"inline-block"},xe,[e,"marginRight"])})),m.each({margin:"",padding:"",border:"Width"},(function(e,t){m.cssHooks[e+t]={expand:function(r){for(var i=0,n={},s="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+B[i]+t]=s[i]||s[i-2]||s[0];return n}},we.test(e)||(m.cssHooks[e+t].set=je)})),m.fn.extend({css:function(e,t){return N(this,(function(e,t,r){var i,n,s={},o=0;if(m.isArray(t)){for(i=Se(e),n=t.length;o<n;o++)s[t[o]]=m.css(e,t[o],!1,i);return s}return void 0!==r?m.style(e,t,r):m.css(e,t)}),e,t,arguments.length>1)},show:function(){return Le(this,!0)},hide:function(){return Le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){W(this)?m(this).show():m(this).hide()}))}}),m.Tween=Me,Me.prototype={constructor:Me,init:function(e,t,r,i,n,s){this.elem=e,this.prop=r,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(m.cssNumber[r]?"":"px")},cur:function(){var e=Me.propHooks[this.prop];return e&&e.get?e.get(this):Me.propHooks._default.get(this)},run:function(e){var t,r=Me.propHooks[this.prop];return this.options.duration?this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Me.propHooks._default.set(this),this}},Me.prototype.init.prototype=Me.prototype,Me.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=m.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){m.fx.step[e.prop]?m.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[m.cssProps[e.prop]]||m.cssHooks[e.prop])?m.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Me.propHooks.scrollTop=Me.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},m.fx=Me.prototype.init,m.fx.step={};var Ue,$e,ze=/^(?:toggle|show|hide)$/,He=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),Je=/queueHooks$/,qe=[function(e,t,r){var i,n,s,o,a,l,u,c=this,d={},h=e.style,p=e.nodeType&&W(e),f=M.get(e,"fxshow");for(i in r.queue||(null==(a=m._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always((function(){c.always((function(){a.unqueued--,m.queue(e,"fx").length||a.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(u=m.css(e,"display"))?M.get(e,"olddisplay")||Ae(e.nodeName):u)&&"none"===m.css(e,"float")&&(h.display="inline-block")),r.overflow&&(h.overflow="hidden",c.always((function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]}))),t)if(n=t[i],ze.exec(n)){if(delete t[i],s=s||"toggle"===n,n===(p?"hide":"show")){if("show"!==n||!f||void 0===f[i])continue;p=!0}d[i]=f&&f[i]||m.style(e,i)}else u=void 0;if(m.isEmptyObject(d))"inline"===("none"===u?Ae(e.nodeName):u)&&(h.display=u);else for(i in f?"hidden"in f&&(p=f.hidden):f=M.access(e,"fxshow",{}),s&&(f.hidden=!p),p?m(e).show():c.done((function(){m(e).hide()})),c.done((function(){var t;for(t in M.remove(e,"fxshow"),d)m.style(e,t,d[t])})),d)o=Ge(p?f[i]:0,i,c),i in f||(f[i]=o.start,p&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}],Ve={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),n=He.exec(t),s=n&&n[3]||(m.cssNumber[e]?"":"px"),o=(m.cssNumber[e]||"px"!==s&&+i)&&He.exec(m.css(r.elem,e)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],n=n||[],o=+i||1;do{o/=a=a||".5",m.style(r.elem,e,o+s)}while(a!==(a=r.cur()/i)&&1!==a&&--l)}return n&&(o=r.start=+o||+i||0,r.unit=s,r.end=n[1]?o+(n[1]+1)*n[2]:+n[2]),r}]};function Be(){return setTimeout((function(){Ue=void 0})),Ue=m.now()}function We(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=B[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function Ge(e,t,r){for(var i,n=(Ve[t]||[]).concat(Ve["*"]),s=0,o=n.length;s<o;s++)if(i=n[s].call(r,t,e))return i}function Xe(e,t,r){var i,n,s=0,o=qe.length,a=m.Deferred().always((function(){delete l.elem})),l=function(){if(n)return!1;for(var t=Ue||Be(),r=Math.max(0,u.startTime+u.duration-t),i=1-(r/u.duration||0),s=0,o=u.tweens.length;s<o;s++)u.tweens[s].run(i);return a.notifyWith(e,[u,i,r]),i<1&&o?r:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:m.extend({},t),opts:m.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Ue||Be(),duration:r.duration,tweens:[],createTween:function(t,r){var i=m.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var r=0,i=t?u.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)u.tweens[r].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var r,i,n,s,o;for(r in e)if(n=t[i=m.camelCase(r)],s=e[r],m.isArray(s)&&(n=s[1],s=e[r]=s[0]),r!==i&&(e[i]=s,delete e[r]),(o=m.cssHooks[i])&&"expand"in o)for(r in s=o.expand(s),delete e[i],s)r in e||(e[r]=s[r],t[r]=n);else t[i]=n}(c,u.opts.specialEasing);s<o;s++)if(i=qe[s].call(u,e,c,u.opts))return i;return m.map(c,Ge,u),m.isFunction(u.opts.start)&&u.opts.start.call(e,u),m.fx.timer(m.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}m.Animation=m.extend(Xe,{tweener:function(e,t){m.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,n=e.length;i<n;i++)r=e[i],Ve[r]=Ve[r]||[],Ve[r].unshift(t)},prefilter:function(e,t){t?qe.unshift(e):qe.push(e)}}),m.speed=function(e,t,r){var i=e&&"object"==typeof e?m.extend({},e):{complete:r||!r&&t||m.isFunction(e)&&e,duration:e,easing:r&&t||t&&!m.isFunction(t)&&t};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(e,t,r,i){return this.filter(W).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=m.isEmptyObject(e),s=m.speed(t,r,i),o=function(){var t=Xe(this,m.extend({},e),s);(n||M.get(this,"finish"))&&t.stop(!0)};return o.finish=o,n||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",s=m.timers,o=M.get(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Je.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));!t&&r||m.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=M.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],s=m.timers,o=i?i.length:0;for(r.finish=!0,m.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),m.each(["toggle","show","hide"],(function(e,t){var r=m.fn[t];m.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(We(t,!0),e,i,n)}})),m.each({slideDown:We("show"),slideUp:We("hide"),slideToggle:We("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){m.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),m.timers=[],m.fx.tick=function(){var e,t=0,r=m.timers;for(Ue=m.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||m.fx.stop(),Ue=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){$e||($e=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval($e),$e=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(e,t){return e=m.fx&&m.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=setTimeout(t,e);r.stop=function(){clearTimeout(i)}}))},function(){var e=f.createElement("input"),t=f.createElement("select"),r=t.appendChild(f.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=r.selected,t.disabled=!0,p.optDisabled=!r.disabled,(e=f.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var Ke,Ye=m.expr.attrHandle;m.fn.extend({attr:function(e,t){return N(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){m.removeAttr(this,e)}))}}),m.extend({attr:function(e,t,r){var i,n,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===X?m.prop(e,t,r):(1===s&&m.isXMLDoc(e)||(t=t.toLowerCase(),i=m.attrHooks[t]||(m.expr.match.bool.test(t)?Ke:void 0)),void 0===r?i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=m.find.attr(e,t))?void 0:n:null!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):void m.removeAttr(e,t))},removeAttr:function(e,t){var r,i,n=0,s=t&&t.match(R);if(s&&1===e.nodeType)for(;r=s[n++];)i=m.propFix[r]||r,m.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&m.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Ke={set:function(e,t,r){return!1===t?m.removeAttr(e,r):e.setAttribute(r,r),r}},m.each(m.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=Ye[t]||m.find.attr;Ye[t]=function(e,t,i){var n,s;return i||(s=Ye[t],Ye[t]=n,n=null!=r(e,t,i)?t.toLowerCase():null,Ye[t]=s),n}}));var Qe=/^(?:input|select|textarea|button)$/i;m.fn.extend({prop:function(e,t){return N(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[m.propFix[e]||e]}))}}),m.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,r){var i,n,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return(1!==s||!m.isXMLDoc(e))&&(t=m.propFix[t]||t,n=m.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Qe.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),p.optSelected||(m.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){m.propFix[this.toLowerCase()]=this}));var Ze=/[\t\r\n\f]/g;m.fn.extend({addClass:function(e){var t,r,i,n,s,o,a="string"==typeof e&&e,l=0,u=this.length;if(m.isFunction(e))return this.each((function(t){m(this).addClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(R)||[];l<u;l++)if(i=1===(r=this[l]).nodeType&&(r.className?(" "+r.className+" ").replace(Ze," "):" ")){for(s=0;n=t[s++];)i.indexOf(" "+n+" ")<0&&(i+=n+" ");o=m.trim(i),r.className!==o&&(r.className=o)}return this},removeClass:function(e){var t,r,i,n,s,o,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(m.isFunction(e))return this.each((function(t){m(this).removeClass(e.call(this,t,this.className))}));if(a)for(t=(e||"").match(R)||[];l<u;l++)if(i=1===(r=this[l]).nodeType&&(r.className?(" "+r.className+" ").replace(Ze," "):"")){for(s=0;n=t[s++];)for(;i.indexOf(" "+n+" ")>=0;)i=i.replace(" "+n+" "," ");o=e?m.trim(i):"",r.className!==o&&(r.className=o)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):m.isFunction(e)?this.each((function(r){m(this).toggleClass(e.call(this,r,this.className,t),t)})):this.each((function(){if("string"===r)for(var t,i=0,n=m(this),s=e.match(R)||[];t=s[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else r!==X&&"boolean"!==r||(this.className&&M.set(this,"__className__",this.className),this.className=this.className||!1===e?"":M.get(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",r=0,i=this.length;r<i;r++)if(1===this[r].nodeType&&(" "+this[r].className+" ").replace(Ze," ").indexOf(t)>=0)return!0;return!1}});var et=/\r/g;m.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=m.isFunction(e),this.each((function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,m(this).val()):e)?n="":"number"==typeof n?n+="":m.isArray(n)&&(n=m.map(n,(function(e){return null==e?"":e+""}))),(t=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=m.valHooks[n.type]||m.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(et,""):null==r?"":r:void 0}}),m.extend({valHooks:{option:{get:function(e){var t=m.find.attr(e,"value");return null!=t?t:m.trim(m.text(e))}},select:{get:function(e){for(var t,r,i=e.options,n=e.selectedIndex,s="select-one"===e.type||n<0,o=s?null:[],a=s?n+1:i.length,l=n<0?a:s?n:0;l<a;l++)if(((r=i[l]).selected||l===n)&&(p.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!m.nodeName(r.parentNode,"optgroup"))){if(t=m(r).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var r,i,n=e.options,s=m.makeArray(t),o=n.length;o--;)((i=n[o]).selected=m.inArray(i.value,s)>=0)&&(r=!0);return r||(e.selectedIndex=-1),s}}}}),m.each(["radio","checkbox"],(function(){m.valHooks[this]={set:function(e,t){if(m.isArray(t))return e.checked=m.inArray(m(e).val(),t)>=0}},p.checkOn||(m.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){m.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}})),m.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}});var tt=m.now(),rt=/\?/;m.parseJSON=function(e){return JSON.parse(e+"")},m.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+e),t};var it=/#.*$/,nt=/([?&])_=[^&]*/,st=/^(.*?):[ \t]*([^\r\n]*)$/gm,ot=/^(?:GET|HEAD)$/,at=/^\/\//,lt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ut={},ct={},dt="*/".concat("*"),ht=i.location.href,pt=lt.exec(ht.toLowerCase())||[];function ft(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,s=t.toLowerCase().match(R)||[];if(m.isFunction(r))for(;i=s[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function gt(e,t,r,i){var n={},s=e===ct;function o(a){var l;return n[a]=!0,m.each(e[a]||[],(function(e,a){var u=a(t,r,i);return"string"!=typeof u||s||n[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)})),l}return o(t.dataTypes[0])||!n["*"]&&o("*")}function mt(e,t){var r,i,n=m.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&m.extend(!0,e,i),e}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ht,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":dt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?mt(mt(e,m.ajaxSettings),t):mt(m.ajaxSettings,e)},ajaxPrefilter:ft(ut),ajaxTransport:ft(ct),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,n,s,o,a,l,u,c=m.ajaxSetup({},t),d=c.context||c,h=c.context&&(d.nodeType||d.jquery)?m(d):m.event,p=m.Deferred(),f=m.Callbacks("once memory"),g=c.statusCode||{},y={},v={},b=0,_="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=st.exec(n);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?n:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return b||(e=v[r]=v[r]||e,y[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)g[t]=[g[t],e[t]];else A.always(e[A.status]);return this},abort:function(e){var t=e||_;return r&&r.abort(t),w(0,t),this}};if(p.promise(A).complete=f.add,A.success=A.done,A.error=A.fail,c.url=((e||c.url||ht)+"").replace(it,"").replace(at,pt[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=m.trim(c.dataType||"*").toLowerCase().match(R)||[""],null==c.crossDomain&&(a=lt.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pt[1]&&a[2]===pt[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pt[3]||("http:"===pt[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=m.param(c.data,c.traditional)),gt(ut,c,t,A),2===b)return A;for(u in(l=m.event&&c.global)&&0==m.active++&&m.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ot.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(rt.test(i)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=nt.test(i)?i.replace(nt,"$1_="+tt++):i+(rt.test(i)?"&":"?")+"_="+tt++)),c.ifModified&&(m.lastModified[i]&&A.setRequestHeader("If-Modified-Since",m.lastModified[i]),m.etag[i]&&A.setRequestHeader("If-None-Match",m.etag[i])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&A.setRequestHeader("Content-Type",c.contentType),A.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+dt+"; q=0.01":""):c.accepts["*"]),c.headers)A.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(d,A,c)||2===b))return A.abort();for(u in _="abort",{success:1,error:1,complete:1})A[u](c[u]);if(r=gt(ct,c,t,A)){A.readyState=1,l&&h.trigger("ajaxSend",[A,c]),c.async&&c.timeout>0&&(o=setTimeout((function(){A.abort("timeout")}),c.timeout));try{b=1,r.send(y,w)}catch(e){if(!(b<2))throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,s,a){var u,y,v,_,w,P=t;2!==b&&(b=2,o&&clearTimeout(o),r=void 0,n=a||"",A.readyState=e>0?4:0,u=e>=200&&e<300||304===e,s&&(_=function(e,t,r){for(var i,n,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in a)if(a[n]&&a[n].test(i)){l.unshift(n);break}if(l[0]in r)s=l[0];else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){s=n;break}o||(o=n)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),r[s]}(c,A,s)),_=function(e,t,r,i){var n,s,o,a,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(r[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=u[l+" "+s]||u["* "+s]))for(n in u)if((a=n.split(" "))[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){!0===o?o=u[n]:!0!==u[n]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(c,_,A,u),u?(c.ifModified&&((w=A.getResponseHeader("Last-Modified"))&&(m.lastModified[i]=w),(w=A.getResponseHeader("etag"))&&(m.etag[i]=w)),204===e||"HEAD"===c.type?P="nocontent":304===e?P="notmodified":(P=_.state,y=_.data,u=!(v=_.error))):(v=P,!e&&P||(P="error",e<0&&(e=0))),A.status=e,A.statusText=(t||P)+"",u?p.resolveWith(d,[y,P,A]):p.rejectWith(d,[A,P,v]),A.statusCode(g),g=void 0,l&&h.trigger(u?"ajaxSuccess":"ajaxError",[A,c,u?y:v]),f.fireWith(d,[A,P]),l&&(h.trigger("ajaxComplete",[A,c]),--m.active||m.event.trigger("ajaxStop")))}return A},getJSON:function(e,t,r){return m.get(e,t,r,"json")},getScript:function(e,t){return m.get(e,void 0,t,"script")}}),m.each(["get","post"],(function(e,t){m[t]=function(e,r,i,n){return m.isFunction(r)&&(n=n||i,i=r,r=void 0),m.ajax({url:e,type:t,dataType:n,data:r,success:i})}})),m._evalUrl=function(e){return m.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},m.fn.extend({wrapAll:function(e){var t;return m.isFunction(e)?this.each((function(t){m(this).wrapAll(e.call(this,t))})):(this[0]&&(t=m(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return m.isFunction(e)?this.each((function(t){m(this).wrapInner(e.call(this,t))})):this.each((function(){var t=m(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=m.isFunction(e);return this.each((function(r){m(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(){return this.parent().each((function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)})).end()}}),m.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},m.expr.filters.visible=function(e){return!m.expr.filters.hidden(e)};var yt=/%20/g,vt=/\[\]$/,bt=/\r?\n/g,_t=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function wt(e,t,r,i){var n;if(m.isArray(t))m.each(t,(function(t,n){r||vt.test(e)?i(e,n):wt(e+"["+("object"==typeof n?t:"")+"]",n,r,i)}));else if(r||"object"!==m.type(t))i(e,t);else for(n in t)wt(e+"["+n+"]",t[n],r,i)}m.param=function(e,t){var r,i=[],n=function(e,t){t=m.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(e)||e.jquery&&!m.isPlainObject(e))m.each(e,(function(){n(this.name,this.value)}));else for(r in e)wt(r,e[r],t,n);return i.join("&").replace(yt,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=m.prop(this,"elements");return e?m.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!m(this).is(":disabled")&&At.test(this.nodeName)&&!_t.test(e)&&(this.checked||!G.test(e))})).map((function(e,t){var r=m(this).val();return null==r?null:m.isArray(r)?m.map(r,(function(e){return{name:t.name,value:e.replace(bt,"\r\n")}})):{name:t.name,value:r.replace(bt,"\r\n")}})).get()}}),m.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Pt=0,St={},xt={0:200,1223:204},Ct=m.ajaxSettings.xhr();i.attachEvent&&i.attachEvent("onunload",(function(){for(var e in St)St[e]()})),p.cors=!!Ct&&"withCredentials"in Ct,p.ajax=Ct=!!Ct,m.ajaxTransport((function(e){var t;if(p.cors||Ct&&!e.crossDomain)return{send:function(r,i){var n,s=e.xhr(),o=++Pt;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(n in e.xhrFields)s[n]=e.xhrFields[n];for(n in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(n,r[n]);t=function(e){return function(){t&&(delete St[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?i(s.status,s.statusText):i(xt[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=St[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return m.globalEval(e),e}}}),m.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),m.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain)return{send:function(i,n){t=m("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}),f.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Ot=[],kt=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||m.expando+"_"+tt++;return this[e]=!0,e}}),m.ajaxPrefilter("json jsonp",(function(e,t,r){var n,s,o,a=!1!==e.jsonp&&(kt.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=m.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(kt,"$1"+n):!1!==e.jsonp&&(e.url+=(rt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||m.error(n+" was not called"),o[0]},e.dataTypes[0]="json",s=i[n],i[n]=function(){o=arguments},r.always((function(){i[n]=s,e[n]&&(e.jsonpCallback=t.jsonpCallback,Ot.push(n)),o&&m.isFunction(s)&&s(o[0]),o=s=void 0})),"script"})),m.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||f;var i=S.exec(e),n=!r&&[];return i?[t.createElement(i[1])]:(i=m.buildFragment([e],t,n),n&&n.length&&m(n).remove(),m.merge([],i.childNodes))};var Tt=m.fn.load;m.fn.load=function(e,t,r){if("string"!=typeof e&&Tt)return Tt.apply(this,arguments);var i,n,s,o=this,a=e.indexOf(" ");return a>=0&&(i=m.trim(e.slice(a)),e=e.slice(0,a)),m.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),o.length>0&&m.ajax({url:e,type:n,dataType:"html",data:t}).done((function(e){s=arguments,o.html(i?m("<div>").append(m.parseHTML(e)).find(i):e)})).complete(r&&function(e,t){o.each(r,s||[e.responseText,t,e])}),this},m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){m.fn[t]=function(e){return this.on(t,e)}})),m.expr.filters.animated=function(e){return m.grep(m.timers,(function(t){return e===t.elem})).length};var Et=i.document.documentElement;function It(e){return m.isWindow(e)?e:9===e.nodeType&&e.defaultView}m.offset={setOffset:function(e,t,r){var i,n,s,o,a,l,u=m.css(e,"position"),c=m(e),d={};"static"===u&&(e.style.position="relative"),a=c.offset(),s=m.css(e,"top"),l=m.css(e,"left"),("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1?(o=(i=c.position()).top,n=i.left):(o=parseFloat(s)||0,n=parseFloat(l)||0),m.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(d.top=t.top-a.top+o),null!=t.left&&(d.left=t.left-a.left+n),"using"in t?t.using.call(e,d):c.css(d)}},m.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){m.offset.setOffset(this,e,t)}));var t,r,i=this[0],n={top:0,left:0},s=i&&i.ownerDocument;return s?(t=s.documentElement,m.contains(t,i)?(typeof i.getBoundingClientRect!==X&&(n=i.getBoundingClientRect()),r=It(s),{top:n.top+r.pageYOffset-t.clientTop,left:n.left+r.pageXOffset-t.clientLeft}):n):void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===m.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),m.nodeName(e[0],"html")||(i=e.offset()),i.top+=m.css(e[0],"borderTopWidth",!0),i.left+=m.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-m.css(r,"marginTop",!0),left:t.left-i.left-m.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||Et;e&&!m.nodeName(e,"html")&&"static"===m.css(e,"position");)e=e.offsetParent;return e||Et}))}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;m.fn[e]=function(n){return N(this,(function(e,n,s){var o=It(e);if(void 0===s)return o?o[t]:e[n];o?o.scrollTo(r?i.pageXOffset:s,r?s:i.pageYOffset):e[n]=s}),e,n,arguments.length,null)}})),m.each(["top","left"],(function(e,t){m.cssHooks[t]=Ce(p.pixelPosition,(function(e,r){if(r)return r=xe(e,t),Pe.test(r)?m(e).position()[t]+"px":r}))})),m.each({Height:"height",Width:"width"},(function(e,t){m.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,i){m.fn[i]=function(i,n){var s=arguments.length&&(r||"boolean"!=typeof i),o=r||(!0===i||!0===n?"margin":"border");return N(this,(function(t,r,i){var n;return m.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===i?m.css(t,r,o):m.style(t,r,i,o)}),t,s?i:void 0,s,null)}}))})),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r);var Dt=i.jQuery,Rt=i.$;return m.noConflict=function(e){return i.$===m&&(i.$=Rt),e&&i.jQuery===m&&(i.jQuery=Dt),m},typeof n===X&&(i.jQuery=i.$=m),m},"object"==typeof e.exports?e.exports=i.document?n(i,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(i)},597818:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(217509)),s=i(r(388271)),o=function(){this.probe=function(e,t,r){if(void 0===r&&(r=2e3),!e||0===e.length)return Promise.resolve([]);for(var i={"Content-Type":"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:0,"X-IMS-CLIENTID":t},o="/ims/cdsc_probe?"+n.default.uriEncodeData({client_id:t}),a=[],l=[],u=function(t){var n=e[t]+o;l.push(s.default.post(n,{},i,!1,r).then((function(e){return 200==e.status&&a.push(t)})).catch((function(){})))},c=0;c<e.length;c++)u(c);return Promise.all(l).then((function(){return a}))}};t.ThirdPartyProbingService=o},599363:(e,t,r)=>{var i=r(578887),n=r(178326),s=i.document,o=n(s)&&n(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},602551:(e,t,r)=>{var i=r(406227);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},609532:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,s,o=null;function a(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(!a.enabled)return;const s=a,o=Number(new Date),l=o-(r||o);s.diff=l,s.prev=r,s.curr=o,r=o,i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";u++;const n=t.formatters[r];if("function"==typeof n){const t=i[u];e=n.call(s,t),i.splice(u,1),u--}return e})),t.formatArgs.call(s,i);(s.log||t.log).apply(s,i)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=i,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function i(e,r){const i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(229895),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},610206:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i,n=r(135708),s=r(631811),o=r(750665);let a=(i=class extends o.A{constructor(e,t,r){super(),this.parent=e,this.name=t,this.priority=r}enqueue(){this.parent.push(this.run,this.priority)}register(e){e?this.parent.after.push(this.enqueue):this.enqueue()}},(0,n.A)(i.prototype,"enqueue",[s.A],Object.getOwnPropertyDescriptor(i.prototype,"enqueue"),i.prototype),i)},611546:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(865584);const n=i.A.performance&&i.A.performance.now?()=>performance.now():Date.now?()=>Date.now():()=>(new Date).getTime()},616391:e=>{"use strict";e.exports=RangeError},619766:(e,t,r)=>{"use strict";var i=r(697197),n=r(239293),s=r(254225)(),o=r(904919),a=r(512656),l=i("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,u=!0;if("length"in e&&o){var c=o(e,"length");c&&!c.configurable&&(i=!1),c&&!c.writable&&(u=!1)}return(i||u||!r)&&(s?n(e,"length",t,!0,!0):n(e,"length",t)),e}},621678:(e,t,r)=>{r(528510),r(317779),r(8534),r(864113),r(380190);const i=[Array,Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function n(e){return null==e}"undefined"!=typeof Uint8ClampedArray&&i.push(Uint8ClampedArray),e.exports=function e(t,r){if(t===r)return!0;if(n(t)||n(r))return!1;if(typeof t!=typeof r)return!1;if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if(t instanceof RegExp&&r instanceof RegExp)return t.toString()===r.toString();if(t instanceof ArrayBuffer&&r instanceof ArrayBuffer)return e(new Uint8Array(t),new Uint8Array(r));if(t instanceof Map&&r instanceof Map||t instanceof Set&&r instanceof Set)return e(Array.from(t),Array.from(r));if(function(e,t){return i.some((r=>e instanceof r&&t instanceof r))}(t,r)){const i=!Array.isArray(t);if(t.length!==r.length)return!1;for(let n=0,s=t.length;n<s;n++)if(i){if(t[n]!==r[n])return!1}else if(!e(t[n],r[n]))return!1;return!0}if("object"==typeof t&&"object"==typeof r){let i=Object.keys(t),n=Object.keys(r);return i.sort(),n.sort(),e(i,n)&&i.every((i=>e(t[i],r[i])))}return!1}},622733:(e,t,r)=>{"use strict";r.d(t,{A:()=>b,zt:()=>v});var i=r(529444),n=r(135708),s=r(830382),o=r(63944),a=r(355141),l=r(887852),u=r(712942),c=r(739506),d=r(891348);let h;if(window.ZString){var p,f,g,m;const e=window.ZString;e._callbacks||(e._callbacks=[],e._locale=e.locale,e._translations=e.translations,Object.defineProperty(e,"locale",{configurable:!0,enumerable:!0,get:()=>e._locale,set(t){if(t!==e._locale){e._locale=t;for(const r of e._callbacks)r.locale(t)}}}),Object.defineProperty(e,"translations",{configurable:!0,enumerable:!0,get:()=>e._translations,set(t){if(t!==e._translations){e._translations=t;for(const r of e._callbacks)r.translations(t)}}}));let t=(0,s.A)({prototype:e})(p=class extends c.A{})||p;f=class extends t{get locale(){return this._locale}set locale(t){e.locale=t}get translations(){return this._translations}set translations(t){e.translations=t}translate(){return u.A.recordEvent(this,"_translations"),u.A.recordEvent(this,"_locale"),super.translate(...arguments)}constructor(){super(),(0,i.A)(this,"_locale",g,this),(0,i.A)(this,"_translations",m,this),this._readyDeferred=new d.A,this._isReady=!1,this.watch((()=>this.locale),(e=>{null==e||this._isReady||(this._isReady=!0,this._readyDeferred.resolve())})),e._callbacks.push({locale:e=>{this._locale=e},translations:e=>{this._translations=e}})}get readyJP(){return this._readyDeferred.promise}get language_display_name(){return this.locale_hash[this.locale]}get locale_hash(){const e={};for(const t of l.supported){const r=l.display_names[t];r&&(e[t]=r)}return e}},g=(0,n.A)(f.prototype,"_locale",[a.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.locale}}),m=(0,n.A)(f.prototype,"_translations",[a.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.translations}}),(0,n.A)(f.prototype,"locale_hash",[o.A],Object.getOwnPropertyDescriptor(f.prototype,"locale_hash"),f.prototype),h=f}else h=r(394221).A;const y=new h;for(let[e,t]of Object.entries(l.urls))Object.defineProperty(y,e,{get(){const{locale:r}=this,i=l.adobecom_language_codes[r],n=i?`${i}/`:"",s=(5===r.length?r.split("-",2)[1]:r).toLowerCase(),o=l.go_url_country_code[r]?`_${l.go_url_country_code[r]}`:"";if("string"!=typeof t)if(t.locales)t=t.locales[r]||t.locales.default;else if(t.hostnames)t=t.hostnames[window.location.hostname]||t.hostnames.default;else{if(!t.environments||"undefined"==typeof env)throw e;t=t.environments[env]||t.environments.default}return t.replace("${adobecom_country_fragment}",n).replace("${locale}",r).replace("${country_code_downcase}",s).replace("${go_url_country_code}",o)}});const v=y.translate.bind(y),b=y},622831:(e,t,r)=>{"use strict";var i=r(378531);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},625291:(e,t,r)=>{var i=r(950176),n=r(732725),s=r(622831),o=r(406227),a=RegExp.prototype;i&&o((function(){return"sy"!==Object.getOwnPropertyDescriptor(a,"flags").get.call({dotAll:!0,sticky:!0})}))&&n.f(a,"flags",{configurable:!0,get:s})},626947:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},631811:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(157688);function n(e,t,r){const n=i.A.getInitialValue(r);if("function"!=typeof n)throw new Error(`@Bind can only be applied to a function. (property: ${t})`);delete r.value,delete r.writable,r.get=function(){if(e===this)return n;const r=n.bind(this);return Object.defineProperty(this,t,{configurable:!0,enumerable:!1,value:r}),r}}},633035:e=>{e.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},635562:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},636550:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=0;function n(e){return"__private_"+i+++"_"+e}},636763:(e,t,r)=>{var i=r(578887).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},643604:(e,t,r)=>{var i=r(753968),n=r(406227);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},647148:(e,t,r)=>{var i=r(366740),n=i({}.toString),s=i("".slice);e.exports=function(e){return s(n(e),8,-1)}},650404:function(e,t){"use strict";var r=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){this.client_id="",this.scope="",this.code="",this.state=null,this.code_verifier="",this.other=null;var t=e.code,i=e.state,n=e.client_id,s=e.scope,o=e.verifier,a=r(e,["code","state","client_id","scope","verifier"]);this.state=i,this.client_id=n,this.code=t,this.scope=s,this.code_verifier=o,this.other=a};t.AuthorizationCode=i},652896:(e,t,r)=>{"use strict";var i=r(376260);e.exports=Function.prototype.bind||i},656413:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let i=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if(window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(609532)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},656664:(e,t,r)=>{"use strict";var i=r(774020),n=r(985452),s=r(457081),o=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,h=s.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:h,formatter:s.formatters[h],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},f=function e(t,r,s,o,a,u,d,h,f,g,m,y,v,b,_){var A,w=t;if(_.has(t))throw new RangeError("Cyclic object value");if("function"==typeof d?w=d(r,w):w instanceof Date?w=g(w):"comma"===s&&l(w)&&(w=n.maybeMap(w,(function(e){return e instanceof Date?g(e):e}))),null===w){if(o)return u&&!v?u(r,p.encoder,b,"key",m):r;w=""}if("string"==typeof(A=w)||"number"==typeof A||"boolean"==typeof A||"symbol"==typeof A||"bigint"==typeof A||n.isBuffer(w))return u?[y(v?r:u(r,p.encoder,b,"key",m))+"="+y(u(w,p.encoder,b,"value",m))]:[y(r)+"="+y(String(w))];var P,S=[];if(void 0===w)return S;if("comma"===s&&l(w))P=[{value:w.length>0?w.join(",")||null:void 0}];else if(l(d))P=d;else{var x=Object.keys(w);P=h?x.sort(h):x}for(var C=0;C<P.length;++C){var O=P[C],k="object"==typeof O&&void 0!==O.value?O.value:w[O];if(!a||null!==k){var T=l(w)?"function"==typeof s?s(r,O):r:r+(f?"."+O:"["+O+"]");_.set(t,!0);var E=i();c(S,e(k,T,s,o,a,u,d,h,f,g,m,y,v,b,E))}}return S};e.exports=function(e,t){var r,n=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=s.default;if(void 0!==e.format){if(!o.call(s.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=s.formatters[r],n=p.filter;return("function"==typeof e.filter||l(e.filter))&&(n=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:n,format:r,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?n=(0,u.filter)("",n):l(u.filter)&&(r=u.filter);var d,h=[];if("object"!=typeof n||null===n)return"";d=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var g=a[d];r||(r=Object.keys(n)),u.sort&&r.sort(u.sort);for(var m=i(),y=0;y<r.length;++y){var v=r[y];u.skipNulls&&null===n[v]||c(h,f(n[v],v,g,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,m))}var b=h.join(u.delimiter),_=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),b.length>0?_+b:""}},658369:e=>{e.exports=function(e){return"function"==typeof e}},670734:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(766740);function n(e,t){void 0===t&&(t={});var r=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return void 0===t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(r,t.doNotParse))try{return JSON.parse(r)}catch(e){}return e}var s=r(301344);const o=function(){function e(e,t){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"==typeof e?i.q(e,t):"object"==typeof e&&null!==e?e:{}}(e,t),new Promise((function(){r.HAS_DOCUMENT_COOKIE=!0})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=i.q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,r){return void 0===t&&(t={}),this._updateBrowserValues(r),n(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var r={};for(var i in this.cookies)r[i]=n(this.cookies[i],e);return r},e.prototype.set=function(e,t,r){var n;"object"==typeof t&&(t=JSON.stringify(t)),this.cookies=s({},this.cookies,((n={})[e]=t,n)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.l(e,t,r)),this._emitChange({name:e,value:t,options:r})},e.prototype.remove=function(e,t){var r=t=s({},t,{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=s({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=i.l(e,"",r)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}()},673468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(334753),n=function(e){this.message=null,this.errorType=i.IErrorType.PROFILE_EXCEPTION,this.message=e};t.ProfileException=n},678296:e=>{function t(e,r,i){if(r===e);else if(Array.isArray(r)&&Array.isArray(e))for(let n=0,s=r.length;n<s;n++)e[n]=t(e[n],r[n],i);else if("object"==typeof r&&"object"==typeof e)for(let n in r){let s=i&&i(e[n],r[n],n);void 0===s&&(s=t(e[n],r[n],i)),e[n]=s}else void 0===r&&void 0!==e||(e=r);return e}e.exports=function(e){const r=Array.prototype.slice.call(arguments,1);let i;"function"==typeof r[r.length-1]&&(i=r.pop());for(let n=0,s=r.length;n<s;n++)e=t(e,r[n],i);return e}},680898:e=>{function t(e,t){var r=e.toString();if(r.length<t){var i=[];i.length=t-r.length+1,r=i.join("0")+r}return r}function r(e,t){return Object.getOwnPropertyNames(t).forEach((function(i){if("object"==typeof t[i])"object"!=typeof e[i]&&(e[i]={}),r(e[i],t[i]);else{var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n)}})),e}function i(e,t,r){e.forEach((function(e){setTimeout((function(){e(t,r)}))}))}var n={prod:"cc-api-data.adobe.io",stage:"cc-api-data-stage.adobe.io",dev:"cc-api-data-dev.adobe.io"},s="/ingest",o={ENVIRONMENT:"prod",ALLOW_NO_TOKEN:!1,ANALYTICS_INGEST_TYPE:"dunamis",ANALYTICS_MAX_QUEUED_EVENTS:50,ANALYTICS_DEBOUNCE:1e4,ANALYTICS_API_KEY:null,ANALYTICS_X_PRODUCT:null,ANALYTICS_X_PRODUCT_LOCATION:void 0,ANALYTICS_PROJECT:null,ANALYTICS_USER_REGION:"UNKNOWN",TIMESTAMP_PROPERTY_NAME:"event.dts_end"},a=["ANALYTICS_API_KEY","ANALYTICS_X_PRODUCT","ANALYTICS_PROJECT"];function l(e,t){e=e||{},t=t||{};var i=e=>{throw this._log(e),new Error("ERROR: "+e)};this._queuedEvents=[],this._queuedCallbacks=[],this._lastSendTime=0,this._isEnabled=!1,this._dependencies=r({},e),e.getAccessToken&&"function"==typeof e.getAccessToken||i("Missing dependency: getAccessToken"),this._options={},Object.keys(o).forEach((e=>{this._options[e]=t[e]||o[e]})),a.forEach((e=>{this._options[e]||i("Missing option: "+e)})),"undefined"==typeof fetch&&i("Ingest requires fetch - if in a node environment, set 'global.fetch = require('node-fetch');'")}l.prototype._log=function(e){var t=this._dependencies.log;t&&t("Ingest :: "+e)},l.prototype._getAgent=function(e,t){this._dependencies.getAgent?this._dependencies.getAgent(e,t):t(null,{})},l.prototype._getAccessToken=function(e){this._dependencies.getAccessToken(e)},l.prototype._clearAccessToken=function(){this._dependencies.clearAccessToken&&this._dependencies.clearAccessToken()},l.prototype._getEnvironment=function(){return n[this._options.ENVIRONMENT]?this._options.ENVIRONMENT:"prod"},l.prototype._getAnalyticsHost=function(){return n[this._getEnvironment()]},l.prototype._formatTimestamp=function(e){var r=e.getFullYear(),i=t(e.getMonth()+1,2),n=t(e.getDate(),2),s=t(e.getHours(),2),o=t(e.getMinutes(),2),a=t(e.getSeconds(),2),l=t(e.getMilliseconds(),3),u=e.getTimezoneOffset(),c=u<0?"+":"-",d=Math.floor(Math.abs(u)/60),h=Math.abs(u)%60;return r+"-"+i+"-"+n+"T"+s+":"+o+":"+a+"."+l+(c+t(d,2)+t(h,2))},l.prototype._updateDebounce=function(e){var t=e&&(e["retry-after"]||e["Retry-After"]),r=0;if(t){var i;try{i=parseInt(t,10)}catch(e){}if(i)r=Math.max(0,i);else{var n=Date.parse(t);if(n){var s=(new Date).valueOf();r=Math.max(0,n-s)/1e3+Math.floor(10*Math.random())}}}this._options.ANALYTICS_DEBOUNCE=Math.max(1e3*r,this._options.ANALYTICS_DEBOUNCE)},l.prototype._queueEvent=function(e){this._queuedEvents.length>=this._options.ANALYTICS_MAX_QUEUED_EVENTS&&this._queuedEvents.shift(),this._queuedEvents.push(e)},l.prototype._requeueEvents=function(e){this._queuedEvents=e.concat(this._queuedEvents),this._queuedEvents=function(e,t){var r=e;if(e&&e.length>t&&t>0){var i=e.length-t;r=e.slice(i,e.length)}return r}(this._queuedEvents,this._options.ANALYTICS_MAX_QUEUED_EVENTS)},l.prototype._sendAnalytics=function(e,t,n){if(n=n||0,t&&this._queuedCallbacks.push(t),!this._isEnabled||0===this._queuedEvents.length){var o=this._queuedCallbacks;return this._queuedCallbacks=[],void(this._isEnabled?i(o,null,0):i(o,new Error("Analytics Disabled")))}var a=this._options.ANALYTICS_DEBOUNCE;if(e&&(a=0,clearTimeout(this._pendingSendAnalyticsTimeout),this._pendingSendAnalyticsTimeout=void 0),this._sendingEvents||this._pendingSendAnalyticsTimeout)e&&(this._fastFollow=!0);else{var l=(new Date).valueOf();if(l-this._lastSendTime<a)this._pendingSendAnalyticsTimeout=setTimeout((()=>{this._pendingSendAnalyticsTimeout=void 0,this._sendAnalytics()}),a);else{this._lastSendTime=l,this._sendingEvents=this._queuedEvents,this._sendingCallbacks=this._queuedCallbacks,this._queuedEvents=[],this._queuedCallbacks=[];var u,c=(u=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)})()+u()+"-"+u()+"-"+u()+"-"+u()+"-"+u()+u()+u(),d="["+c+"] ",h={events:this._sendingEvents},p=e=>{var t=this._queuedEvents?this._queuedEvents.length:0;if(this._sendingEvents){var r=this._sendingEvents.length;e?(this._requeueEvents(this._sendingEvents),this._log(d+"Error sending "+r+" events: "+e)):this._log(d+"Success sending "+r+" events: "+JSON.stringify(this._sendingEvents)),delete this._sendingEvents;var n=this._sendingCallbacks;delete this._sendingCallbacks,e?i(n,e):i(n,null,r)}t>0&&this._sendAnalytics(this._fastFollow),this._fastFollow=!1},f=(e,t)=>{if(this._updateDebounce(t),401===e&&0===n)return this._clearAccessToken(),this._requeueEvents(this._sendingEvents),delete this._sendingEvents,this._queuedCallbacks=this._sendingCallbacks.concat(this._queuedCallbacks),delete this._sendingCallbacks,this._log(d+"Access token is expired. Retry one more time."),void this._sendAnalytics(!0,void 0,n+1);200===e?p():p(new Error("Unexpected Response: "+e))};this._getAccessToken(((e,t)=>{if(e&&!this._options.ALLOW_NO_TOKEN)return void p(e);if(!(t&&0!==t.length||this._options.ALLOW_NO_TOKEN))return void p(new Error("No access token"));var i="https://"+this._getAnalyticsHost();this._log(d+"Sending analytics to "+i+s);const n={"x-api-key":this._options.ANALYTICS_API_KEY,"X-Product":this._options.ANALYTICS_X_PRODUCT,"User-Agent":this._options.ANALYTICS_USER_AGENT||this._options.ANALYTICS_API_KEY,"X-Request-Id":c,"Content-Type":"application/json"};t&&(n.Authorization="Bearer "+t),this._options.ANALYTICS_X_PRODUCT_LOCATION&&(n["X-Product-Location"]=this._options.ANALYTICS_X_PRODUCT_LOCATION),this._getAgent(i,((e,t)=>{const o={method:"POST",headers:n,body:JSON.stringify(h)};t&&t.agent?o.agent=t&&t.agent:r(o,t||{}),fetch(i+s,o).then((e=>{f(e.status,e.headers)}),p)}))}))}}},l.prototype.enable=function(e){this._isEnabled=e,e&&this._sendAnalytics(!0)},l.prototype.postEvent=function(e,t,r){var n=r||{},s="event.dts_start",o="event.coll_dts",a=n.TIMESTAMP_PROPERTY_NAME||this._options.TIMESTAMP_PROPERTY_NAME,l=n.ANALYTICS_PROJECT||this._options.ANALYTICS_PROJECT,u=n.ANALYTICS_INGEST_TYPE||this._options.ANALYTICS_INGEST_TYPE;e[o]&&e[o]instanceof Date&&(e[o]=this._formatTimestamp(e[o])),e[s]&&e[s]instanceof Date&&(e[s]=this._formatTimestamp(e[s])),e[a]||(e[a]=this._formatTimestamp(new Date)),e[a]instanceof Date&&(e[a]=this._formatTimestamp(e[a]));var c={time:e[a],project:l,environment:this._getEnvironment(),ingesttype:u,data:e};e.simulate?(this._log("event sim:"+JSON.stringify(c)),t&&i([t],null,0)):(this._queueEvent(c),this._sendAnalytics(!1,t))},l.prototype.flush=function(e,t){this._sendAnalytics(e,t)},e.exports=l},682826:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var i,n,s=r(529444),o=r(135708),a=r(355141),l=r(106256),u=r(520839),c=r.n(u);const d=new(i=class{constructor(){(0,s.A)(this,"features",n,this);const{features:e}=this;for(const t of c())e.add(t);{var t;const e=null!==(t=window.MidwayFeatures)&&void 0!==t?t:window.PageResources?.features.enabled_features;if(e)for(const[t,r]of Object.entries(e))this._override(t,r)}}is_enabled(e){return this.features.has(e)}all_enabled(){return Array.from(this.features)}prerelease_enabled(){return!0===window?.PageResources?.features.prerelease}prerelease_features(){return window?.PageResources?.features.prerelease_hash}cb_prerelease_enabled(){return!0===window?.PageResources?.features.cb_prerelease}cb_prerelease_features(){return window?.PageResources?.features.cb_prerelease_hash}freemium_mode_enabled(){return!0===window?.PageResources?.features.freemium_mode}freemium_mode_features(){return window?.PageResources?.features.freemium_mode_hash}_override(e,t){"string"!=typeof e||e.length<1||(t?this.features.add(e):this.features.delete(e))}},n=(0,o.A)(i.prototype,"features",[a.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l.A}}),i);window.Feature=d;const h=d},685139:(e,t,r)=>{var i=r(578887),n=r(162247),s=i.String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return s(e)}},685530:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});class i{}},686248:(e,t,r)=>{var i=r(121570);e.exports=function(e,t){for(var r=i(e),n=new t(r),s=0;s<r;s++)n[s]=e[r-s-1];return n}},696820:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var i=r(912977);class n{constructor(){this.attributes=[],i.A.addCollector(this)}setAttribute(e,t){console.log(`Analytics Set Atribute ${e}=${t}`),this.attributes[e]=t}noticeError(e){console.error("Analytics Error",e)}report(e,t){console.log("Analytics Action",e,Object.assign({},t,this.attributes))}reportTimed(e,t,r,i,n){console.log("Analytics Timing",e,i,Object.assign({},n,this.attributes))}reportApiCall(e,t){console.log("Analytics API Call",e,Object.assign({},t,this.attributes))}}var s,o=r(135708),a=r(631811),l=r(63944),u=r(750665);const c=new(s=class extends u.A{register(){"loading"!==document.readyState?setTimeout(this.run,0):document.addEventListener("DOMContentLoaded",this.exec)}exec(){this.run()}},(0,o.A)(s.prototype,"exec",[a.A],Object.getOwnPropertyDescriptor(s.prototype,"exec"),s.prototype),s);var d;const h='<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset="utf-8">\n        <title></title>\n        <script id="lr-organizer-nr-snippet" type="text/javascript">\n            window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(19),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{h?h-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,(new Date).getTime(),!0])}catch(s){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,(new Date).getTime()])}var i=t("handle"),a=t(20),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,h=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(d){"stack"in d&&(t(12),t(11),"addEventListener"in window&&t(6),s.xhrWrappable&&t(13),u=!0)}c.on("fn-start",function(t,e,n){u&&(h+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&h>0&&(h-=1)}),c.on("internal-error",function(t){i("ierr",[t,(new Date).getTime(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){j++,S=y.hash,this[u]=Date.now()}function o(){j--,y.hash!==S&&i(0,!0);var t=Date.now();this[l]=~~this[l]+t-this[u],this[h]=t}function i(t,e){x.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=Date.now()})}var c="-start",s="-end",f="-body",u="fn"+c,h="fn"+s,d="cb"+c,p="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location;if(w[v]){var g=t(9),b=t(10),x=t(8),E=t(6),T=t(12),O=t(7),R=t(13),P=t("ee"),D=P.get("tracer");t(14),t("loader").features.spa=!0;var S,N=w[v],j=0;P.on(u,r),P.on(d,r),P.on(h,o),P.on(p,o),P.buffer([u,h,"xhr-done","xhr-resolved"]),E.buffer([u]),T.buffer(["setTimeout"+s,"clearTimeout"+c,u]),R.buffer([u,"new-xhr","send-xhr"+c]),O.buffer([m+c,m+"-done",m+f+c,m+f+s]),x.buffer(["newURL"]),g.buffer([u]),b.buffer(["propagate",d,p,"executor-err","resolve"+c]),D.buffer([u,"no-"+u]),a(R,"send-xhr"+c),a(P,"xhr-resolved"),a(P,"xhr-done"),a(O,m+c),a(O,m+"-done"),x.on("pushState-end",i),x.on("replaceState-end",i),N("hashchange",i,!0),N("load",i,!0),N("popstate",function(){i(0,j>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(12),c=t(11),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",h="bstResource",d="resource",p="-start",l="-end",m="fn"+p,v="fn"+l,w="bstTimer",y="pushState";t("loader").features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=Date.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,Date.now()])}),a.on(m,function(t,e,n){this.bstStart=Date.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,Date.now(),this.bstType])}),c.on(m,function(){this.bstStart=Date.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,Date.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=Date.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(h,[window.performance.getEntriesByType(d)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(h,[window.performance.getEntriesByType(d)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,h],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(21)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",h="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(h+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(19);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,h=a.Response,d=a.fetch,p="prototype";u&&h&&d&&(i(f,function(t,e){r(u[p],e,s),r(h[p],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(21)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){var r=t("ee").get("mutation"),o=t(21)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],10:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(21),a=t("ee").get("promise"),c=i(a),s=t(19),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],11:[function(t,e,n){var r=t("ee").get("raf"),o=t(21)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],12:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(21)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",h="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+h),a.inPlace(window,[s],s+h),a.inPlace(window,[f,"clearImmediate"],f+h),i.on(s+u,r),i.on(c+u,o)},{}],13:[function(t,e,n){function r(t,e){h.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),h.inPlace(t,v,"fn-",c)}function i(t){w.push(t),l&&(g=-g,b.data=g)}function a(){for(var t=0;t<w.length;t++)r([],w[t]);w.length&&(w=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),h=t(21)(u),d=NREUM.o,p=d.XHR,l=d.MO,m="readystatechange",v=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],w=[];e.exports=u;var y=window.XMLHttpRequest=function(t){var e=new p(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(p,y),y.prototype=p.prototype,h.inPlace(y.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var g=1,b=document.createTextNode(g);new l(a).observe(b,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],14:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<h;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=(new Date).getTime()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var a=t.getResponseHeader("X-NewRelic-App-Data");a&&(e.cat=a.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(15),f=t("ee"),u=["load","error","abort","timeout"],h=u.length,d=t("id"),p=t(18),l=t(17),m=window.XMLHttpRequest;a.features.xhr=!0,t(13),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=(new Date).getTime(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var a=0;a<h;a++)e.addEventListener(u[a],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+d(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=(new Date).getTime()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{}],15:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],16:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[(new Date).getTime()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(19),c=t(20),s=t("ee").get("tracer"),f=NREUM;"undefined"==typeof window.newrelic&&(newrelic=f);var u=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],h="api-",d=h+"ixn-";a(u,function(t,e){f[e]=o(h+e,!0,"api")}),f.addPageAction=o(h+"addPageAction",!0),f.setCurrentRouteName=o(h+"routeName",!0),e.exports=newrelic,f.interaction=function(){return(new r).get()};var p=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(d+"tracer",[Date.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[Date.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[Date.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){p[e]=o(d+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,(new Date).getTime()])}},{}],17:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],18:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\\/\\s](\\d+\\.\\d+)/);o&&(r=+o[1]),e.exports=r},{}],19:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],20:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],21:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(20),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){d([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(h){throw u(e+"err",[r,a,h],c),h}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,h(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o)}catch(a){d([a,n,r,o])}s=i}}function h(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){d([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function d(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o){if(!d.aborted){t&&t(n,r,o);for(var i=e(o),a=l(n),c=a.length,s=0;s<c;s++)a[s].apply(i,r);var f=u[y[n]];return f&&f.push([g,n,r,i]),i}}function p(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return h[t]=h[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},g={on:p,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return g}function i(){return new r}function a(){(u.api||u.feature)&&(d.aborted=!0,u=d.backlog={})}var c="nr@context",s=t("gos"),f=t(19),u={},h={},d=e.exports=o();d.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!b++){var t=g.info=NREUM.info,e=h.getElementsByTagName("script")[0];if(setTimeout(f.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return f.abort();s(w,function(e,n){t[e]||(t[e]=n)}),c("mark",["onload",a()],null,"api");var n=h.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===h.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=t("handle"),s=t(19),f=t("ee"),u=window,h=u.document,d="addEventListener",p="attachEvent",l=u.XMLHttpRequest,m=l&&l.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:l,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver},t(16);var v=""+location,w={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1016.min.js"},y=l&&m&&m[d]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:a(),origin:v,features:{},xhrWrappable:y};h[d]?(h[d]("DOMContentLoaded",i,!1),u[d]("load",r,!1)):(h[p]("onreadystatechange",o),u[p]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader",2,14,5,3,4]);\n            ;NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"b3a229b3da",applicationID:"<APPID>",sa:1}\n        <\/script>\n\n        <script type="text/javascript">\n            "use strict";\n            var port, kind, client;\n            var origin = "<ORIGIN>";\n\n            function report(action, view, variables) {\n                var data = {};\n\n                if (kind) data.kind = kind;\n                if (view) data.view = view;\n                if (client) data.client = client;\n                for (var key in variables) {\n                    data[key] = variables[key];\n                }\n\n                console.log("Page action", action, data);\n                if (window.newrelic) {\n                    window.newrelic.addPageAction(action, data);\n                }\n            }\n\n            function handleCall(event) {\n                window.newrelic[event.data.method].apply(newrelic, event.data.args);\n            }\n\n            function handleInit(event) {\n                if (!/lr-organizer-nr-init/.test(event.data) || event.origin !== origin) return;\n\n                try {\n                    var data = JSON.parse(event.data);\n                    if (data.kind === \'lr-organizer-nr-init\') {\n                        port = event.ports[0];\n                        port.onmessage = handleCall;\n                        window.removeEventListener(\'message\', handleInit);\n                    }\n                }\n                catch(error) {}\n            }\n\n            window.addEventListener(\'message\', handleInit);\n\n        <\/script>\n    </head>\n    <body></body>\n</html>\n'.replace("<ORIGIN>",window.location.origin);let p=(d=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;this.iFrame=e,this.messages=[],this.iFrame.addEventListener("load",(e=>{this.isLoaded=!0;var t=new window.MessageChannel;this.port=t.port1;var r=window.location.origin||`${window.location.protocol}//${window.location.host}`;this.iFrame.contentWindow.postMessage(JSON.stringify({kind:"lr-organizer-nr-init"}),r,[t.port2]),this.messages?.forEach((e=>this._postMessage(e))),this.messages&&delete this.messages}),!1);const r=window?.LrSDK?.environment;t=t.replace("<APPID>","prod"===r?41710945:41710984),this.iFrame.setAttribute("srcdoc",t),"srcdoc"in this.iFrame||this.iFrame.setAttribute("src","javascript: window.frameElement.getAttribute('srcdoc');"),this.iFrame.style.display="none",c.push((()=>{document.body.appendChild(this.iFrame)}));new MessageChannel;this.isLoaded=!1}setCustomAttribute(e,t){this._callRemote("setCustomAttribute",e,t)}addPageAction(e,t){this._callRemote("addPageAction",e,t)}noticeError(e){this._callRemote("noticeError",JSON.stringify(e,["message","arguments","type","name","stack"]))}setErrorHandler(){}_callRemote(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this._postMessage({method:e,args:r},window.location.origin)}_postMessage(e){this.isLoaded?this.port.postMessage(e):this.messages.push(e)}static get instance(){var e=document.getElementById("lr-new-relic-iframe");return e||((e=document.createElement("iframe")).id="lr-new-relic-iframe",e.proxy=new this(e)),e.proxy}},(0,o.A)(d,"instance",[l.A],Object.getOwnPropertyDescriptor(d,"instance"),d),d);var f,g=r(682826);let m=(f=class{constructor(){this.newrelic=p.instance,this.newrelic.setErrorHandler(this.errorHandler),i.A.addCollector(this)}setAttribute(e,t){this.newrelic.setCustomAttribute(e,t)}noticeError(e){this.newrelic.noticeError(e),this.errorHandler(e,!0)}report(e,t){this.newrelic.addPageAction(e,t)}reportTimed(e,t,r,i,n){var s=Object.assign({},n);s.duration=i,this.report(e,s)}reportApiCall(e,t){var r=Object.assign({},t);r.apiName=e,this.report("apiCall",r)}errorHandler(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.report("jsError",{message:e.message,errorName:e.name,errorStackTrace:e.stack,url:window.location.toString(),automation:g.A.is_enabled("automation"),noticed:t}):this.report("jsError",{message:"Unknown error",errorName:"Unknown",url:window.location.toString(),automation:g.A.is_enabled("automation"),noticed:t}),!1}},(0,o.A)(f.prototype,"errorHandler",[a.A],Object.getOwnPropertyDescriptor(f.prototype,"errorHandler"),f.prototype),f);function y(e){g.A.is_enabled("automation")&&new n,i.A.getUserGuidP(e).then((e=>{i.A.setAttribute("guid",e)}),(e=>{})),new m,i.A.setAttribute("clientId",e.clientId),i.A.setAttribute("sessionGuid",i.A.sessionGuid),i.A.setAttribute("environment",e.environment)}},697197:(e,t,r)=>{"use strict";var i,n=r(707954),s=r(426706),o=r(616391),a=r(555723),l=r(426919),u=r(512656),c=r(197056),d=Function,h=function(e){try{return d('"use strict"; return ('+e+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var f=function(){throw new u},g=p?function(){try{return f}catch(e){try{return p(arguments,"callee").get}catch(e){return f}}}():f,m=r(469688)(),y=r(133650)(),v=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),b={},_="undefined"!=typeof Uint8Array&&v?v(Uint8Array):i,A={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":m&&v?v([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":s,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&v?v(v([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&m&&v?v((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":o,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&m&&v?v((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&v?v(""[Symbol.iterator]()):i,"%Symbol%":m?Symbol:i,"%SyntaxError%":l,"%ThrowTypeError%":g,"%TypedArray%":_,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet};if(v)try{null.error}catch(e){var w=v(v(e));A["%Error.prototype%"]=w}var P=function e(t){var r;if("%AsyncFunction%"===t)r=h("async function () {}");else if("%GeneratorFunction%"===t)r=h("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=h("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&v&&(r=v(n.prototype))}return A[t]=r,r},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=r(652896),C=r(500626),O=x.call(Function.call,Array.prototype.concat),k=x.call(Function.apply,Array.prototype.splice),T=x.call(Function.call,String.prototype.replace),E=x.call(Function.call,String.prototype.slice),I=x.call(Function.call,RegExp.prototype.exec),D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,R=/\\(\\)?/g,j=function(e,t){var r,i=e;if(C(S,i)&&(i="%"+(r=S[i])[0]+"%"),C(A,i)){var n=A[i];if(n===b&&(n=P(i)),void 0===n&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===I(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=E(e,0,1),r=E(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var i=[];return T(e,D,(function(e,t,r,n){i[i.length]=r?T(n,R,"$1"):t||e})),i}(e),i=r.length>0?r[0]:"",n=j("%"+i+"%",t),s=n.name,o=n.value,a=!1,c=n.alias;c&&(i=c[0],k(r,O([0,1],c)));for(var d=1,h=!0;d<r.length;d+=1){var f=r[d],g=E(f,0,1),m=E(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&h||(a=!0),C(A,s="%"+(i+="."+f)+"%"))o=A[s];else if(null!=o){if(!(f in o)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&d+1>=r.length){var y=p(o,f);o=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:o[f]}else h=C(o,f),o=o[f];h&&!a&&(A[s]=o)}}return o}},702739:(e,t,r)=>{var i=r(829405),n=r(579764),s=i("keys");e.exports=function(e){return s[e]||(s[e]=n(e))}},707954:e=>{"use strict";e.exports=Error},712435:(e,t,r)=>{"use strict";var i=r(135708),n=r(682826),s=r(157688);const o=s.A.makePropertyDecorator(((e,t,r,i)=>{n.A.is_enabled(i)&&Object.defineProperty(e,t,r)}));r(341891);var a=r(912977),l=(r(315715),r(528510),r(317779),r(8534),r(864113),r(380190),r(739506)),u=r(670734),c=r(747107);let d,h;if(n.A.is_enabled("debug")){const e=new u.A,t={},r={usedLrMobile:{enabled:!1,value:!1},usedLrDesktop:{enabled:!1,value:!1},accountStatus:{enabled:!1,value:"trial"},debugDialogTab:"Account"},i=Object.getOwnPropertyDescriptor(Document.prototype,"cookie");Object.defineProperty(document,"cookie",{get(){return i.get.call(this)},set(t){const r=null!=e.get("lrw_token"),n=i.set.call(this,t);return r&&null==e.get("lrw_token")&&console.error("token cookie removed",t),n},enumerable:!0,configurable:!0}),window.Debug=d={enabled:!0,overrides:e.get("debug_overrides")||c.A.extend(!0,{},r),saveOverrides(){const t=new Date;return t.setFullYear(t.getFullYear()+1),e.set("debug_overrides",JSON.stringify(d.overrides),{path:"/",expires:t})},clearOverrides:()=>(d.overrides=c.A.extend(!0,{},r),e.remove("debug_overrides",{path:"/"}))},d.overrides=c.A.extend(!0,{},r,d.overrides),window.DebugManager=h={set:(e,r,i)=>(t[e]=r,d[e]=i),remove:e=>(delete d[e],delete t[e])},h.set("help","list available commands",(()=>{let e="";for(var r in t){var i=t[r];e+=`\n${r}:${Array(15-r.length).join(" ")}${i}`}return e}))}else window.Debug=d={},window.DebugManager=h={set(){},remove(){}};const p={shouldOverrideLrDesktopUsage:()=>n.A.is_enabled("debug")&&d.overrides.usedLrDesktop.enabled,getLrDesktopUsageOverride:()=>d.overrides.usedLrDesktop.value,setLrDesktopUsageOverride:(e,t)=>(d.overrides.usedLrDesktop.enabled=e,d.overrides.usedLrDesktop.value=t),shouldOverrideLrMobileUsage:()=>n.A.is_enabled("debug")&&d.overrides.usedLrMobile.enabled,getLrMobileUsageOverride:()=>d.overrides.usedLrMobile.value,setLrMobileUsageOverride:(e,t)=>(d.overrides.usedLrMobile.enabled=e,d.overrides.usedLrMobile.value=t),getDebugDialogTab:()=>d.overrides.debugDialogTab,setDebugDialogTab:e=>d.overrides.debugDialogTab=e,doRandomFailure(e,t){let r;return!(null!=(r=n.A.is_enabled("debug_random_failures")&&Math.random()<t)&&!r)&&(console.log(`Randomly failing ${e}`),!0)},setDoFailureFeedDashboard:e=>d.overrides.failFeedDashboard=e,getDoFailureFeedDashboard:()=>d.overrides.failFeedDashboard};var f=r(622733),g=r(215849),m=r(239758);const y={app:null,appController:null,keyboardController:null,scrollableDocument:!1};m.G.enabled&&(m.G.AppGlobals=y),d.enabled&&(d.AppGlobals=y);var v=r(985625),b=r(529444);function _(e,t,r){let i,n,s,o,a,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){const r=i,s=n;return i=n=void 0,u=t,o=e.apply(s,r),o}function f(e){const r=e-l;return void 0===l||r>=t||r<0||d&&e-u>=s}function g(){const e=Date.now();if(f(e))return m(e);a=setTimeout(g,function(e){const r=e-u,i=t-(e-l);return d?Math.min(i,s-r):i}(e))}function m(e){return a=void 0,h&&i?p(e):(i=n=void 0,o)}function y(){const e=Date.now(),r=f(e);for(var s=arguments.length,h=new Array(s),m=0;m<s;m++)h[m]=arguments[m];if(i=h,n=this,l=e,r){if(void 0===a)return function(e){return u=e,a=setTimeout(g,t),c?p(e):o}(l);if(d)return a=setTimeout(g,t),p(l)}return void 0===a&&(a=setTimeout(g,t)),o}return t=+t||0,"object"==typeof r&&(c=!!r.leading,d="maxWait"in r,s=d?Math.max(+r.maxWait||0,t):s,h="trailing"in r?!!r.trailing:h),y.cancel=function(){void 0!==a&&clearTimeout(a),u=0,i=l=n=a=void 0},y.flush=function(){return void 0===a?o:m(Date.now())},y}function A(){return function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return function(r,n,o){const a=s.A.getInitialValue(o),l=n+"__Safari_workaround";if(t){const e=n+t;Object.defineProperty(r,e,{value:a})}delete o.value,delete o.writable,o.get=function(){if(r===this)return a;let t=this[l];if(t)return t;t=e(a,...i);const s={value:t,enumerable:!1,configurable:!0};return Object.defineProperty(this,n,s),Object.defineProperty(this,l,s),t}}}(_,"Now",arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1?arguments[1]:void 0)}var w,P,S,x,C,O=r(355141),k=r(586564),T=r(732486);let E=null,I=null,D=[],R=(w=class{constructor(e){(0,b.A)(this,"serviceDown",P,this),(0,b.A)(this,"statusCheckHref",S,this),this.statusCheckHref=e,this.polling=!1,this.downCycleCount=0}},P=(0,i.A)(w.prototype,"serviceDown",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=(0,i.A)(w.prototype,"statusCheckHref",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w);D={oz:new R(`${T.A.hostOverride}/v2/version`)},T.A.watch((e=>{D.oz.statusCheckHref=`${e.hostOverride}/v2/version`}));const j=()=>I?.networkStatusChanged();let F=!navigator.onLine;const N=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null!=D[e]&&D[e].serviceDown!==t&&(D[e].serviceDown=t,r&&j())},L=function(e){if(!F&&null!=D[e]&&!D[e].polling){D[e].polling=!0;let r=0;var t=()=>{(e=>new Promise(((t,r)=>{const i=D[e],n=i.statusCheckHref,s=new XMLHttpRequest;s.onload=function(){!1===i.polling&&!1===i.serviceDown||(i.polling=!1,N(e,!1,!1),j(),t())},s.onerror=function(){N(e,!0),r()},s.open("GET",n),s.setRequestHeader("X-LrWeb-Check","status"),s.send()})))(e).catch((()=>{if(F)return D[e].polling=!1,void j();10==++r?(D[e].polling=!1,j()):setTimeout((()=>{t()}),5e3)}))};t(),j()}};window.addEventListener("DOMContentLoaded",(()=>{k.A.mobile||(window.addEventListener("offline",(()=>{F||(F=!0,j())})),window.addEventListener("online",(()=>{if(F){F=!1;for(const e in D)"oz"!==e&&N(e,!1);I.checkService("oz"),j()}})))}));let M=(x=A(5e3),C=class extends l.A{constructor(){super(),this._requestsActive=!1,this.setRequestsActive(!0)}makingRequest(){this.setRequestsActive(!0),this._waitForIdle()}_waitForIdle(){this.setRequestsActive(!1)}setRequestsActive(e){this._requestsActive&&!e?(n.A.is_enabled("debug")&&console.log("[[ Service Requests Idle ]]"),this.trigger("requests-idle")):!this._requestsActive&&e&&(n.A.is_enabled("debug")&&console.log("[[ Service Requests Active ]]"),this.trigger("requests-active")),this._requestsActive=e}registerApp(e){E=e}isServiceUnreliable(e){return this.isServiceDown(e)||this.isPollingService(e)}isServiceDown(e){return!!F||"base"!==e&&(null!=D[e]?D[e].serviceDown:((n.A.is_enabled("debug")||n.A.is_enabled("automation"))&&alert(`Tried to get status for unknown service [${e}]`),!1))}debugSetServiceDown(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];D[e].serviceDown=t,j()}isNetworkDown(){return F}isPollingService(e){return!0===D[e].polling}reset(){for(const e of Object.values(D))e.polling=!1,e.serviceDown=!1}checkService(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("base"===e)return;const r=D[e];t?r.downCycleCount=0:r.serviceDown||r.downCycleCount++,r.downCycleCount>=3?r.polling||r.serviceDown||(r.serviceDown=!0,j()):L(e)}networkStatusChanged(){E?.networkStatusChanged(),this.trigger("network-status-changed")}whenServiceAvailableP(e){return this.isServiceDown(e)?new Promise(((t,r)=>{var i=()=>{this.isServiceDown(e)||(this.off("network-status-changed",i),t())};this.on("network-status-changed",i)})):Promise.resolve()}},(0,i.A)(C.prototype,"_waitForIdle",[x],Object.getOwnPropertyDescriptor(C.prototype,"_waitForIdle"),C.prototype),C);I=new M,n.A.is_enabled("debug")&&(window.ServiceStatus=I);const U=I;var $=r(595642);class z extends l.A{_onAuthError(){}_onOzMaintenanceError(){window.location.href.includes("redirect")||window.location.reload(),g.A.report("ozMaintenanceInApp")}_isAuthError(e,t,r){return 401===t}_isOzMaintenanceError(e,t,r){return 503===t&&"MaintenanceError"===e?.code}constructor(e){super(),this.href=e}createUuid(){let e,t="";const r=window.crypto||window.msCrypto;if(null!=r?.getRandomValues){const i=new Uint8Array(16);r.getRandomValues(i),i[6]=15&i[6]|64,i[8]=63&i[8]|128;for(const r of i)e=r.toString(16),1===e.length?t+="0"+e:t+=e}else{const r=new Array(4),i=(0,v.$)().uint32;for(let e=0;e<=3;e++)r[e]=i();r[1]=(4294905855&r[1]|16384)>>>0,r[2]=(1073741823&r[2]|2147483648)>>>0;for(const i of r){for(e=i.toString(16);e.length<8;)e="0"+e;t+=e}}return t}requestWithRetryP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=0;const o=$.Deferred();var a=function(){return s>n?o.reject(...arguments):(0!==s&&g.A.report("retryRequestP"),this.requestP(e,t,r,i).done((function(){return o.resolve(...arguments)})).fail((()=>(++s,a()))))}.bind(this);return a(),o.promise()}safeToJSPromise(e){return new Promise(((t,r)=>e.done((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t(r)})).fail((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(t)}))))}safeToJQueryPromise(e){const t=$.Deferred();return e.then((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];Array.isArray(r)?t.resolve(...r):t.resolve(r)}),(e=>{Array.isArray(e)?t.reject(...e):t.reject(e)})),t.promise()}requestJP(){return this.safeToJSPromise(this.requestP(...arguments))}requestP(e,t,r){let i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=!1;if(n.A.is_enabled("debug")&&z._forceFailNextRequest||p?.doRandomFailure(t))return z._forceFailNextRequest=!1,console.error(t),$.Deferred().reject("debugForcedFailure",-1).promise();if(U.isServiceDown(this.serviceKey))return i=$.Deferred(),setTimeout((()=>i.reject()),0),i.promise();{let n,l,{headers:u,contentType:c,async:d,responseType:h,cancelPromise:p,parseAsText:f}=s;null==d&&(d=!0);const g=!h||""===h||"text"===h;g&&!s.hasOwnProperty("contentType")&&null==c&&(c="application/json;charset=utf-8"),i=$.Deferred();const m=new XMLHttpRequest;m.open(e,t||this.href,!0===d),null!=h&&(m.responseType=h),m.setRequestHeader("X-Requested-With","XMLHttpRequest");for(const e in u){const t=u[e];null!=t&&m.setRequestHeader(e,t)}if(null!=window.FormData&&r instanceof window.FormData||r instanceof Blob?(l=e=>i.notify(e),m.upload.addEventListener("progress",l),r instanceof Blob&&m.setRequestHeader("Content-Type",c)):null!=c&&m.setRequestHeader("Content-Type",c),U.makingRequest(),m.send(r),null!=p&&p.then((()=>(o=!0,m.abort(),i.reject("aborted")))),window.ActiveXObject){const e=function(){if(m.onreadystatechange=null,4!==m.readyState)return m.abort()};n=function(){return m.onreadystatechange=null,null!=l&&m.upload.removeEventListener("progress",l),$(window).off("unload",e)},$(window).on("unload",e)}var a=()=>{if(null!=a&&4===m.readyState){let e;a=null,n?.();const{status:s}=m,l=s>=200&&s<300||304===s;if(g&&"string"==typeof m.responseText)try{r=f||"application/rdf+xml"===m.getResponseHeader("Content-Type")?m.responseText:$.parseJSON(m.responseText.replace("while (1) {}",""))}catch(e){}else r=m.response;if(l)e=i.resolve;else{if(null!=m){const e=m.getResponseHeader("x-request-id");s>=400&&s<500?null!=e&&e.length>0&&console.warn(`${s} request id: ${e} (4xx responses are common for some API calls, especially when polling for renditions or attempting to add duplicate photos)`):null!=e&&e.length>0&&console.error(`Failed request id: ${e}`)}e=i.reject}if(e(r,s,m),this._isAuthError(r,s,m)&&this._onAuthError(),this._isOzMaintenanceError(r,s,m)){if(null==t&&({href:t}=this),t.includes("sdk"))return i.reject({code:r.code});if(!t.includes("v2/spaces"))return this._onOzMaintenanceError()}else if((s>=500||0===s)&&!o)return U.checkService(this.serviceKey)}};return d?4===m.readyState?setTimeout(a):m.onreadystatechange=a:a(),i.promise()}}}z.debugForceFailNextRequest=function(){n.A.is_enabled("debug")&&(z._forceFailNextRequest=!0)},z.prototype.serviceKey="base";const H=z,J={lex64Encoding:"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",invalidRegExp:new RegExp("[^a-zA-Z0-9_-]","g"),maxLength:1024,nearStepEncodingWidth:4,MIDPOINT:"Uzzz",insertBefore(e,t){if(!this.invalidRegExp.test(e))return this.tryCatch("InsertBefore",(()=>this._insertBefore(e,t)))},insertBetween(e,t,r){if(!this.invalidRegExp.test(e)&&!this.invalidRegExp.test(t))return this.tryCatch("InsertBetween",(()=>this._insertBetween(e,t,r)))},insertAfter(e,t){if(!this.invalidRegExp.test(e))return this.tryCatch("InsertAfter",(()=>this._insertAfter(e,t)))},tryCatch(e,t){try{if(!0===this._debugForceReindexNextOrder)throw this._debugForceReindexNextOrder=!1,"Forced Lex64 Error";return t()}catch(t){return n.A.is_enabled("debug")&&console.log(`${e} Exception: ${t}`),void g.A.reportFailure("assetOrderLex64Error",{errorDescription:t})}},_insertBefore(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r=e);const i=this.lex64Encoding;if("high"===t){const n=i.slice(-1);if(e[0]===n&&e[1]===n)return r=e,this._insertBefore(e.substring(1),t,r.substring(1));{const[t,r]=this.copyAndFill(e);return this.nextOrderString(r,-1)}}{const r=i[0];return this._insertBetween(r,e,t)}},_insertBetween(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const n=e.charCodeAt(0),s=t.charCodeAt(0);if(i.length>this.maxLength)throw"Buffer Exhausted";const o=this.decode[n],a=this.decode[s];if(o>this.maxDecodeValue||a>this.maxDecodeValue)throw"Invalid Character";if(o===a)return i+=this.encode[o],0!==n&&(e=e.substring(1)),0!==s&&(t=t.substring(1)),this._insertBetween(e,t,r,i);if(a<o)throw"Parameters out of Order";if(o+1<a){const e=this.getCharBetween(o,a,r);return i+this.encode[e]}return i+=this.encode[o],0!==n&&(e=e.substring(1)),this._insertAfter(e,r,i)},_insertAfter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"middle",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=this.decode[e.charCodeAt(0)];if(i===this.maxDecodeValue&&("low"!==t||e[1]===e[0]))return r+=this.encode[i],e=e.substring(1),this._insertAfter(e,t,r);if("low"===t){const[t,i]=this.copyAndFill(e);r+=this.nextOrderString(i,1)}else{const e=this.getCharBetween(i,this.maxDecodeValue+1,t);r+=this.encode[e]}if(r.length>this.maxLength)throw"Buffer Exhausted";return r},getCharBetween(e,t,r){if(t<=e+1)throw"Invalid values";if(t===e+2)return e+1;switch(r){case"low":return e+1;case"high":return t-1;default:return Math.floor(e+(t-e)/2)}},copyAndFill(e){let t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxLength,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.encode[0];const s=i<=this.nearStepEncodingWidth?i-1:this.nearStepEncodingWidth;let o=Array(i+1);for(t=0,r=s;t<r;t++){var a=e[t];if(t>=e.length)break;if(this.decode[a.charCodeAt(0)]>this.maxDecodeValue)return[i+1,o];o[t]=a}for(;t<s;)o[t]=n,t++;if(o=o.join(""),o.length>this.maxLength)throw"Buffer Exhausted";return[s,o]},nextOrderString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=this.encode[0],n=this.maxDecodeValue,s=e.length;if("string"==typeof e&&(e=e.split("")),1!==t&&-1!==t)throw"Invalid Arguments";let o=s;o--;let a=e[o],l=this.decode[a.charCodeAt(0)];if(l>this.maxDecodeValue)throw"Invalid Character";if(l===n){if(0===o)return r;e[o]=i}else e[o]=this.encode[l+t],o=0;for(;0!==o;){if(o--,a=e[o],l=this.decode[a.charCodeAt(0)],l>this.maxDecodeValue)throw"Invalid Character";if(l!==n){e[o]=this.encode[l+t];break}if(0===o)return r;e[o]=i}return 0===this.decode[e[s-1].charCodeAt(0)]?this.nextOrderString(e,t,r):e.join("").trim()},setupEncoding(){let e,t;for(this.decode=Array([256]),this.encode=this.lex64Encoding,e=0;e<=255;e++)this.decode[e]=255;for(this.decode[0]=0,this.maxDecodeValue=this.encode.length-1,e=0,t=this.encode.length;e<t;e++){var r=this.encode.charCodeAt(e);this.decode[r]=e}return this.decode[void 0]=this.decode[0],this.decode.NaN=this.decode[0]}};J.setupEncoding();const q=J;var V=r(151185),B=r(678296),W=r.n(B);const{LrSDK:G}=window;let X={getJSONContentP:e=>new Promise((function(t,r){var i=new XMLHttpRequest;i.open("GET",e),i.setRequestHeader("x-api-key",V.A.clientId),i.setRequestHeader("Authorization",`Bearer ${V.A.token}`),i.onload=function(){if(200<=i.status&&i.status<300){var e=i.getResponseHeader("content-type");if("application/json"===e||"application/json;charset=utf-8"===e){var n=JSON.parse(i.responseText.replace(/^while\s*\(\s*1\s*\)\s*{\s*}\s*/,""));t(n)}else r("Unrecognized response content type")}else{var s=`XHR load failed with status ${i.status}`;r(s)}},i.onerror=()=>{var e=`XHR call failed with status ${i.status}`;r(e)},i.send()})),getPagedJSONContentP:e=>new Promise((function(t,r){var i=[];!function e(n){X.getJSONContentP(n).then((function(r){i=i.concat(r.resources),r.links&&r.links.next?e(r.base+r.links.next.href):(r.resources=i,t(r))}),r)}(e)})),putJSONContentP:(e,t)=>new Promise((function(r,i){var n=new XMLHttpRequest;n.open("PUT",e),n.setRequestHeader("x-api-key",V.A.clientId),n.setRequestHeader("Authorization",`Bearer ${V.A.token}`),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200<=n.status&&n.status<300)r();else{var e=`XHR PUT failed with status ${n.status}`;i(e)}},n.onerror=()=>{var e=`XHR PUT failed with status ${n.status}`;i(e)},n.send(JSON.stringify(t))})),postJSONContentP:(e,t)=>new Promise((function(r,i){var n=new XMLHttpRequest;n.open("POST",e),n.setRequestHeader("x-api-key",V.A.clientId),n.setRequestHeader("Authorization",`Bearer ${V.A.token}`),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200<=n.status&&n.status<300)r();else{var e=`XHR POST failed with status ${n.status}`;i(e)}},n.onerror=()=>{var e=`XHR POST failed with status ${n.status}`;i(e)},n.send(JSON.stringify(t))})),deleteJSONContentP:e=>new Promise((function(t,r){var i=new XMLHttpRequest;i.open("DELETE",e),i.setRequestHeader("x-api-key",V.A.clientId),i.setRequestHeader("Authorization",`Bearer ${V.A.token}`),i.onload=function(){if(200<=i.status&&i.status<300)t();else{var e=`XHR POST failed with status ${i.status}`;r(e)}},i.onerror=()=>{var e=`XHR POST failed with status ${i.status}`;r(e)},i.send()}))},K={getLinksP:e=>X.getJSONContentP(e),getAccountP(e){var t=e.base+e.links["/rels/account"].href;return X.getJSONContentP(t)},getCatalogP(e){var t=e.base+e.links["/rels/catalogs"].href;return X.getPagedJSONContentP(t).then((function(e){if(e.resources.length<=0)return Promise.reject("no catalog");let t=e.resources[0];return t.base=e.base,t}))},getAlbumsP:function(e,t){var r=e.base+e.links["/rels/subtyped_albums"].href.replace("{subtype}",t);return X.getPagedJSONContentP(r)},async createAlbumP(e,t,r){var i=e.base+e.links.self.href+"/albums/"+H.prototype.createUuid();return await X.putJSONContentP(i,{subtype:t,payload:r}),X.getJSONContentP(i)},updateAlbumP(e,t){var r=e.base+e.links.self.href;return X.postJSONContentP(r,{payload:t})},deleteAlbumP(e){var t=e.base+e.links.self.href;return X.deleteJSONContentP(t)},getChildAlbumsP(e){var t=e.base+e.links["/rels/child_albums"].href;return X.getPagedJSONContentP(t)},getAlbumAssetsP(e){var t=e.base+e.links.self.href+"/assets?order_after=-";return X.getPagedJSONContentP(t)},async addAssetsWithIdsToAlbumP(e,t){if(t.length<1)return;let r=(new Date).toISOString(),i=[];for(let e=0,n=q.MIDPOINT;e<t.length;e++)if(i.push({id:t[e],payload:{userCreated:r,userUpdated:r,order:n}}),n=q.insertAfter(n,"low"),!n)return Promise.reject("failed to order assets");var n=e.base+e.links.self.href+"/assets";for(let e=i.length,t=0;t<e;t+=50){const e=i.slice(t,t+50);await X.putJSONContentP(n,{resources:e})}},async deleteAllAlbumAssetsP(e){let t=(await K.getAlbumAssetsP(e)).resources.map((e=>e.asset.id));var r=e.base+e.links.self.href+"/assets";for(let e=t.length,i=0;i<e;i+=100){const e=t.slice(i,i+100);await X.deleteJSONContentP(r+"?asset_ids="+e.join("%3B"),"")}}};class Y{constructor(e,t,r,i){for(var n=0;n<i.resources.length;n++){i.resources[n].base=i.base}this._catalog=e,this._collections=t,this._serviceId=r,this._projects=i.resources,this._response=i}async getDeepCopyOfProjectListP(){return JSON.parse(JSON.stringify(this._response)).resources.forEach((e=>{delete e.base})),this._response}async getDeepCopyOfProjectWithIdP(e){let t=this._projects.find((t=>t.id===e));return t?JSON.parse(JSON.stringify(t)):Promise.reject("no matching project")}async _getProjectWithIdP(e){let t=this._projects.find((t=>t.id===e));return t||Promise.reject("no matching project")}async _getCollectionWithIdP(e){let t=this._collections.find((t=>t.id===e));return t||Promise.reject("failed to find collection")}async _createProjectP(e,t){let r=await K.createAlbumP(this._catalog,"project",e);return this._projects.push(r),await K.addAssetsWithIdsToAlbumP(r,t),r.id}async _getProjectWithSourceAlbumIdP(e){return this._projects.find((t=>{let r=t.payload.sourceAlbum;return r&&r.id===e}))}getUncachedProjectWithIdP(e){var t=this._response.base+this._response.links["/rels/album"].href.replace("{album_id}",e);return X.getJSONContentP(t)}async getUncachedProjectsP(){let e=await K.getAlbumsP(this._catalog,"project");return e.resources=e.resources.filter((e=>{var t=e.payload.publishInfo;return t&&t.serviceId===this._serviceId})),e}createProjectWithAssetIdsP(e,t){let r=(new Date).toISOString(),i={userCreated:r,userUpdated:r,name:e||r,publishInfo:{version:2,serviceId:this._serviceId}};return this._createProjectP(i,t||[])}async createProjectFromCollectionWithIdP(e){let t=await this._getCollectionWithIdP(e),r=(await K.getAlbumAssetsP(t)).resources.map((e=>e.asset.id)),i=(new Date).toISOString(),n={userCreated:i,userUpdated:i,name:t.payload.name||t.id,sourceAlbum:{id:t.id},publishInfo:{version:2,serviceId:this._serviceId}},s=t.payload.cover;return s&&(n.cover={id:s.id}),this._createProjectP(n,r)}async resetProjectWithIdFromSourceCollectionP(e){let t=await this._getProjectWithIdP(e);if(!t.payload.sourceAlbum)return;let r=this._collections.find((e=>e.id===t.payload.sourceAlbum.id));if(!r)return;let i=(await K.getAlbumAssetsP(r)).resources.map((e=>e.asset.id));return await K.deleteAllAlbumAssetsP(t),K.addAssetsWithIdsToAlbumP(t,i)}async updateProjectWithIdP(e,t){if(!t.userUpdated)return Promise.reject("missing userUpdated field");let r=await this._getProjectWithIdP(e),i=await K.updateAlbumP(r,t);return W()(r.payload,t),i}async deleteProjectWithIdP(e){let t=await this._getProjectWithIdP(e);if("project"!==t.subtype)return Promise.reject("missing project");let r=await K.deleteAlbumP(t),i=this._projects.findIndex((t=>t.id===e));return i>=0&&this._projects.splice(i,1),r}async getAssetsOfProjectWithIdP(e){let t=await this._getProjectWithIdP(e);return K.getAlbumAssetsP(t)}async deleteChildAlbumsOfProjectWithIdP(e){let t=await this._getProjectWithIdP(e);if("project"!==t.subtype)return Promise.reject("missing project");let r=await K.getChildAlbumsP(t),i=[];return r.resources.forEach((e=>{e.base=r.base,i.push(K.deleteAlbumP(e))})),Promise.all(i)}}class Q{constructor(e,t,r){this._managers={},this._catalog=e,this._collections=t,this._response=r}_responseForService(e){let t=this._response.resources.filter((t=>{var r=t.payload.publishInfo;return r&&r.serviceId===e}));return{base:this._response.base,resources:t,links:this._response.links}}projectManagerForService(e){if(!this._managers[e]){let t=this._responseForService(e);this._managers[e]=new Y(this._catalog,this._collections,e,t)}return this._managers[e]}}const Z=new class{constructor(){this._linksPromise=null,this._accountPromise=null,this._catalogPromise=null,this._collectionsPromise=null,this._managerFactoryPromise=null,this._rootURL="https://photos.adobe.io/v2/"}_getCollectionsP(){return this._collectionsPromise||(this._collectionsPromise=this.getCatalogP().then((e=>K.getAlbumsP(e,"collection").then((e=>{let t=e.resources;return t.forEach((t=>{t.base=e.base})),t}))))),this._collectionsPromise}_getProjectManagerFactoryP(){return this._managerFactoryPromise||(this._managerFactoryPromise=this.getCatalogP().then((e=>this._getCollectionsP().then((t=>K.getAlbumsP(e,"project").then((r=>new Q(e,t,r)))))))),this._managerFactoryPromise}getLinksP(){if(!this._linksPromise){let e="stage"===G.environment?"https://photos-stage.adobe.io/v2/":"https://photos.adobe.io/v2/";this._linksPromise=K.getLinksP(e)}return this._linksPromise}getAccountP(){return this._accountPromise||(this._accountPromise=this.getLinksP().then(K.getAccountP)),this._accountPromise}getCatalogP(){return this._catalogPromise||(this._catalogPromise=this.getLinksP().then(K.getCatalogP)),this._catalogPromise}async getCollectionWithIdP(e){let t=(await this._getCollectionsP()).find((t=>t.id===e));return t||Promise.reject("no matching collection")}async getAssetsOfCollectionWithIdP(e){let t=await this.getCollectionWithIdP(e);return K.getAlbumAssetsP(t)}async getProjectManagerForServiceIdP(e){return(await this._getProjectManagerFactoryP()).projectManagerForService(e)}getProjectManagerP(){let e=V.A.clientId;return this.getProjectManagerForServiceIdP(e)}};var ee=r(191448),te=r(621678),re=r.n(te);const{LrSDK:ie}=window;const ne=new class{checkCachedProjectsP(){return Promise.all([ie.catalog.getProjectsP(),ie.catalog.getUncachedProjectsP()]).then((function(e){return e[0].resources.length!==e[1].resources.length?Promise.reject("FAILED: count"):e[0].resources.length}))}checkCachedProjectWithIdP(e){return Promise.all([ie.catalog.getProjectWithIdP(e),ie.catalog.getUncachedProjectWithIdP(e)]).then((function(e){if(!re()(e[0].payload,e[1].payload))return Promise.reject("FAILED: cached not equal to uncached")}))}checkProjectMetadataP(e,t){return Promise.all([ie.catalog.getProjectWithIdP(e),ie.catalog.getCollectionWithIdP(t)]).then((function(t){let r=t[0],i=t[1];return r.payload.name!==i.payload.name?Promise.reject("FAILED: name"):i.payload.cover&&r.payload.cover.id!==i.payload.cover.id?Promise.reject("FAILED: cover"):r.id!==e?Promise.reject("FAILED: id"):r.payload.publishInfo?2!==r.payload.publishInfo.version?Promise.reject("FAILED: version"):r.payload.publishInfo.serviceId!==V.A.clientId?Promise.reject("FAILED: serviceId"):void 0:Promise.reject("FAILED: publishInfo")}))}checkProjectAssetsP(e,t){return Promise.all([ie.catalog.getAssetsOfProjectWithIdP(e),ie.catalog.getAssetsOfCollectionWithIdP(t)]).then((function(e){let t=e[0].resources,r=e[1].resources;if(r.length!==t.length)return Promise.reject("FAILED: asset count");for(let e=r.length,i=0;i<e;i++){let e=r[i],n=t[i];if(e.asset.id!==n.asset.id)return Promise.reject("FAILED: asset id")}}))}checkCreateProjectFromCollectionWithIdP(e,t){return Promise.all([this.checkCachedProjectWithIdP(e),this.checkProjectMetadataP(e,t),this.checkProjectAssetsP(e,t)])}async checkUpdatePayloadP(e,t){if(!function e(t,r,i){if(t!==Object(t)||r!==Object(r))i=i&&t===r;else for(let n in r)i=e(t[n],r[n],i);return i}((await ie.catalog.getProjectWithIdP(e)).payload,t,!0))return Promise.reject("FAILED: payload")}checkUpdateProjectWithIdP(e,t){return Promise.all([this.checkCachedProjectWithIdP(e),this.checkUpdatePayloadP(e,t)])}async testCollectionWithIdP(e){let t=await ie.catalog.createProjectFromCollectionWithIdP(e);await this.checkCreateProjectFromCollectionWithIdP(t,e),console.log("PASSED: createProjectFromCollectionWithIdP");let r=(new Date).toISOString(),i={userUpdated:r,name:"cool new name",publishInfo:{created:r,updated:r,remoteId:"servic3-specific"}};return await ie.catalog.updateProjectWithIdP(t,i),await this.checkUpdateProjectWithIdP(t,i),console.log("PASSED: updateProjectWithIdP"),await ie.catalog.resetProjectWithIdFromSourceCollectionP(t),console.log("PASSED: resetProjectWithIdFromSourceCollectionP"),t}async runP(e){if(!e||!e.resources||!e.resources[0])return Promise.reject("malformed collection list");let t=e.resources,r=await this.checkCachedProjectsP();console.log("initial project count:",r);let i=[];t.forEach((e=>{i.push(this.testCollectionWithIdP(e.id))}));let n=await Promise.all(i),s=await this.checkCachedProjectsP();return s!==r+t.length?Promise.reject("FAILED: bad count"):(console.log("PASSED: test collections"),i=[],n.forEach((e=>{i.push(ie.catalog.deleteProjectWithIdP(e))})),await Promise.all(i),s=await this.checkCachedProjectsP(),s!==r?Promise.reject("FAILED: bad count"):(console.log("PASSED: deleteProjectWithIdP"),"PASSED"))}};var se=r(696820);const oe="Lightroom Web {0363f1a98b0c507a237977267358886724194e58198ae5efc58c659238ee8fc3}",ae="-0001-12-31T23:59:59",le="0000-00-00T00:00:00",ue="9999-12-31T23:59:59";class ce extends H{constructor(){super(...arguments),this.serviceKey="oz",this.handleAuthErrors=!0}static setAuthHeaders(e,t){const r={Authorization:`Bearer ${e}`,"x-api-key":t};this.prototype.authHeaders=r}_onAuthError(){return!!this.handleAuthErrors&&T.A.authErrorCallback?.()}_isAuthError(e,t,r){return 401===t}reportOzFailure(e,t,r,i){let n,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n=null!=t?JSON.stringify(t).substr(0,200):"unknown error";const o=Object.assign({errorCode:null!=r?r:"undefined",errorDescription:n},s);if(null!=i){const e=i.getResponseHeader("x-request-id");null!=e&&e.length>0&&(o.requestId=e)}g.A.reportFailure(e,o)}requestP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{authHeaders:n}=this;return null!=n&&(i=Object.assign({},i),i.headers=Object.assign({},n,i.headers)),super.requestP(e,t,r,i)}}const{expireCookie:de,getCookie:he,hasCookie:pe,setSecureSiteCookie:fe,setSiteCookie:ge}=window;var me=r(712942);class ye{constructor(e){null!=T.A.hostOverride?this.hostUrl=T.A.hostOverride:this.hostUrl="";const t=null!=e?e.indexOf("/",8):-1;this.basePath=-1===t?"":e.substr(t)}fullPath(e){if(null!=e)return 0===e.indexOf("http://")||0===e.indexOf("https://")||"/"===e[0]?e:`${this.basePath}${e}`}fullHref(e){if(null!=e)return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:"/"===e[0]?`${this.hostUrl}${e}`:`${this.hostUrl}${this.basePath}${e}`}}var ve=r(631811),be=r(406190),_e=r(560945),Ae=r.n(_e);function we(e,t,r,i,n,s,o){var a=s[t],l=o&&o[n],u=void 0!==l?l:e.defaultValue,c=e.fromJSON.call(s,u),d=be.A.triggerNoArgs;if(a!==c){s[t]=c;var h=s[r];h?h.triggerNoArgs():s[r]=d(s,i)}}class Pe{constructor(e){var t=e&&e.exportables;this.properties=t?Ae()(t.properties):[],this.aliases=t?Ae()(t.aliases):{},this.prototype=e}alias(e,t){var r=this.aliases;r||(r=this.aliases={}),r[t]=e}getJsonName(e){var t=this.aliases;return t&&t.hasOwnProperty(e)?t[e]:e}add(e,t,r,i,n){var s="_"+e;return this.properties.push({name:e,key:s,toJSON:r,fromJSON:t,defaultValue:i,config:n}),{enumerable:!0,configurable:!1,get(){return me.A.active&&me.A.recordEvent(this,e),this[s]},set(t){var r=this[s];r!==t&&(this[s]=t,me.A.recordChange(this,e,t,r))}}}computeJSONMethod(){for(var e=[],t=this.properties,r=0,i=t.length;r<i;++r){var n=t[r],s=n.name,o=this.getJsonName(n.name),a=n.key,l=n.key+"_signal";e.push(we.bind(this,n,a,l,s,o))}this.fromJSON=(t,r)=>(e.forEach((e=>e(t,r))),t)}fromJSON(e,t){return this.computeJSONMethod(),this.fromJSON(e,t)}toJSON(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var r={},i=this.properties,n=0,s=i.length;n<s;++n){var o=i[n];me.A.active&&me.A.recordEvent(e,o.name);var a=o.toJSON.call(e,e[o.key],t);!t&&re()(a,o.defaultValue)||(r[this.getJsonName(o.name)]=a)}return r}}var Se=r(685530),xe=r(171354),Ce=r.n(xe);class Oe extends Se.A{constructor(e){super(),this.base=e||[]}at(e){return me.A.active&&me.A.recordEvent(this,"change"),this.base[e]}setAt(e,t){be.A.trigger(this,"change"),this.base[e]=t}toArray(){return me.A.active&&me.A.recordEvent(this,"change"),this.base.slice()}get length(){return me.A.active&&me.A.recordEvent(this,"change"),this.base.length}set length(e){this.base.length!==e&&(this.base.length=e,be.A.trigger(this,"change"))}swapItems(e){this.base=e,be.A.trigger(this,"change")}removeItem(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)}concat(){me.A.active&&me.A.recordEvent(this,"change");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Oe(this.base.concat(...t.map((e=>e instanceof Oe?(me.A.active&&me.A.recordEvent(e,"change"),e.base):e))))}concatToArray(){return this.concat.apply(this,arguments).base}spliceToArray(){return this.splice.apply(this,arguments).base}sliceToArray(){return this.slice.apply(this,arguments).base}mapToArray(){return this.map.apply(this,arguments).base}filterToArray(){return this.filter.apply(this,arguments).base}[Symbol.iterator](){return me.A.active&&me.A.recordEvent(this,"change"),this.base.values()}}Ce().polyfill();var ke=Array.prototype,Te=Oe.prototype,Ee=["fill","pop","push","reverse","shift","unshift","splice","sort","copyWithin"];function Ie(e,t){return e instanceof Array?t.base===e?t:new Oe(e):e}function De(e,t){return t?function(){var t=e.apply(this.base,arguments);return be.A.trigger(this,"change"),Ie(t,this)}:function(){return me.A.active&&me.A.recordEvent(this,"change"),Ie(e.apply(this.base,arguments),this)}}for(var Re=Object.getOwnPropertyNames(ke),je=0,Fe=Re.length;je<Fe;++je){var Ne=Re[je];Object.prototype.hasOwnProperty.call(Te,Ne)||(Te[Ne]=De(ke[Ne],-1!==Ee.indexOf(Ne)))}class Le extends Se.A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;super(),this._swapItems(e)}_swapItems(e){if(e instanceof Map)this.base=e;else{this.base=new Map;for(let t in e)this.base.set(t,e[t])}}swapItems(e){this._swapItems(e),be.A.trigger(this,"change")}has(e){return me.A.active&&(me.A.recordEvent(this,""+e),me.A.recordEvent(this,"change")),this.base.has(e)}get(e){return me.A.active&&(me.A.recordEvent(this,""+e),me.A.recordEvent(this,"change")),this.base.get(e)}set(e,t){if(this.base.get(e)!==t)return this.base.set(e,t),be.A.trigger(this,""+e),be.A.trigger(this,"change"),this}clear(){var e=[];this.base.forEach(((t,r)=>e.push(r))),this.base.clear(),e.forEach((e=>be.A.trigger(this,""+e))),be.A.trigger(this,"change")}delete(e){let t=this.base.delete(e);return be.A.trigger(this,""+e),be.A.trigger(this,"change"),t}get size(){return me.A.active&&me.A.recordEvent(this,"change"),this.base.size}get length(){return this.size}[Symbol.iterator](){return this.base.entries()}}var Me=Map.prototype,Ue=Le.prototype;function $e(e){return function(){return me.A.active&&me.A.recordEvent(this,"change"),e.apply(this.base,arguments)}}for(var ze,He,Je,qe,Ve,Be,We,Ge,Xe,Ke,Ye,Qe,Ze,et,tt,rt=Object.getOwnPropertyNames(Me),it=0,nt=rt.length;it<nt;++it){var st=rt[it];Object.prototype.hasOwnProperty.call(Ue,st)||(Ue[st]=$e(Me[st]))}function ot(e){return"false"!==e&&Boolean(e)}function at(e){return e}function lt(e){return e&&e.toArray?e.toArray():e&&e.slice&&e.slice()}let ut=(ze=s.A.wrapPropertyDecorator,He=s.A.wrapPropertyDecorator,Je=s.A.wrapPropertyDecorator,qe=s.A.wrapPropertyDecorator,Ve=s.A.wrapPropertyDecorator,Be=s.A.wrapPropertyDecorator,We=s.A.wrapPropertyDecorator,Ge=s.A.wrapPropertyDecorator,Xe=s.A.wrapPropertyDecorator,Ke=s.A.wrapPropertyDecorator,Ye=s.A.wrapPropertyDecorator,Qe=s.A.wrapPropertyDecorator,Ze=s.A.wrapPropertyDecorator,et=s.A.wrapPropertyDecorator,tt=class{constructor(e){this._jsonPropertiesType=Pe,this._arrayType=Oe,this._mapType=Le,this._loggedWarning={},this._name=e}wrapArray(e){return new this._arrayType(e)}wrapMap(e){return new this._mapType(e)}exportables(e){return e.hasOwnProperty("exportables")||(e.exportables=new this._jsonPropertiesType(e)),e.exportables}byVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,Ae(),Ae(),s.A.getInitialValue(r),i)}byBooleanVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,ot,Boolean,s.A.getInitialValue(r),i)}byNumberVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,Number,Number,s.A.getInitialValue(r),i)}bySimpleVal(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.exportables(e).add(t,at,at,s.A.getInitialValue(r),i)}byCustomVal(e,t,r,i,n){return this.exportables(e).add(t,(function(e){return i.parse(void 0!==e?e:n,this,t)}),(function(e){return i.serialize(e,this,t)}),s.A.getInitialValue(r))}byRef(e,t,r,i){return this.exportables(e).add(t,(e=>{var t=new i;return t.fromJSON(e||{}),t}),((e,t)=>e?e.toJSON(t):null),s.A.getInitialValue(r))}byOptionalRef(e,t,r,i){return this.exportables(e).add(t,(e=>{if(null==e)return e;var t=new i;return t.fromJSON(e),t}),((e,t)=>null==e?e:e.toJSON(t)),s.A.getInitialValue(r))}byCustomRef(e,t,r,i){return this.exportables(e).add(t,(function(e){var t=i(e,this);if(!t)return null;var r="function"==typeof t?new t:t;return e&&r.fromJSON(e),r}),((e,t)=>e?e.toJSON(t):null),s.A.getInitialValue(r))}byArray(e,t,r,i){var n=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=lt(e)||[];return i?r:n(r,this,t)}),lt,s.A.getInitialValue(r))}byRefArray(e,t,r,i,n){var o=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=[];if(e&&e instanceof Array)for(var s=0,a=e.length;s<a;++s){var l=new i;l.fromJSON(e[s]||{}),r.push(l)}return n?r:o(r,this,t)}),((e,t)=>{var r=e?e.map((e=>e?e.toJSON(t):null)):[];return r.base||r}),s.A.getInitialValue(r))}byCustomRefArray(e,t,r,i,n){var o=this.wrapArray;return this.exportables(e).add(t,(function(e){var r=[];if(e&&e.length)for(var s=0,a=e.length;s<a;++s){var l=e[s],u=i(l,this);if(u){var c="function"==typeof u?new u:u;l&&c.fromJSON(l),r.push(c)}}return n?r:o(r,this,t)}),((e,t)=>{var r=e?e.map((e=>e?e.toJSON(t):null)):[];return r.base||r}),s.A.getInitialValue(r))}byMap(e,t,r,i){var n=this._mapType,o=this.wrapMap;return this.exportables(e).add(t,(function(e){let r=Object.assign({},e);return i?r:o(r,this,t)}),(e=>{let t={};if(e instanceof n)for(let r of e.keys())t[r]=e.get(r);else e&&Object.assign(t,e);return t}),s.A.getInitialValue(r))}byRefMap(e,t,r,i,n){var o=this._mapType,a=this.wrapMap;return this.exportables(e).add(t,(function(e){let r={};for(let t in e){let n=e[t],s=new i;n&&s.fromJSON(n),r[t]=s}return n?r:a(r,this,t)}),((e,t)=>{let r={};if(e instanceof o)for(let i of e.keys()){let n=e.get(i);r[i]=n?n.toJSON(t):null}else if(e)for(let i in e){let n=e[i];r[i]=n?n.toJSON(t):null}return r}),s.A.getInitialValue(r))}alias(e,t,r,i){this.exportables(e).alias(i,t)}},(0,i.A)(tt.prototype,"wrapArray",[ve.A],Object.getOwnPropertyDescriptor(tt.prototype,"wrapArray"),tt.prototype),(0,i.A)(tt.prototype,"wrapMap",[ve.A],Object.getOwnPropertyDescriptor(tt.prototype,"wrapMap"),tt.prototype),(0,i.A)(tt.prototype,"byVal",[ze],Object.getOwnPropertyDescriptor(tt.prototype,"byVal"),tt.prototype),(0,i.A)(tt.prototype,"byBooleanVal",[He],Object.getOwnPropertyDescriptor(tt.prototype,"byBooleanVal"),tt.prototype),(0,i.A)(tt.prototype,"byNumberVal",[Je],Object.getOwnPropertyDescriptor(tt.prototype,"byNumberVal"),tt.prototype),(0,i.A)(tt.prototype,"bySimpleVal",[qe],Object.getOwnPropertyDescriptor(tt.prototype,"bySimpleVal"),tt.prototype),(0,i.A)(tt.prototype,"byCustomVal",[Ve],Object.getOwnPropertyDescriptor(tt.prototype,"byCustomVal"),tt.prototype),(0,i.A)(tt.prototype,"byRef",[Be],Object.getOwnPropertyDescriptor(tt.prototype,"byRef"),tt.prototype),(0,i.A)(tt.prototype,"byOptionalRef",[We],Object.getOwnPropertyDescriptor(tt.prototype,"byOptionalRef"),tt.prototype),(0,i.A)(tt.prototype,"byCustomRef",[Ge],Object.getOwnPropertyDescriptor(tt.prototype,"byCustomRef"),tt.prototype),(0,i.A)(tt.prototype,"byArray",[Xe],Object.getOwnPropertyDescriptor(tt.prototype,"byArray"),tt.prototype),(0,i.A)(tt.prototype,"byRefArray",[Ke],Object.getOwnPropertyDescriptor(tt.prototype,"byRefArray"),tt.prototype),(0,i.A)(tt.prototype,"byCustomRefArray",[Ye],Object.getOwnPropertyDescriptor(tt.prototype,"byCustomRefArray"),tt.prototype),(0,i.A)(tt.prototype,"byMap",[Qe],Object.getOwnPropertyDescriptor(tt.prototype,"byMap"),tt.prototype),(0,i.A)(tt.prototype,"byRefMap",[Ze],Object.getOwnPropertyDescriptor(tt.prototype,"byRefMap"),tt.prototype),(0,i.A)(tt.prototype,"alias",[et],Object.getOwnPropertyDescriptor(tt.prototype,"alias"),tt.prototype),tt);const ct=new ut("Json");var dt,ht,pt,ft,gt,mt,yt,vt,bt,_t,At,wt,Pt,St,xt,Ct,Ot,kt,Tt,Et,It,Dt,Rt,jt,Ft,Nt,Lt,Mt,Ut,$t,zt,Ht,Jt,qt,Vt=r(477749),Bt=r.n(Vt);class Wt extends l.A{toJSON(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.exportables?this.exportables.toJSON(this,e):{}}fromJSON(e){return this.exportables?this.exportables.fromJSON(this,e):this}}Wt.prototype.properties=new Pe;class Gt extends Wt{toJSON(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return W()(Bt()(this._originalSourceJson),super.toJSON(e))}fromJSON(e){return this._originalSourceJson=e,Object.assign(this,e),this.exportables.fromJSON(this,e),this}}let Xt=(dt=ct.byVal,ht=ct.byVal,pt=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"author",ft,this),(0,b.A)(this,"description",gt,this)}},ft=(0,i.A)(pt.prototype,"author",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=(0,i.A)(pt.prototype,"description",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt),Kt=(mt=ct.byVal,yt=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"flags",vt,this)}},vt=(0,i.A)(yt.prototype,"flags",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt),Yt=(bt=ct.byVal,_t=ct.byVal,At=ct.byVal,wt=ct.byVal,Pt=ct.byVal,St=ct.byVal,xt=ct.byRef(Xt),Ct=ct.byRef(Kt),Ot=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"private",kt,this),(0,b.A)(this,"download",Tt,this),(0,b.A)(this,"metadata",Et,this),(0,b.A)(this,"location",It,this),(0,b.A)(this,"favorites_disabled",Dt,this),(0,b.A)(this,"comments_disabled",Rt,this),(0,b.A)(this,"profile_info",jt,this),(0,b.A)(this,"filters",Ft,this)}},kt=(0,i.A)(Ot.prototype,"private",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=(0,i.A)(Ot.prototype,"download",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=(0,i.A)(Ot.prototype,"metadata",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=(0,i.A)(Ot.prototype,"location",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt=(0,i.A)(Ot.prototype,"favorites_disabled",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=(0,i.A)(Ot.prototype,"comments_disabled",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=(0,i.A)(Ot.prototype,"profile_info",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=(0,i.A)(Ot.prototype,"filters",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot),Qt=(Nt=ct.byVal,Lt=ct.byVal,Mt=ct.byVal,Ut=ct.byRef(Yt),$t=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"id",zt,this),(0,b.A)(this,"created",Ht,this),(0,b.A)(this,"updated",Jt,this),(0,b.A)(this,"payload",qt,this)}},zt=(0,i.A)($t.prototype,"id",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=(0,i.A)($t.prototype,"created",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=(0,i.A)($t.prototype,"updated",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qt=(0,i.A)($t.prototype,"payload",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t);var Zt=r(595642);class er extends ce{constructor(e){"string"==typeof e||e instanceof String?(super(e),this._initPromise=this.refreshP()):(super(),this.setAttributes(e),this.href=this.linkHref("self"))}initializedP(){return null!=this._initPromise?this._initPromise.then((()=>this)):Zt.Deferred().resolve(this).promise()}initializedJP(){return this.safeToJSPromise(this.initializedP(...arguments))}cloneAttributes(){return this.attributes.toJSON()}linkHref(e){const t=this.attributes.links?.[e]?.href;return this._linkBase.fullHref(t)}linkFullPath(e){const t=this.attributes.links?.[e]?.href;return this._linkBase.fullPath(t)}hasLink(e){return null!=this.attributes.links?.[e]?.href}hasValidLink(e){const t=this.attributes.links?.[e],r=!0===t?.invalid;return null!=t?.href&&!r}getAttribute(e){return this.attributes[e]}_getAttributeClass(){return this.attributeClass||Qt}_createAttributes(e){var t;const r=this._getAttributeClass(),i=null!==(t=this._attributes)&&void 0!==t?t:new r;return i.fromJSON(e),i}get attributes(){return me.A.recordEvent(this,"attributes"),this._attributes}set attributes(e){this._attributes=this._createAttributes(e),me.A.recordChange(this,"attributes")}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.attributes=e,this.id=this.attributes.id,this._linkBase=new ye(this.attributes.base),this}setAttribute(e,t){this.attributes[e]=t}refreshJP(){return this.safeToJSPromise(this.refreshP())}refreshP(){return this._refreshP()}_refreshP(e){return this.requestP("GET",e).done((e=>this.setAttributes(e))).promise()}updateAttributesP(e,t){return null==t.payload&&(t.payload={}),t.payload.userUpdated=(new Date).toISOString(),this._updateAttributesP(t,e)}_updateAttributesP(e,t){let r;const i=Zt.extend(!0,{},this.attributes.toJSON()),n=()=>this.attributes=Zt.extend(!0,this.attributes.toJSON(),e);return n(),null!=this.updating?(this.updatingApplyList.push(n),r=this.updating.then((()=>this._doUpdateP(t,e,i)))):(this.updatingApplyList=[n],r=this._doUpdateP(t,e,i)),this.updating=r,this.updating.always((()=>{T.A.catalogContext?.assetUpdated(),r===this.updating&&(this.updating=null)}))}_doUpdateP(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n.A.is_enabled("debug")&&H._forceFailNextRequest&&(i=2),this.requestP("POST",this.href,JSON.stringify(t)).then((()=>(null!=e&&g.A.report(e),this.updatingApplyList.shift(),this.refreshP().then((()=>this.updatingApplyList.map((e=>e())))))),((n,s,o)=>{const a=i<2&&(0===s||s>=500);return a?null!=e&&g.A.report(`${e}Retry`):(null!=e&&this.reportOzFailure(`${e}Failure`,n,s,o),this.updatingApplyList.shift()),this.refreshP().then((()=>a?this._doUpdateP(e,t,r,i+1):Zt.Deferred().reject(n,s,o)),(()=>{this.attributes=r}))}))}getOzCreatedDate(){const{created:e}=this.attributes;return e===le?null:new Date(Date.parse(e))}getOzUpdatedDate(){const{updated:e}=this.attributes;return e===le?null:new Date(Date.parse(e))}getUserCreatedDate(){const e=this.attributes.payload?.userCreated;return null==e||e===le?null:new Date(Date.parse(e))}getUserUpdatedDate(){const e=this.attributes.payload?.userUpdated;return null==e||e===le?null:new Date(Date.parse(e))}getBestCreatedDate(){var e;return null!==(e=this.getUserCreatedDate())&&void 0!==e?e:this.getOzCreatedDate()}getBestUpdatedDate(){var e;return null!==(e=this.getUserUpdatedDate())&&void 0!==e?e:this.getOzUpdatedDate()}getBestCreatedDateAttribute(){var e;return null!==(e=this.attributes.payload?.userCreated)&&void 0!==e?e:this.attributes.created}getMostRecentDate(){return new Date(Math.max(this.getBestCreatedDate(),this.getBestUpdatedDate()))}getBestUpdatedDateAttribute(){var e;return null!==(e=this.attributes.payload?.userUpdated)&&void 0!==e?e:this.attributes.updated}}var tr=r(595642);let rr;const ir=(rr=class extends er{static initClass(){this.prototype.DEFAULT_SHARE_AUTHOR_KEY="share_author_default",this.prototype.COMMUNICATION_PREF_KEY="communication_preference",this.prototype.GEN_AI_ACCEPTED_KEY="genai_accepted",this.prototype.HDR_EDIT_VISUALIZATION_KEY="hdr_edit_visualization"}getAccountFirstLaunch(){return this.getApp().first_launch}async setAccountFirstLaunchJP(){if(!this.getApp().first_launch)return await this.updateAppP({first_launch:!0})}async debugClearAccountFirstLaunchJP(){return await this.updateAppP({first_launch:null})}async setAuthHome23TestGroup(){if(!this.getApp().auth_home_23)return await this.updateAppP({auth_home_23:!0})}getAuthHome23TestGroup(){return this.getApp().auth_home_23}getCleanUpIndexV2(){return this.getApp().clean_up_v2}async setCleanUpIndexV2(){if(!this.getApp().clean_up_v2)return await this.updateAppP({clean_up_v2:!0}),await this.updateAppP({clean_up_index_v2:null})}async debugClearCleanUpIndexV2(){return await this.updateAppP({clean_up_v2:null})}getAccountSawPLG_P0(){return this.getApp().plg_p0}async setAccountSawPLG_P0_JP(){if(!this.getApp().plg_p0)return await this.updateAppP({plg_p0:!0})}getTipShown(e){return!0===this.getApp().tips_shown?.[e]}setTipShownP(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.getTipShown(e)===t)return;const r={};return r[e]=t,this.updateAppP({tips_shown:r})}async setTipShownJP(e,t){return await this.setTipShownP(e,t)}clearTipShownP(e){Array.isArray(e)||(e=[e]);const t={};for(var r of e)t[r]=null;return this.updateAppP({tips_shown:t})}async clearTipShownJP(e){return await this.clearTipShownP(e)}getPreferredLocale(){return this.getUniversal()[this.COMMUNICATION_PREF_KEY]}setPreferredLocaleJP(e){return this._updateUniversalP({[this.COMMUNICATION_PREF_KEY]:e})}clearPreferredLocaleJP(){return this._updateUniversalP({[this.COMMUNICATION_PREF_KEY]:null})}getDefaultShareAuthor(){return this.getUniversal()[this.DEFAULT_SHARE_AUTHOR_KEY]}setDefaultShareAuthorP(e){return this._updateUniversalP({[this.DEFAULT_SHARE_AUTHOR_KEY]:e})}clearDefaultAuthorP(){return this._updateUniversalP({[this.DEFAULT_SHARE_AUTHOR_KEY]:null})}getTipData(e){return this.getApp().tips_data?.[e]}setTipDataP(e,t){const r={};return r[e]=t,this.updateAppP({tips_data:r})}getEnabledSneaks(){let e;return null!=(e=this.getApp().enabled_sneaks)?e:[]}setEnabledSneaksP(e){return this.updateAppP({enabled_sneaks:e})}clearAppP(){const e={};for(var t in this.getApp())"similarity_data_ready"!==t&&"freemium"!==t&&(e[t]=null);return this.updateAppP(e)}clearTipsP(){return this.updateAppP({tips_shown:null,tips_data:null})}getSimilarityDataProcessed(){let e=this.getApp().similarity_data_ready;return null!=e?e:e=!1}debugDeleteSimilarityDataProcessedP(){return this.updateAppP({similarity_data_ready:null})}getHavePromptedProofingFeedback(){let e=this.getApp().prompted_proofing_feedback;return null!=e?e:e=!1}setHavePromptedProofingFeedbackP(e){return this.updateAppP({prompted_proofing_feedback:e})}getHaveRestoredPreviously(){let e=this.getApp().restored_previously;return null!=e?e:e=!1}setHaveRestoredPreviously(e){return this.updateAppP({restored_previously:e})}getNewsDialogShownDateP(){let e=this.getApp().news_dialog_shown_date;return null!=e?e:e=null}setNewsDialogShownDateP(e){return this.updateAppP({news_dialog_shown_date:e.toISOString()})}getGenerativeAiTouAccepted(){return this.getUniversal()[this.GEN_AI_ACCEPTED_KEY]}setGenerativeAiTouAcceptedP(e){return this._updateUniversalP({[this.GEN_AI_ACCEPTED_KEY]:e})}getGenerativeAiShadowTipViewCount(){let e;return null!=(e=this.getApp().gen_ai_shadow_tip_view_count)?e:0}setGenerativeAiShadowTipViewCountP(e){return this.updateAppP({gen_ai_shadow_tip_view_count:e})}getCaiSettings(){let e=this.getApp().cai_settings;return null==e&&(e={}),null==e.storageMethod&&(e.storageMethod="embed"),null==e.editList&&(e.editList=!0),null==e.producer&&(e.producer=!1),null==e.connectedAccounts&&(e.connectedAccounts=!1),e}setCaiSettings(e){return this.updateAppP({cai_settings:e})}getHaveClosedPWAButton(){let e=this.getApp().closed_pwa_toast;return null!=e?e:e=!1}setHaveClosedPWAButton(e){return this.updateAppP({closed_pwa_toast:e})}getHaveInstalledPWA(){let e=this.getApp().installed_pwa;return null!=e?e:e=!1}setHaveInstalledPWA(e){return this.updateAppP({installed_pwa:e})}getApp(){return null!=this.attributes.lightroom_web?this.attributes.lightroom_web:{}}getUniversal(){return null!=this.attributes.universal?this.attributes.universal:{}}getAppTheme(){return this.getApp().color_theme}setAppTheme(e){return this.updateAppP({color_theme:e})}updateAppP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r={lightroom_web:e};return e.hasOwnProperty("freemium")&&g.A.report("setFreemiumTagData",{data:r}),this._updateAttributesP(r,t)}_updateUniversalP(e){const t={universal:e};return this._updateAttributesP(t)}getSearchIndexingDate(){return new Date(this.getApp().search_indexing_enabled_date)}setSearchIndexingDateP(e){return this.updateAppP({search_indexing_enabled_date:e.toISOString()})}getLastDuplicateQueryTime(){return this.getApp().last_duplicate_query_time}async setLastDuplicateQueryTimeP(e){return await this.updateAppP({last_duplicate_query_time:e.toISOString()})}getDuplicatesOnTimestamp(){return this.getApp().duplicates_on_timestamp}setDuplicatesOnTimestampP(e){const t=e?e.toISOString():null;return this.updateAppP({duplicates_on_timestamp:t})}async setFreemiumTagP(e,t){return await this.updateAppP({freemium:e},t)}getFreemiumTag(){return this.getApp().freemium}refreshP(){return this._refreshP(this._linkBase.fullPath(""))}setAttributes(e){let t="";e.base&&e.links?.self?.href&&(t+=e.base.replace(/\/$/,"")+e.links.self.href+"/");const r={self:{href:"settings"}};return e.payload?super.setAttributes(tr.extend({base:t,links:r},e.payload)):super.setAttributes({base:t,links:r})}},rr.initClass(),rr);var nr=r(595642);let sr=0,or=0;const ar=[0,0,0,12,74,88,76,32,13,10,135,10];var lr={CHUNK_THRESHOLD:209715200,VIDEO_EXTENSIONS:["3gp","3gpp","avi","dxo","m2ts","m4v","mov","mp4","mpe","mpeg","mpg","mpg4","mts","qt"],ALL_VIDEO_EXTENSIONS:["264","3g2","3gp","3gpp","3gpp2","asf","avc","avi","divx","dv","flv","m1v","m2p","m2t","m2ts","m2v","m4v","mkv","mov","mp4","mpe","mpeg","mpg","mpg4","mpv","mts","ogg","ogv","ps","qt","tod","ts","vob","webm","wmv"],RAW_EXTENSIONS:["3fr","arq","arw","axr","cr2","cr3","crw","dcr","dng","erf","fff","gpr","iiq","kdc","mef","mfw","mos","mrw","nef","nefx","nrw","orf","pef","psd","raf","raw","rw2","rwl","sr2","srf","srw","x3f"],JPEG_EXTENSIONS:["jfif","jpe","jpg","jpeg"],PNG_EXTENSIONS:["png"],TIFF_EXTENSIONS:["tif","tiff"],GIF_EXTENSIONS:["gif"],HEIF_EXTENSIONS:["heif","heic","hif"],JXL_EXTENSIONS:["jxl"],AVIF_EXTENSIONS:["avif"],downloadAssetP(e,t){let r,i,n=e.getFileName();return n=n.replace(/[;/?:@=&"<>#%{}\|\\^~\]`]/g,""),0===n.length&&(n=this.getDefaultFilename(e)),t?(r=e.getMasterHref(!1),i=`${r}/filename/${n}`):(r=e.getDownload2048Href(),n=n.replace(/\.[^.]+$/,".jpg"),i=`${r}/filename/${n}`),this.downloadUrl(i),nr.Deferred().resolve().promise()},downloadUrl:e=>window.location.href=e,async urlToFile(e,t,r){const i=await fetch(e),n=await i.blob(),{mimeType:s,...o}=r||{};return new File([n],t,{type:s||n.type,...o})},getDefaultFilename(e){return e.isVideo()?this.defaultVideoFilename():this.defaultPhotoFilename()},defaultPhotoFilename:()=>(0,f.zt)("$$$/js/viewer/download/no_filename=photo.jpg"),defaultVideoFilename:()=>(0,f.zt)("$$$/js/viewer/download/no_filename_video=video.mp4"),isSupportedUploadType(e){return this.isImage(e)||this.isVideo(e)},isSupportedPPSProfileImageType(e){const t=this.extName(e);return null!=t&&(this.JPEG_EXTENSIONS.includes(t)||this.PNG_EXTENSIONS.includes(t)||this.GIF_EXTENSIONS.includes(t))},isPair(e,t){e.getFileBaseName(),t.getFileBaseName(),e.getCaptureDateString(),t.getCaptureDateString();const r=e.getFileExtension(),i=t.getFileExtension();return!(!this.RAW_EXTENSIONS.includes(r)||!this.JPEG_EXTENSIONS.includes(i)&&!this.HEIF_EXTENSIONS.includes(i))||!(!this.RAW_EXTENSIONS.includes(i)||!this.JPEG_EXTENSIONS.includes(r)&&!this.HEIF_EXTENSIONS.includes(r))},isUploadSupportedFormat(e){return this.isImage(e)||this.isVideo(e)},isFileInfoUploadSupported(e){if(n.A.is_enabled("debug_upload_anything"))return!0;const t=this.getFileExtension(e.fileName),r=this.isImageExtension(t),i=this.isVideoExtension(t);return!(!r&&!i)&&(r?0<e.fileSize&&e.fileSize<1073741824:0<e.fileSize&&e.fileSize<4294967296)},isVideo(e){const t=this.extName(e);return this.isVideoExtension(t)},isVideoExtension(e){return null!=e&&this.ALL_VIDEO_EXTENSIONS.includes(e)},isImage(e){const t=this.extName(e);return this.isImageExtension(t)},isImageExtension(e){return null!=e&&(this.JPEG_EXTENSIONS.includes(e)||this.PNG_EXTENSIONS.includes(e)||this.TIFF_EXTENSIONS.includes(e)||this.RAW_EXTENSIONS.includes(e)||this.HEIF_EXTENSIONS.includes(e)||this.JXL_EXTENSIONS.includes(e)||this.AVIF_EXTENSIONS.includes(e))},_extensionInList(e,t){const r=this.extName(e);return null!=r&&t.includes(r)},isJpeg(e){return this._extensionInList(e,this.JPEG_EXTENSIONS)},isRaw(e){return this._extensionInList(e,this.RAW_EXTENSIONS)},isPng(e){return this._extensionInList(e,this.PNG_EXTENSIONS)},isTiff(e){return this._extensionInList(e,this.TIFF_EXTENSIONS)},isXmp(e){return"xmp"===this.extName(e)},contentTypeForUpload(e){return this.isVideo(e)?"video/*":this.isJpeg(e)?"image/jpeg":this.isPng(e)?"image/png":this.isTiff(e)?"image/tiff":"application/octet-stream"},ozSubtype(e){return this.isVideo(e)?"video":!!this.isImage(e)&&"image"},extName(e){const t=e.name;if(t)return this.getFileExtension(t)},getFileNameWithoutExtension(e){const t=this.getFileExtension(e);return t?e.replace(new RegExp(`\\.${t}$`,"gi"),""):e},getFileExtension(e){const t=e.lastIndexOf(".");return-1!==t?e.substr(t+1).toLowerCase():""},browserCanLoadImage(e){const t=this.getFileExtension(e);return null!=t&&["jpg","jpeg"].includes(t)},isDigestReliable:()=>0===or?!(sr>2):!(sr>or+2),digestP(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r>0){const i=nr.Deferred();return lr._digestP(e,t).done((function(){return i.resolve(...arguments)})).fail((()=>lr.digestP(e,t,r-1).done((function(){return i.resolve(...arguments)})).fail((function(){return i.reject(...arguments)})))),i.promise()}return lr._digestP(e,t)},_digestP(e,t){let r,i,n;const s=nr.Deferred();let o="unknown";n=t?Math.min(1e4,Math.max(e.size/4,2e3)):6e4;const a=setTimeout((()=>{if(sr++,s.reject(`${o}: timeout`),null!=c&&2!==c.readyState)return c.abort()}),n);if(p.doRandomFailure(`digestP for ${e.name}`,.25))return s.promise();const l=e=>{if("pending"===s.state())return sr++,clearTimeout(a),s.reject(`${o}: ${e}`)},u=e=>{if("pending"===s.state())return or++,s.resolve(e),clearTimeout(a)};if((r=null!=window.crypto?window.crypto:window.msCrypto)&&(i=null!=r.subtle?r.subtle:r.webkitSubtle)){o="filereader";var c=new FileReader;return c.onload=function(){const e=c.result;if(window.msCrypto){o="msCrypto";const t=window.msCrypto.subtle.digest({name:"SHA-256"},e);return t.oncomplete=e=>u(e.target.result),t.onerror=e=>l(e?.toString()?.substr(0,100))}return o="crypto",i.digest({name:"SHA-256"},e).then((e=>u(e))).catch((e=>{let t=e?.name||e?.toString().substr(0,100);return"string"!=typeof t&&(t="unknown"),l(t)}))},c.onerror=function(e){let t;return e instanceof ProgressEvent?t=e.lengthComputable?`progressevent as error ${e.loaded} / ${e.total}`:"progressevent as error, not computable":(t=e?.name||e?.toString().substr(0,100),"string"!=typeof t&&(t="unknown")),l(t)},c.readAsArrayBuffer(e),s.then((e=>{if(e instanceof ArrayBuffer){let i="";for(var t of new Uint8Array(e)){var r=t.toString(16);1===r.length?i+="0"+r:i+=r}return i}return e}))}return s.reject()},getBlobType:e=>ar.every(((t,r)=>t===e[r]))?"image/jxl":"image/tiff"};const ur=lr;var cr=r(477907);const dr={_isBetter:(e,t)=>e<0?t<0&&e>t:t<0||e<t,getBestHrefForSize(e,t){let r=-1/0,i="";t*=cr.A.pixelDensity;for(const n in e){const s=e[n],o=n-t;this._isBetter(o,r)&&(i=s,r=o)}return i}};var hr,pr,fr,gr,mr,yr=r(880594);const vr=new(hr=class extends l.A{constructor(){super(),(0,b.A)(this,"isSignedIn",pr,this),(0,b.A)(this,"isReady",fr,this),(0,b.A)(this,"isReadyOrRenderDeferred",gr,this),(0,b.A)(this,"isSusiModalOpen",mr,this),this.isSignedIn=yr.default.isSignedIn(),yr.default.readyJP.then((()=>{this.isReady=!0,this.isSignedIn=yr.default.isSignedIn()})).catch((()=>{this.isReady=!1})),this.readyWithRenderTimeoutJP().then((()=>{this.isReadyOrRenderDeferred=!0})),yr.default.on("signOut",(()=>{this.isSignedIn=!1,this.trigger("signOut")})),this.watch((()=>f.A.locale),(e=>yr.default.locale=e),!0)}readyJP(){return yr.default.readyJP}readyWithRenderTimeoutJP(){return yr.default.readyOrRenderTimeoutJP}get token(){return yr.default.getToken()}},pr=(0,i.A)(hr.prototype,"isSignedIn",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fr=(0,i.A)(hr.prototype,"isReady",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gr=(0,i.A)(hr.prototype,"isReadyOrRenderDeferred",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mr=(0,i.A)(hr.prototype,"isSusiModalOpen",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hr);var br,_r,Ar=r(71786);let wr=(br=class{constructor(){(0,b.A)(this,"ppsProfile",_r,this)}static _config(e){const t=window?.location.hostname;return(Ar.hostnames[t]||Ar.hostnames.default)[e]}static get apiHost(){return this._config("api_host")}static get apiKey(){return this._config("api_key")}static get baseHref(){return`https://${this.apiHost}/api/profile`}static get imageHref(){return`${this.baseHref}/image`}static get options(){return{headers:{"x-api-key":this.apiKey}}}static async getProfile(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};if(t=Object.assign(this.options,t),await vr.readyJP(),vr.isSignedIn){if(t.headers.Authorization=`Bearer ${vr.token}`,this.ppsProfile&&!e)return this.ppsProfile;{const e=await fetch(this.baseHref,t),r=await e.json();if(this.ppsProfile=r,e.status>=200&&e.status<300)return this.ppsProfile;throw g.A.reportFailure("getProfilePPSError",{errorCode:e.status,errorMsg:e.statusText}),new Error(e.status)}}}static async putProfileImage(e,t){let r={};r=Object.assign(this.options,r),r.method="PUT",r.headers["content-type"]=t,r.body=e,await vr.readyJP(),r.headers.Authorization=`Bearer ${vr.token}`;const i=await fetch(this.imageHref,r);if(i.status>=200&&i.status<300)return i;throw g.A.reportFailure("putProfileImagePPSError",{errorCode:i.status,errorMsg:i.statusText}),new Error(i.status)}},_r=(0,i.A)(br.prototype,"ppsProfile",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),br);var Pr,Sr,xr,Cr;let Or=(Pr=class extends er{constructor(){super(...arguments),(0,b.A)(this,"pollingForOzAvatar",Sr,this),(0,b.A)(this,"hasDefaultAvatar",xr,this),(0,b.A)(this,"ppsProfile",Cr,this)}setAttributes(e){super.setAttributes(e),this.setUserPPSProfile()}getInitials(){return this.attributes.first_name?.length?this.attributes.last_name?this.attributes.first_name[0]+this.attributes.last_name[0]:this.attributes.first_name[0]:null}getFullName(){var e;return null!==(e=this.attributes.full_name)&&void 0!==e?e:""}hackCacheableLinkHref(e){if(null!=e)return e.replace("/v2/","/v2c/")}getAvatarUrl(e){const t={};if(this.id===T.A.account?.id)return T.A.account.getAvatarUrl(e);{for(const e in this.attributes.links){const r=this.attributes.links[e];if("/rels/avatars/"===e.substr(0,14)){const{href:e,size:i}=r;null!=e&&null!=i&&(t[i]=e)}}const r=dr.getBestHrefForSize(t,e);return this.hackCacheableLinkHref(this._linkBase.fullHref(r))}}async setUserPPSProfile(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.ppsProfile=await this.getPPSProfile(e),this.hasDefaultAvatar=this.ppsProfile?.is_default_image}async getPPSProfile(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return await wr.getProfile(e)}async updatePPSProfileImage(e){const t=`image/${ur.getFileExtension(e.name)}`;return await wr.putProfileImage(e,t)}},Sr=(0,i.A)(Pr.prototype,"pollingForOzAvatar",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xr=(0,i.A)(Pr.prototype,"hasDefaultAvatar",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cr=(0,i.A)(Pr.prototype,"ppsProfile",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pr);var kr,Tr,Er,Ir,Dr,Rr,jr,Fr,Nr,Lr,Mr,Ur,$r,zr,Hr;let Jr=(kr=ct.byVal,Tr=ct.byVal,Er=ct.byVal,Ir=ct.byVal,Dr=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"used",Rr,this),(0,b.A)(this,"limit",jr,this),(0,b.A)(this,"display_limit",Fr,this),(0,b.A)(this,"warn",Nr,this)}},Rr=(0,i.A)(Dr.prototype,"used",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jr=(0,i.A)(Dr.prototype,"limit",[Tr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fr=(0,i.A)(Dr.prototype,"display_limit",[Er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nr=(0,i.A)(Dr.prototype,"warn",[Ir],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dr),qr=(Lr=ct.byRef(Jr),Mr=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"storage",Ur,this)}},Ur=(0,i.A)(Mr.prototype,"storage",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mr),Vr=($r=ct.byRef(qr),zr=class extends Qt{constructor(){super(...arguments),(0,b.A)(this,"entitlement",Hr,this)}},Hr=(0,i.A)(zr.prototype,"entitlement",[$r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zr);const Br=!1,Wr=!0;class Gr{constructor(e){this.policy=e}get defaultSpacePrivateValue(){return this.hasRestrictions?!this.allowAnyoneCanView:Br}get defaultSpaceAllowAccessRequestsValue(){return this.hasRestrictions?this.allowAccessRequests:Wr}get canChangeLinkAccessSetting(){return!this.hasRestrictions||this.allowInviteOnly&&this.allowAnyoneCanView}get hasRestrictions(){return null!=this.policy}get policyAllowsSharing(){return this.allowAnyoneCanView||this.allowInviteOnly}get allowAnyoneCanView(){return!0!==this.policy?.publicSharingDisallowed}get allowAnyoneCanUpload(){return!0!==this.policy?.anyoneCanUploadDisallowed}get allowInviteOnly(){return"none"!==this.policy?.invitationSharing}get restrictInviteDomains(){return"allowDomains"===this.policy?.invitationSharing}get allowedInviteDomains(){return this.policy?.allowDomains}get allowAccessRequests(){return!0!==this.policy?.requestAccessSharingDisallowed}get allowImagesInFeedback(){return!0!==this.policy?.feedbackDisallowed}get allowCommunityPosting(){return!0!==this.policy?.communityPostingDisallowed}get allowFreeStorage(){return!0!==this.policy?.freeStorageDisallowed}}var Xr=r(341857).A;let Kr;const Yr=Kr=function(){var e,t,r,s;return e=A(2e3),t=class extends Or{constructor(){super(...arguments),(0,b.A)(this,"pollingForSubscription",r,this),(0,b.A)(this,"sharePolicy",s,this)}static initClass(){this.prototype.attributeClass=Vr,this.prototype.FIND_SELF_ID="00000000000000000000000000000000",this.prototype.FIND_SELF_PATH="/v2/accounts/00000000000000000000000000000000",this.prototype.handleAuthErrors=!1,this.prototype.isFirstLaunch=!1}setAttributes(e){return super.setAttributes(e),this.settings=new ir(e),this.sharePolicy=new Gr(e.policies),this.configuredPreferredLocale(),n.A.is_enabled("debug")&&this.debugLogLocaleState(),this}debugLogLocaleState(){if(Xr.sdk)return;console.group("Locale State");const e=f.A.is_default_locale_fallback?"(auto)":"(setting)";console.log("Current locale: ",f.A.locale,e),console.log("1. locale cookie:",he("locale")),console.log("2. locale_pass cookie:",he("locale_pass"));const t=null!=f.A.browser_locale?"(The first one we support)":"(We dont support any)";return console.log("3. Browser-requested locale:",f.A.browser_locale,t),console.log("Account communication preference: ",this.getPreferredLocale()),console.groupEnd()}getStatus(){return n.A.is_enabled("debug_account_sub_expired")?"subscription_expired":n.A.is_enabled("debug_account_trial_expired")?"trial_expired":this.attributes.entitlement.status}getIsFreemium(){return this.settings.getApp().freemium}get expiredDate(){return this.attributes.entitlement?.expired_date}get freeSharingBeginDate(){return this.attributes.config?.free_sharing_begin_date}isSubscriber(){return"subscriber"===this.getStatus()}subscriptionStartDate(){const e=this.attributes.entitlement.current_subs?.purchase_date;return null!=e?Date.parse(e):void 0}isTrialExpired(){return"trial_expired"===this.getStatus()||"trial"===this.getStatus()&&(new Date).getTime()>Date.parse(this.attributes.entitlement.trial?.end)}trialDaysRemaining(){if("trial"!==this.getStatus())return;const e=Date.parse(this.attributes.entitlement.trial?.end),t=(new Date).getTime(),r=e-t;return null!=e&&null!=t&&r>0?Math.ceil(r/864e5):void 0}isSubscriptionExpired(){return"subscription_expired"===this.getStatus()}sendBonanzaFeedbackJP(e){const t=e.getOzData(this);return this.requestJP("POST","/v2/events/feedback",JSON.stringify(t))}sendFirstLaunchMetric(){if(this.settings.getAccountFirstLaunch())return!1;try{if(Date.parse(this.getOzCreatedDate())>Date.parse("2024-03-13:00:00Z"))return this.isFirstLaunch=!0,this.settings.setAccountFirstLaunchJP(),!0}catch(e){console.error("error parsing account created date"),g.A.reportFailure("Failure parsing oz account created date for sendFirstLaunchMetric")}return this.settings.setAccountFirstLaunchJP(),!1}toggleOzFeature(e,t){const r=`${this.href}/feature_classes/${e}`;return t?this.requestP("PUT",r,"{}"):this.requestP("DELETE",r,"{}")}pollForSubscriptionStatusJP(e){const t=6e4,r=new Date;return this._pollForSubscriptionStatusJP(t,1e3).catch((()=>(e?.(),this._pollForSubscriptionStatusJP(54e4,1e3).catch((e=>{const t=new Date,[i,n,s]=e,o=t-r>=66e4;this.reportOzFailure("processingPurchaseFailed",i,n,s,{timeout:o})})))))}_pollForSubscriptionStatusJP(e,t){return this.pollingForSubscription=!0,new Promise(((r,i)=>{setTimeout((()=>{if(this.pollingForSubscription)return i()}),e);var n=()=>this.refreshJP().then((()=>{if(this.pollingForSubscription)return"subscriber"===this.getStatus()?r():setTimeout((()=>n()),t)}),(e=>{if(this.pollingForSubscription){if(e instanceof Array){const r=e[1];return r>=400&&r<500?i(e):setTimeout((()=>n()),t)}return i()}}));return n()})).finally((()=>this.pollingForSubscription=!1))}getWCDGuid(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]||-1!==this.attributes.wcd_guid.indexOf("@")?this.attributes.wcd_guid:`${this.attributes.wcd_guid}@AdobeID`}getFullName(){return this.attributes.full_name}getFirstName(){return this.attributes.first_name}getLastName(){return this.attributes.last_name}getEmail(){return this.attributes.email}getCountry(){return this.attributes.country}isSearchIndexed(){return null!=this.attributes.config.search_index&&this.attributes.config.search_index}ozFeatureEnabled(e){return this.attributes.config.hasOwnProperty(e)}debugResetBestPhotosP(){return this.settings.debugDeleteSimilarityDataProcessedP().then((()=>{const e=this.getClusterFlagHref();return this.requestP("DELETE",e)}))}clearDefaultAuthor(){return this.settings.clearDefaultAuthorP()}setPreferredLocaleJP(e){if(Xr.sdk)return;return Object.keys(f.A.locale_hash).includes(e)?e===this.getPreferredLocale()?Promise.resolve():this.settings.setPreferredLocaleJP(e):Promise.reject()}getPreferredLocale(){return this.settings.getPreferredLocale()}clearPreferredLocaleJP(){return this.settings.clearPreferredLocaleJP()}configuredPreferredLocale(){if(Xr.sdk)return;if(this.getPreferredLocale()?.length>0)return;const e=Object.keys(f.A.locale_hash);return!f.A.is_default_locale_fallback&&e.includes(f.A.locale)?(g.A.report("localeConfigSetCommunicationPref",{locale:f.A.locale}),this.setPreferredLocaleJP(f.A.locale)):void 0}checkAccountLocale(){if(!Xr.sdk&&this.getPreferredLocale()?.length>0&&f.A.locale?.length>0)return this.getPreferredLocale().toLowerCase()!==f.A.locale.toLowerCase()?g.A.report("localeMismatchBrowserVsAccount",{locale:this.getPreferredLocale(),browserLocale:f.A.locale}):void 0}setDefaultShareAuthor(e){return e===this.getFullName()?this.clearDefaultAuthor():this.settings.setDefaultShareAuthorP(e)}getDefaultShareAuthor(){const e=this.settings.getDefaultShareAuthor();return null!=e?e:this.getFullName()}getAppsP(){const e=this.linkHref("/rels/apps");return this.requestP("GET",e).done((e=>{this.appsData=e}))}hasTriedLrD(){if(p.shouldOverrideLrDesktopUsage())return p.getLrDesktopUsageOverride();for(var e of this.appsData.apps)if("AdobeLightroom"===e.client_app)return!0;return!1}hasTriedLrM(){if(p.shouldOverrideLrMobileUsage())return p.getLrMobileUsageOverride();for(var e of this.appsData.apps)if("LrMobile"===e.client_app)return!0;return!1}getEnforcedMaxStorageLimit(){return n.A.is_enabled("debug_0_storage_limit")?0:this.attributes.entitlement.storage.limit}getAdvertizedMaxStorageLimit(){return n.A.is_enabled("debug_0_storage_limit")?0:this.attributes.entitlement.storage.display_limit}isStorageAtLimit(){return this.getUsedStorage()>=this.getAdvertizedMaxStorageLimit()}isStorageAtWarn(){return!this.isStorageAtLimit()&&this.getUsedStorage()>=this.getWarnStorageLimit()}getWarnStorageLimit(){return this.attributes.entitlement.storage.warn}getUsedStorage(){return this.attributes.entitlement.storage.used}isPooledQuota(){return this.attributes.entitlement.storage.pooledQuota}getUsedStoragePercent(){if(0===this.getAdvertizedMaxStorageLimit())return 100;const e=.01*this.getAdvertizedMaxStorageLimit();return Math.min(100,Math.max(this.getUsedStorage(),e)/this.getAdvertizedMaxStorageLimit()*100)}getUsedStorageRatio(){return 0===this.getAdvertizedMaxStorageLimit()?1:Math.min(1,this.getUsedStorage()/this.getAdvertizedMaxStorageLimit())}isSimilarityDataProcessed(){return!n.A.is_enabled("best_photos_no_similarity_data")&&this.settings.getSimilarityDataProcessed()}getAvatarUrl(e){if(this.ppsProfile?.images)return dr.getBestHrefForSize(this.ppsProfile?.images,e)}},r=(0,i.A)(t.prototype,"pollingForSubscription",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=(0,i.A)(t.prototype,"sharePolicy",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.A)(t.prototype,"debugLogLocaleState",[e],Object.getOwnPropertyDescriptor(t.prototype,"debugLogLocaleState"),t.prototype),Kr=t,Kr.initClass(),Kr}();Kr.getCurrentP=function(){return new Kr(`${T.A.hostOverride}/v2/accounts/00000000000000000000000000000000`).initializedP()};var Qr=r(875472),Zr=r(636550),ei=r(189795),ti=r.n(ei),ri=r(595642);class ii{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.requestQueue=[],this.runningRequests=0,this.finished=!1,this.failed=!1,this.deferred=null,this.maxParallelRequests=e,this.deferred=ri.Deferred()}promise(){return this.deferred.promise()}empty(){this.requestQueue=[]}enqueuePromise(e){if(this.finished)throw"Enqueued on a finished RequestQueue";this.requestQueue.push(e),this._requestMore()}_requestMore(){if(0===this.requestQueue.length&&0===this.runningRequests&&!this.failed)return this.deferred.resolve(),void(this.finished=!0);for(;this.requestQueue.length>0&&this.runningRequests<this.maxParallelRequests;){const e=this.requestQueue.shift();this.runningRequests+=1,e().always((()=>{this.runningRequests-=1,this.deferred.notify(this.requestQueue.length)})).done((()=>this._requestMore())).fail((()=>{this.finished=!0,this.failed=!0,this.deferred.reject()}))}}}const ni=new class{get isSupportedLanguage(){return["en-US"].includes(f.A.locale)}get isOptedIn(){return T.A.account?.ozFeatureEnabled(T.A.FEATURES.SEMANTIC_SEARCH_OPT_IN)}get isMigrationComplete(){return T.A.account?.ozFeatureEnabled(T.A.FEATURES.SEMANTIC_SEARCH_MIGRATION_COMPLETE)}get isIndexing(){return n.A.is_enabled("witchcraft")&&this.isOptedIn&&!this.isMigrationComplete}get canUseSemanticSearch(){return n.A.is_enabled("witchcraft")&&this.isSupportedLanguage&&this.isOptedIn&&this.isMigrationComplete}};var si,oi,ai,li,ui,ci=r(276284),di=r(595642);let hi=0;si=class{constructor(e){(0,b.A)(this,"loadTime",oi,this),this.href=e.href,this._deferred=di.Deferred(),this.requestCount=1,this.requestOrderId=hi++,this.isLoaded=!1,this.loadedP=this._deferred.promise()}loadP(e){e.startImageLoad();const t=new Date,{batchStartTime:r}=e;return this.image=new Image,this.image.onload=()=>(this.isLoaded=!0,this.loadTime=new Date-t,(()=>{if(e.batchStartTime===r)e.finishImageLoad(t)})(),this._deferred.resolve()),this.image.onerror=()=>(this.isLoaded=!1,e.cancelImageLoad(),this._deferred.reject()),this.image.src=this.href,this.loadedP}},oi=(0,i.A)(si.prototype,"loadTime",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai=class{constructor(){(0,b.A)(this,"loadCount",li,this),(0,b.A)(this,"totalLoadTimeMs",ui,this),this.batchOpenRequests=0,this.batchCompletedCount=0}get thumbLoadAvgMs(){return 0===this.loadCount?0:this.totalLoadTimeMs/this.loadCount}startBatch(){return this.batchStartTime=new Date,this.lastEndTime=this.batchStartTime,this.batchOpenRequests=1}startImageLoad(){return null!=this.batchStartTime?this.batchOpenRequests++:this.startBatch()}cancelImageLoad(){return this.batchOpenRequests--}finishImageLoad(e){const t=new Date,r=t-this.lastEndTime;return this.totalLoadTimeMs+=r,this.loadCount++,this.batchOpenRequests--,this.batchOpenRequests<=0?(this.batchStartTime=null,this.batchOpenRequests<0?console.warn(`Negative open requests: ${this.batchOpenRequests}`):void 0):this.lastEndTime=t}},li=(0,i.A)(ai.prototype,"loadCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ui=(0,i.A)(ai.prototype,"totalLoadTimeMs",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}});var pi,fi,gi,mi,yi,vi,bi,_i,Ai,wi,Pi,Si,xi=r(495538),Ci=r.n(xi),Oi=r(595642);let ki;const Ti=["thumbnail2x","640","1280","2048","panorama"];let Ei=0;const Ii=["2048-avif","panorama-avif"];let Di=(pi=class{static initClass(){this.useOzCredentials=!1}constructor(e,t,r,i){(0,b.A)(this,"loadTime",fi,this),(0,b.A)(this,"loadEndTime",gi,this),(0,b.A)(this,"priority",mi,this),(0,b.A)(this,"requestOrderId",yi,this),(0,b.A)(this,"loadedHref",vi,this),this.priority=e,this.asset=t,this.rendition=r,this.href=i,this._deferred=Oi.Deferred(),this._cancelDeferred=Oi.Deferred(),this.requestCount=1,this.isLoaded=!1,this.isQueued=!1;const[n,s]=this.asset.getRenditionDimensions(this.rendition);this.megaPixels=n*s/1048576,this.ozImageP=null,this.loadedP=this._deferred.promise(),this.loadedJP=new Promise(((e,t)=>this.loadedP.done((()=>e())).fail((()=>t))))}async loadJP(e){return null!=this.image?this.loadedJP:await this.loadP(e)}loadP(e){if(null!=this.image)return this.loadedP;this.isQueued=!1,this.requestOrderId=Ei++,e.startImageLoad();const t=new Date,{batchStartTime:r}=e,i=()=>{if(e.batchStartTime===r)return e.finishImageLoad(this,t)};if(this.image=new Image,this.image.onload=()=>(this.isLoaded=!0,this.loadedHref=this.image.src,this.loadEndTime=new Date,this.loadTime=this.loadEndTime-t,i(),this._deferred.resolve()),this.image.onerror=()=>(this.isLoaded=!1,e.cancelImageLoad(this,t),this._deferred.reject()),this.useOzCredentials){if(null!=this.ozImageP)return;this.ozImageP=ce.prototype.requestP("GET",this.href,null,{responseType:"arraybuffer",cancelPromise:this._cancelDeferred}),this.ozImageP.fail((()=>(this._deferred.reject(),e.cancelImageLoad(this,t)))),this.ozImageP.then(((e,t,r)=>{const i=new Blob([new Uint8Array(e)],{type:r.getResponseHeader("Content-Type")});return this.image.src=URL.createObjectURL(i)}))}else this.image.src=this.href;return this.loadedP}cancel(){return this.useOzCredentials?this._cancelDeferred.resolve():this.image?this.image.src="":void 0}dispose(){if(null!=this.image?.src&&this.useOzCredentials)return URL.revokeObjectURL(this.image.src)}},fi=(0,i.A)(pi.prototype,"loadTime",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gi=(0,i.A)(pi.prototype,"loadEndTime",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mi=(0,i.A)(pi.prototype,"priority",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi=(0,i.A)(pi.prototype,"requestOrderId",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vi=(0,i.A)(pi.prototype,"loadedHref",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pi);Di.initClass();let Ri=(bi=class{constructor(){(0,b.A)(this,"loadCount",_i,this),(0,b.A)(this,"loadTimeMs",Ai,this),(0,b.A)(this,"megaPixelsLoaded",wi,this),(0,b.A)(this,"cancelledCount",Pi,this),(0,b.A)(this,"megaPixelsCancelled",Si,this)}get megaPixelsPerSecond(){return 0===this.loadCount?0:this.megaPixelsLoaded/(this.loadTimeMs/1e3)}get errorAdjustedMegaPixelsPerSecond(){return 0===this.loadCount?0:(this.megaPixelsLoaded+this.megaPixelsCancelled/2)/(this.loadTimeMs/1e3)}update(e,t){return this.loadCount++,this.loadTimeMs+=e,this.megaPixelsLoaded+=t}updateCancelled(e,t){return this.cancelledCount++,this.loadTimeMs+=e,this.megaPixelsCancelled+=t}},_i=(0,i.A)(bi.prototype,"loadCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ai=(0,i.A)(bi.prototype,"loadTimeMs",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wi=(0,i.A)(bi.prototype,"megaPixelsLoaded",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pi=(0,i.A)(bi.prototype,"cancelledCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Si=(0,i.A)(bi.prototype,"megaPixelsCancelled",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bi);class ji{constructor(){this.timingInfo=new Ri,this.batchOpenRequests=0,this.batchCompletedCount=0,this.recentTimingInfo=[]}startBatch(){return this.batchStartTime=new Date,this.lastEndTime=this.batchStartTime,this.lastErrorEndTime=this.batchStartTime,this.batchTiming=new Ri,this.batchOpenRequests=1}startImageLoad(){return null!=this.batchStartTime?this.batchOpenRequests++:this.startBatch()}cancelImageLoad(e,t){return this._finish(e,t,!1)}finishImageLoad(e,t){return this._finish(e,t,!0)}_finish(e,t,r){const i=new Date,n=i-this.lastEndTime;if(this.lastEndTime=i,r?(this.timingInfo.update(n,e.megaPixels),this.batchTiming.update(n,e.megaPixels)):(this.timingInfo.updateCancelled(n,e.megaPixels),this.batchTiming.updateCancelled(n,e.megaPixels)),this.batchOpenRequests--,this.batchOpenRequests<=0&&(this.batchStartTime=null,this.batchOpenRequests<0))return console.warn(`ImageCache: Negative open requests: ${this.batchOpenRequests}`)}}const Fi=(ki=class{static initClass(){this.IMMEDIATE_PRIORITY=999999999}constructor(){let e;this.queuedRequests=new(Ci())(((e,t)=>e.priority>t.priority)),this.usePixelDensityMultiplier,this.maxRequestCount=20,this.stats=new ji,e=cr.A.isCompactScreen()?2:5,this.caches={thumbnail2x:new ci.LRUCache(1e3*e),640:new ci.LRUCache(1e3*e),1280:new ci.LRUCache(200*e),2048:new ci.LRUCache(100*e),panorama:new ci.LRUCache(100*e),"2048-avif":new ci.LRUCache(100*e),"panorama-avif":new ci.LRUCache(100*e)}}setUseOzCredentials(e){return Di.prototype.useOzCredentials=e}check(e,t,r){const i=e.getBestRenditionTypeForSize(t,r,!0);return this.caches[i].get(e.getRenditionHref(i))}checkAssetHref(e,t){const r=Ti.slice();for(var i of(r.push(...Ii),r)){var n=this.caches[i].get(t);if(n?.asset===e)return n}return null}get(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=t.getBestRenditionTypeForSize(r,i,!0);return this.getRendition(e,t,o,n,s=!1)}stop(e){if(null!=e&&!e.isLoaded)return e.requestCount--,0===e.requestCount?(this.caches[e.rendition].remove(e.href),e.cancel()):void 0}getFastPreview(e,t){let r,i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2048",s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=Ti.indexOf(n);if(("2048"===n||"panorama"===n)&&o&&(i=`${n}-avif`,r=this.caches[i].get(`${t.getRenditionHref(i)}.avif`),r?.isLoaded))return r;for(;a>=0;){if(i=Ti[a],r=this.caches[i].get(t.getRenditionHref(i)),r?.isLoaded)return r;a--}return this.getRendition(e,t,"thumbnail2x",s)}getRendition(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n.A.is_enabled("debug")&&(Ti.includes(r)||console.warn(`Unexpected rendition type ${r}`));let o=t.getRenditionHref(r);if(null==o)return null;"2048"!==r&&"panorama"!==r||!s||(o=`${o}.avif`,r=`${r}-avif`);const a=this.caches[r];let l=a.get(o);return null==l||l.isLoaded||i||l.requestCount++,i||(null!=l?l.isQueued&&e!==l.priority&&(l.priority=e,this._queueRequest(l)):(l=new Di(e,t,r,o),a.set(o,l),this.stats.batchOpenRequests<this.maxRequestCount?l.loadP(this.stats).always((()=>window.requestAnimationFrame((()=>this._checkQueue())))):this._queueRequest(l))),l}_queueRequest(e){return e.isQueued=!0,this.queuedRequests.add({priority:e.priority,imageInfo:e})}_checkQueue(){if(this.stats.batchOpenRequests<this.maxRequestCount)for(;this.queuedRequests.size>0;){var e=this.queuedRequests.poll();if(e.priority===e.imageInfo.priority){var{imageInfo:t}=e;if(t.isQueued&&t.requestCount>0)return void t.loadP(this.stats).always((()=>window.requestAnimationFrame((()=>this._checkQueue()))))}}}},ki.initClass(),ki);var Ni,Li,Mi,Ui,$i,zi,Hi,Ji,qi,Vi=r(595642);let Bi=(Ni=class{constructor(){(0,b.A)(this,"_state",Li,this),(0,b.A)(this,"uploadStatus",Mi,this),(0,b.A)(this,"currentSpace",Ui,this),(0,b.A)(this,"publicGallery",$i,this),(0,b.A)(this,"publicGalleryLoaded",zi,this),(0,b.A)(this,"shareSidebarAlbums",Hi,this),(0,b.A)(this,"pageJustLoaded",Ji,this),(0,b.A)(this,"showingNews",qi,this),this.libraryPages=!1,this.newUser=!1,this.catalogs=null,this.embedded=null,this.recentAlbumsAndAdhocs=new Array,this.deletedAssets={},this.stateIsDirty=!1,this.firstAppState=!0,this.imageCache=new Fi,this.showFirstEditTip=!1}get state(){return this._state}set state(e){return null!=this._state&&(this.firstAppState=!1),this._state=e}get catalog(){return T.A.catalogContext}get space(){return this.currentSpace||T.A.spaceContext}get spaces(){return T.A.spaces}get account(){return T.A.account}setSpaceContext(e){this.currentSpace=e}get ownedLibraryView(){return!!this.libraryPages&&!this.state?.isSharedWithYouGrid()}get nonFreeLibraryPages(){return this.libraryPages&&null!=this.catalog}loadPublicGalleryP(){return this.libraryPages?this.catalog.gallerySpaces.allP().done((e=>(e.length>0&&(this.publicGallery=e[0]),this.publicGalleryLoaded=!0))):Vi.Deferred().reject()}addRecentAlbumsAndAdhocs(e){if(this.hasRecentAlbum(e)?e.id!==this.recentAlbumsAndAdhocs[this.recentAlbumsAndAdhocs.length-1].id&&(this.recentAlbumsAndAdhocs.splice(this.recentAlbumsAndAdhocs.indexOf(this.findInRecentAlbum(e)),1),this.recentAlbumsAndAdhocs.push(e)):this.recentAlbumsAndAdhocs.push(e),this.recentAlbumsAndAdhocs.length>3)return this.recentAlbumsAndAdhocs.shift()}deleteRecentAlbumsAndAdhocs(e){if(this.hasRecentAlbum(e))return this.recentAlbumsAndAdhocs.splice(this.recentAlbumsAndAdhocs.indexOf(e),1)}hasRecentAlbum(e){return this.recentAlbumsAndAdhocs.filter((t=>t.id===e?.id)).length>0}findInRecentAlbum(e){return this.recentAlbumsAndAdhocs.find((t=>t.id===e?.id))}assetIdsDeleted(e){return e.map((e=>this.deletedAssets[e]=!0))}assetIdsRestored(e){return e.map((e=>this.deletedAssets[e]=!1))}isAssetIdDeleted(e){return!0===this.deletedAssets[e]}},Li=(0,i.A)(Ni.prototype,"_state",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=(0,i.A)(Ni.prototype,"uploadStatus",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ui=(0,i.A)(Ni.prototype,"currentSpace",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$i=(0,i.A)(Ni.prototype,"publicGallery",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zi=(0,i.A)(Ni.prototype,"publicGalleryLoaded",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hi=(0,i.A)(Ni.prototype,"shareSidebarAlbums",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ji=(0,i.A)(Ni.prototype,"pageJustLoaded",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qi=(0,i.A)(Ni.prototype,"showingNews",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ni);Bi=new Bi,m.G.enabled&&(m.G.AppData=Bi),d.enabled&&(d.AppData=Bi);const Wi=Bi;var Gi,Xi,Ki,Yi,Qi,Zi,en=r(595642);let tn=(Gi=class extends ce{constructor(){super(...arguments),(0,b.A)(this,"finished",Xi,this),(0,b.A)(this,"length",Ki,this),(0,b.A)(this,"totalCount",Yi,this),(0,b.A)(this,"_models",Qi,this),(0,b.A)(this,"_dirty",Zi,this)}reset(){this.indices={},this.finished=!1,this.page=0,this.length=0,this.totalCount=null,this._dirty=!1,this._models?this._models.swapItems([]):this._models=new Oe}markDirty(){return this._dirty=!0,this.trigger("dirty"),this}isDirty(){return this._dirty}hasLayoutSegments(){return!1}_add(e){null==this.indices[e.id]&&this._push(e)}_push(e){this._models.push(e),this.indices[e.id]=this.length++,this.trigger("modelIndexChanged")}_reindex(e){null==e&&(this.indices={},e=0);const{models:t}=this,{indices:r}=this;for(let i=e,n=t.length-1;i<=n;i++)r[t[i].id]=i;this.length=t.length,this.trigger("modelIndexChanged")}get models(){return this._models.base}get modelsBindable(){return this._models}isEmpty(){return 0===this._models.length}async isEmptyJP(){return!!this.isEmpty()&&(!!this.finished||(await this.fetchP(),this.isEmpty()))}isKnownEmpty(){return this.isEmpty()&&this.finished}async fetchJP(){return await this.safeToJSPromise(this.fetchP())}async allJP(){return await this.allP()}allP(){return this.finished?en.Deferred().resolve(this.models.slice()).promise():this.fetchP().then((()=>this.allP()))}at(e){return this._models.at(e)}atP(e){return e<this._models.length||this.finished?en.Deferred().resolve(this.at(e)).promise():this.fetchP().then((()=>this.atP(e)))}atJP(e){return e<this._models.length||this.finished?Promise.resolve(this.at(e)):this.fetchJP().then((()=>this.atJP(e)))}firstP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<this._models.length?en.Deferred().resolve(this.at(e)).promise():en.Deferred().reject().promise()}range(e,t){let r;const i=Math.max(0,e);return r=null!=this.totalCount?Math.min(this.totalCount,t+1):t+1,this._models.sliceToArray(i,r)}rangeP(e,t){if(t<this._models.length||this.finished){const r=this.range(e,t);return en.Deferred().resolve(r).promise()}return this.fetchP().then((()=>this.rangeP(e,t)))}get(e){const t=this.index(e);return this.at(t)}getP(e){return this.indexP(e).then((e=>this.at(e)))}getJP(e){return this.indexJP(e).then((e=>this.at(e)))}index(e){return this.indices[e]}indexP(e){if(e){const t=this.index(e);return null!=t?en.Deferred().resolve(t).promise():this.fetchP().then((()=>this.indexP(e)))}return en.Deferred().reject()}indexJP(e){if(e){const t=this.index(e);return null!=t?Promise.resolve(t):this.fetchJP().then((()=>this.indexJP(e)))}return Promise.reject()}isPageLoaded(e){const t=this.pageSize*e+this.pageSize;return this.length>t||this.finished}isPagePastEnd(e){const t=this.pageSize*e;return this.finished&&e>0&&t>=this.length}pageP(e){return this.pagesP(e,e+1)}async pageJP(e){return await this.pagesJP(e,e+1)}pages(e,t){const r=this.pageSize*e,i=this.pageSize*t;return this._models.sliceToArray(r,i)}pagesP(e,t){const r=this.pageSize*t,i=r<=this.length,n=this.finished&&r>=this.length;return i||n?en.Deferred().resolve(this.pages(e,t),n).promise():this.fetchP().then((()=>this.pagesP(e,t)))}async pagesJP(e,t){return await this.pagesP(e,t)}totalCountP(){return null!=this.totalCount?en.Deferred().resolve(this.totalCount).promise():en.Deferred().reject()}pagesLoaded(){return this.finished?Math.ceil(this.length/this.pageSize):Math.floor(this.length/this.pageSize)}deleteLocally(e){this._deleteMany(e)}_deleteMany(e){let t;const r=[];for(const i of e)t=this.index(i),null!=t&&r.push(t);r.sort(((e,t)=>e-t));let i=0;for(let e=0;e<r.length;e++)t=r[e],this._models.splice(t-i++,1);null!=this.totalCount&&(this.totalCount-=e.length),r.length>0&&this._reindex()}getDisplayIndex(e){if(null==e)return null;return this._models.filter((e=>!e.isLayoutSegment())).findIndex((t=>t.id===e))}sortByCustomJP(e,t){return null==e&&null==t&&(e=this.lastCustomCompareFunc,t=this.customSortPropPath),this.lastCustomCompareFunc=e,this.customSortPropPath=t,new Promise(((t,r)=>{this.allJP().then((()=>{this._models.sort(e),this._reindex(),this.markDirty(),t()}))}))}get isCustomSorted(){return null!=this.customSortPropPath}reverseCustomSort(){this._models.reverse(),this._reindex()}includesLayoutSegments(){return this.options?.subtype?.indexOf("layout_segment")>=0}},Xi=(0,i.A)(Gi.prototype,"finished",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ki=(0,i.A)(Gi.prototype,"length",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yi=(0,i.A)(Gi.prototype,"totalCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qi=(0,i.A)(Gi.prototype,"_models",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zi=(0,i.A)(Gi.prototype,"_dirty",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gi);var rn,nn,sn=r(830382);let on=(rn=class{constructor(){(0,b.A)(this,"data",nn,this)}formatDateAgo(e){var t=(new Date-e)/1e3;return this.formatSecondsAgo(t)}formatSecondsAgo(e,t){null==t&&(t=!1);var r,i,n,s,o=this._getLocale().fields;return e<60?(r=e,i="second",n="$$$/js/viewer/loupe/sidebar/timestamp/seconds_ago={x} s"):e<3600?(r=e/60,i="minute",n="$$$/js/viewer/loupe/sidebar/timestamp/minutes_ago={x} m"):e<86400?(r=e/3600,i="hour",n="$$$/js/viewer/loupe/sidebar/timestamp/hours_ago={x} h"):e<2592e3?(r=e/86400,i="day",n="$$$/js/viewer/loupe/sidebar/timestamp/days_ago={x} d"):e<31536e3?(r=e/2592e3,i="month",n="$$$/js/viewer/loupe/sidebar/timestamp/months_ago={x} M"):(r=e/31536e3,i="year",n="$$$/js/viewer/loupe/sidebar/timestamp/years_ago={x} Y"),r=Math.floor(r),t?(0,f.zt)(n,{x:r}):(s=o[i].pastRelativeTime,(s=1===r||1===s.length?s[0]:s[1]).replace("{0}",r))}formatDateRange(e,t,r){var i;i="full"===r?"yMMMEd":"short"===r?"yMd":"yMMMd";var n,s=this._getLocaleCalendar().dateTimeFormats.intervalFormats[i];if(t<e){var o=t;t=e,e=o}if(e.getFullYear()===t.getFullYear())if(e.getMonth()===t.getMonth()){if(e.getDay()===t.getDay())return this.formatDate(e,r);n="d"}else n="M";else n="y";var a=s[n];return this._fillPattern(a,e,t)}formatDateTime(e,t){var r=this._getLocaleCalendarPattern("dateTime",t);return r=(r=r.replace("{0}",this._getLocaleCalendarPattern("time",t))).replace("{1}",this._getLocaleCalendarPattern("date",t)),this._fillPattern(r,e)}formatTime(e,t){var r=this._getLocaleCalendarPattern("time",t);return this._fillPattern(r,e)}formatDate(e,t){var r=this._getLocaleCalendarPattern("date",t);return this._fillPattern(r,e)}formatShortYearMonth(e){var t=this._getLocaleCalendar().dateTimeFormats.availableFormats.yMMM,r=this._fillPattern(t,e);return r=r[0].toUpperCase()+r.substr(1)}formatWideYearMonth(e){var t,r=this._getLocaleCalendar().dateTimeFormats.availableFormats.yMMMM;return t=(t=r?this._fillPattern(r,e):this.formatShortYearMonth(e))[0].toUpperCase()+t.substr(1)}getMonthField(e,t){var r=this._getLocaleCalendar().months;t=t||"wide";return(r["stand-alone"][t]||r.format[t])[e]}getDayField(e,t){var r=this._getLocaleCalendar().days;t=t||"wide";return(r["stand-alone"][t]||r.format[t])[e]}_getLocale(){return this.data}_getLocaleCalendar(){return this._getLocale().calendar}_getLocaleCalendarPattern(e,t){return"date"===e||"dateTime"===e?"spectrum-custom-compact"===t?t="medium":"spectrum-full"===t&&(t="full"):"time"===e&&("spectrum-custom-compact"!==t&&"spectrum-full"!==t||(t="short")),this._getLocaleCalendar()[e+"Formats"][t||"long"]||""}_fillPattern(e,t,r){var i,n=t,s=this._getLocaleCalendar(),o=this._getLocale().timeZoneNames;if(r){var a,l,u=e.replace(/'(''|[^'])*'/g,"").match(/([a-zA-z])\1*/g);e:for(f=0;f<u.length;f++)for(l=u[f],a=f+1;a<u.length;a++)if(l===u[a]){i=l;break e}}for(var c=function(e,t){for(var r=t-(e=e.toString()).length,i="",n=0;n<r;n++)i+="0";return i+=e},d=function(e,a){var l=e.length;switch(e===i&&(n===t?t=void 0:n=r),a){case"h":case"H":var u=n.getHours();return"h"===a&&(u>11&&(u-=12),0===u&&(u=12)),2===l?c(u,2):u;case"m":case"s":var d="m"===a?n.getMinutes():n.getSeconds();return 2===l?c(d,2):d;case"a":var h=s.dayPeriods.format,p=n.getHours()<12?"am-variant":"pm-variant";return h.hasOwnProperty(p)||(p="am-variant"===p?"am":"pm"),s.dayPeriods.format[p];case"y":var f=n.getFullYear();switch(l){case 1:return f;case 2:return f.toString().substr(-2)}break;case"M":case"L":if(1===l)return n.getMonth()+1;if(2===l)return c(n.getMonth()+1,2);case"E":case"c":var g;if(3===l?g="abbreviated":4===l?g="wide":5===l&&(g="narrow"),g){var m,y=s["M"===a||"L"===a?"months":"days"];if("M"===a||"E"===a?(m=y.format[g])||(m=y["stand-alone"][g]):(m=y["stand-alone"][g])||(m=y.format[g]),d=m["M"===a||"L"===a?n.getMonth():n.getDay()])return d}break;case"d":d=n.getDate();return 2===l?c(d,2):d;case"z":case"v":var v=n.getTimezoneOffset();if(0===v)return o.gmtZeroFormat||o.gmtFormat.replace("{0}","");var b=o.gmtFormat,_=o.hourFormat.split(";",2),A=v<0?_[0]:_[1],w=Math.abs(v),P=(u=Math.floor(w/60),w%60);return A=(A=(A=(A=A.replace("HH",c(u,2))).replace("H",u)).replace("mm",c(P,2))).replace("m",P),b.replace("{0}",A)}return""},h=e.match(/(^|''|[^'])+/g),p="",f=0;f<h.length;f++){var g=h[f];p+=f%2==0?g.replace(/([a-zA-z])\1*/g,d):g}return p.replace("''","'")}},nn=(0,i.A)(rn.prototype,"data",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn);const an=new on;var ln;const un=null!==(ln=window.CLDR)&&void 0!==ln?ln:an;var cn=r(891348);class dn{static calculateFriendlyTemporalValues(){let{duration:e,inPoint:t,temporalFraction:r=dn.TEMPORAL_FRACTION_DEFAULT}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{trimStart:null!=t?t/r:null,trimEnd:null!=e?(t+e)/r:null}}}dn.TEMPORAL_FRACTION_DEFAULT=1e8;const hn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;return new Promise(((i,n)=>{let s=500;const o=new Date,a=()=>setTimeout((async()=>{s+=500;try{const r=await async function(){return await e()}();t(r)?i(r):a()}catch(e){new Date-o>1e3*r?n("timeout"):a()}}),s);a()}))},pn=!n.A.is_enabled("force_non_atomic_develop_settings");class fn extends er{setAttributes(e){return super.setAttributes(e),null!=e.author&&(e.author.base=e.base,this.author=new Or(e.author)),this}isAuthoredBy(e){return null!=e&&this.attributes.author?.id===e.id}getBody(){return this.attributes.payload?.body||""}removeP(){return this.requestP("DELETE",this.href)}}var gn=r(595642);class mn extends tn{constructor(e,t){var r;super(e),null==t?.limit&&(n.A.is_enabled("override_oz_limit_5")?t=gn.extend(t||{},{limit:5}):n.A.is_enabled("override_oz_limit_500")?t=gn.extend(t||{},{limit:500}):100!==T.A.defaultPageSize&&(t=gn.extend(t||{},{limit:T.A.defaultPageSize}))),this.pageSize=null!==(r=t?.limit)&&void 0!==r?r:100,this.options=t,this.reset()}setCacheSource(e){this.cacheSource=e}reset(){if(!this._dirty)return this;if(super.reset(),this.fetchUrl=this.href,null!=this.options)if(n.A.is_enabled("on_the_house")){const{headers:e,...t}=this.options;this.fetchUrl+="?"+gn.param(t)}else this.fetchUrl+="?"+gn.param(this.options);return this}_disposeModels(){this._models.splice(0,this._models.length)}numLoaded(){return this.length}_parse(e){return e.resources}fetchP(){if(null==this.fetchUrl)return gn.Deferred().reject().promise();if(this.fetching)return this.fetching;let e;if(n.A.is_enabled("on_the_house")){const t=null!=this.options?.headers?{headers:this.options?.headers}:{};e=this.fetching=this.requestP("GET",this.fetchUrl,null,t)}else e=this.fetching=this.requestP("GET",this.fetchUrl);return e.always((()=>{this.fetching=void 0})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this.fetchUrl=void 0,this._dirty=!0})).done((e=>{const{length:t}=this,r=this._parse(e);for(const t of r){var i;t.base=e.base,i=new this.model(t,this),this._add(i)}if(this.page++,0===r.length)this.fetchUrl=void 0;else{const t=e.links?.[this.nextPageLink||"next"]?.href,r=new ye(e.base);this.fetchUrl=r.fullHref(t)}null==this.fetchUrl&&(this.finished=!0,this.totalCount=this._models.length)}))}createP(e,t,r,i){if(null!=t.payload&&"import"!==t?.subtype&&"Catalog"!==this.modelName){var n,s,o,a;const e=(new Date).toISOString();null!==(s=(n=t.payload).userCreated)&&void 0!==s||(n.userCreated=e),null!==(a=(o=t.payload).userUpdated)&&void 0!==a||(o.userUpdated=e)}return this.requestP("PUT",e,JSON.stringify(t),i).then(((e,t,i)=>{const n=null!=r?r:i.getResponseHeader("Location");return this._addCreatedP(n)})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`create${this.modelName}Failure`,e,t,r):this.reportOzFailure("createOzResourceFailure",e,t,r)}))}async createJP(e,t,r,i){return await this.createP(e,t,r,i)}_addCreatedP(e){return n.A.is_enabled("style_transfer_oz")?this.safeToJQueryPromise(this._addCreatedJP(e)):this.requestP("GET",e).then((e=>{const t=new this.model(e,this);return this._add(t,!0),null!=this.totalCount&&this.totalCount++,t}))}_addCreatedJP(e){return hn((async()=>{try{const t=await this.requestJP("GET",e);if(t){const e=new this.model(t[0],this);return this._add(e,!0),null!=this.totalCount&&this.totalCount++,e}return!1}catch(e){return!1}}),(e=>e),30)}deleteP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=this.index(e);let{href:i}=this.at(r);return null!=t&&(i+="?"+gn.param(t)),this.requestP("DELETE",i).done((()=>{this.at(r)?.id===e&&this._delete(r)})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)}))}async deleteJP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return await this.deleteP(e,t)}optimisticDeleteP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=this.index(e),{href:i}=this.at(r);this._delete(r);const n=()=>this.requestP("DELETE",i).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)}));return null!=t?t.then((()=>n())):n()}_unshift(e){this._models.unshift(e)}_add(e,t){if(this.get(e.id)&&this._delete(this.index(e.id)),this._push(e),this.finished&&null!=this.totalCount)return this.totalCount++}_delete(e){null!=e&&(this._models.splice(e,1),null!=this.totalCount&&this.totalCount--,this._reindex())}firstP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<this._models.length?gn.Deferred().resolve(this.at(e)).promise():1===this.pageSize?this.fetchP().then((()=>e<this._models.length?gn.Deferred().resolve(this.at(e)).promise():gn.Deferred().reject().promise())):this.fetchP().then((()=>this.atP(e)))}getTotalCountHref(){return null}totalCountP(){if(null!=this.totalCount)return gn.Deferred().resolve(this.totalCount).promise();{const e=this.getTotalCountHref();return null!=this.totalCountPromise?this.haveQueuedTotalCount?this.totalCountPromise:this.isDirty()?(this.haveQueuedTotalCount=!0,this.totalCountPromise.then((()=>this.totalCountP()))):this.totalCountPromise:(this.totalCountPromise=null!=e?this.requestP("GET",e).done((e=>this.totalCount=Math.max(this._models.length,parseInt(e.total_count)))).then((()=>this.totalCountP())):this.allP().then((()=>this.totalCount=this._models.length)),this.totalCountPromise.always((()=>{this.totalCountPromise=null})))}}}let yn;mn.prototype.model=er;const vn=(yn=class e extends mn{static initClass(){this.prototype.model=fn,this.prototype.modelName="Comment"}createP(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n={payload:{body:t}};if(null!=i){const e=new Date(new Date-1e3*i).toISOString();n.payload.userCreated=e,n.payload.userUpdated=e}return this.allP().then((()=>e.prototype.__proto__.createP.call(this,this.href+"/"+this.createUuid(),n)))}_add(e,t){return t?(this._unshift(e),this._reindex()):super._add(e)}},yn.initClass(),yn);class bn extends er{setAttributes(e){return super.setAttributes(e),null!=e.author&&(this.author=new Or(e.author)),this}isAuthoredBy(e){return null!=e&&this.attributes.author?.id===e.id}}var _n=r(595642);let An;const wn=(An=class extends mn{static initClass(){this.prototype.model=bn,this.prototype.modelName="Like"}getLikeForCurrentUser(){const{account:e}=T.A;return null!=e&&this.modelsBindable.find((t=>t.author.id===e.id))}async getLikeForCurrentUserJP(){const{account:e}=T.A;return null==e?null:(await this.allJP(),this.getLikeForCurrentUser())}get likedByCurrentUser(){return null!=this.getLikeForCurrentUser()}async isLikedByCurrentUserJP(){return null!=await this.getLikeForCurrentUserJP()}likeJP(){return this.createJP()}async unlikeJP(){const e=await this.getLikeForCurrentUserJP();if(null!=e)return this.deleteJP(e.id)}createP(){return super.createP(this.href+"/"+this.createUuid(),{})}_parse(e){const t=e.resources;if(n.A.is_enabled("lots_of_likes")){const e=t;for(var r of e)for(var i=0;i<=7;i++){var s=_n.extend(!0,{},r);s.id+=i.toString(),t.push(s)}}return t}},An.initClass(),An);class Pn extends er{_refreshP(){const e=pn?{Prefer:"update-atomic"}:{};return this.requestP("GET",void 0,void 0,{headers:e}).done((e=>this.setAttributes(e))).promise()}uploadedJP(){return this._uploadPromise}uploadJP(e){var t;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null!==(t=this._uploadPromise)&&void 0!==t||(this._uploadPromise=this._uploadJP(e,r)),this._uploadPromise}async _uploadJP(e,t){if(await this.initializedJP(),"uploaded"===this.attributes.file_status)return Promise.resolve();if(await Promise.all(this.attributes.parts.map((t=>{let{href:r,byte_start:i,byte_end:s}=t;return n.A.is_enabled("force_develop_aux_upload_failure")&&(r+="error"),fetch(r,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:new Uint8Array(e,i,s-i+1)}).then((async e=>{if(!e.ok){const t=await e.text();throw g.A.track("Error","binary_upload_data","API",{"event.errorType":"auxUpload.Error","event.uploadMethod":"direct_upload","event.url":r,"event.error_desc":t}),new Error("Error uploading aux")}return e}))}))),pn){const e={Prefer:"update-atomic"},r=this.linkFullPath("rels/complete_upload").replace("{device}",oe).replace("{userUpdated}",(new Date).toISOString()),i=this.requestJP("POST",r,void 0,{headers:e});return t&&await hn((()=>this.refreshJP()),(()=>"uploaded"===this.attributes.file_status)),i}return this.requestJP("POST",this.linkFullPath("rels/complete_upload"))}}var Sn=r(421263);const xn=async(e,t)=>{"string"==typeof t&&(t=(new TextEncoder).encode(t));return(e=>Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""))(await crypto.subtle.digest("SHA-256",t))};var Cn,On,kn,Tn,En,In,Dn,Rn,jn,Fn;let Nn=(Cn=ct.byVal,On=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"href",kn,this)}},kn=(0,i.A)(On.prototype,"href",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),On),Ln=(Tn=ct.alias("/rels/rendition_type/thumbnail2x"),En=ct.byOptionalRef(Nn),In=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"renditionThumbnail2x",Dn,this)}},Dn=(0,i.A)(In.prototype,"renditionThumbnail2x",[Tn,En],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In),Mn=(Rn=ct.byRef(Ln),jn=class extends Qt{constructor(){super(...arguments),(0,b.A)(this,"links",Fn,this)}},Fn=(0,i.A)(jn.prototype,"links",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jn);const Un="mask",$n="filter",zn=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.getDevelopPixelMasks(),i=e.getDevelopFilters();return[...Object.entries(r).map((e=>{let[t,{digest:r}]=e;if(r)return[t,null,r]})),...Object.entries(i).map((e=>{let[r,i={}]=e;const n=Object.entries(i);let s;if(!t&&(s=(e=>{for(const t of["sourceLongEdge","targetLongEdge"]){const r=e.map((e=>{let[,r]=e;return r[t]})).filter((e=>e<=3072));if(r.length>0){const i=Math.max(...r);return e.find((e=>{let[,r]=e;return r[t]===i}))}}})(n),s)){const[e,{digest:t}]=s;if(t)return[e,r,t]}if(s=(e=>{const t=e.map((e=>{let[,t]=e;return t.sourceLongEdge})).filter((e=>null!=e));if(t.length>0){const r=Math.max(...t);return e.find((e=>{let[,t]=e;return t.sourceLongEdge===r}))}})(n),s){const[e,{digest:i,fileSize:n}]=s;return t||n<=524288?[e,r,i]:[e,r,null]}})).filter((e=>null!=e))]},Hn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{type:t,digest:r,sha256:i,fileSize:n}=arguments.length>1?arguments[1]:void 0;return Object.keys(e).find((s=>{const o=e[s];return!(null!=t&&t!==o.type||null!=r&&r!==o.digest||null!=i&&i!==o.sha256||null!=n&&n!==o.fileSize)}))};var Jn,qn,Vn;let Bn=(Jn=class extends er{constructor(e,t){super(e),(0,b.A)(this,"pollingForRendition",qn,this),(0,b.A)(this,"importedByUser",Vn,this),this.parent=t}setAttributes(e){super.setAttributes(e),null!=e.importedByUser&&(this.importedByUser=new Or(e.importedByUser))}get isAutoVersion(){return!this.isNamedVersion}get isNamedVersion(){return!0===this.attributes.payload.createdManually}get name(){return this.attributes.payload.name}get develop(){return this.attributes.payload.develop}hasExternalDevelopSettings(){return this.hasLink("/rels/xmp/develop")}async getExternalEditSettingsJP(){if(null!=this.externalEditSettings)return this.externalEditSettings;const e=await ce.prototype.requestJP("GET",this.linkHref("/rels/xmp/develop"),null,{contentType:"",parseAsText:!0});return this.externalEditSettings=e[0]}async getDevelopSettingsJP(){return this.hasExternalDevelopSettings()?await this.getExternalEditSettingsJP():this.attributes.payload.develop.xmpCameraRaw}async renameJP(e){if(0===e?.length&&(e=null),e!==this.name)return await this.updateAttributesP("renameVersion",{payload:{name:e}})}async uploadExternalizedSettingsJP(e){const t=this.linkHref("/rels/xmp_develop_create").replace("{revision_id}",this.attributes.revision_ids[0]);return await ce.prototype.requestJP("PUT",t,e,{contentType:"application/rdf+xml"}),await this.refreshP()}getRenditionHref(e,t){return this.hackCacheableLinkHref(`/rels/rendition_type/${e}`)}hackCacheableLinkHref(e){return this.linkHref(e)?.replace("/v2/","/v2c/")}async pollForRendition(){if(!this.pollingForRendition){this.pollingForRendition=!0;try{await hn((()=>this.refreshJP()),(()=>this.shouldPollForRendition()),60)}finally{this.pollingForRendition=!1}}}shouldPollForRendition(){return!this.getRenditionHref("thumbnail2x")}getDevelopPixelMasks(){var e;return null!==(e=this.attributes.payload.develop?.masks)&&void 0!==e?e:{}}getDevelopFilters(){var e;return null!==(e=this.attributes.payload.develop?.filters)&&void 0!==e?e:{}}fetchDevelopAuxesJP(){return this.parent.parentAsset.fetchDevelopAuxesJP(this)}},qn=(0,i.A)(Jn.prototype,"pollingForRendition",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vn=(0,i.A)(Jn.prototype,"importedByUser",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jn);Bn.prototype.attributeClass=Mn;const Wn=Bn;var Gn;let Xn=(Gn=class extends mn{constructor(e,t,r){super(t,r),this.parentAsset=e}_add(e,t){return t?(this._models.unshift(e),this._reindex()):super._add(e)}async deleteAllJP(){const e=this.models.map((e=>e.id)),t=[];for(var r of e)t.push(this.optimisticDeleteP(r));await Promise.all(t)}canFilterByCreator(e){return this.filterVersionsCreatedByUser(e).length>0&&this.filterVersionsNotCreatedByUser(e).length>0}_versionIsCreatedByUser(e,t){const r=T.A.account.id;return t?null==e.importedByUser:r===e.importedByUser?.id}get _filteredOwnerVersions(){return this.modelsBindable.filter((e=>this._versionIsCreatedByUser(e,!0)))}get _filteredUserVersions(){return this.modelsBindable.filter((e=>this._versionIsCreatedByUser(e,!1)))}get _filteredNotOwnerVersions(){return this.modelsBindable.filter((e=>!this._versionIsCreatedByUser(e,!0)))}get _filteredNotUserVersions(){return this.modelsBindable.filter((e=>!this._versionIsCreatedByUser(e,!1)))}filterVersionsCreatedByUser(e){return e?this._filteredOwnerVersions:this._filteredUserVersions}filterVersionsNotCreatedByUser(e){return e?this._filteredNotOwnerVersions:this._filteredNotUserVersions}async _createVersionJP(e,t,r,i){let s;t.processingModel="lightroom";const o={subtype:"edit",asset:{sha256:this.parentAsset.importSource().sha256},...n.A.is_enabled("style_transfer_oz")&&i?{style:{href:i}}:{},payload:{createdManually:r,develop:t},importedOnDevice:{formFactor:"web"}};r?e.length>0&&(o.payload.name=e):null!=e&&(o.payload.userCreated=o.payload.userUpdated=e);if(null!=t.xmpCameraRaw&&(t.xmpCameraRaw.length>T.A.XMP_CAMERA_RAW_MAX_LENGTH||null!=t.masks||pn)){s=t.xmpCameraRaw;const e=await xn(0,s);t.xmpCameraRaw={sha256:e}}if(pn){const e=this.createUuid();if(null!=s){await this.parentAsset.uploadXmpDevelopJP((new TextEncoder).encode(s),t.xmpCameraRaw.sha256,e)}const r={Prefer:"update-atomic"};return this.createJP(`${this.href}/${e}`,o,void 0,{headers:r})}{const e=this.createJP(`${this.href}/${this.createUuid()}`,o);if(null!=s){const t=await e;await t.uploadExternalizedSettingsJP(s)}return e}}createAutoJP(e,t){const r={};return null!=this.parentAsset.getContentType()&&(r["content.mimeType"]=this.parentAsset.getContentType()),r["content.version"]=!0===e.crsHDREditMode?"hdr":"sdr",g.A.track("Develop","Versions","implicitly-created",r),this._createVersionJP(t,e,!1)}createNamedJP(e,t,r){return this._createVersionJP(e,t,!0,r)}async createNamedFromAutoVersionJP(e,t){const r=c.A.extend({},t.develop);return t.hasExternalDevelopSettings()&&(r.xmpCameraRaw=await t.getDevelopSettingsJP()),delete r.userUpdated,delete r.userCreated,this._createVersionJP(e,r,!0)}},(0,i.A)(Gn.prototype,"_filteredOwnerVersions",[Sn.A],Object.getOwnPropertyDescriptor(Gn.prototype,"_filteredOwnerVersions"),Gn.prototype),(0,i.A)(Gn.prototype,"_filteredUserVersions",[Sn.A],Object.getOwnPropertyDescriptor(Gn.prototype,"_filteredUserVersions"),Gn.prototype),(0,i.A)(Gn.prototype,"_filteredNotOwnerVersions",[Sn.A],Object.getOwnPropertyDescriptor(Gn.prototype,"_filteredNotOwnerVersions"),Gn.prototype),(0,i.A)(Gn.prototype,"_filteredNotUserVersions",[Sn.A],Object.getOwnPropertyDescriptor(Gn.prototype,"_filteredNotUserVersions"),Gn.prototype),Gn);Xn.prototype.model=Wn,Xn.prototype.modelName="Version";var Kn=r(403909),Yn=(0,Zr.A)("pollForValidRels"),Qn=(0,Zr.A)("activateNextRequestIfPossible"),Zn=(0,Zr.A)("activatePolling"),es=(0,Zr.A)("stopPolling"),ts=(0,Zr.A)("shouldContinuePolling"),rs=(0,Zr.A)("refreshAndCheck");class is{constructor(e){Object.defineProperty(this,rs,{value:us}),Object.defineProperty(this,ts,{value:ls}),Object.defineProperty(this,es,{value:as}),Object.defineProperty(this,Zn,{value:os}),Object.defineProperty(this,Qn,{value:ss}),Object.defineProperty(this,Yn,{value:ns}),this.pendingRequests=[],this.activeRequests={},this.maxRequests=e}get numActiveRequests(){return Object.keys(this.activeRequests).length}get numPendingRequests(){return this.pendingRequests.length}defaultRenditionRelsForAsset(e){return(e.isVideo()?["thumbnail2x","2048","360p","1080p"]:["thumbnail2x","2048"]).map((e=>`/rels/rendition_type/${e}`))}async pollForValidRenditions(e,t,r){let i,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i=null!=r?r.map((e=>`/rels/renditions/${e}`)):this.defaultRenditionRelsForAsset(e),await(0,Qr.A)(this,Yn)[Yn](e,t,i,n)}async pollForProxyRenditions(e,t,r){const i=[e.getProxyRel()];await(0,Qr.A)(this,Yn)[Yn](e,t,i,r)}}async function ns(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.activeRequests[e.id];if(null!=n&&r.every((e=>n.relList.includes(e))))n.requestCount++,n.continueCallbacks.push(t),await n.deferred.promise;else{const s=new cn.A;n={id:e.id,asset:e,requestCount:1,pollingPeriod:i?500:5e3,pollingBackoff:i?500:5e3,deferred:s,continueCallbacks:[t],relList:r}}this.pendingRequests.push(n),(0,Qr.A)(this,Qn)[Qn](),await n.deferred.promise}function ss(){if(!(this.numActiveRequests<this.maxRequests))return;if(this.numPendingRequests<=0)return;const e=this.pendingRequests.shift();(0,Qr.A)(this,Zn)[Zn](e)}function os(e){e.totalWaitTime=0,e.maximumWaitTime=25e5,this.activeRequests[e.id]=e,(0,Qr.A)(this,rs)[rs](e)}function as(e,t){delete this.activeRequests[e.id],t?e.deferred.resolve():e.deferred.reject(),(0,Qr.A)(this,Qn)[Qn]()}function ls(e){if(!(e.continueCallbacks?.length>0))return!1;for(const t of e.continueCallbacks)if(t())return!0;return!1}function us(e){if(!(0,Qr.A)(this,ts)[ts](e))return void(0,Qr.A)(this,es)[es](e,!1);const{asset:t,relList:r}=e;t.hasValidRelLinks(r)?(g.A.report("renditionsGenerated",{loadTimeMs:e.totalWaitTime,webSource:t.wasImportedByWeb()}),(0,Qr.A)(this,es)[es](e,!0)):(e.totalWaitTime+=e.pollingPeriod,e.totalWaitTime>e.maximumWaitTime?(g.A.reportFailure("renditionsNotGenerated",{webSource:t.wasImportedByWeb()}),(0,Qr.A)(this,es)[es](e,!1)):(setTimeout((()=>{t.refreshP().done((()=>(0,Qr.A)(this,rs)[rs](e))).fail((()=>(0,Qr.A)(this,es)[es](e,!1)))}),e.pollingPeriod),e.pollingPeriod>=6e4||(e.pollingPeriod+=e.pollingBackoff)))}const cs=(0,Kn.A)("general:develop_save_sequence"),ds=new is(10);class hs{constructor(e,t,r){this.asset=e,this.payload=t,this.auxes=r,this.externalEditSettings=null}setExternalSettings(e){this.externalEditSettings=e}}class ps{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.saveDevelopInfo=new hs(...t)}saveJP(e){return new Promise((async(t,r)=>{const i=new Promise((e=>{this.saveDevelopInfo.resolveRenditionsPromise=e})).finally((()=>e?.())),s=Object.assign(this.saveDevelopInfo,{startTime:new Date,resolve:t,reject:r,renditionsDonePromise:i,saveSequence:pn?[this._configureDevelopJP,this._externalizeDevelopSettingsJP,this._prepareAuxJP,...n.A.is_enabled("atomic_settings_confirm_upload_steps")?[this._uploadAuxesJP,this._uploadEditSettingsJP]:[[this._uploadAuxesJP,this._uploadEditSettingsJP]],this._createNewAssetRevisionJP]:[this._configureDevelopJP,this._externalizeDevelopSettingsJP,this._createNewAssetRevisionJP,this._uploadAuxJP,this._uploadEditSettingsJP]});try{window.onbeforeunload=()=>(0,f.zt)("$$$/js/viewer/save/save_in_progress=Save in progress"),n.A.is_enabled("debug")&&cs("Save sequence started.");for(const e of s.saveSequence)Array.isArray(e)?await Promise.all(e.map((e=>e.call(this,s)))):await e.call(this,s);this._pollForUpdatedRenditionsJP(s),t()}catch(e){console.error(e),r(),g.A.reportFailure("setDevelopJPFailure")}finally{window.onbeforeunload=null,n.A.is_enabled("debug")&&cs("Save sequence completed.")}}))}_configureDevelopJP(e){const{payload:{develop:t},auxes:r,asset:i}=e;return new Promise(((s,o)=>{let a;const{masks:l={},filters:u={}}=r;if(a=[l,u].some((e=>Object.keys(e).length>0)),a||(a=pn),n.A.is_enabled("force_partial_externalize_edit_settings")){if(!window.confirm("Create a partial external edit (to test this sync state)? Check your debug features if this is unexpected"))return o();a=!0}i.isVideo()||(a||t.xmpCameraRaw.length>T.A.XMP_CAMERA_RAW_MAX_LENGTH)&&(n.A.is_enabled("debug")&&console.log("Making inline edit settings external. Edit settings size in bytes: "+t.xmpCameraRaw.length),e.setExternalSettings(t.xmpCameraRaw)),s()}))}async _prepareAuxJP(e){let{asset:t,payload:r,auxes:{data:i,masks:n,filters:s}}=e;r.aux=await async function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=new Set(Object.keys(i)),o=new Set(Object.values(n).map((e=>Object.keys(e))).flat());for(const[i,n]of Object.entries(r)){let r;if(s.has(i)?r=Un:o.has(i)&&(r=$n),r&&n instanceof ArrayBuffer){const s={type:r,digest:i,sha256:await xn(0,n),fileSize:n.byteLength};let o=e.findAuxId(s);var a;o||(o=e.generateAuxId(),null!==(a=t)&&void 0!==a||(t={}),t[o]=s)}}return t}(t,i,n,s)}_externalizeDevelopSettingsJP(e){let{payload:{develop:t},externalEditSettings:r}=e;return new Promise((async(e,i)=>{try{null!=r&&(t.xmpCameraRaw={},t.xmpCameraRaw.sha256=await xn(0,r)),e()}catch(e){console.error(e),g.A.reportFailure("editSetDevelopDigestGenFailure"),i()}}))}async _createNewAssetRevisionJP(e){let{asset:t,payload:r,auxes:{masks:i,filters:n},externalEditSettings:s,renditionsDonePromise:o}=e;if(t.isVideo()){const e=null==s,i=()=>({payload:r});try{await t.createChildRevisionJP("setDevelopSettings",i,e)}catch(e){console.error(e),g.A.reportFailure("editSetDevelopRevisionFailure")}}else{const e=e=>{if(e)return;const s=((e,t,r,i)=>{var n;const s=null!==(n=Bt()(t.develop))&&void 0!==n?n:{},o=new Set(Object.keys(r)),a=new Set(Object.keys(i));if(0===o.size)s.masks=null;else{s.masks={};for(const[t,{digest:r}]of Object.entries(e.getDevelopPixelMasks()))o.has(r)||(s.masks[t]=null)}if(0===a.size)s.filters=null;else{s.filters={};for(const t of Object.keys(e.getDevelopFilters()))a.has(t)||(s.filters[t]=null)}const l={...e.getAux(),...t.aux};for(const[e,t]of Object.entries(r)){const r=Hn(l,{type:Un,digest:e});var u,c;r&&(null!==(c=(u=s.masks)[r])&&void 0!==c||(u[r]=t))}for(const[e,t]of Object.entries(i)){var d,h;const r=null!==(h=(d=s.filters)[e])&&void 0!==h?h:d[e]={};for(const[e,i]of Object.entries(t)){const t=Hn(l,{type:$n,digest:e});var p;t&&(null!==(p=r[t])&&void 0!==p||(r[t]=i))}}return s})(t,r,i,n);return{payload:{...r,develop:s}}},a=t.selectedVersionUserUpdated;null!=t.selectedVersion&&(t.selectedVersionUserUpdated=r.develop.userUpdated);const l=pn||null==s;try{await t.createChildRevisionJP("setDevelopSettings",e,l,o)}catch(e){throw console.error(e),t.selectedVersionUserUpdated=a,g.A.reportFailure("editSetDevelopRevisionFailure"),e}}}async _uploadAuxesJP(e){let{asset:t,payload:{aux:r},auxes:i}=e;if(r){if(pn){const e=await(async(e,t,r)=>(await Promise.all(Object.entries(t).map((t=>{let[i,{digest:n,sha256:s}]=t;const o=r[n];if(o instanceof ArrayBuffer)return e.uploadAuxJP(o,s).then((()=>s))})))).filter((e=>null!=e)))(t,r,i.data),s=oo.pollAssetUntilCheckJP(oo,t.linkHref("self"),(t=>e.every((e=>t.hasTempAux(e)||null!=t.findAuxId({sha256:e})))),100);if(n.A.is_enabled("atomic_settings_confirm_upload_steps")){if(await s,confirm("Aux data has been uploaded. Cancel to leave aux data in a temporary state."))return s;throw new Error("User cancelled after aux upload")}return s}{const e=[];return await Promise.all(Object.entries(r).map((r=>{let[n,{digest:s,sha256:o}]=r;const a=i[s];if(a instanceof ArrayBuffer)return e.push(n),t.uploadAuxJP(a,o)}))),oo.pollAssetUntilCheckJP(oo,t.linkHref("self"),(t=>e.every((e=>t.hasLink(`/rels/aux/${e}`)))),100)}}}async _uploadEditSettingsJP(e){let{asset:t,externalEditSettings:r,payload:i}=e;try{if(null!=r&&!n.A.is_enabled("force_partial_externalize_edit_settings")){const{develop:{xmpCameraRaw:{sha256:e}}}=i;if(pn){await t.uploadXmpDevelopJP((new TextEncoder).encode(r).buffer,e);const i=oo.pollAssetUntilCheckJP(oo,t.linkHref("self"),(t=>t.hasTempXmpDevelop(e)),100);if(n.A.is_enabled("atomic_settings_confirm_upload_steps")){if(await i,confirm("Edit settings have been uploaded. Cancel to leave XMP in a temporary state."))return i;throw new Error("User cancelled after XMP upload")}return i}await t.uploadExternalizedSettingsJP(r,e)}}catch(e){throw console.error(e),g.A.reportFailure("editSetDevelopUploadSettingsFailure"),e}}_pollForUpdatedRenditionsJP(e){let{asset:t,startTime:r,resolveRenditionsPromise:i}=e;return new Promise((async(e,n)=>{const s=new Date;g.A.report("editUpdateAsset",{loadTimeMs:s-r});try{const r=ds.pollForValidRenditions(t,(()=>!0),null,!0);e(),await r,i();const n=new Date;g.A.report("editGenerateRenditions",{loadTimeMs:n-s})}catch(e){console.error(e),g.A.reportFailure("editRenditionGenerationFailure")}}))}}const fs={_seenKeywords:{},registerKeywords(e){Object.assign(this._seenKeywords,e.getKeywords())},getAllKeywords(){return Object.keys(this._seenKeywords)}};var gs,ms,ys,vs,bs,_s,As,ws,Ps,Ss,xs,Cs,Os,ks,Ts,Es,Is,Ds,Rs,js,Fs,Ns,Ls,Ms,Us,$s;let zs=(gs=ct.byVal,ms=ct.byVal,ys=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"croppedWidth",vs,this),(0,b.A)(this,"croppedHeight",bs,this)}},vs=(0,i.A)(ys.prototype,"croppedWidth",[gs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bs=(0,i.A)(ys.prototype,"croppedHeight",[ms],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ys),Hs=(_s=ct.byVal,As=ct.byVal,ws=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"originalWidth",Ps,this),(0,b.A)(this,"originalHeight",Ss,this)}},Ps=(0,i.A)(ws.prototype,"originalWidth",[_s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ss=(0,i.A)(ws.prototype,"originalHeight",[As],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ws),Js=(xs=ct.byVal,Cs=ct.byOptionalRef(zs),Os=ct.byOptionalRef(Hs),ks=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"captureDate",Ts,this),(0,b.A)(this,"develop",Es,this),(0,b.A)(this,"importSource",Is,this)}},Ts=(0,i.A)(ks.prototype,"captureDate",[xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Es=(0,i.A)(ks.prototype,"develop",[Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Is=(0,i.A)(ks.prototype,"importSource",[Os],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ks),qs=(Ds=ct.alias("/rels/rendition_type/2048"),Rs=ct.byVal,js=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"rendition2048",Fs,this)}},Fs=(0,i.A)(js.prototype,"rendition2048",[Ds,Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),js),Vs=(Ns=ct.byRef(Js),Ls=ct.byRef(qs),Ms=class extends Qt{constructor(){super(...arguments),(0,b.A)(this,"payload",Us,this),(0,b.A)(this,"links",$s,this)}},Us=(0,i.A)(Ms.prototype,"payload",[Ns],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$s=(0,i.A)(Ms.prototype,"links",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ms);var Bs,Ws,Gs,Xs,Ks,Ys,Qs,Zs,eo,to,ro=r(595642);const io=new is(10),no=["score","balancing","content","dof","emphasis","harmony","lighting","repetition","rot","symmetry","vivid"];let so=(Bs=class extends er{constructor(){super(...arguments),(0,b.A)(this,"importedByUser",Ws,this),(0,b.A)(this,"_selectedVersion",Gs,this),(0,b.A)(this,"generatingRenditionsCount",Xs,this),(0,b.A)(this,"pollingRenditionsCount",Ks,this),(0,b.A)(this,"revising",Ys,this),(0,b.A)(this,"saving",Qs,this),(0,b.A)(this,"comments",Zs,this),(0,b.A)(this,"likes",eo,this),(0,b.A)(this,"picks",to,this)}setAttributes(e){var t,r,i,n;super.setAttributes(e),null!==(t=this.namedVersions)&&void 0!==t||(this.namedVersions=new Xn(this,`${this.linkHref("self")}/versions`,{created_as:"manual",embed:"user"})),null!==(r=this.autoVersions)&&void 0!==r||(this.autoVersions=new Xn(this,`${this.linkHref("self")}/versions`,{created_as:"auto",embed:"user"})),null!==(i=this.auxParts)&&void 0!==i||(this.auxParts=new Map),null!==(n=this.xmpDevelopParts)&&void 0!==n||(this.xmpDevelopParts=new Map),null!=e.importedByUser&&(!this.importedByUser||Object.keys(e.importedByUser).length>1)&&(this.importedByUser=new Or(e.importedByUser)),fs.registerKeywords(this)}payload(){return this.attributes.payload}xmp(){return this.attributes.payload.xmp}get develop(){return this.payload().develop}importSource(){return this.attributes.payload.importSource}purgeDate(){return this.attributes.payload.purgeDate}personName(){return this.attributes.payload.name}async getExportUrl(e){const t=this.requestP("POST",this.getExportHref(),JSON.stringify(e)),r=await t.then(((e,t,r)=>new er(e).linkFullPath("export")));return await hn((()=>this.requestP("HEAD",r)),(()=>!0)),r}async loadComments(e){null==this.comments&&(this.comments=new vn(this.getCommentsHref(e))),await this.comments.allJP()}async loadLikes(e){null==this.likes&&(this.likes=new wn(this.getLikesHref(e))),await this.likes.allJP()}async loadPicks(e){null==this.picks&&(this.picks=new wn(this.getLikesHref(e))),await this.picks.allJP()}async addComments(e,t){null==this.comments&&(this.comments=new vn(this.getCommentsHref(t))),await this.comments.createP(e,t.id)}async deleteComments(e){await this.comments.deleteP(e.id)}restoreInProgress(){return this.attributes?.restore_in_progress}purgeRemainingDays(){const e=(new Date).getTime(),t=Date.parse(this.purgeDate())-e;return Math.floor(t/864e5)}iacDeleteRemainingHours(){const e=(new Date).getTime()-this.getOzCreatedDate();let t=Math.max(e,0);return t=48-Math.floor(t/36e5),t}faceData(){return this.attributes.payload.xmp?.["mwg-rs"]?.Regions?.RegionList}getPersonIdsDetected(){if(null==this.faceData())return null;const e=[],t=this.faceData();for(const r in t){const i=t[r].Extensions["adobe-fi"].People;if(i)for(const t of Object.keys(i))e.push(t)}return e}getPersonRecognitionAppName(){if(null==this.faceData())return null;const e=this.faceData();for(const t in e){return e[t].Extensions["adobe-fi"].Application}}getPersonRecognitionAppVersion(){if(null==this.faceData())return null;const e=this.faceData();for(const t in e){return e[t].Extensions["adobe-fi"].Version}}debugGetKpTags(){const e=[];for(const t of this.getKeywordsArray())0===t.indexOf("kp_")&&e.push(t);return e}isImportedBy(e){return this.importSource()?.importedBy===e.id}hasImportDevice(){return null!=this.importSource()?.importedOnDevice}getImportDevice(){var e;return null!==(e=this.importSource()?.importedOnDevice)&&void 0!==e?e:""}getFileSize(){var e;return null!==(e=this.importSource()?.fileSize)&&void 0!==e?e:0}getFileSizeInMB(){if(null!=this.importSource()?.fileSize){const e=this.importSource().fileSize;return Math.round(e/1048576)}}getContentType(){return this.importSource()?.contentType}hasKeyword(e){return!0===this.getKeywords()[e]}getKeywords(){return this.xmp()?.dc?.subject||{}}getKeywordsArray(){const e=this.getKeywords(),t=[];for(const r in e){e[r]&&t.push(r)}return t.sort(),t}getCaptureDateString(){const{captureDate:e}=this.payload();return e===le||null===e?null:e}getCaptureDate(){const{captureDate:e}=this.payload();if(e===le||null===e)return null;{const t=e.slice(0,19);return new Date(Date.parse(t))}}getImportDate(){const e=this.importSource()?.importTimestamp;return e===le?null:new Date(Date.parse(e))}getFormattedCaptureDate(){const e=this.getCaptureDate();return null!=e?un.formatDate(e,"long"):(0,f.zt)("$$$/js/oz_resource/unknown_date=Date unknown")}getFormattedImportDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"long";const t=this.getImportDate();return null!=t?un.formatDate(t,e):(0,f.zt)("$$$/js/oz_resource/unknown_date=Date unknown")}getFileName(){return n.A.is_enabled("debug_empty_filenames")?"":this.importSource()?.fileName||this.payload()?.FileName||""}getFileBaseName(){const e=this.getFileName(),t=e.lastIndexOf(".");return-1!==t?e.substr(0,t):e}getFileExtension(){const e=this.getFileName(),t=e.lastIndexOf(".");if(-1!==t){let r;return r=e.substr(t+1).toLowerCase()}return""}get isFreemiumRAW(){const e=this.getFileExtension();return"dng"!==e&&ur.RAW_EXTENSIONS.includes(e)}getAspectRatio(){const e=this.getCroppedDimensions();return e[0]/e[1]}getDownload2048Href(){return this.getHackRenditionDownloadHref("2048",!0)}getDownload2048FileSizeP(){if(null!=this.downloadFileSizePromise)return this.downloadFileSizePromise;const e=this.getRenditionHref("2048",!0);return null!=e?this.downloadFileSizePromise=this.requestP("HEAD",e,"",{contentType:""}).then(((e,t,r)=>{const i=r.getResponseHeader("Content-Length");return this.downloadFileSize=Math.max(0,i)})):ro.Deferred().reject()}getHackRenditionDownloadHref(e,t){return this.linkHref(`/rels/rendition_type/${e}`)}getRenditionHref(e,t){return this.hackCacheableLinkHref(`/rels/rendition_type/${e}`)}getExportHref(){return this.href+"/exports"}getBestRenditionTypeForSize(e,t){let r,i,s,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(n.A.is_enabled("pixel_density_multiplier")||o)&&(e*=cr.A.pixelDensity,t*=cr.A.pixelDensity);const a=Math.max(null!=e?e:0,null!=t?t:0);for(s of(r=a>2048?["panorama","2048","1280"]:a>1280?["2048","1280"]:a>640?["1280","2048"]:a>320?["640"]:["thumbnail2x"],r))if(this.hasValidRendition(s)){i=s;break}if(null!=i)return i;for(s of r)if(this.hasRendition(s)){i=s;break}return i||"thumbnail2x"}getLargestAvailableRendition(){const e=["panorama","2048","1280","640","thumbnail2x"];for(const t of e)if(this.hasRendition(t))return t;return null}getBestRenditionHrefForSize(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.getBestRenditionTypeForSize(e,t,r);return this.getRenditionHref(i)}hackCacheableLinkHref(e){return T.A.haveNginxProxy?this.linkHref(e)?.replace("/v2/","/v2c/"):this.linkHref(e)}hasMaster(){return null!=this.attributes.links["/rels/master"]}hasProxy(e){return null!=this.attributes.links[this.getProxyRel(e)]}hasTempXmpDevelop(e){const t=this.attributes.links[`/rels/temp/xmp/develop/${e}`];return!0===t?.exists}hasTempAux(e){const t=this.attributes.links[`/rels/temp/aux/${e}`];return!0===t?.exists}_getUnsyncedTempLinkKeys(){var e;const t=new Date(null!==(e=this.newestDevelopUserUpdated)&&void 0!==e?e:this.attributes.payload.userUpdated);return Object.keys(this.attributes.links).filter((e=>e.startsWith("/rels/temp/"))).filter((e=>{const r=this.attributes.links[e];return new Date(r.develop.userUpdated)>=t}))}hasAnyTempLink(){return this._getUnsyncedTempLinkKeys()?.length>0}get firstTempLink(){const e=this._getUnsyncedTempLinkKeys();return e?.length>0?this.attributes.links[e[0]]:null}getUnsyncedDataDevice(){const e=this.firstTempLink,t=e?.develop.device;return t?t.split("{")[0].trim():""}getUnsyncedDataDate(){const e=this.firstTempLink,t=e?.develop.userUpdated;return t?un.formatDateTime(new Date(t),"spectrum-full"):""}hasRenditionGenerateHref(e){return this.hasLink(`/rels/rendition_generate/${e}`)}isProxyOnly(){return!0===this.importSource()?.willNotUploadMaster}getMasterHref(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.hackCacheableLinkHref("/rels/master"):this.linkHref("/rels/master")}get defaultProxyType(){return this.isVideo()?"1080p":"2560"}getProxyRel(e){return null==e&&(e=this.defaultProxyType),`/rels/proxy_type/${e}`}getProxyHref(e){return this.hackCacheableLinkHref(this.getProxyRel(e))}hasExternalDevelopSettings(){return this.hasDevelopSettingsHref()}getAux(){return this.payload().aux}getAuxHref(e){return this.getAux()[e]?this.linkHref(`/rels/aux/${e}`):""}hasAuxHref(e){return this.getAuxHref(e)?.length>0}findAuxId(e){return Hn(this.getAux(),e)}generateAuxId(){let e;do{e=this.createUuid()}while(null!=this.getAux()?.[e]);return e}getValidAuxIdsByDigest(){const e=this.getAux();return e?Object.entries(e).filter((e=>{let[t]=e;return this.hasAuxHref(t)})).reduce(((e,t)=>{let[r,{digest:i}]=t;return e[i]=r,e}),{}):{}}async uploadAuxJP(e,t){let r=this.auxParts.get(t);if(r)return r.uploadedJP();Pn.setAuthHeaders(await yr.default.getTokenJP(),"LightroomMobileWeb1");const i=this.linkHref("/rels/aux_create/parts").replace("{sha256}",t).replace("{type}","mask").replace("{upload_status}","pending").replace("{file_size}",e.byteLength).replace("{part_size}",5242880).replace("{content_type}","application/octet-stream");return this.auxParts.set(t,r=new Pn(i)),r.uploadJP(e).finally((()=>this.auxParts.delete(t)))}async uploadXmpDevelopJP(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.xmpDevelopParts.get(t);if(i)return i.uploadedJP();Pn.setAuthHeaders(await yr.default.getTokenJP(),"LightroomMobileWeb1");const n=this.linkHref(`/rels/${r?"versions/":""}xmp_develop_create/parts`).replace("{sha256}",t).replace("{version_id}",r).replace("{upload_status}","pending").replace("{file_size}",e.byteLength).replace("{part_size}",5242880).replace("{content_type}",encodeURIComponent("application/rdf+xml"));this.xmpDevelopParts.set(t,i=new Pn(n));const s=!!r;return i.uploadJP(e,s).finally((()=>this.xmpDevelopParts.delete(t)))}hasPixelMasks(){return this.getAuxes(Un).length>0}getAuxes(e){const t=this.getAux();if(!t)return{};let r=Object.keys(t);return"function"==typeof e?r=r.filter((r=>e(t[r]))):null!=e&&(r=r.filter((r=>t[r].type===e))),r.reduce(((e,r)=>(e[r]=t[r],e)),{})}getDevelopPixelMasks(){var e;return null!==(e=this.attributes.payload.develop?.masks)&&void 0!==e?e:{}}getDevelopFilters(){var e;return null!==(e=this.attributes.payload.develop?.filters)&&void 0!==e?e:{}}developHasPixelMasks(){return Object.keys(this.getDevelopPixelMasks()).length>0}getDevelopDevice(){return this.attributes.payload.develop?.device}hasDevelopDevice(){return this.getDevelopDevice()?.length>0}getDevelopedByUserName(){return this.attributes?.developedByUser?.full_name}fetchAuxJP(e){const t=this.getAuxHref(e);return this.requestJP("GET",t,null,{responseType:"arraybuffer"})}async resampleAuxJP(e,t){let r=`${this.linkHref("self")}/aux/${e}/resample`;if(t){const e=t.id;r+=`?${new URLSearchParams({version_id:e}).toString()}`}const i=JSON.stringify({source_image_type:"original",target_image_type:"proxy-2560"}),[n,,s]=await this.requestJP("POST",r,i,{contentType:"application/json",responseType:"arraybuffer"});return[n,s.getResponseHeader("X-Aux-Digest")]}async fetchDevelopAuxesJP(e){const t=zn(null!=e?e:this);return(await Promise.all(t.map((async t=>{let r,[i,n,s]=t;return s?[r]=await this.fetchAuxJP(i):[r,s]=await this.resampleAuxJP(i,e),[s,r,n]})))).filter((e=>null!=e)).reduce(((e,t)=>(t.forEach(((t,r)=>{e[r].push(t)})),e)),Array.from({length:3},(()=>[])))}getDevelopPixelMasksDigests(){const e=this.getDevelopPixelMasks();return Object.values(e).map((e=>{let{digest:t}=e;return t}))}getDevelopPixelMaskIds(){const e=this.getDevelopPixelMasks();return Object.keys(e)}hasDevelopSettingsHref(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.hasValidLink("/rels/xmp/develop"):this.hasLink("/rels/xmp/develop")}getDevelopSettingsHref(){return this.linkHref("/rels/xmp/develop")}canCreateDefaultAutoVersion(){const{develop:e}=this.payload();return null!=e&&""!==e.xmpCameraRaw}async getAutoVersionDevelopSettingsJP(){var e,t;const{develop:r}=this.payload(),i={croppedWidth:null!==(e=r.croppedWidth)&&void 0!==e?e:this.getOriginalDimensions()[0],croppedHeight:null!==(t=r.croppedHeight)&&void 0!==t?t:this.getOriginalDimensions()[1]},n=await this.getDevelopSettingsJP();return n?.length>0&&(i.xmpCameraRaw=n),i.crsVersion=r.crsVersion,i.userOrientation=r.userOrientation,i.userUpdated=r.userUpdated,i.masks=r.masks,i.filters=r.filters,i}hasSyncedAux(){const e=this.getAux(),t=this.getDevelopPixelMasks();let r=!0;for(const i in e){const e=this.hasAuxHref(i);if(null!=t[i]&&!e){r=!1;break}}return r}hasSyncedDevelopSettings(){if(this.isVideo())return!0;return null!=this.getDevelopSettingsSync()||this.hasDevelopSettingsHref(!0)&&this.hasSyncedAux()}getDevelopSettingsSync(){const e=this.payload().develop?.xmpCameraRaw;return e?e.sha256?null!=this.externalEditSettings&&null!=this.externalEditSettingsDigest&&this.externalEditSettingsDigest===e.sha256?this.externalEditSettings:void 0:e:""}async getDevelopSettingsJP(){if(this.isVideo()){const e=this.payload().develop;return null!=e?e:{}}const e=this.getDevelopSettingsSync();if(e)return e;n.A.is_enabled("debug")&&console.log("Edit settings external. Downloading now...");let t="";const r=this.payload().develop?.xmpCameraRaw?.sha256;if(r){const e=this.attributes.links?.["/rels/xmp/develop"];if(e?.href){try{[t]=await this.requestJP("GET",this.getDevelopSettingsHref(),null,{contentType:"",parseAsText:!0})}catch{throw g.A.reportFailure("editSettingsDownloadFailure"),new Error}if(e.sha256===r)return this.externalEditSettingsDigest=r,this.externalEditSettings=t,t}}return t}async uploadExternalizedSettingsJP(e,t){const r=this.getLatestRevisionHref()+"/xmp/develop";await this.requestJP("PUT",r,e,{contentType:"application/rdf+xml",headers:{"X-Generate-Renditions":"all"}}),this.externalEditSettings=e,this.externalEditSettingsDigest=t}getOrientation(){return this.payload().develop?.userOrientation}hasVideoDuration(){return this.payload().video?.duration&&this.payload().video?.frameRate}getVideoFrameRate(){const e=this.payload().video?.frameRate;if(null!=e&&e instanceof Array&&2===e.length)try{return 1*e[0]/e[1]}catch(e){}return null}getVideoPlaybackRate(){const e=this.getVideoFrameRate();return e>60?Math.min(30/e,1):1}getVideoDuration(){let e;const t=this.payload(),r=t.video?.duration;if(null!=r&&r instanceof Array&&2===r.length)try{e=r[0]/r[1]}catch(e){}if(1===t.develop?.version){const{temporal:r}=t.develop;if(null!=r){const{temporalFraction:t=dn.TEMPORAL_FRACTION_DEFAULT}=r;if(null!=r.duration){if(0===e)return null;e=r.duration/t}else null!=r.inPoint&&(e-=r.inPoint/t)}}if(e=Math.max(Math.floor(e),1),null!=e){const t=e%60,r=Math.floor(e/60);return t<10?`${r}:0${t}`:`${r}:${t}`}return null}getVideoAspectRatio(){const e=this.payload().video?.displayAspectRatio;return 2!==e?.length?null:e}getVideoTimes(){const{develop:e}=this.payload();return 1===e?.version?dn.calculateFriendlyTemporalValues(e.temporal):{}}getCroppedDimensions(){let e,t;const r=this.payload(),{develop:i}=r;return null!=i&&(t=i.croppedWidth,e=i.croppedHeight),t>0&&e>0||([t,e]=this.getOriginalDimensions()),t>0&&e>0||(t=480,e=320),[t,e]}getOriginalDimensions(){let e,t;const r=this.importSource();if(null!=r&&(t=r.originalWidth,e=r.originalHeight),this.isVideo()&&!this.isVideo2()){const r=this.getVideoAspectRatio();null!=r&&(e>t?r.sort(((e,t)=>e-t)):r.sort(((e,t)=>t-e)),t*=r[0]*e/(r[1]*t))}return[t,e]}hasOriginalDimensions(){const e=this.importSource();return null!=e.originalWidth&&null!=e.originalHeight}getOriginalDimensionsString(){const e=this.getOriginalDimensions();let t=`${Math.round(e[0])} x ${Math.round(e[1])}`;if(this.isVideo()){const e=this.getVideoAspectRatio();null!=e&&(t+=` (${e.join(":")})`)}else t+=` (${this.getOriginalDimensionsInMP()}MP)`;return t}getCroppedDimensionsString(){const e=this.getCroppedDimensions();return`${Math.round(e[0])} x ${Math.round(e[1])}`}getOriginalDimensionsInMP(){const[e,t]=this.getOriginalDimensions();if(null!=e&&null!=t)return Math.round(e*t/1e6)}getRenditionDimensions(e){const t=this.getCroppedDimensions();if(["thumbnail2x","640","1280","2048","panorama","360p","720p","1080p"].includes(e)){let r,i;return"thumbnail2x"===e?i=r=320:"640"===e?i=r=640:"1280"===e?i=r=1280:"2048"===e?i=r=2048:"panorama"===e?i=r=8192:"360p"===e?r=360:"720p"===e?r=720:"1080p"===e&&(r=1080),this._getScaledDimensions(t,i,r)}return t}getProxyDimensions(){return this._getScaledDimensions(this.getCroppedDimensions(),2560,2560)}_getScaledDimensions(e,t,r){let[i,n]=e;return n>r&&(n=r,i=e[0]*r/e[1]|0),i>t&&(i=t,n=e[1]*t/e[0]|0),[i,n]}getCaption(){return this.xmp()?.dc?.description||""}getAltText(){return this.xmp()?.iptcCore?.AltTextAccessibility||""}getExtendedDescription(){return this.xmp()?.iptcCore?.ExtDescrAccessibility||""}getFlag(e){const t=null!=e?e:T.A.account?.id;return null==t?"unflagged":this._getFlag(t)?.flag||"unflagged"}_getFlag(e){return this.attributes.payload.reviews?.[e]}hasFlag(e){return this.getFlag()===e}getRating(e){const t=null!=e?e:T.A.account?.id;return null==t?0:this._getRating(t)?.rating||0}_getRating(e){return this.attributes.payload.ratings?.[e]}location(){return this.attributes.payload?.location}hasAnyLocationInfo(){return this.hasGPSLocation()||this.getLocationText().length>0||this.getCity().length>0||this.getState().length>0||this.getCountry().length>0}hasGPSLocation(){const e=this.attributes.payload?.location;return null!=e?.latitude&&null!=e.longitude&&0!==e?.latitude&&0!==e.longitude}getGPSLocation(){if(!this.hasGPSLocation())return null;const e=this.attributes.payload.location;return{lat:e.latitude,long:e.longitude}}getLocationText(){var e;return null!==(e=this.xmp()?.iptcCore?.Location)&&void 0!==e?e:""}getCity(){var e,t;return null!==(e=null!==(t=this.xmp()?.photoshop?.City)&&void 0!==t?t:this.location()?.city)&&void 0!==e?e:""}getState(){var e,t;return null!==(e=null!==(t=this.xmp()?.photoshop?.State)&&void 0!==t?t:this.location()?.state)&&void 0!==e?e:""}getCountry(){var e,t;return null!==(e=null!==(t=this.xmp()?.photoshop?.Country)&&void 0!==t?t:this.location()?.country)&&void 0!==e?e:""}_getRenditionLink(e){return this.attributes.links?.[`/rels/rendition_type/${e}`]}_getRenditionLinks(){const e={},t="/rels/rendition_type/";for(const r in this.attributes.links){const i=this.attributes.links[r];r.substr(0,21)===t&&(e[r]=i)}return e}hasRendition(e){return null!=this._getRenditionLink(e)?.href}hasValidRendition(e){const t=this._getRenditionLink(e);return null!=t&&null!=t.href&&!t.invalid}hasValidRelLink(e){const t=this.attributes.links?.[e];return null!=t&&null!=t.href&&!t.invalid}hasValidVideoRendition(){return this.hasValidRendition("720p")||this.hasValidRendition("1080p")}getLargeVideoPlaybackRendition(){return this.isVideo2()?(e=this,k.A.win&&"bt2100_hlg"===e?.payload().video?.transferFunction&&n.A.is_enabled("video_v2_windows_special_rendition")?this.getRenditionHref("1080p709"):this.getRenditionHref("1080p")):this.getRenditionHref("720p");var e}hasAnyRendition(){const e=this._getRenditionLinks();for(const t in e){if(null!=e[t].href)return!0}return!1}hasAnyValidRendition(){const e=this._getRenditionLinks();for(const t in e){const r=e[t];if(null!=r.href&&!r.invalid)return!0}return!1}hasRenditions(e){for(const t of e)if(!this.hasRendition(t))return!1;return!0}hasValidRelLinks(e){for(const t of e)if(!this.hasValidRelLink(t))return!1;return!0}shouldPollForDefaultRenditions(){const e=io.defaultRenditionRelsForAsset(this);return!this.hasValidRelLinks(e)&&["rendering","rendering-edits"].includes(this.getMissingStatus())}async pollForDefaultRenditions(e,t){if(!this.shouldPollForDefaultRenditions())throw new Error("Attempted to poll for renditions when shouldPollForDefaultRenditions is false");this.pollingRenditionsCount++;try{await io.pollForValidRenditions(this,e,null,t)}catch{}this.pollingRenditionsCount--}async pollForProxy(e,t){try{await io.pollForProxyRenditions(this,e,t)}catch{}}getTitle(){return this.xmp()?.dc?.title||""}getCopyright(){return this.xmp()?.dc?.rights||""}getCameraMake(){return this.xmp()?.tiff?.Make||""}getCameraModel(){return this.xmp()?.tiff?.Model||""}getCameraLens(){return this.xmp()?.aux?.Lens||""}getExposureTime(){const e=this.xmp()?.exif?.ExposureTime;if(null!=e)return 1===e[1]?e[0]+" "+(0,f.zt)("$$$/js/oz_resource/time_in_seconds=sec"):e[0]+"/"+e[1]+" "+(0,f.zt)("$$$/js/oz_resource/time_in_seconds=sec")}getFocalRatio(){const e=this.xmp()?.exif?.FNumber;if(null!=e)return"f / "+1*e[0]/e[1]}getIsoSpeedRating(){const e=this.xmp()?.exif?.ISOSpeedRatings;if(null!=e)return`ISO ${e}`}getFocalLength(){const e=this.xmp()?.exif?.FocalLength;if(e?.length>0){return`${(1*e[0]/e[1]).toFixed(1)} mm`}}hasAutoTag(e){return null!=this.getAutoTags()?.[e]}getAutoTags(){return this.attributes.payload?.autoTags?.tags}debugGetExperimentalAutoTags(){return this.attributes.payload?.["X-autoTags-hashtag2"]?.tags}debugGetAutoTagClassifiers(){return this.attributes.payload?.["X-autoTags-classifiers"]?.tags}isValid(){if(this.hasMaster()||this.hasProxy())return!0}wasImportedByWeb(){return this.hasImportDevice()?null!=this.getImportDevice().match(/Lightroom Web/)||null!=this.getImportDevice().match(/Revel Web/):null!=this.importedByUser&&this.importedByUser.id===T.A.account?.id}getMissingThumbStatus(){return this.getRenditionHref("thumbnail2x")?"":this.getMissingStatus()}getMissingLoupeStatus(){return this.getRenditionHref("2048")&&(!this.isVideo()||this.hasValidVideoRendition()||this.wasDevelopUpdatedInLastNMinutes(2))?"":this.getMissingStatus()}getMissingStatus(){const e=null!=this.getMasterHref()||null!=this.getProxyHref(),t=this.wasImportedByWeb(),r=this.wasCreatedInLastHour();return this.wasDevelopUpdatedInLastThirtyMins()?"rendering-edits":t&&this.wasCreatedJustNow()?"rendering":e?r?"rendering":"rendering-error":t?"web-upload-failed":r?"syncing":"stuck-syncing"}wasCreatedJustNow(){const e=this.getImportDate();return null!=e&&new Date-e<6e5}get newestDevelopUserUpdated(){if(this.isVideo()){const e=this.develop?.adjustments?.userUpdated,t=this.develop?.temporal?.userUpdated;return null==e?t:null==t||e>t?e:t}return this.develop?.userUpdated}wasCreatedInLastHour(){const e=this.getImportDate();return null!=e&&new Date-e<36e5}wasDevelopUpdatedInLastThirtyMins(){return this.wasDevelopUpdatedInLastNMinutes(30)}wasDevelopUpdatedInLastNMinutes(e){const t=this.newestDevelopUserUpdated;return null!=t&&new Date-new Date(t)<6e4*e}isVideo(){return"video"===this.attributes.subtype}isVideo2(){var e;return null!==(e=this.hasProxy("1080p"))&&void 0!==e?e:this.hasRendition("1080p")}isPhoto(){return"image"===this.attributes.subtype}isLayoutSegment(){return"layout_segment"===this.attributes.subtype}isDeleted(){return"deleted_image"===this.attributes.subtype||"deleted_video"===this.attributes.subtype}isPerson(){return"person"===this.attributes.subtype}isPlayable(){return this.getRenditionHref("360p")||this.getRenditionHref("720p")}hasEdits(){return null!=this.payload().develop?.xmpCameraRaw}hasUserEdits(){return null!=this.payload().develop?.userUpdated}hasAesthetics(){return null!=this.getAesthetics()}getAesthetics(){return this.attributes.payload?.aesthetics}getEyeQualityScores(){const e=this.attributes.payload?.eye_quality;return null!=e&&(e.eye_sharpness=100-e.eye_blur),e}getBlurScores(){return this.attributes.payload?.blur||this.attributes.payload?.["X-Blur"]}getQuality(){return this.attributes.payload?.quality}hasBestFrameScore(){return null!=this.attributes.bestFrame&&(null!=this.attributes.bestFrame.frame&&null!=this.attributes.bestFrame.face)}getBestFrameScore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&["frame","face"].includes(e))return this.getBestFrameScores()[e]||0;{const{frame:e,face:t}=this.getBestFrameScores();return e+t}}getBestFrameScores(){var e;return null!==(e=this.attributes.bestFrame)&&void 0!==e?e:{}}getAestheticScore(){return null==this.attributes.payload?.aesthetics?0:this.attributes.payload?.aesthetics.score}_getGPanoData(){return this.attributes.payload?.xmp?.GPano}hasGPanoInfo(){return null!=this.attributes.payload?.xmp?.GPano}canViewAsPanorama(){let e=!1;if(this.hasGPanoInfo()){const t=this._getGPanoData(),r=1*t.CroppedAreaImageWidthPixels/t.CroppedAreaImageHeightPixels<2;e=!k.A.mobile&&(t.UsePanoramaViewer||"equirectangular"===this.getProjectionType())&&!r}return e}getProjectionType(){let e="";return this.hasGPanoInfo()&&(e=this._getGPanoData().ProjectionType),e}getHAOV(){let e=0;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageWidthPixels/t.FullPanoWidthPixels*360}return e}getVAOV(){let e=0;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageHeightPixels/t.FullPanoHeightPixels*180}return e}isPartialPanorama(){let e=!1;if(this.hasGPanoInfo()){const t=this._getGPanoData();e=t.CroppedAreaImageWidthPixels/t.CroppedAreaImageHeightPixels!=2}return e}getFullPanoDimensions(){const e=[];if(this.hasGPanoInfo()){var t,r;const i=this._getGPanoData(),n=this.getOriginalDimensions();e[0]=null!==(t=i.FullPanoWidthPixels)&&void 0!==t?t:n[0],e[1]=null!==(r=i.FullPanoHeightPixels)&&void 0!==r?r:n[1]}return e}set selectedVersion(e){return this._selectedVersion=e,this._selectedVersionUserUpdated=this.payload().develop?.userUpdated}get selectedVersion(){return null!=this._selectedVersion&&this.payload().develop?.userUpdated===this._selectedVersionUserUpdated?this._selectedVersion:null}get selectedVersionUserUpdated(){return this._selectedVersionUserUpdated}set selectedVersionUserUpdated(e){this._selectedVersionUserUpdated=e}getRenditionPublicHrefP(e){const t="proxy"===e?"/rels/proxy_type/2560":`/rels/rendition_type/${e}`,r={rendition_path:this.linkFullPath(t)};return this.requestP("POST","/api/public_rendition_url",JSON.stringify(r)).then((e=>e.href))}importedByOwner(){return null==this.importedByUser}haveImporterDisplayInfo(){return this.importedByUser?.getFullName()?.length>0}getFirstRevisionHref(){return this._getRevisionHref(0)}getLatestRevisionHref(){return this._getRevisionHref(this.attributes.revision_ids.length-1)}_getRevisionHref(e){const{href:t}=this.attributes.links.self,r=`${t}/revisions/${this.attributes.revision_ids[e]}`;return this._linkBase.fullHref(r)}setDevelopJP(e,t){let r=arguments.length>3?arguments[3]:void 0;return new ps(this,{develop:e,userUpdated:t},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).saveJP(r)}debugClearDevelopSettings(){return this.safeToJSPromise(this._createChildRevisionP("debugToggleHDRMode",{payload:{develop:null}},!0))}debugToggleHDREditModeJP(){const e=!this.hdrEnabled;return this.safeToJSPromise(this._createChildRevisionP("debugToggleHDRMode",{payload:{develop:{crsHDREditMode:e}}},!0))}get hdrEnabled(){return!0===this.develop?.crsHDREditMode}_doRevisionChangeP(e,t,r,i,s){let o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return n.A.is_enabled("debug")&&H._forceFailNextRequest&&(a=2),o=s?{"X-Generate-Renditions":"all"}:{},pn&&(o.Prefer="update-atomic"),this.requestP("PUT",this._getChildRevisionHref(t),JSON.stringify("function"==typeof r?r():r),{headers:o}).then((()=>(this.revisingApplyList.shift(),this.refreshP().then((()=>this.revisingApplyList.map((e=>e())))))),((n,o,l)=>{const u=a<2&&(0===o||o>=500||400===o&&null!=n?.errors?.parent_revision_id);return u?g.A.report(`${e}Retry`):(this.reportOzFailure(`${e}Failure`,n,o,l),this.revisingApplyList.shift()),this.refreshP().then((()=>u?this._doRevisionChangeP(e,t,r,i,s,a+1):ro.Deferred().reject(!0)),(()=>{this.attributes=i}))}))}createChildRevisionJP(e,t,r,i){const n=ro.extend(!0,{},this.attributes.toJSON()),s=()=>{const e=t(!0);e&&(this.attributes=ro.extend(!0,this.attributes.toJSON(),e))};s();const o=this.revising=(()=>{const i=()=>this.safeToJSPromise(this._doRevisionChangeP(e,this.createUuid(),t,n,r));return null!=this.revising?(this.revisingApplyList.push(s),this.revising.then(i)):(this.revisingApplyList=[s],i())})();i?.then((()=>this.refreshJP()));return(null!=i?i:o).finally((()=>{o===this.revising&&(this.revising=null)})),this.revising}_createChildRevisionP(e,t){var r,i;let n,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;null!==(i=(r=t.payload).userUpdated)&&void 0!==i||(r.userUpdated=(new Date).toISOString());const a=ro.extend(!0,{},this.attributes.toJSON()),l=()=>{this.attributes=ro.extend(!0,this.attributes.toJSON(),t)};l();const u=this.createUuid();return null!=this.revising?(this.revisingApplyList.push(l),n=this.revising.then((()=>this._doRevisionChangeP(e,u,t,a,s)))):(this.revisingApplyList=[l],n=this._doRevisionChangeP(e,u,t,a,s)),this.revising=n,null!=o&&(this.revising=n=n.then((()=>o().then((()=>this.refreshP()))))),this.revising.always((()=>{n===this.revising&&(this.revising=null)}))}_getChildRevisionHref(e){return`${this.getLatestRevisionHref()}/children/${e}`}latestRevision(){return this.attributes.revision_ids?.[this.attributes.revision_ids.length-1]}isGeneratingRenditions(){return this.generatingRenditionsCount>0}isPollingForRenditions(){return this.pollingRenditionsCount>0}setSaving(e){this.saving&&!e?this.savingDeferred?.resolve():!this.saving&&e&&(this.savingDeferred=new cn.A),this.saving=e}get savingPromise(){return null==this.savingDeferred?Promise.resolve():this.savingDeferred.promise}get isUpdating(){const e=(this.isVideo()||this.isVideo2())&&!this.hasValidVideoRendition()&&this.wasDevelopUpdatedInLastNMinutes(5);return this.saving||this.revising||this.isGeneratingRenditions()||this.isPollingForRenditions()||e}generateRenditionsP(e){let t=this.getLatestRevisionHref();if(null!=t){this.generatingRenditionsCount++,t+="/renditions";const r={"X-Generate-Renditions":e};return this.requestP("POST",t,"",{headers:r}).then((t=>io.pollForValidRenditionsP(this,(()=>!0),e.split(",")))).always((()=>this.generatingRenditionsCount--)).fail(((e,t,r)=>{this.reportOzFailure("generateRenditionsFailure",e,t,r)}))}return ro.Deferred().reject()}},Ws=(0,i.A)(Bs.prototype,"importedByUser",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=(0,i.A)(Bs.prototype,"_selectedVersion",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xs=(0,i.A)(Bs.prototype,"generatingRenditionsCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ks=(0,i.A)(Bs.prototype,"pollingRenditionsCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ys=(0,i.A)(Bs.prototype,"revising",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qs=(0,i.A)(Bs.prototype,"saving",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zs=(0,i.A)(Bs.prototype,"comments",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),eo=(0,i.A)(Bs.prototype,"likes",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),to=(0,i.A)(Bs.prototype,"picks",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bs);so.pollAssetUntilCheckJP=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500;return new Promise(((n,s)=>{let o=i;const a=i,l=new Date,u=()=>setTimeout((async()=>{o+=a;try{const i=await async function(){const r=new e(t);return await r.initializedP()}();r(i)?n(i):u()}catch(e){new Date-l>3e5?s("timeout"):u()}}),o);u()}))},so.prototype.attributeClass=Vs;const oo=so;var ao=r(595642);class lo{get title(){let e;return null!=(e=this.payload().title)?e:this.payload().name}get description(){return this.payload().description}migrateNameToTitleP(){const{name:e}=this.payload();if(null!=e){const t={name:null};return null==this.payload().title&&(t.title=e),this._createChildRevisionP("migrateLayoutSegmentNameToTitle",{payload:t})}}setLayoutSegmentP(e,t){const r={};return null!=this.attributes.payload.name&&(r.name=null),e!==this.attributes.payload.title&&(r.title=e),t!==this.attributes.payload.description&&(r.description=t),Object.keys(r).length>0?this._createChildRevisionP("updateLayoutSegment",{payload:r}):ao.Deferred().resolve()}get layoutSegmentHasText(){return this.title?.length>0||this.description?.length>0}}var uo,co,ho,po,fo=r(595642);let go=(0,sn.A)(lo)((co=class extends oo{constructor(){super(...arguments),(0,b.A)(this,"albumsList",ho,this),(0,b.A)(this,"deletedRestoreState",po,this)}setCaptionP(e){if(this.getCaption()===e||null==e){const t=fo.Deferred();return null!=e?t.resolve():t.reject(),t.promise()}return this._createChildRevisionP("setCaption",{payload:{xmp:{dc:{description:e}}}})}setTitleP(e){if(this.getTitle()===e||null==e){const t=fo.Deferred();return null!=e?t.resolve():t.reject(),t.promise()}{const t=null!=this.attributes.payload?.xmp?.dc?this.attributes.payload?.xmp?.dc:{},r=fo.extend(!0,{},t);return r.title=e,this._createChildRevisionP("setTitle",{payload:{xmp:{dc:r}}})}}async setAltTextJP(e){return n.A.is_enabled("training_day")?this.getAltText()===e?Promise.resolve():null==e?Promise.reject():void await this.createChildRevisionJP("setAltText",(()=>({payload:{xmp:{iptcCore:{AltTextAccessibility:""===e?null:e}}}}))):Promise.resolve()}async setExtendedDescriptionJP(e){return n.A.is_enabled("training_day")?this.getExtendedDescription()===e?Promise.resolve():null==e?Promise.reject():void await this.createChildRevisionJP("setExtendedDescription",(()=>({payload:{xmp:{iptcCore:{ExtDescrAccessibility:e}}}}))):Promise.resolve()}async excludeFromCleanupJP(){if(!this.excludedFromCleanup)return await this.createChildRevisionJP("excludeFromCleanup",(()=>({payload:{organize:{excludeFromCleanup:!0}}})))}get excludedFromCleanup(){return!0===this.payload().organize?.excludeFromCleanup}_setAutotagFeedbackP(e,t){const r=this.attributes.payload?.autoTags?.tags;if(null==r)return fo.Deferred().reject("no autotags on this asset");const i=fo.extend(!0,{},r);for(var n of("all"===e&&(e=Object.keys(i)),e))i[n]=t;return this._createChildRevisionP("setAutotagFeedback",{payload:{autoTags:{tags:i}}})}acceptAllAutoTagsP(){return this._setAutotagFeedbackP("all",!0)}rejectAllAutoTagsP(){return this._setAutotagFeedbackP("all",!1)}acceptAutoTagP(e){return this._setAutotagFeedbackP([e],!0)}rejectAutoTagP(e){return this._setAutotagFeedbackP([e],!1)}setFlagP(e){if(e===this.getFlag())return fo.Deferred.resolve().promise();const t={flag:e,date:(new Date).toISOString()},r={};return r[T.A.account.id]=t,this._createChildRevisionP("setFlag",{payload:{reviews:r}})}async setFlagJP(e){return await this.safeToJSPromise(this.setFlagP(e))}setRatingP(e){if(e===this.getRating())return fo.Deferred.resolve().promise();const t={rating:e,date:(new Date).toISOString()},r={};return r[T.A.account.id]=t,this._createChildRevisionP("setRating",{payload:{ratings:r}})}async setRatingJP(e){return await this.safeToJSPromise(this.setRatingP(e))}addKeywordP(e){const t=(0,f.zt)("$$$/js/keyword_entry_delimiter=,"),r={payload:{xmp:{dc:{subject:{}}}}},i=e.split(t);let n=0;for(e of i){var s=e.trim();s.length>0&&(n++,r.payload.xmp.dc.subject[s]=!0)}return n>0?this._createChildRevisionP("addKeyword",r):fo.Deferred().resolve().promise()}removeKeywordP(e){const t=this.getKeywordsArray();return 1===t.length&&t.indexOf(e)>=0?1===Object.keys(this.xmp().dc).length?this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:null}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:null}}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:{[e]:null}}}}})}setDevelopJP(){T.A.startAssetEdit();const e=super.setDevelopJP(...arguments);return e.then((()=>T.A.lastAssetEditTime=this.newestDevelopUserUpdated)),e.finally((()=>T.A.endAssetEdit())),e}optimisticUpdatePayload(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.attributes=fo.extend(!0,this.attributes.toJSON(),{payload:e}),t)return this.attributes.revision_ids.push(t)}getLikesCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.A.is_enabled("lots_of_likes")?7*this._getSpace(e?.id)?.links["/rels/favorites"]?.count:this._getSpace(e?.id)?.links["/rels/favorites"]?.count}isLiked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.getLikesCount(e)>0}isLikedByUser(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.isLiked(e)&&null!=this._getLikeUrl(e)}getLikesHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getSpace(e?.id)?.links["/rels/favorites"]?.href}_getLikeUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getSpace(e?.id)?.links["/rels/this_user_favorite"]?.href}likeP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.requestP("PUT",`${this.getLikesHref(e)}/${this.createUuid()}`,"{}").fail(((e,t,r)=>this.reportOzFailure("likeAssetFailure",e,t,r)))}unLikeP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this._getLikeUrl(e);if(null!=t)return this.requestP("DELETE",t,"{}").fail(((e,t,r)=>this.reportOzFailure("unlikeAssetFailure",e,t,r)))}getCommentCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getSpace(e?.id)?.links["/rels/comments"]?.count}hasComments(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.getCommentCount(e)>0}getCommentsHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._getSpace(e?.id)?.links["/rels/comments"]?.href}setCaptureDateAsSpecifiedP(e){const t={payload:{captureDate:new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}};return this._createChildRevisionP("setCaptureDate",t)}setCaptureDateAsImportedP(){const e=this.getImportDate(),t={payload:{captureDate:new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}};return this._createChildRevisionP("setCaptureDateAsImported",t)}_getSpace(e){if(!this.attributes.spaces)return null;if(null!=e){for(var t of this.attributes.spaces)if(t.id===e)return t;return null}return this._getFirstSpace()}_getFirstSpace(){return n.A.is_enabled("debug")&&null!=this.attributes.spaces&&console.warn("Need to remove usage of _getFirstSpace."),this.attributes.spaces?.[0]}getCatalogHref(){return`${this._linkBase.basePath}assets/${this.id}`}async copyAuxToSpaceAssetJP(e,t,r){const i=`/v2/spaces/${e}/assets/${t}`,n=this.getDevelopPixelMaskIds(),s=`${i}/revisions/${r}/aux`,o={source_href:this.getCatalogHref(),aux_ids:n};return await this.requestJP("PUT",s,JSON.stringify(o)),oo.pollAssetUntilCheckJP(oo,i,(e=>n.every((t=>e.hasLink(`/rels/aux/${t}`)))))}getAlbumListP(e){const t=this._linkBase.fullHref(`assets/${e}/albums`);return this.requestP("GET",t).done((e=>this.albumsList=e.resources.filter((e=>"collection"===e.subtype))))}_assetStoreUpdate(e,t){const r=new Date(e.attributes.updated),i=new Date(t.updated);if(isNaN(r)||isNaN(i)||i>r)return null==t.spaces&&(t.spaces=e.attributes.spaces),e.setAttributes(t)}debugTouchUpdatedP(e){const t={payload:{userUpdated:e.toISOString()}};return this._createChildRevisionP("debugTouchUpdated",t)}},ho=(0,i.A)(co.prototype,"albumsList",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=(0,i.A)(co.prototype,"deletedRestoreState",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo=co))||uo;go.pollUntilValidAssetJP=e=>oo.pollAssetUntilCheckJP(go,e,(e=>e.isValid()));var mo,yo,vo=r(595642);let bo=(mo=class extends ce{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(e),(0,b.A)(this,"loaded",yo,this),this.asset_ids=t,this.options=r}async loadJP(){return await this.safeToJSPromise(this.loadP())}loadP(){const e=vo.param(Object.assign({},this.options,{asset_ids:this.asset_ids.join(",")}));return this.requestP("GET",`${this.href}?${e}`).then(((e,t,r)=>{const i={},n={};let s=0,o=0;const a=r.getResponseHeader("x-request-id");if(null!=e.resources){s=e.resources.length;for(const t of e.resources)t.base=e.base,i[t.id]=new this.model(t)}if(null!=e.errors){o=e.errors.length;for(const t of e.errors)t.base=e.base,n[t.id]=t}return{assets:i,asset_count:s,errors:n,error_count:o,request_id:a}}))}},yo=(0,i.A)(mo.prototype,"loaded",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mo);bo.prototype.model=null;class _o extends bo{static initClass(){this.prototype.model=go}}_o.initClass();const Ao=_o;var wo=r(774163),Po=r(224209),So=r(341857).A;class xo extends H{static setAuthHeaders(e,t){return this.authHeaders={Authorization:`Bearer ${e}`,"x-api-key":t}}doUnwantedSearchJP(e,t,r,i){const n=Po.A.isProd?"lightroom-production":"lightroom-stage",s=wo[n].unwanted_host,o=wo[n].unwanted_app_token,a={"x-api-key":"LightroomMobileWeb1",Authorization:`Bearer ${yr.default.getToken()}`,"x-app-token":o},l=[{catalogId:e.id},{accountId:T.A.account.id}];null!==t&&l.push({albumId:t.id});const u={experienceId:"Default-Unwanted-Photos",queries:[{id:"query1",start:i,limit:r,scope:{entities:["LRPhoto"]},filters:l}]};return this.requestJP("POST",`https://${s}/uss/v3/query`,JSON.stringify(u),{headers:a,contentType:"application/vnd.adobe.search-request+json"})}doInsightsSearchP(){const e=Po.A.isProd?"lightroom-production":"lightroom-stage",t=wo[e].host,r={"x-api-key":"LightroomMobileWeb1","x-product":"Lightroom Web","x-product-location":"Lightroom Web",Authorization:`Bearer ${yr.default.getToken()}`};return this.requestP("POST",`https://${t}/universal-search/v2/search`,JSON.stringify({q:"",scope:["lightroom"],asset_type:["image","video"],facets_fields:["lightroom_flag","lightroom_edited","lightroom_flash","lightroom_depthmap","asset_type","type","file_name_extension","rating","lightroom_orientation","lightroom_camera","lightroom_lens","lightroom_flength","lightroom_fstop","lightroom_iso","lightroom_ss","lightroom_keyword","lightroom_location","lightroom_person"],fields_excluded:["links","tags"],hints:[{lightroom_version:"3"}],limit:1}),{headers:r,contentType:"application/vnd.adobe.search-request+json"})}doSearchP(e,t,r,i,s,o){const a=o?{"x-api-key":"LrWebUssService",Authorization:`Bearer ${yr.default.getToken()}`}:{"x-product-location":"main search input"},l=o?{experienceId:e?"default-lightroom-search-experience":"default-lightroom-browse-experience",queries:[{scope:{entities:["DMeLrAsset"]},id:"lr_semantic_search",limit:t,locale:f.A.locale,start:r}]}:{scope:["lightroom"],q:e,limit:t,start_index:r,fields_excluded:["links","tags"],locale:f.A.getLocaleWithUnderscore(),fetch_fields:{includes:["lightroom_album_id"]}};if("__clear_search_cache__"===e&&(l.lightroom_disable_cache="true"),e&&o&&(l.queries[0].textQuery=e),null!=s)if(o){if("relevancy"!==s.sort_orderby){var u;const e=null!==(u={user_updated_date:"userUpdatedDate",import_date:"createdDate",capture_date:"digitizedDate"}[s.sort_orderby])&&void 0!==u?u:"digitizedDate";l.queries[0].sorts=[{sortOrderBy:e,sortOrder:s.sort_order}]}}else Object.assign(l,s);return null!=i&&(o&&Object.keys(i).length>0?l.queries[0].filters=[i]:Object.assign(l,i)),So.sdk?(Object.assign(a,xo.authHeaders),this.requestP("POST","/search_sdk_api/universal-search-lr/v2/search",JSON.stringify(l),{headers:a,contentType:"application/vnd.adobe.search-request+json"})):n.A.is_enabled("debug_uss_stage_fac_endpoint")?(null==l.hints&&(l.hints=[]),l.hints.push({lightroom_version:"3"}),this.requestP("POST","/search_api_fac/universal-search-lr/v2/search",JSON.stringify(l),{headers:a,contentType:"application/vnd.adobe.search-request+json"})):o?(console.error("search v3 REQUEST",l),this.requestP("POST","https://lightroom-asset-ussv3-stage.adobe.io/uss/v3/query",JSON.stringify(l),{headers:a,contentType:"application/vnd.adobe.search-request+json"})):this.requestP("POST","/search_api/universal-search-lr/v2/search",JSON.stringify(l),{headers:a,contentType:"application/vnd.adobe.search-request+json"})}}n.A.is_enabled("debug")&&(window.LrSearch=xo);var Co,Oo,ko,To,Eo=r(595642);let Io=0,Do=(Co=class extends tn{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];super(),(0,b.A)(this,"sortOrderBy",Oo,this),(0,b.A)(this,"sortOrderDirection",ko,this),(0,b.A)(this,"errored",To,this),this.catalog=e,this.searchText=t,this.filterParams=r,this.sortOrderBy=i,this.sortOrderDirection=s,this.insertedAssets=o,this._searchId=Io++,this.search=new xo,n.A.is_enabled("search_ml_feedback")&&(this.requestLog=[]),this.assetSearchData={},this.pageSize=null!=this.filterParams.limit?this.filterParams.limit:100,this.reset()}reset(){return this._dirty?(super.reset(),this._models.push(...this.insertedAssets),this.errored=!1,this.insertedAssets.length>0&&this._reindex(),this):this}getSearchId(){return Io}getSearchQueryString(){return this.searchText}_reportError(e,t,r){null==e&&(e="unknown"),null==t&&(t="unknown");const i=r.getResponseHeader("x-request-id");return g.A.reportFailure("searchFailure",{errorCode:e,errorDescription:t,requestId:i})}fetchP(){let e;if(this.finished)return Eo.Deferred().reject().promise();if(this.fetching)return this.fetching;const t=this._models;this.sortOrderBy,this.sortOrderDirection;null==this.sortOrderBy&&null==this.sortOrderDirection||(e={},null!=this.sortOrderDirection&&(e.sort_order=this.sortOrderDirection),null!=this.sortOrderBy&&(e.sort_orderby=this.sortOrderBy)),n.A.is_enabled("debug")&&console.log("canUseSemanticSearch",ni.canUseSemanticSearch);let r=this.fetching=this.search.doSearchP(this.searchText,this.pageSize,this.page*this.pageSize,this.filterParams,e,ni.canUseSemanticSearch);return n.A.is_enabled("debug_simulate_slow_search")&&(r=r.then((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=Eo.Deferred();return setTimeout((()=>i.resolve(...t)),3e3),i}))),r.always((()=>this.fetching=void 0)).fail(((e,t,r)=>(this.errored=!0,this._reportError(t,JSON.stringify(e),r),this._dirty=!0))).then(((e,i,s)=>{if(this._models===t){if(ni.canUseSemanticSearch&&null!=e&&null!=e.status.httpCode&&200===e.status.httpCode||null!=e&&null!=e.status&&200<=e.status[0].status&&e.status[0].status<=299){ni.canUseSemanticSearch&&console.error("semantic search RESPONSE",e);const i=s.getResponseHeader("x-request-id");this.totalCount=ni.canUseSemanticSearch?null!=e.queryResults?.[0]?.metadata?.totalHits?e.queryResults?.[0]?.metadata?.totalHits:0:null!=e.result_sets?.[0]?.total_items?e.result_sets?.[0]?.total_items:0;const o=ni.canUseSemanticSearch?null!=e.queryResults?.[0]?.items?.length?e.queryResults?.[0]?.items?.length:0:null!=e.result_sets?.[0]?.items?.length?e.result_sets?.[0]?.items?.length:0;if(o>0&&(null!=e.result_sets?.[0]||null!=e.queryResults?.[0])){let s;const a=[],l={};for(const t of ni.canUseSemanticSearch?e.queryResults[0].items:e.result_sets[0].items)s=ni.canUseSemanticSearch?t.id:t.asset_id,null==s||null!=l[s]||null!=this.index(s)||Wi.isAssetIdDeleted(s)||(a.push(s),l[s]=!0,this.assetSearchData[s]=t);let u=`/v2/catalogs/${this.catalog.id}/assets`;T.A.hostOverride&&(u=`${T.A.hostOverride}${u}`);const c=new Ao(u,a,{embed:"user"});r=c.loadP().then((e=>{if(this._models!==t)return;const r=e.request_id;for(s of a){var o=e.assets[s];null!=o&&this._add(o)}return n.A.is_enabled("search_ml_feedback")?this.requestLog.push({searchRequestId:i,ozRequestId:r,ozIds:a}):void 0})).always((()=>{if(this._models===t)return o<this.pageSize?(this.finished=!0,this.totalCount=this._models.length):void 0}))}else this.finished=!0,this.totalCount=this._models.length;return this.page++,this.page*this.pageSize>=1e4&&(this.finished=!0,this.totalCount=this._models.length),r}{const t=e?.status?.[0];if(null!=t){let e;const r=t.errors?.[0];null!=r&&(e=JSON.stringify(r)),this._reportError(t.status,e,s)}return this.finished=!0,this.totalCount=this._models.length}}}))}deleteAssetsLocally(e){return this.deleteLocally(e)}get assets(){return this}getAssetParentAlbumIds(e){return null==this.assetSearchData?.[e]?.lightroom_album_id?[]:this.assetSearchData[e].lightroom_album_id}_getPageNumberForAssetId(e){for(let t=0;t<this.requestLog.length;t++){if(this.requestLog[t].ozIds.indexOf(e)>=0)return t}return-1}_initsearchFeedbackData(e,t){const r={client_request_id:this.requestLog[e].ozRequestId,false_positive_results:[],allow_asset_view:!1};return null!=t&&(r.feedback=t),{created:Date.now(),account_id:T.A.account.id,catalog_id:Wi.catalog.id,type:"autotag_search",source:{client:"LrW",search_url:window.__adobe_search_api_host,search_query:this.getSearchQueryString(),search_request_id:this.requestLog[e].searchRequestId,payload:r}}}sendSearchFeedbackJP(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=new Array(this.requestLog.length).fill(null);for(var n of e){var s=this._getPageNumberForAssetId(n);s<0||(t=i[s],null==t&&(t=i[s]=this._initsearchFeedbackData(s,r)),t.source.payload.false_positive_results.push(n))}const o=i.filter((e=>null!=e)),a=[];for(t of o)a.push(Wi.catalog.submitSearchFeedbackJP(t));return Promise.all(a)}},Oo=(0,i.A)(Co.prototype,"sortOrderBy",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ko=(0,i.A)(Co.prototype,"sortOrderDirection",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),To=(0,i.A)(Co.prototype,"errored",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Co);var Ro,jo,Fo=r(595642);let No=(Ro=class extends tn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),(0,b.A)(this,"errored",jo,this),this.catalog=e,this.album=t,this.search=new xo,this.assetSearchData={},this.pageSize=100,this.reset()}reset(){if(this._dirty)return super.reset(),this.errored=!1,this}_reportError(e,t,r){var i,n;t=null!==(n=e=null!==(i=e)&&void 0!==i?i:"unknown")&&void 0!==n?n:"unknown";const s=r.getResponseHeader("x-request-id");g.A.reportFailure("searchFailure",{errorCode:e,errorDescription:t,requestId:s})}fetchP(){const e=Fo.Deferred();return this.fetchJP().then((t=>e.resolve(t)),(t=>e.reject(t))),e.promise()}async fetchJP(){if(this.finished)return Promise.reject();if(this.fetching)return this.fetching;this.fetching=this._fetchJP();try{await this.fetching,this.fetching=null}catch(e){throw this.fetching=null,e}}async _fetchJP(){const{_models:e}=this;try{const[o,a,l]=await this.search.doUnwantedSearchJP(this.catalog,this.album,this.pageSize,this.page*this.pageSize);if(this._models!==e)return;const u=o?.status?.httpCode;if(null!=u&&u>=200&&u<=299){var t,r,i;const e=null!==(t=o.resultSets)&&void 0!==t?t:[];this.totalCount=null!==(r=e[0]?.metadata.totalHits)&&void 0!==r?r:0;const a=null!==(i=e[0]?.items?.length)&&void 0!==i?i:0;if(a>0&&null!=e[0]){const t=[],r={};for(const i of e[0].items){const e=i.id;var s;if(null!=e&&null!=!r[e]&&null==this.index(e)&&!Wi.isAssetIdDeleted(e))t.push(e),r[e]={score:null!==(s=i["cleanup.score"])&&void 0!==s?s:i["unwantedPhotosService_v1.score"]},this.assetSearchData[e]=i}let i=`/v2/catalogs/${this.catalog.id}/assets`;T.A.hostOverride&&(i=`${T.A.hostOverride}${i}`);const o=new Ao(i,t,{embed:"user"}),[l]=await o.loadJP();l.request_id;for(const e of t){const t=l.assets[e];null!=t&&(n.A.is_enabled("debug_asset_data")&&(t.debugUnwantedScore=r[e].score),this._add(t))}a<this.pageSize&&(this.finished=!0,this.totalCount=this._models.length)}else this.finished=!0,this.totalCount=this._models.length;this.page++,this.page*this.pageSize>=1e4&&(this.finished=!0,this.totalCount=this._models.length)}}catch([e,t,r]){throw this.errored=!0,this._reportError(t,JSON.stringify(e),r),this._dirty=!0,[e,t,r]}}deleteAssetsLocally(e){this.deleteLocally(e)}get assets(){return this}},jo=(0,i.A)(Ro.prototype,"errored",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ro);var Lo,Mo,Uo=r(595642);let $o=(Lo=class extends tn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),(0,b.A)(this,"errored",Mo,this),this.catalog=e,this.album=t,this.pageSize=100,this.maxGroupSize=15,this.maxCaptureDateInterval=5e3,this.maxImportDateRange1=864e5,this.maxImportDateRange2=72e5,this.reset()}async reviewAssets(e){return await this.setReviewedJP(e)}async setReviewedJP(e){const t=this.catalog.href.replace("/v2/","/v2/lrml/")+"/duplicates/"+e+"/review",r=this._models.filter((t=>t.find_duplicates_info.group_id===e)).map((e=>e.find_duplicates_info.asset_id)).base;if(0===r.length)return;const i={all_asset_ids:r};try{return await this.requestJP("POST",t,JSON.stringify(i)),this.deleteAssetsLocally(r),r.length}catch(e){console.error("_setReviewedP error",e);const[t,r,i]=e;return void this._reportError(r,JSON.stringify(t),i,"setReviewedJPFailure")}}async getGroupCount(){return await this._getGroupCountJP()}async _getGroupCountJP(){const e=this.catalog.href.replace("/v2/","/v2/lrml/")+"/duplicates/count";try{const[{count:t},...r]=await this.requestJP("GET",e);return t}catch(e){console.error("_getGroupCountP error",e);const[t,r,i]=e;return void this._reportError(r,JSON.stringify(t),i,"getGroupCountJPFailure")}}reset(){if(this._dirty)return this.cachedDuplicateResults=[],this.nextLink="duplicates",super.reset(),this.errored=!1,this}_reportError(e,t,r){var i,n;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"searchFailure";t=null!==(n=e=null!==(i=e)&&void 0!==i?i:"unknown")&&void 0!==n?n:"unknown";const o=r.getResponseHeader("x-request-id");g.A.reportFailure(s,{errorCode:e,errorDescription:t,requestId:o})}_shouldFilterOutLargeGroup(e){if(n.A.is_enabled("debug_duplicates_unfiltered"))return!1;return!(e.all_assets.length<=this.maxGroupSize)&&(n.A.is_enabled("debug_duplicates")&&console.log("filtered out large group",e),!0)}_splitAssetsIntoChunks(e){const{all_assets:t,...r}=e,i=[];let n=0;const s=t.length;for(;n<s;){const e=Math.min(n+this.pageSize,s),o={...r,all_assets:t.slice(n,e)};i.push(o),n=e}return i}async _fetchDuplicates(){if(!this.nextLink)return;const e=[];let t=3;for(;t>0;){n.A.is_enabled("debug_duplicates_simulate_internal_error")&&console.log("fetching duplicates",{nextLink:this.nextLink},{remaining:t});try{const{duplicates:t,links:r}=await this._findDuplicatesJP(this.nextLink);if(t)for(const r of t){const{all_assets:t,...i}=r;if(!t)continue;const n=t.length;if(!(n<=1)&&!this._shouldFilterOutLargeGroup(r))if(n>this.pageSize){const t=this._splitAssetsIntoChunks(r);e.push(...t)}else e.push(r)}"duplicates"===this.nextLink&&(this.nextGroupIndex=0,this.totalCount=0),this.nextLink=r?.next?.href;break}catch(e){if(t--,0===t)throw this.nextLink=null,e}}this.cachedDuplicateResults.push(...e)}async _findDuplicatesJP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"duplicates";const t=this.catalog.href.replace("/v2/","/v2/lrml/")+"/"+e;try{if(n.A.is_enabled("debug_duplicates_simulate_internal_error")&&Math.random()<.5)throw console.log("simulating findDuplicatesJP internal error"),[{testing:!0},500,null];const[e,...r]=await this.requestJP("GET",t);return e}catch(e){const[t,r,i]=e;throw t.testing||this._reportError(r,JSON.stringify(t),i,"findDuplicatesFailure"),e}}fetchP(){const e=Uo.Deferred();return this.fetchJP().then((t=>e.resolve(t)),(t=>e.reject(t))),e.promise()}async fetchJP(){if(this.finished)return Promise.reject();if(this.fetching)return this.fetching;this.fetching=this._fetchJP();try{await this.fetching,this.fetching=null}catch(e){throw this.fetching=null,e}}_getImportDateRange(e){let t=1/0,r=-1/0;for(const i of e){const e=i.getImportDate();e&&(t=Math.min(t,e),r=Math.max(r,e))}return{minImportDate:t,maxImportDate:r}}_getCaptureDateRangeAndCount(e){const t=this._getMostCommonExtension(e);let r=1/0,i=-1/0,n=0;for(const s of e){if(s.getFileExtension()!==t)continue;const e=s.getCaptureDate();e&&(n++,r=Math.min(r,e),i=Math.max(i,e))}return{minCaptureDate:r,maxCaptureDate:i,assetWithCaptureDateCount:n}}_getMostCommonExtension(e){const t={};for(const r of e){const e=r.getFileExtension();e&&(t[e]=(t[e]||0)+1)}return Object.keys(t).reduce(((e,r)=>{const i=t[r],n=t[e]||0;return i>n||i===n&&ur.RAW_EXTENSIONS.includes(r)?r:e}),null)}_shouldFilterOutValidAssets(e){const t=e.length;if(t<=1)return console.error("duplicate group has less than 2 valid assets"),!0;if(n.A.is_enabled("debug_duplicates_unfiltered"))return!1;if(2===t&&ur.isPair(e[0],e[1]))return n.A.is_enabled("debug_duplicates")&&console.log("filtered out jpeg/heif + raw pair group",e.map((e=>e.getFileName()))),!0;if(t>=3){const{minImportDate:t,maxImportDate:r}=this._getImportDateRange(e);if(r-t>this.maxImportDateRange1)return!1;const{minCaptureDate:i,maxCaptureDate:s,assetWithCaptureDateCount:o}=this._getCaptureDateRangeAndCount(e),a=(s-i)/o;return!(o<=1||a>this.maxCaptureDateInterval)&&(!(r-t>this.maxImportDateRange2)&&(n.A.is_enabled("debug_duplicates")&&console.log("filtered out burst group by import date and capture date",e.map((e=>e.getFileName())),{assetWithCaptureDateCount:o,interval:a}),!0))}return!1}async _fetchJP(){try{this.nextLink&&await this._fetchDuplicates();const e=this.cachedDuplicateResults;if(e&&e.length>0&&-1!==this.nextGroupIndex){let t=0;const r=[],i=[];for(let n=this.nextGroupIndex;n<e.length;n++){const s=e[n];if(t+s.all_assets.length>this.pageSize){this.nextGroupIndex=n;break}i.push([]);for(const e of s.all_assets){t++;const n=e.asset_id;r.includes(n)||r.push(n),i[i.length-1].push({asset_id:n,group_id:s.id,group_created:s.created,group_updated:s.updated,group_status:s.status,user_reviewed:s.user_reviewed?JSON.stringify(s.user_reviewed):null,asset_added_at:e.added_at,asset_reviewed:e.reviewed,asset_album_ids:e.albums})}this.nextGroupIndex=n+1}if(r.length>1){const e=this.catalog.href+"/assets",t=new Ao(e,r,{embed:"user"}),[n]=await t.loadJP();for(const e of i){const t=[];for(const r of e){const e=n.assets[r.asset_id];e&&(e.find_duplicates_info=r,t.push(e))}const r=t.length;if(!this._shouldFilterOutValidAssets(t)){for(const e of t)this._add(e);this.totalCount+=r}}}this.nextGroupIndex>=e.length&&null==this.nextLink&&(this.finished=!0,this.totalCount=this._models.length,this.nextGroupIndex=-1)}else this.finished=!0,this.totalCount=this._models.length,this.nextGroupIndex=-1;this.page++}catch(e){n.A.is_enabled("debug_duplicates")&&console.error("fetchJP error",e),this.errored=!0;const[t,r,i]=e;throw t.testing||this._reportError(r,JSON.stringify(t),i),this._dirty=!0,[t,r,i]}}deleteAssetsLocally(e){const t=[...e],r=new Set,i={};this._models.forEach((t=>{const r=t.find_duplicates_info.group_id;null==i[r]&&(i[r]=[]),e.includes(t.id)||i[r].push(t.id)})),e.forEach((e=>{const t=this.get(e).find_duplicates_info.group_id;r.add(t)})),r.forEach((e=>{const r=i[e];1===r.length&&t.push(...r)})),this.deleteLocally(t)}get assets(){return this}},Mo=(0,i.A)(Lo.prototype,"errored",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lo);var zo,Ho,Jo=r(595642);let qo=(zo=class extends tn{constructor(e,t){super(),(0,b.A)(this,"errored",Ho,this),this.catalog=e,this.pageSize=100,this.oz_ids=t,this.reset()}reset(){if(this._dirty)return super.reset(),this.errored=!1,this}_reportError(e,t,r){var i,n;t=null!==(n=e=null!==(i=e)&&void 0!==i?i:"unknown")&&void 0!==n?n:"unknown";const s=r.getResponseHeader("x-request-id");g.A.reportFailure("searchFailure",{errorCode:e,errorDescription:t,requestId:s})}fetchP(){const e=Jo.Deferred();return this.fetchJP().then((t=>e.resolve(t)),(t=>e.reject(t))),e.promise()}async fetchJP(){if(this.finished)return Promise.reject();if(this.fetching)return this.fetching;this.fetching=this._fetchJP();try{await this.fetching,this.fetching=null}catch(e){throw this.fetching=null,e}}async _fetchJP(){const{_models:e,oz_ids:t}=this;try{let e=`/v2/catalogs/${this.catalog.id}/assets`;T.A.hostOverride&&(e=`${T.A.hostOverride}${e}`);const r=new Ao(e,t,{embed:"user"}),[i]=await r.loadJP();for(const e of t){const t=i.assets[e];null!=t&&this._add(t)}this._models.length<this.pageSize&&(this.finished=!0,this.totalCount=this._models.length),this.page++,this.page*this.pageSize>=1e4&&(this.finished=!0,this.totalCount=this._models.length)}catch([e,t,r]){throw this.errored=!0,this._reportError(t,JSON.stringify(e),r),this._dirty=!0,[e,t,r]}}deleteAssetsLocally(e){this.deleteLocally(e)}get assets(){return this}},Ho=(0,i.A)(zo.prototype,"errored",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zo);r(625291);const Vo=e=>Math.abs(e)<1e-4,Bo={calculateCombinedAestheticRating(e){const t=e.getAesthetics();if(null==t)return 0;let r=0;for(var i in t){var n=t[i];"number"==typeof n&&("version"!==i&&0!==this.importanceWeights.aestheticWeights[i]&&(r+=n*this.importanceWeights.aestheticWeights[i]))}return r<0&&(r=0),r},calculateImportance(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==r&&(r=null!=this.bestPhotosState?.senseiOnlyCalculation&&this.bestPhotosState?.senseiOnlyCalculation),n.A.is_enabled("best_photos_trust_oz"))t=parseInt(e.hackBestPhotosOrder);else if(n.A.is_enabled("best_aesthetics_score_only"))t=e.getAestheticScore();else{const i=this._calculateBaseImportance(e,r),n=this._getAutoTagImportance(e,r),s=this._getFrameImportance(e),o=this._getFaceImportance(e),a=this._getBlurImportance(e),l=this._getEyeQualityImportance(e);t=(i+n+s+o+a+l)/this._getNormalizer(i,n,s,o,a,l)}return t},_calculateBaseImportance(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0;const i=!t&&!this.bestPhotosState?.senseiOnlyCalculation;return i&&(r+=this._getFlagImportance(e),r+=this._getRatingImportance(e),r+=this._getTitleImportance(e),r+=this._getCaptionImportance(e),r+=this._getEditImportance(e)),r+=this._getAestheticImportance(e),r=r/this._getMaxAestheticScore(t)*100,i&&(r+=this._getRatedFlaggedPenalty(e)),r},_getNormalizer(e,t,r,i,n,s){let o=0;return Vo(e)||(o+=1),Vo(t)||(o+=this.importanceWeights.autoTagScore),Vo(r)||(o+=this.importanceWeights.frameScore),Vo(i)||(o+=this.importanceWeights.faceScore),Vo(n)||(o+=this.importanceWeights.blurScore),Vo(s)||(o+=this.importanceWeights.eyeQualityScore),o},_getFrameImportance(e){return e.getBestFrameScore("frame")*this.importanceWeights.frameScore/this.maxScores.frame*100},_getFaceImportance(e){const t=e.getBestFrameScore("face"),r=null!=this.bestPhotosState?.peopleMultiplier?this.bestPhotosState?.peopleMultiplier:1;return t>=this.importanceWeights.faceScoreOutlierMin?t*this.importanceWeights.faceScoreOutlier*r/this.maxScores.face*100:t*this.importanceWeights.faceScore*r/this.maxScores.face*100},_getBlurImportance(e){const t=e.getBlurScores(),r=this.importanceWeights.blur;if(null==t)return 0;let i=0;for(var s of["desired","undesired","clear","acceptable"])this._shouldIgnoreBlurScore(e,s)||(i+=t[s]*r[s]);return n.A.is_enabled("debug_best_photos")&&(i+=(t.desired+t.clear+t.acceptable)*r.goodScore,i+=(t.undesired+.5*t.acceptable)*r.badScore),i},_shouldIgnoreEyeBlurScore(e){let t;const r=null!=(t=e.getBestFrameScores().numFaces)?t:0;return r<this.importanceWeights.eyeQuality.min_faces||r>this.importanceWeights.eyeQuality.max_faces},_getEyeBlurMultiplier(e){if(this._shouldIgnoreEyeBlurScore(e))return 0;if(n.A.is_enabled("debug_best_photos")&&this.importanceWeights.eyeQuality.eye_sharpness_debug_override>-1e4)return this.importanceWeights.eyeQuality.eye_sharpness_debug_override;const t=null!=this.bestPhotosState?.peopleMultiplier?this.bestPhotosState?.peopleMultiplier:1,r=this.importanceWeights.eyeQuality.eye_blur_multiplier;return t<=-2?r[0]:t<=-.5?r[1]:t<=1?r[2]:t<=2.5?r[3]:r[4]},_getEyeQualityImportance(e){const t=e.getEyeQualityScores();if(null==t)return 0;if(t.eye_sharpness<this.importanceWeights.eyeQuality.min_sharpness)return 0;let r=0;for(var i of(r+=t.eye_sharpness*this._getEyeBlurMultiplier(e),["retina_visible_prob","sclera_visible_prob"]))r+=t[i]*this.importanceWeights.eyeQuality[i];return r},_shouldIgnoreBlurScore(e,t){if("desired"===t){const t=e.getAutoTags();if(null==t)return!1;for(let e=0;e<this.importanceWeights.blur.desiredIgnoreTags.length;e++){if(t[this.importanceWeights.blur.desiredIgnoreTags[e]]>this.importanceWeights.blur.desiredIgnoreThresholds[e])return!0}}return!1},_getFlagImportance(e){const t=e.getFlag();return"reject"===t&&null!=this.bestPhotosState?.rejectWeightOverride?this.bestPhotosState?.rejectWeightOverride:this.importanceWeights.flags[t]},_getRatingImportance(e){const t=e.getRating();return this.importanceWeights.rating[t]},_getTitleImportance(e){return""!==e.getTitle().trim()?this.importanceWeights.hasTitle:0},_getCaptionImportance(e){return""!==e.getCaption().trim()?this.importanceWeights.hasCaption:0},_getAestheticImportance(e){return this.importanceWeights.aestheticScore*this.calculateCombinedAestheticRating(e)},_getEditImportance(e){return e.hasUserEdits()?null!=this.bestPhotosState?.editedWeightOverride?this.bestPhotosState?.editedWeightOverride:this.importanceWeights.hasEdits:0},_getRatedFlaggedPenalty(e){if(!this.bestPhotosState?.excludeRatedFlagged)return 0;const t=0!==e.getRating(),r="unflagged"!==e.getFlag();return t||r?-1e3:0},_isPeopleTagType:e=>["people","people_secondary","faces"].includes(e),_getAutoTagImportance(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.getAutoTags();let i=0;const n=this.autoTagMaxPercent*this._getAestheticImportance(e);for(var s in r){var o=r[s]*(this.autoTagLookupTable[s]?.weight||0);null!=this.bestPhotosState&&this._isPeopleTagType(this.autoTagLookupTable[s]?.type)&&(o*=this.bestPhotosState.peopleMultiplier),i+=o}return Math.min(i,n)*this.importanceWeights.autoTagScore/this._getMaxAutoTagScore(t)*100},autoTagMaxPercent:.3,autoTagWeights:{people:{weight:.005,tags:["person","human","people","couple","friends","man","guy","men","male","father","dad","female","woman","lady","women","mother","mom","boy","son","girl","daughter","adult","kid","baby","child","children","couple","family","teenager","young adult"]},people_adjectives:{weight:.02,tags:["beautiful","beauty","pretty","cute","glamour","sexy","attractive","handsome","fashion"]},people_secondary:{weight:.005,tags:["businesswoman","businessman","businesspeople","bride","groom","manager","executive","engineer","architect","student","waiter","worker","police","doctor","patient","senior","elderly","mature","audience","team","teacher","wife","husband","partner"]},people_actions:{weight:.005,tags:["walking","looking","drinking","handshake","talking","togetherness","social"]},on_people:{weight:.005,tags:["dress","skin"]},emotion:{weight:.005,tags:["happy","cheerful","love","happiness","friendship"]},faces:{weight:.02,tags:["smiling","smile","face","portrait","expression"]},on_faces:{weight:.005,tags:["blond","blonde","brunette","hair","glasses","sunglasses","head"]}},autoTagLookupTable:{},importanceWeights:{flags:{pick:50,reject:-20,unflagged:0},aestheticScore:.3,autoTagScore:.1,aestheticWeights:{balancing:0,blur:0,content:0,dof:0,emphasis:0,harmony:0,lighting:0,repetition:0,rot:0,score:1,symmetry:0,vivid:0},hasEdits:0,rating:[0,5,10,20,40,80],hasTitle:5,hasCaption:5,frameScore:10,faceScore:1,faceScoreOutlierMin:.9,faceScoreOutlier:2,blurScore:1,eyeQualityScore:1,blur:{desired:.8,desiredIgnoreTags:["landscape"],desiredIgnoreThresholds:[55],undesired:-.2,clear:0,acceptable:0,goodScore:-.2,badScore:0},eyeQuality:{min_faces:1,max_faces:3,min_sharpness:75,eye_sharpness_debug_override:-1e4,eye_blur_multiplier:[0,.5,1,1.5,1.8],retina_visible_prob:0,sclera_visible_prob:0},undesiredBlurCutoff:98},calculateImportanceBreakdown(e){let t;const r=null!=this.bestPhotosState?.senseiOnlyCalculation&&this.bestPhotosState?.senseiOnlyCalculation,i=this._calculateBaseImportance(e,r),n=this._getAutoTagImportance(e,r),s=this._getFrameImportance(e),o=this._getFaceImportance(e),a=this._getBlurImportance(e),l=this._getEyeQualityImportance(e),u=this._getNormalizer(i,n,s,o,a,l);return{total:this.calculateImportance(e,r).toFixed(4),base:`${(i/u).toFixed(2)} (${i.toFixed(2)})`,autotags:`${(n/u).toFixed(4)} (${n.toFixed(4)})`,frame:`${(s/u).toFixed(4)} (${s.toFixed(4)})`,face:`${(o/u).toFixed(4)} (${o.toFixed(4)})`,blur:`${(a/u).toFixed(4)} (${a.toFixed(4)})`,eye:`${(l/u).toFixed(4)} (${l.toFixed(4)})`,normalizer:u,flag:`${this._getFlagImportance(e).toFixed(2)}`,rating:`${this._getRatingImportance(e).toFixed(2)}`,title:`${this._getTitleImportance(e).toFixed(2)}`,caption:`${this._getCaptionImportance(e).toFixed(2)}`,edited:`${this._getEditImportance(e).toFixed(2)}`,"Frame Raw":e.getBestFrameScore("frame").toFixed(4),"Face Raw":e.getBestFrameScore("face").toFixed(4),"Num Faces":null!=(t=e.getBestFrameScores().numFaces)?t:"null","Oz Score":parseFloat(null!=e.hackBestPhotosOrder?e.hackBestPhotosOrder:0).toFixed(1)}},calculateBestQualityAsset(e,t){let r,i=-1e4;for(var n of e){if(!n.hasBestFrameScore(t))return null;n.getBestFrameScore(t)>i&&(r=n,i=r.getBestFrameScore(t))}return r},_calculateAutoTagLookupTable(){return(()=>{const e=[];for(var t in this.autoTagWeights){var r=this.autoTagWeights[t];e.push(r.tags.map((e=>this.autoTagLookupTable[e]={weight:r.weight,type:t})))}return e})()},_getMaxAestheticScore(e){return e?this.maxScores.aesthetics.senseiOnly:this.maxScores.aesthetics.allProperties},_getMaxAutoTagScore(e){return e?this.maxScores.autoTag.senseiOnly:this.maxScores.autoTag.allProperties},_calculateMaxScores(){const e=this.importanceWeights,t=100*e.aestheticScore,r=t+e.flags.pick+e.hasEdits+e.rating[5]+e.hasTitle+e.hasCaption,i=r*this.autoTagMaxPercent,n=t*this.autoTagMaxPercent;return this.maxScores={aesthetics:{senseiOnly:t,allProperties:r},autoTag:{senseiOnly:n,allProperties:i},frame:1,face:1}},setBestPhotosState(e){this.bestPhotosState=e}};Bo._calculateAutoTagLookupTable(),Bo._calculateMaxScores(),n.A.is_enabled("debug")&&(window.StoryHelper=Bo);const Wo=Bo,Go=(e,t)=>{let r=t.trim();r=r.replace(/\[(\w+)\]/g,".$1"),r=r.replace(/^\./,"");const i=r.split(".");let n=e;if(e.payload&&e.attributes){n=null!=e.payload()[i[0]]?e.payload():e.attributes}for(const e of i){if(null==n[e])return"";n=n[e]}return null!=n?n:""};let Xo;const Ko=Xo={SORT_NEWEST_FIRST:0,SORT_OLDEST_FIRST:1,SORT_CUSTOM:2,SORT_DEBUG_VALUE:3,_localeCompare(e,t){e=e.toString(),t=t.toString();const r=e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase());return 0===r?e.localeCompare(t):r},localeCompare:(e,t)=>Xo.logicalStringComparison(e,t),stringToArrayOfCharactersAndNumbers(e){if(!(e?.length>0))return[];return e.match(/([\d]+)|[^\d]+/g)},_stringTokenComparison(e,t){const r=parseFloat(e),i=parseFloat(t);return isNaN(r)&&isNaN(i)?""===e?-1:""===t?1:Xo._localeCompare(e,t):isNaN(r)?1:isNaN(i)?-1:r-i},logicalStringComparison(e,t){let r;const i=Xo.stringToArrayOfCharactersAndNumbers(e.toString()),n=Xo.stringToArrayOfCharactersAndNumbers(t.toString()),s=n.length;for(let e=0;e<i.length;e++){var o=i[e];if(e>=s)return 1;var a=n[e];if(r=Xo._stringTokenComparison(o,a),0!==r)return r}return r},ozModelCreatedCompareAsc(e,t){const r=e.getBestCreatedDateAttribute(),i=t.getBestCreatedDateAttribute();return r===i?0:r>i?1:-1},ozModelCreatedCompareDesc:(e,t)=>Xo.ozModelCreatedCompareAsc(t,e),assetQualityCompareAsc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xo.assetCaptureDateCompareAsc;const i=Wo.calculateImportance(e,!0),n=Wo.calculateImportance(t,!0);return Math.abs(i-n)<.001?r(e,t):i-n},assetQualityCompareDesc:(e,t)=>Xo.assetQualityCompareAsc(t,e,Xo.assetCaptureDateCompareDesc),_dateCompare(e,t,r){const i=r[0],n=e[i]?.()||null,s=t[i]?.()||null,o=null===n&&null===s,a=n?.getTime()===s?.getTime();return o?r.length>1?(r.shift(),Xo._dateCompare(e,t,r)):0:a&&r.length>1?(r.shift(),Xo._dateCompare(e,t,r)):null===n?-1:null===s?1:n-s},assetCaptureDateCompareLikeOzAsc:(e,t)=>Xo._dateCompare(e,t,["getCaptureDate","getOzCreatedDate"]),assetCaptureDateCompareLikeOzDesc:(e,t)=>Xo.assetCaptureDateCompareLikeOzAsc(t,e),assetCaptureDateCompareAsc(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Xo._dateCompare(e,t,["getCaptureDate"]);return 0===i&&r?Xo.assetFileNameCompareAsc(e,t):i},assetCaptureDateCompareDesc:(e,t)=>Xo.assetCaptureDateCompareAsc(t,e),assetImportDateCompareAsc(e,t){const r=Xo._dateCompare(e,t,["getImportDate","getCaptureDate"]);return 0===r?Xo.assetFileNameCompareAsc(e,t):r},assetImportDateCompareDesc:(e,t)=>Xo.assetImportDateCompareAsc(t,e),assetModifiedDateCompareAsc(e,t){const r=Xo._dateCompare(e,t,["getUserUpdatedDate","getCaptureDate"]);return 0===r?Xo.assetFileNameCompareAsc(e,t):r},assetModifiedDateCompareDesc:(e,t)=>Xo.assetModifiedDateCompareAsc(t,e),assetRatingCompareAsc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xo.assetCaptureDateCompareAsc;const i=e.getRating(),n=t.getRating();return i===n?r(e,t):i-n},assetRatingCompareDesc:(e,t)=>Xo.assetRatingCompareAsc(t,e,Xo.assetCaptureDateCompareDesc),assetFileNameCompareAsc(e,t){const r=e.getFileName(),i=t.getFileName();if(""===r&&""===i)return Xo.assetCaptureDateCompareAsc(e,t,!1);if(""===r)return-1;if(""===i)return 1;{const n=Xo.logicalStringComparison(r,i);return 0===n?Xo.assetCaptureDateCompareAsc(e,t,!1):n}},assetFilenameCompareDesc:(e,t)=>Xo.assetFilenameCompareAsc(t,e),makeCustomSortPropertyComparer:e=>function(t,r){return(parseFloat(Go(r,e))||0)-(parseFloat(Go(t,e))||0)}};var Yo=[];class Qo{static get active(){return Yo.length>0}static start(e){Yo.push(e)}static end(e){let t=Yo[Yo.length-1];if(e!==t)throw new Error("ActionDispatcher: Expected to end "+t+", but instead ended a different action of type "+e);Yo.pop()}}Qo.IMPLICIT_ACTION_PREFIX="@",Qo.INIT_ACTION="@@INIT";const Zo="google.photos";class ea{static register(e){for(var t=e.prototype.constructor.name||"Unknown",r=t,i=1;ea._nameToClass[r];)r=t+i++;ea._nameToClass[r]=e,e.prototype.__classLookupName=r}static lookup(e){return ea._nameToClass[e]}static valueToJSON(e){return e&&e instanceof sa?{className:e.__classLookupName,json:e.toJSON()}:e}static valueFromJSON(e){if(e&&e.className&&e.json){var t=new(ea.lookup(e.className));return t.fromJSON(e.json),t}return e}}ea._nameToClass={};const ta=function(e,t,r,i){return"function"==typeof t?t(e,...r):i()};var ra,ia;let na=(ra=class{constructor(){(0,b.A)(this,"parent",ia,this),this.name=void 0,this.middleware=void 0,this.subStores={}}},ia=(0,i.A)(ra.prototype,"parent",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ra);class sa extends Wt{constructor(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.__data=new na;var i=this.__data;i.middleware=r?[ta]:[],t instanceof Array?i.middleware=i.middleware.concat(t):t&&i.middleware.push(t),e&&this.dispatch(Qo.INIT_ACTION,e)}forEach(e){var t=this.__data.subStores;for(var r in t){var i=t[r];i&&e(i)}}dispose(){super.dispose(),this.forEach((e=>e.dispose()))}_isMutable(){return void 0!==this.__allowMutable?this.__allowMutable:this.__data.parent?this.__data.parent._isMutable():void 0}_isMutableProperty(e){if(void 0!==this.__allowMutableProperties&&void 0!==this.__allowMutableProperties[e])return!0}_linkStore(e,t){var r=this.__data.subStores;if(r[e]&&(r[e].__data.parent=void 0,r[e].__data.name=void 0,r[e]=void 0),t&&t instanceof sa){if(t.__data.parent&&t.__data.parent!==this)throw new Error("The store you're attempting to assign to \""+e+'" already belongs to another store. The store hierarchy must be a tree.');r[e]=t,t.__data.parent=this,t.__data.name=e}}_doDispatch(e,t){var r,i=!1;if(e===Qo.INIT_ACTION)super.fromJSON(...t),i=!0;else if(0===e.indexOf(Qo.IMPLICIT_ACTION_PREFIX)){for(var n=this,s=(e=e.substring(Qo.IMPLICIT_ACTION_PREFIX.length)).split(".");s.length>1;)n=n[s.shift()];var o=s[0];if("()"===o.substring(o.length-2))r=n[o.substring(0,o.length-2)](...t.map(ea.valueFromJSON));else n[o]=ea.valueFromJSON(...t);i=!0}else{var a=this.__actionHandlers&&this.__actionHandlers[e];a&&(a.options.async?console.warn('Ignoring an asynchronous handler for action "'+e+'" while propagating. Asynchronous actions can only be dispatched directly to the target store.'):i=!0===(r=this[a.name](...t))||!1===a.options.propagate)}if(i)return r;this.forEach((r=>{r._doDispatch&&r._doDispatch(e,t)}))}_dispatchDown(e,t){var r=e.split("/");e=r.pop();for(var i=this,n=0;n<r.length;n++)if(!(i=i.__data.subStores[r[n]]))return;return i._doDispatch(e,t)}_dispatchWithMiddleware(e,t,r){for(var i=this,n=arguments.length,s=new Array(n>3?n-3:0),o=3;o<n;o++)s[o-3]=arguments[o];if(r&&!Qo.active){return r(this,e,t,(function(r){if(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return i._dispatchWithMiddleware(r,o,...s)}return i._dispatchWithMiddleware(e,t,...s)}))}if("string"!=typeof e){if(Qo.active&&"function"==typeof e)throw new Error("Cannot dispatch an asynchronous action from a synchronous action");throw new Error("Action name must be a string")}let a;try{Qo.start(e),a=this._dispatchDown(e,t)}catch(t){throw Qo.end(e,!0),t}return Qo.end(e),a}_dispatchUp(e,t,r,i){var n=this.__data.parent;if(n)return n._dispatchUp(e,t,r,this.__data.name+"/"+i);var s=this.__data.middleware;return"string"==typeof e?this._dispatchWithMiddleware(i+e,t,...s):r._dispatchWithMiddleware(e,t,...s)}dispatch(e){for(var t=this.__actionHandlers&&this.__actionHandlers[e],r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return t&&t.options.async?this[t.name](...i):this._dispatchUp(e,i,this,"")}getParentStore(){return this.__data.parent}}const oa=e=>"object"==typeof e&&0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype;class aa extends sa{constructor(e,t){super(e,t),e&&this._fromJSON(e)}fromJSON(e){const t=super.fromJSON(e);return this._fromJSON(e),t}_fromJSON(e){const{exportables:t}=this;for(const r of t.properties)delete e[t.getJsonName(r.name)];Object.assign(this,e)}toJSON(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r={},{exportables:i}=this;for(const s of i.properties){const o=s.toJSON.call(this,this[s.key],e);t&&(void 0===o||(n=o,Array.isArray(n)&&0===n.length)||oa(o))||(r[i.getJsonName(s.name)]=o)}var n;if(e)for(const e of Object.getOwnPropertyNames(this))"_"!==e[0]&&(r[e]=Bt()(this[e]));return r}}const la=s.A.makeClassDecorator(((e,t)=>{e.prototype.__allowMutable=t&&t.mutable,ea.register(e)})),ua=s.A.makePropertyDecorator((function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"!=typeof r.value)throw new Error("@Action can only be used with a method (the handler for the action)");if(!(e instanceof sa))throw new Error("@Action can only be used for methods on a Store");if(-1!==t.indexOf("/"))throw new Error('@Action name can\'t include the "/" character');if(-1!==t.indexOf("@"))throw new Error('@Action name can\'t include the "@" character');e.__actionHandlers=e.__actionHandlers||{},e.__actionHandlers[t]={name:t,options:i}}),{throwOnClassInvocation:"@Action must be used on a method, not a class."});var ca,da,ha,pa,fa,ga=function(e,t){if(e&&(e._isMutableProperty(t)||e._isMutable())){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return e.dispatch(Qo.IMPLICIT_ACTION_PREFIX+t,...i.map(ea.valueToJSON))}throw new Error("Attempting to set state outside of an action")};function ma(e,t,r,i,n){var s=n&&n[r],o=void 0!==s?s:e.defaultValue,a=e.fromJSON.call(i,o);i[t]=a}class ya extends Pe{add(e){var t=super.add(...arguments),r=t.set;return t.set=function(t){if(!Qo.active)return ga(this,e,t);r.call(this,t),this._linkStore(e,t)},t}computeJSONMethod(){for(var e=[],t=this.properties,r=0,i=t.length;r<i;++r){var n=t[r],s=n.name,o=this.getJsonName(n.name);e.push(ma.bind(this,n,s,o))}this.fromJSON=(t,r)=>(e.forEach((e=>e(t,r))),t)}}var va=Object.getOwnPropertyDescriptor(Oe.prototype,"length");class ba extends Oe{_linkItem(e,t){this._parent._linkStore(this._name+":"+e,t)}_linkItems(e,t){e=e||0,t=t||this.length;for(let r=e;r<t;r++)this._linkItem(r);for(let r=e;r<t;r++)this._linkItem(r,this.at(r))}get length(){return va.get.call(this)}set length(e){if(Qo.active){var t=this.base.length;va.set.call(this,e),t>e&&this._linkItems(e,t)}else ga(this._parent,this._name+".length",e)}swapItems(e){if(!Qo.active)return ga(this._parent,this._name+".swapItems()",e);var t=this.base.length;super.swapItems(e),this._linkItems(0,Math.max(t,e.length))}setAt(e,t){if(!Qo.active)return ga(this._parent,this._name+".setAt()",e,t);super.setAt(e,t),this._linkItem(e,t)}push(){if(!Qo.active)return ga(this._parent,this._name+".push()",...arguments);var e=this.length,t=super.push(...arguments);return this._linkItems(e,e+arguments.length),t}pop(){if(!Qo.active)return ga(this._parent,this._name+".pop()",...arguments);var e=super.pop();return this._linkItem(this.length),e}unshift(){if(!Qo.active)return ga(this._parent,this._name+".unshift()",...arguments);var e=super.unshift(...arguments);return this._linkItems(),e}shift(){if(!Qo.active)return ga(this._parent,this._name+".shift()",...arguments);var e=super.shift();return this._linkItems(0,this.length+1),e}splice(){if(!Qo.active)return ga(this._parent,this._name+".splice()",...arguments);var e=this.length,t=super.splice(...arguments);return this._linkItems(0,Math.max(e,this.length)),t}fill(e,t,r){return Qo.active?(super.fill(e,t,r),this._linkItems(t,r),this):ga(this._parent,this._name+".fill()",e,t,r)}reverse(){return Qo.active?(super.reverse(),this._linkItems(),this):ga(this._parent,this._name+".reverse()")}sort(){return Qo.active?(super.sort(...arguments),this._linkItems(),this):ga()}}class _a extends Le{_linkItem(e,t){this._parent._linkStore(this._name+":"+e,t)}_linkItems(e){var t=e||this.keys();for(var r of t)this._linkItem(r,this.get(r))}set(e,t){return Qo.active?(super.set(e,t),this._linkItem(e,t),this):ga(this._parent,this._name+".set()",e,t)}delete(e){if(!Qo.active)return ga(this._parent,this._name+".delete()",e);var t=super.delete(e);return this._linkItem(e),t}clear(){if(!Qo.active)return ga(this._parent,this._name+".clear()");var e=this.keys();super.clear(),this._linkItems(e)}}const Aa=new(ca=s.A.wrapPropertyDecorator,da=s.A.wrapPropertyDecorator,ha=s.A.wrapPropertyDecorator,pa=s.A.wrapPropertyDecorator,fa=class extends ut{constructor(){super(...arguments),this._jsonPropertiesType=ya,this._arrayType=ba,this._mapType=_a}byRefArray(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byRefArray");return ut.prototype.byRefArray.call(this,e,t,r,i,n)}byCustomRefArray(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byCustomRefArray");return ut.prototype.byCustomRefArray.call(this,e,t,r,i,n)}byRefMap(e,t,r,i,n){if(n)throw new Error("static is not supported for @State.byRefMap");return ut.prototype.byRefMap.call(this,e,t,r,i,n)}mutable(e,t){e.__allowMutableProperties=e.__allowMutableProperties||{},e.__allowMutableProperties[t]={name:t}}wrapArray(e,t,r){var i=new this._arrayType(e);return i._parent=t,i._name=r,i._linkItems(),i}wrapMap(e,t,r){var i=new this._mapType(e);return i._parent=t,i._name=r,i._linkItems(),i}},(0,i.A)(fa.prototype,"byRefArray",[ca],Object.getOwnPropertyDescriptor(fa.prototype,"byRefArray"),fa.prototype),(0,i.A)(fa.prototype,"byCustomRefArray",[da],Object.getOwnPropertyDescriptor(fa.prototype,"byCustomRefArray"),fa.prototype),(0,i.A)(fa.prototype,"byRefMap",[ha],Object.getOwnPropertyDescriptor(fa.prototype,"byRefMap"),fa.prototype),(0,i.A)(fa.prototype,"mutable",[pa],Object.getOwnPropertyDescriptor(fa.prototype,"mutable"),fa.prototype),(0,i.A)(fa.prototype,"wrapArray",[ve.A],Object.getOwnPropertyDescriptor(fa.prototype,"wrapArray"),fa.prototype),(0,i.A)(fa.prototype,"wrapMap",[ve.A],Object.getOwnPropertyDescriptor(fa.prototype,"wrapMap"),fa.prototype),fa)("State");var wa,Pa,Sa,xa,Ca,Oa,ka,Ta,Ea,Ia,Da,Ra,ja,Fa,Na,La,Ma,Ua,$a,za,Ha,Ja,qa,Va,Ba,Wa,Ga,Xa,Ka,Ya,Qa,Za,el,tl,rl,il,nl,sl,ol,al,ll,ul,cl,dl,hl,pl,fl,gl,ml;let yl=(wa=la({mutable:!0}),Pa=Aa.byVal,Sa=Aa.byVal,xa=Aa.byVal,Ca=Aa.byVal,wa((ka=class extends aa{constructor(){super(...arguments),(0,b.A)(this,"showTitle",Ta,this),(0,b.A)(this,"showAuthor",Ea,this),(0,b.A)(this,"showCover",Ia,this),(0,b.A)(this,"cover",Da,this)}},Ta=(0,i.A)(ka.prototype,"showTitle",[Pa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ea=(0,i.A)(ka.prototype,"showAuthor",[Sa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ia=(0,i.A)(ka.prototype,"showCover",[xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Da=(0,i.A)(ka.prototype,"cover",[Ca],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"background"}}),Oa=ka))||Oa),vl=(Ra=la({mutable:!0}),ja=Aa.byVal,Fa=Aa.byVal,Na=Aa.byVal,Ra((Ma=class extends aa{constructor(){super(...arguments),(0,b.A)(this,"version",Ua,this),(0,b.A)(this,"themeId",$a,this),(0,b.A)(this,"styleId",za,this)}},Ua=(0,i.A)(Ma.prototype,"version",[ja],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$a=(0,i.A)(Ma.prototype,"themeId",[Fa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Gallery"}}),za=(0,i.A)(Ma.prototype,"styleId",[Na],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Dark"}}),La=Ma))||La),bl=(Ha=la({mutable:!0}),Ja=Aa.byRef(yl),qa=Aa.byRef(vl),Ha((Ba=class extends aa{constructor(){super(...arguments),(0,b.A)(this,"options",Wa,this),(0,b.A)(this,"explore",Ga,this)}},Wa=(0,i.A)(Ba.prototype,"options",[Ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ga=(0,i.A)(Ba.prototype,"explore",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Va=Ba))||Va),_l=(Xa=la({mutable:!0}),Ka=Aa.byVal,Xa((Qa=class extends aa{constructor(){super(...arguments),(0,b.A)(this,"author",Za,this)}},Za=(0,i.A)(Qa.prototype,"author",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ya=Qa))||Ya),Al=(el=la({mutable:!0}),tl=Aa.byRef(bl),rl=Aa.byRef(_l),el((nl=class extends aa{constructor(){super(...arguments),(0,b.A)(this,"presentation",sl,this),(0,b.A)(this,"story",ol,this)}convertToDisplay(){this.presentation.explore.version=1,this.story.author||(this.story.author=Wi.account.getDefaultShareAuthor())}revertFromDisplay(){1===this.presentation.explore.version&&(this.presentation=null)}},sl=(0,i.A)(nl.prototype,"presentation",[tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ol=(0,i.A)(nl.prototype,"story",[rl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.A)(nl.prototype,"convertToDisplay",[ua],Object.getOwnPropertyDescriptor(nl.prototype,"convertToDisplay"),nl.prototype),(0,i.A)(nl.prototype,"revertFromDisplay",[ua],Object.getOwnPropertyDescriptor(nl.prototype,"revertFromDisplay"),nl.prototype),il=nl))||il),wl=(al=Aa.byRef(Al),la((ul=class extends aa{constructor(){super(...arguments),(0,b.A)(this,"payload",cl,this)}},cl=(0,i.A)(ul.prototype,"payload",[al],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=ul))||ll),Pl=(dl=ct.byVal,hl=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"name",pl,this)}},pl=(0,i.A)(hl.prototype,"name",[dl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hl),Sl=(fl=ct.byRef(Pl),gl=class extends Qt{constructor(){super(...arguments),(0,b.A)(this,"payload",ml,this)}},ml=(0,i.A)(gl.prototype,"payload",[fl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl);var xl,Cl,Ol,kl,Tl,El,Il,Dl=r(595642);let Rl=(Il=class extends er{constructor(){super(...arguments),(0,b.A)(this,"albumCoverDirty",Cl,this),(0,b.A)(this,"_coverAsset",Ol,this),(0,b.A)(this,"_coverFallbackAsset",kl,this),(0,b.A)(this,"_coverPromise",Tl,this),(0,b.A)(this,"_defaultAssetOptions",El,this)}static defaultName(){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date)}_getAttributesMiddleware(){return null}_createAttributes(e){if("collection"===e.subtype){if(null!=this._attributes){Qo.start("@@REINIT");const t=this._attributes.fromJSON(e);return Qo.end("@@REINIT"),t}return new wl(e,this._getAttributesMiddleware())}return super._createAttributes(e)}setAttributes(e){var t,r,i;super.setAttributes(e),null!==(t=this._defaultAssetOptions)&&void 0!==t||(this._defaultAssetOptions=this._createDefaultAssetOptions()),this.albumCoverDirty=!0,null!==(r=this.cachedAssets)&&void 0!==r||(this.cachedAssets={}),null!==(i=this.cachedAssetCountPromises)&&void 0!==i||(this.cachedAssetCountPromises={})}_createDefaultAssetOptions(){return null}setDefaultAssetOptions(e){this._defaultAssetOptions=e}get assets(){return this.getAssets(this._defaultAssetOptions)}set assets(e){this._assets=e}hasAssetLoaded(e){return null!=this.assets.get(e)}get albumCover(){var e;return null!==(e=this._coverAsset)&&void 0!==e?e:this._coverFallbackAsset}isFallbackCover(){return null==this._coverAsset&&null!=this._coverFallbackAsset}get filtersWereConverted(){return null!=this.attributes.migratedToUnfilteredAlbum}get migratedToUnfilteredAlbumId(){return this.attributes.migratedToUnfilteredAlbum?.id}getUserSetCoverId(){return this.attributes.payload.cover?.id}get journalHero(){return this._coverAsset}getSpace(){return null}_setCover(e){this._coverAsset=e,this._coverFallbackAsset=null,this.albumCoverDirty=!1}isLoadingCover(){return null!=this._coverPromise}isCoverLoaded(){return!this.albumCoverDirty}hasCover(){return null!=this.getAttribute("payload").cover}async loadAlbumCoverJP(){return await this.loadAlbumCoverP()}loadAlbumCoverP(){if(!this.albumCoverDirty)return Dl.Deferred().resolve();if(null!=this._coverPromise)return this._coverPromise;const e=this.linkHref("/rels/cover_asset");if(null!=e){const t=new this.coverClass(e);this._coverPromise=t.initializedP().done((e=>{this._setCover(e)}))}else this._coverPromise=this.getOldestAssetP().done((e=>{this._setCover(null),this._coverFallbackAsset=e}));return this._coverPromise.fail((()=>{this._setCover(null)})).always((()=>{this._coverPromise=null}))}getAssets(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ti()(e);null!==(r=(t=this.cachedAssets)[n])&&void 0!==r||(t[n]=new this.assetListClass(`${this.href}/assets`,e));const s=this.cachedAssets[n];return s.parentAlbum=this,i&&s.reset(),s}markAssetsDirty(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.albumCoverDirty=!0),this.cachedAssetCountPromises={},this.assets.markDirty();for(const e in this.cachedAssets){this.cachedAssets[e].markDirty()}}markAssetsExceptDefaultDirty(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.albumCoverDirty=!0),this.cachedAssetCountPromises={};const e=ti()(this._defaultAssetOptions);for(const t in this.cachedAssets){const r=this.cachedAssets[t];t!==e&&r.markDirty()}}markCustomOrderedAssetsDirty(e){const t=ti()(this._defaultAssetOptions);for(const r in this.cachedAssets){const i=this.cachedAssets[r];r===t&&e||"-"===i.options.order_after&&i.markDirty()}}markFilteredAssetsDirty(){this.cachedAssetCountPromises={},!0===this.assets?.options.album_filters&&this.assets.markDirty();for(const e in this.cachedAssets){const t=this.cachedAssets[e];!0===t.options.album_filters&&t.markDirty()}}toString(){return this.getName()}getName(e){let t=this.attributes.payload.source===Zo?(0,f.zt)("$$$/js/albums/import/Google_Photos/name=Imported from Google Photos"):this.attributes.payload.name;return null!=e&&t.length>e&&(t=t.substr(0,e)),t}setPayloadStory(e){var t;const r=this.attributes.payload?.story||{};null!==(t=this._pooledStorySettings)&&void 0!==t||(this._pooledStorySettings={}),this._pooledStorySettings=Dl.extend(r,this._pooledStorySettings,e),null!=this._setPlayloadStoryTimeout&&clearTimeout(this._setPlayloadStoryTimeout),this._setPlayloadStoryTimeout=setTimeout((()=>{this._setPayloadStory(),this._setPlayloadStoryTimeout=null}),50)}_setPayloadStory(){this.updateAttributesP("setPayloadStory",{payload:{story:this._pooledStorySettings}}).fail((()=>{null!=this.attributes.payload?.story&&(this.attributes.payload.story.title=this.attributes?._originalSourceJson.payload?.story?.title,this.attributes.payload.story.author=this.attributes?._originalSourceJson.payload?.story?.author,this.attributes.payload.story.description=this.attributes?._originalSourceJson.payload?.story?.description)})),this._pooledStorySettings=null}getPayloadStory(){var e,t,r;const i=this.attributes.payload?.story,n=null!==(e=i?.title)&&void 0!==e?e:this.getName(),s=null!==(t=i?.author)&&void 0!==t?t:"";return{title:n,description:null!==(r=i?.description)&&void 0!==r?r:"",author:s}}getPresentationFilters(){var e;return null!==(e=this.attributes.payload.presentation?.filters)&&void 0!==e?e:{}}getPresentationFilterPickedOnly(){return!0===this.getPresentationFilters().pickedOnly}getPresentationFilterRatingAtLeast(){var e;return null!==(e=this.getPresentationFilters().ratingAtLeast)&&void 0!==e?e:0}hasPresentationFiltersApplied(){return this.getPresentationFilterPickedOnly()||this.getPresentationFilterRatingAtLeast()>0}getPresentationStyleId(){return this.attributes.payload.presentation?.explore?.styleId||""}get name(){return this.getName()}get title(){return this.attributes.payload?.story?.title||""}hasTitle(){return null!=this.attributes.payload?.story?.title}getShareTitle(){return this.hasTitle()&&this.title.length>0?this.title:this.name}get author(){return this.attributes.payload?.story?.author||""}get showAuthor(){return!0===this.attributes.payload?.presentation?.options?.showAuthor}get showTitle(){return!0===this.attributes.payload?.presentation?.options?.showTitle}hasNonBlankAuthor(){return this.hasAuthor()&&""!==this.author.trim()}get description(){return this.attributes.payload?.story?.description||""}set title(e){var t,r;null!=this.attributes.payload&&(null!==(r=(t=this.attributes.payload).story)&&void 0!==r||(t.story={}));this.attributes.payload?.story.title!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.title=e),this.setPayloadStory({title:e}))}set author(e){var t,r;null!=this.attributes.payload&&(null!==(r=(t=this.attributes.payload).story)&&void 0!==r||(t.story={}));this.attributes.payload?.story.author!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.author=e),this.setPayloadStory({author:e}))}set description(e){var t,r;null!=this.attributes.payload&&(null!==(r=(t=this.attributes.payload).story)&&void 0!==r||(t.story={}));this.attributes.payload?.story.description!==e&&(null!=this.attributes.payload&&(this.attributes.payload.story.description=e),this.setPayloadStory({description:e}))}hasAuthor(){return null!=this.attributes.payload.story?.author}getNewestAssetP(){const e={captured_before:ue,embed:"asset",subtype:"image;video",limit:1};return this.getAssets(e,!0).firstP()}getOldestAssetP(){const e={captured_after:ae,embed:"asset",subtype:"image;video",limit:1};return this.getAssets(e,!0).firstP()}getFirstAssetP(){return this.getAssets({order_after:"-",embed:"asset",subtype:"image;video",limit:1},!0).firstP()}getLastOrderedAssetP(){const e={order_before:"",captured_before:ue,embed:"asset",subtype:"image;video;layout_segment",limit:1};return this.getAssets(e,!0).firstP()}getSubtype(){return this.attributes.subtype||""}getParentId(){return this.attributes.payload?.parent?.id}getHideInOrganize(){return this.attributes.payload?.hideInOrganize||!1}hasDisplaySettings(){return"collection"===this.getSubtype()}get pinned(){var e;return null!==(e=this.attributes.payload?.pinned)&&void 0!==e&&e}},Il.MAX_NAME_LENGTH=250,xl=Il,Cl=(0,i.A)(xl.prototype,"albumCoverDirty",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ol=(0,i.A)(xl.prototype,"_coverAsset",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kl=(0,i.A)(xl.prototype,"_coverFallbackAsset",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tl=(0,i.A)(xl.prototype,"_coverPromise",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),El=(0,i.A)(xl.prototype,"_defaultAssetOptions",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xl);Rl.prototype.attributeClass=Sl,Rl.prototype.assetListClass=null;const jl=Rl;var Fl=r(595642);const Nl=function(e){return e.asset.base=e.base,e.asset.spaces=e.spaces};const Ll=class extends go{constructor(e){Nl(e),super(e.asset),this.albumAssetRelativeUrl=e.links.self.href,this.order=e.payload?.order}refreshP(){if(null!=this.albumAssetRelativeUrl){const e={embed:"spaces;asset;user"},t=this._linkBase.fullHref(this.albumAssetRelativeUrl)+"?"+Fl.param(e);return this.requestP("GET",t).done((e=>(this.order=e.payload?.order,Nl(e),this.setAttributes(e.asset))))}return super.refreshP()}getOrder(){return this.order||""}setOrder(e){return this.order=e}};var Ml=r(595642);let Ul;const $l=(Ul=class extends mn{static initClass(){this.prototype.model=jl,this.prototype.modelName="Album"}modelsByCreatedP(){return this.allP().then((e=>(e.sort(((e,t)=>Ko.localeCompare(t.getBestCreatedDateAttribute(),e.getBestCreatedDateAttribute()))),e)))}modelsByCreated(){const e=this.models.slice();return e.sort(((e,t)=>Ko.localeCompare(t.getBestCreatedDateAttribute(),e.getBestCreatedDateAttribute()))),e}async modelsByUpdatedJP(){return await this.allJP(),this.modelsByUpdated()}modelsByUpdated(){const e=this.models.slice();return e.sort(((e,t)=>Ko.localeCompare(t.getBestUpdatedDateAttribute(),e.getBestUpdatedDateAttribute()))),e}modelsByName(){const e=this.models.slice();return e.sort(Ko.localeCompare),e}getCreateHref(){return`${this.href}/${this.createUuid()}`}createP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?(null==t.payload&&(t.payload={}),"import"!==t?.subtype&&(t.payload.name=e)):t={subtype:"collection",payload:{name:e}},"collection"===t.subtype?super.createP(this.getCreateHref(),t).then((e=>(e.convertToDisplay(),e))):super.createP(this.getCreateHref(),t)}createWithAssetsP(e,t,r){let i,n,s;const o=Ml.Deferred();return i="string"==typeof t||t instanceof String?{subtype:t}:t,r.length>0&&("string"==typeof r[0]||r[0]instanceof String)?(s=!1,n=!1):(s=!0,n=r[0]instanceof Ll),this.createP(e,i).then((e=>{let t;return t=s?r.map((e=>e.id)):r,e.assets.addAssetIdsP(t).done((()=>o.resolve(e))).fail((()=>o.reject("addAssetsToAlbumFailure")))}),(()=>o.reject("albumCreationFailure"))),o.promise()}},Ul.initClass(),Ul),zl=e=>{let t;const r=(i,n,s,o)=>{const a=t,l=a.length,u=i.toJSON();if(c=o,d=u,JSON.stringify(c)===JSON.stringify(d))return a.splice(0,l);var c,d;const h=e.requestP("POST",e.href,JSON.stringify(i.toJSON(!1)));h.done((()=>{a===t&&(a.splice(0,l),Qo.start("@@UPDATE"),i.fromJSON(u),Qo.end("@@UPDATE"),a.length>0&&r(i,n,s,u))})),h.fail((()=>{if(a===t){a.splice(0,l),Qo.start("@@REVERT"),i.fromJSON(o);for(const e of a){const{action:t,payload:r}=e;i.dispatch(t,...r)}Qo.end("@@REVERT"),a.length>0&&r(i,n,s,o)}}))};return(e,i,n,s)=>{if("@"===i[0])"@@INIT"!==i&&"@@REINIT"!==i||(t=[]);else{if(0===t.length){const t=e.toJSON(),o=s();return r(e,i,n,t),o}t.push({action:i,payload:n})}return s()}},{DevelopResources:Hl,PageResources:Jl}=window;var ql,Vl;let Bl=(ql=class extends mn{constructor(e,t){n.A.is_enabled("debug_force_show_error_assets")&&"incomplete"===t?.exclude&&delete t.exclude,super(e,t),this.modelName="Asset",this.haveNonOwnerAssets=!1,(0,b.A)(this,"model",Vl,this),null!=this.options.captured_before&&(this.nextPageLink="prev")}_add(e,t){return null!=e.importedByUser&&(this.haveNonOwnerAssets=!0),super._add(e,t)}_parse(e){const t=super._parse(e);return null!=this.options.captured_before&&t.reverse(),t}hasLayoutSegments(){const e=this.options?.subtype;return null!=e&&e.includes("layout_segment")}getTotalAesthetic(e){let t=0;for(var r of this.models){if(null!=r.attributes?.payload?.aesthetics)t+=r.attributes.payload.aesthetics[e]}const i=t/this.models.length;return n.A.is_enabled("debug")&&console.log(`Total ${e} is ${t}, avg ${i.toFixed(1)}`),t}getAestheticStats(){const e={};for(var t of no)e[t]=this.getTotalAesthetic(t);return e}get displayEmpty(){return this.modelsBindable.every((e=>e.isLayoutSegment()))}get displayLength(){return this.modelsBindable.reduce(((e,t)=>t.isLayoutSegment()?e:e+1),0)}get displayLengthPhotos(){return this.modelsBindable.reduce(((e,t)=>t.isLayoutSegment()||t.isVideo()?e:e+1),0)}nextDisplayIndexIfLoaded(e){const t=e+1,r=this.at(t);return r?.isLayoutSegment()?this.nextDisplayIndexIfLoaded(t):null!=r?t:null}async nextDisplayIndexJP(e){const t=this.nextDisplayIndexIfLoaded(e);return null!=t?t:this.finished?null:(await this.fetchJP(),await this.nextDisplayIndexJP(e))}prevDisplayIndex(e){const t=e-1,r=this.at(t);return r?.isLayoutSegment()?this.prevDisplayIndex(t):null!=r?t:null}getAssetSectionText(e,t){let r,i,n;if(null==e)return[null,null];let s=this.index(e.id);for(--s;s>=0&&(i=this.at(s),!i.isLayoutSegment());)--s;return i?.isLayoutSegment()&&(({title:n}=i),({description:r}=i)),s<=0&&(n?.length>0||(n=t)),[n,r]}},Vl=(0,i.A)(ql.prototype,"model",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return oo}}),(0,i.A)(ql.prototype,"displayEmpty",[Sn.A],Object.getOwnPropertyDescriptor(ql.prototype,"displayEmpty"),ql.prototype),(0,i.A)(ql.prototype,"displayLength",[Sn.A],Object.getOwnPropertyDescriptor(ql.prototype,"displayLength"),ql.prototype),(0,i.A)(ql.prototype,"displayLengthPhotos",[Sn.A],Object.getOwnPropertyDescriptor(ql.prototype,"displayLengthPhotos"),ql.prototype),ql);Bl.defaultPayloadForNewAsset=function(e,t){const r=e.toISOString();return{payload:{userCreated:r,userUpdated:r,importSource:{importedOnDevice:null!=t?t:oe,importTimestamp:r}}}},Bl.defaultPayloadForUpload=function(e,t,r){let{file:i,payload:s}=e;const o=Bl.defaultPayloadForNewAsset(t,r);if(o.payload.importSource.fileSize=i.size,o.payload.importSource.fileName=i.name,n.A.is_enabled("upload_async")&&!ur.isVideo(i)){const e=Hl.VERSION;o.payload.develop={crsVersion:e}}return null!=s&&W()(o.payload,s),o};class Wl extends er{matchesSyncChange(e){if("error"===this.getType())return e.id===this.getSourceId();if(this.getType()!==e.type)return!1;if("asset"===e.type){if("delete"===e.action)return this.isDeleted()&&this.getChangedId()===e.id;if("create"===e.action)return this.isCreated()&&!this.isDeleted()&&this.getChangedId()===e.id;if("update"===e.action)return this.getChangedId()===e.id&&this.attributes.revision_ids.includes(e.revision_id)}return!1}isCatalogUpdateError(){return"error"===this.getType()}isStorageExceededError(){return"StorageExceededError"===this.getSubtype()}getType(){return this.attributes.type}getSubtype(){return this.attributes.subtype}isCreated(){return null!=this.attributes.created}isDeleted(){return!0===this.attributes.deleted}getChangedId(){return this.attributes.id}getSourceId(){return this.attributes?.source?.id}}var Gl,Xl,Kl;let Yl=(Gl=A(500),Xl=class extends ce{get isSyncing(){return this.pendingRequestCount>0}constructor(e){super(e),(0,b.A)(this,"pendingRequestCount",Kl,this),U.on("requests-idle",(()=>{this.assetMap={}})),this.pendingRequestCount=0}setAssetFlagJP(e,t){this._initSyncUpdate();const r=this._makeAssetPayloadUpdateData(e);return r.payload.reviews={[T.A.account.id]:{flag:t,date:r.updated}},this.assetUpdateQueue.push(r),e.optimisticUpdatePayload(r.payload,r.revision_id),this._doSyncUpdate(),this.syncPromise}_removeExistingAssetUpdate(e,t){return this.assetUpdateQueue=this.assetUpdateQueue.filter((r=>!(r=>r.id===e.id&&r.payload?.[t])(r)))}setAssetRatingJP(e,t){this._initSyncUpdate();const r=this._makeAssetPayloadUpdateData(e);return r.payload.ratings={[T.A.account.id]:{rating:t,date:r.updated}},this.assetUpdateQueue.push(r),e.optimisticUpdatePayload(r.payload,r.revision_id),this._doSyncUpdate(),this.syncPromise}flagManyAssetsJP(e,t){for(const r of e)this.setAssetFlagJP(r,t);return this.syncPromise}deleteManyAssetIdsJP(e){for(const t of e)this.deleteAssetIdJP(t);return this.syncPromise}restoreManyAssetIdsJP(e){for(const t of e){this.restoreAssetIdJP(t);const e={id:t,action:"delete",type:"asset"};this._addExpectedSyncUpdate(e)}return this.syncPromise}deleteAssetIdJP(e){const t={id:e,revision_id:`${this.createUuid()}`,action:"delete",type:"asset"};return this._addAssetDeleteJP(t)}restoreAssetIdJP(e){const t={id:`${this.createUuid()}`,revision_id:`${this.createUuid()}`,type:"asset",action:"create",restore_from:{id:e}};return this._addAssetRestoreJP(t)}_makeAssetPayloadUpdateData(e,t,r){const i=(new Date).toISOString(),n={id:e.id,updated:i,revision_id:`${this.createUuid()}`,action:"update",type:"asset",if_match:e.latestRevision(),payload:{userUpdated:i}};return this.assetMap[e.id]=e,n}_initSyncUpdate(){null==this.assetUpdateQueue&&(this.assetUpdateQueue=[],this.assetMap={},this.syncPromise=new Promise(((e,t)=>{this.syncResolve=e,this.syncReject=t})))}_addAssetDeleteJP(e){return this._initSyncUpdate(),this.assetUpdateQueue.push(e),this._doSyncUpdate(),this.syncPromise}_addAssetRestoreJP(e){return this._initSyncUpdate(),this.assetUpdateQueue.push(e),this._doSyncUpdate(),this.syncPromise}_addExpectedSyncUpdate(e){return e._excludeFromRequest=!0,this.assetUpdateQueue.push(e),this.syncPromise}_refreshFailedAssets(e){for(const t of e)"asset"===t.type&&"update"===t.action&&this.get(t.id)?.refreshP()}_readSyncForSuccessJP(e,t,r){return new Promise(((i,n)=>{let s=t,o=!0,a=0;r.catch((()=>o=!1));var l=e=>{this.requestP("GET",e).then((e=>{if(!o)return n("sync requests failed while reading for success");const t=new er(e);for(const e of t.attributes.updates){var r=new Wl(e);s=s.filter((e=>{const t=r.matchesSyncChange(e);if(t){r.isStorageExceededError()&&(a+=1)}return!t}))}0===s.length?i():setTimeout((()=>l(t.linkHref("next"))),1e3)})).fail(((e,t,r)=>{n([e,t,r]),this._refreshFailedAssets(s),this.reportOzFailure("syncReadFailure",e,t,r)}))};l(e,0)}))}get(e){return this.assetMap[e]}_batchRequested(){this.successCheckAssetId=this.successCheckP=this.assetUpdateQueue=this.syncResolve=this.syncReject=this.syncPromise=null}_makeBatchSyncRequestJP(e){return new Promise(((t,r)=>this.requestP("POST",this.href,JSON.stringify(e)).done((e=>t(e))).fail((()=>r()))))}async _doSyncUpdate(){const{syncPromise:e}=this,t=this.syncResolve,r=this.syncReject,i=this.assetUpdateQueue,s=i.filter((e=>!e._excludeFromRequest)),{successCheckP:o}=this;this._batchRequested(),++this.pendingRequestCount;const a=[];let l=0;for(;l<s.length;)a.push(s.slice(l,l+100)),l+=100;let u=a.shift();try{const s=await this._makeBatchSyncRequestJP(u),o=new er(s).linkHref("/rels/future_updates");for(this._readSyncForSuccessJP(o,i,e).then((()=>{n.A.is_enabled("debug")&&console.log("sync complete"),t()})).catch((e=>{let[t]=e;n.A.is_enabled("debug")&&console.warn("sync failed"),r([t])})).finally((()=>{--this.pendingRequestCount}));a.length>0;)u=a.shift(),await this._makeBatchSyncRequestJP(u)}catch(e){for(const e of u)this.get(e.id)?.refreshP();r()}}},Kl=(0,i.A)(Xl.prototype,"pendingRequestCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,i.A)(Xl.prototype,"_doSyncUpdate",[Gl],Object.getOwnPropertyDescriptor(Xl.prototype,"_doSyncUpdate"),Xl.prototype),Xl);var Ql=r(595642);let Zl;const eu=(Zl=class extends Bl{static initClass(){this.prototype.model=go,this.prototype.modelName="CatalogAsset"}getTotalCountHref(){const e={};return null!=this.options.exclude&&(e.exclude=this.options.exclude),null!=this.options.subtype&&(e.subtype=this.options.subtype),`${this.href}/count?${Ql.param(e)}`}debugCreateEmptyAssetP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=Ql.Deferred();return this.pageP(0).then((()=>{const i=Bl.defaultPayloadForUpload({file:{size:1234,name:"DEBUG_LONGFILENAMEFOROVERFLOWTESTING.JPG"}},e,t);i.subtype="image",i.payload.captureDate=e.toISOString(),i.payload.importSource.importedBy=T.A.account.id,i.payload.importSource.originalWidth=i.payload.importSource.originalHeight=Math.floor(2264*Math.random())+1e3;const n=this.createUuid(),s=`${this.href}/${n}/revisions/${this.createUuid()}`;return this.requestP("PUT",s,JSON.stringify(i)).done((e=>r.resolve(s,n)))})).fail((()=>r.reject())),r.promise()}createNewEmptyAssetP(e,t,r){const i=Ql.Deferred();return null==r?i.reject():(this.pageP(0).then((()=>{const n=Bl.defaultPayloadForUpload(e,r);n.subtype=ur.ozSubtype(e.file),n.payload.captureDate="0000-00-00T00:00:00",n.payload.importSource.importedBy=t.id,null!=e.sha256&&(n.payload.importSource.sha256=e.sha256);const s=this.createUuid(),o=`${this.href}/${s}/revisions/${this.createUuid()}`;return this.requestP("PUT",o,JSON.stringify(n)).done((e=>i.resolve(o,s)))})).fail((()=>i.reject())),i.promise())}async debugCopyAssetAsProxyOnlyJP(e){if(e.hasExternalDevelopSettings())return Promise.reject("no support for external develop settings");const t=e.cloneAttributes().payload;t.importSource.willNotUploadMaster=!0;const r=W()({},{payload:t},Bl.defaultPayloadForNewAsset(new Date));r.subtype=e.attributes.subtype,r.captureDate=e.attributes.captureDate;const i=this.createUuid(),n=`${this.href}/${i}`,s=this.createUuid(),o=`${n}/revisions/${s}`;await this.requestJP("PUT",o,JSON.stringify(r));const a=`${n}/revisions/${s}/proxies/${this.createUuid()}`;return await this.requestJP("PUT",`${a}`,JSON.stringify({file_href:e.linkFullPath("/rels/proxy_type/2560")}),{headers:{"X-Generate-Renditions":"all","X-Async-Copy":!0}}),n}deleteManyP(e,t){let r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;for(;n<e.length;){var s=e.slice(n,n+=100);r=r?r.pipe((e=>()=>this._deleteManyP(e,t))(s)):this._deleteManyP(s,t)}return r.then((()=>{let t;const r=[];for(var n of e)t=this.index(n),null!=t&&r.push(t);r.sort(((e,t)=>e-t));let s=0;for(let e=0;e<r.length;e++)t=r[e],this._models.splice(t-s++,1);return null!=this.totalCount&&i&&(this.totalCount-=e.length),r.length>0&&this._reindex(),r}))}deleteManyJP(e,t){const r=this._deleteManyJP(e,t);return this._deleteMany(e),r}restoreManyJP(e,t){return this._restoreManyJP(e,t)}_deleteManyJP(e,t){return T.A.catalogContext.catalogUpdates.deleteManyAssetIdsJP(e)}_restoreManyJP(e,t){return T.A.catalogContext.catalogUpdates.restoreManyAssetIdsJP(e)}_deleteManyP(e,t){return this.requestP("DELETE",this.href,`asset_ids=${e.join("%3B")}`,{contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).fail(((e,r,i)=>{const n=null!=t?`${t}Failure`:"deleteAssetsFailure";return this.reportOzFailure(n,e,r,i)}))}},Zl.initClass(),Zl);let tu;const ru=(tu=class extends bo{static initClass(){this.prototype.model=Ll}constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{embed:"asset;spaces;user"})}},tu.initClass(),tu);var iu=r(595642);let nu;const su=(nu=class extends eu{static initClass(){this.prototype.model=Ll,this.prototype.modelName="CatalogAlbumAsset",this.prototype.debouncedRequests={}}isOrdered(){return 0===this.length||""!==this.at(0).getOrder()}addAssetsP(e){const t=e.map((e=>e.id));return this._addAssetIdsP(t)}addAssetIdsP(e){return this._addAssetIdsP(e)}addOrderedAssetIdsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doInsertIdsOrderingP(e,t,r)}hasOrdering(e){for(let t=0;t<e.length;t++)if(e[t].id!==this.at(t)?.id)return!1;return!0}addOrderedAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}reorderAssetIdsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.map((e=>this.get(e)));return this._doOrderingP(i,t,r)}reorderAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}addAndReorderAssetsP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._doOrderingP(e,t,r)}_doInsertIdsOrderingP(e,t,r){let i;if(i=!this.finished&&(r||!this.isOrdered()||t>=this.length||-1===t),i)return this.allP().then((()=>this._doInsertIdsOrderingP(e,t,r)));if(-1===t&&(t=this.length),this.isOrdered()&&!r){const r=this._getOrdersForInsert(e.length,t);return null!=r?this._applyReorderDataP(e,r,[],[]):this._doInsertIdsOrderingP(e,t,!0)}{const r=this._getOrders(e.length+this.length);if(null==r)return g.A.reportFailure("albumAssetLex64ReindexFailure"),iu.Deferred().reject();const i=r.splice(t,e.length);return this._applyReorderDataP(e,i,this.models,r)}}_doOrderingP(e,t,r){let i,n,s,o,a;if(s=!this.finished&&(r||!this.isOrdered()||t>=this.length),s)return this.allP().then((()=>this._doOrderingP(e,t,r)));-1===t&&(t=this.length);let l=0;for(i of e)null==this.index(i.id)&&l++;if(this.isOrdered()&&!r){if(a=this._getOrdersForInsert(e.length,t),null==a)return this._doOrderingP(e,t,!0);n=e}else{let r;if(a=this._getOrders(l+this.length),null==a)return g.A.reportFailure("albumAssetLex64ReindexFailure"),iu.Deferred().reject();for(n=[],o=0,r=this.length;o<=r;o++)if(o===t&&n.push(...e),o<this.length){var u=this.models[o];e.includes(u)||n.push(u)}}const c=[],d=[],h=[],p=[];for(o=0;o<n.length;o++)i=n[o],null!=this.index(i.id)?(h.push(i),p.push(a[o])):(c.push(i),d.push(a[o]));return this._applyReorderDataP(c,d,h,p)}_getOrdersForInsert(e,t){let r,i;if(!(t-1>=0&&t-1<this.length&&(i=this.at(t-1).getOrder(),""===i)||t<this.length&&(r=this.at(t).getOrder(),""===r)))return this._getOrders(e,i,r)}_getOrders(e,t,r){let i,n;if(p.doRandomFailure("getLex64Orders"))return;if(1===e)return n=null!=t&&null!=r?q.insertBetween(t,r,"middle"):null!=t?q.insertAfter(t,"middle"):null!=r?q.insertBefore(r,"middle"):q.MIDPOINT,null!=n?[n]:void 0;i=null!=t?t:null!=r?q.insertBefore(r,"middle"):q.MIDPOINT;const s=[];for(let t=1,o=e;t<=o;t++){if(n=null!=r?q.insertBetween(i,r,"low"):q.insertAfter(i,"low"),null==n)return;s.push(n),i=n}return s}_applyReorderDataP(e,t,r,i){let s,o,a;const l=iu.Deferred();n.A.is_enabled("debug_verbose")&&(console.log("applying reorder"),console.log(`current order: ${(()=>{const e=[];for(a of this.models)e.push(a.getOrder());return e})().join(" ")}`),console.log(`new asset orders: ${t.join(" ")}`),console.log(`existing asset orders: ${i.join(" ")}`));const u=(new Date).toISOString();let c=!0;const d=[];if(e.length>0){let r=[];const i=e[0];if("string"==typeof i||i instanceof String)r=e,c=!1,r.length<=5?(o=this._addAssetIdsP(r,t,u).then((()=>new ru(this.href,r).loadP())).then((e=>{const t=e.assets;for(var i in t)a=t[i],this._add(a);return l.notify("optimistically-applied"),e.error_count>0&&(g.A.reportFailure("assetInsertFailure"),n.A.is_enabled("debug")&&console.log(`${e.error_count} failures inserting ${r.length} assets`,e.errors)),this._sortByOrder()})),d.push(o)):(c=!1,d.push(this._addAssetIdsP(r,t,u)));else{for(s=0;s<e.length;s++)a=e[s],a.setOrder(t[s]),this._add(a),r.push(a.id);l.notify("optimistically-applied"),d.push(this._addAssetIdsP(r,t,u))}}if(r.length>0){for(s=0;s<r.length;s++)a=r[s],a.order=i[s];const e=r.map((e=>({id:e.id,payload:{userUpdated:u,order:e.order}})));r.length>10?d.push(this._debouncedBulkUpdateAttributesJP("updateOrder",e)):d.push(this._bulkUpdateAttributesP(e))}if(c?this._sortByOrder():this.markDirty(),n.A.is_enabled("debug")){const e={},t=null;let r=0,i=0;for(a of this.models)null==a.order?n.A.is_enabled("debug_verbose")&&console.error("Asset with null order (this is legal at the end)",a):a.order<t?(console.error("Asset out of order",a),++r):e.hasOwnProperty(a.order)&&(console.error("Duplicate asset order",a.order,a),++i),e[a.order]=!0;r>0&&g.A.report("albumAssetOutOfOrder",{count:r}),i>0&&g.A.report("albumAssetDuplicateOrder",{count:i})}return iu.when(...d).then(l.resolve).fail(l.reject),l.promise()}_sortByOrder(){return this.modelsBindable.sort(((e,t)=>{const r=e.getOrder(),i=t.getOrder();if(r!==i)return""===r?1:""===i?-1:r>i?1:-1;const n=e.payload().captureDate,s=t.payload().captureDate;if(n!==s)return n>s?1:-1;const o=e.attributes.created,a=t.attributes.created;return o>a?1:o<a?-1:0})),this._reindex()}deleteAssetsP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=e.map((e=>e.id));return this.deleteAssetIdsP(r,t)}deleteAssetIdsP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r of e){var i=this.index(r);null!=i&&this._delete(i)}return null!=t?t.then((()=>this.deleteManyP(e,"removeAssetsFromAlbum",!1))):this.deleteManyP(e,"removeAssetsFromAlbum",!1)}async _getOrdersForAppendJP(e){let t;if(null!=this.parentAlbum){try{t=await this.parentAlbum.getLastOrderedAssetP()}catch(e){}if(null!=t&&""!==t.getOrder())return this._getOrders(e.length,t.getOrder())}}async _addAssetIdsV2JP(e,t,r){let i;return null==t&&(t=await this._getOrdersForAppendJP(e)),null==r&&(r=(new Date).toISOString()),i=t?e.map(((e,r)=>[e,t[r]])):e.map((e=>[e])),await(async()=>{const e=[];for(let n=0,s=i.length-1,o=50,a=o>0;a?n<=s:n>=s;n+=o){var t=i.slice(n,n+50);e.push(await this._doAddAssetIdsV2JP(t,r))}return e})()}_addAssetIdsP(){const e=this._addAssetIdsV2JP(...arguments),t=iu.Deferred();return e.then((e=>t.resolve(...null!=e?e:[])),(e=>t.reject(...null!=e?e:[]))),t}_doAddAssetIdsP(e,t,r){let i;const n=iu.Deferred();return i=t&&t.length===e.length?e.map(((e,i)=>({id:e,payload:{userCreated:r,userUpdated:r,order:t[i]}}))):e.map((e=>({id:e,payload:{userCreated:r,userUpdated:r}}))),this.requestP("PUT",this.href,JSON.stringify({resources:i})).always(((e,t)=>t>=200&&t<300||null!=e.errors&&403===t?n.resolve(e,t):n.reject(e,t))),n.promise()}_doAddAssetIdsV2JP(e,t){return this.safeToJSPromise(this._doAddAssetIdsV2P(e,t))}_doAddAssetIdsV2P(e,t){const r=iu.Deferred(),i=e.map((e=>{const[r,i]=e,n={id:r,payload:{userCreated:t,userUpdated:t}};return null!=i&&(n.payload.order=i),n}));return this.requestP("PUT",this.href,JSON.stringify({resources:i})).always(((e,t)=>t>=200&&t<300||null!=e.errors&&403===t?r.resolve(e,t):r.reject(e,t))),r.promise()}getTotalCountHref(){if(!0===this.options.album_filters)return null;const e={};return null!=this.options.exclude&&(e.exclude=this.options.exclude),null!=this.options.subtype&&(e.subtype=this.options.subtype),`${this.href}/count?${iu.param(e)}`}_deleteManyP(e,t){return this.requestP("DELETE",this.href,`asset_ids=${e.join("%3B")}`,{contentType:"application/x-www-form-urlencoded;charset=UTF-8"}).fail(((e,r,i)=>{const n=null!=t?`${t}Failure`:"deleteAssetsFailure";return this.reportOzFailure(n,e,r,i)}))}_debouncedBulkUpdateAttributesJP(e,t){null==this.debouncedRequests[e]&&(this.debouncedRequests[e]={}),this.debouncedRequests[e].assetData=t;const r=()=>(null!=this.debouncedRequests[e].timeout&&clearTimeout(this.debouncedRequests[e].timeout),this.debouncedRequests[e].timeout=setTimeout((()=>this._bulkUpdateAttributesP(this.debouncedRequests[e].assetData).done((()=>(this.debouncedRequests[e].resolve(),this.debouncedRequests[e]=null))).fail((()=>this.debouncedRequests[e].reject()))),5e3));return null!=this.debouncedRequests[e].promise?r():this.debouncedRequests[e].promise=new Promise(((t,i)=>(this.debouncedRequests[e].resolve=t,this.debouncedRequests[e].reject=i,r()))),this.debouncedRequests[e].promise}_bulkUpdateAttributesP(e){const t={resources:e};return this.requestP("POST",this.href,JSON.stringify(t)).then((()=>(()=>{const e=[];for(var r of t.resources)null!=r.payload?.order?e.push(this.get(r.id)?.setOrder(r.payload.order)):e.push(void 0);return e})()))}getReviewedAssetsP(e,t){return null!=this.proofingAssetsDeferred?this.proofingAssetsDeferred:this.proofingAssetsDeferred=this.allP().then((r=>{const i=[];this.proofingClientIdList=new Set,this.proofingClientList=new Set,this.selectedAssetsForFiltering=new Set,this.commentedAssetsForFiltering=new Set,this.selectedPromises=[],this.commentedPromises=[];const n=r=>{const n=r.getLikesHref(e),s=new wn(n);return s.allP().then((()=>(()=>{const e=[];for(var n of s.modelsBindable.base){var o=n.author;this.proofingClientIdList.has(o.id)||this.proofingClientList.add(o),this.proofingClientIdList.add(o.id),o.id===t&&"all_clients"!==t?(this.selectedAssetsForFiltering.add(r),e.push(i.push(r))):e.push(void 0)}return e})()))},s=r=>{const n=r.getCommentsHref(e),s=new vn(n);return s.allP().then((()=>(()=>{const e=[];for(var n of s.modelsBindable.base){var o=n.author;this.proofingClientIdList.has(o.id)||this.proofingClientList.add(o),this.proofingClientIdList.add(o.id),o.id===t&&"all_clients"!==t?(this.commentedAssetsForFiltering.add(r),e.push(i.push(r))):e.push(void 0)}return e})()))};for(var o of r)if(t)o.getLikesCount(e)>0&&("all_clients"===t&&(this.selectedAssetsForFiltering.add(o),i.push(o)),this.selectedPromises.push(n(o))),o.getCommentCount(e)>0&&("all_clients"===t&&(this.commentedAssetsForFiltering.add(o),i.push(o)),this.commentedPromises.push(s(o)));else{var a=o.getLikesCount(e);o.isLikedByUser(e)&&(a-=1),this.reviewSelectedCount+=a;var l=o.getCommentCount(e);(a>0||l>0)&&i.push(o)}return this.selectAndCommentPromises=this.selectedPromises.concat(this.commentedPromises),iu.when(...this.selectAndCommentPromises).always((()=>this.proofingAssetsDeferred=null)).then((()=>i.sort(((t,r)=>r.getLikesCount(e)-t.getLikesCount(e)))))}))}async deleteRedundantLayoutSegmentsJP(){const e=new Set;let t=null;for(var r of this.models)r.isLayoutSegment()?(null!=t&&(t.layoutSegmentHasText?r.layoutSegmentHasText||e.add(r.id):e.add(t.id)),t=r):t=null;if(e.size>0)return await this.deleteAssetIdsP(Array.from(e))}async deleteAllLayoutSegmentsJP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];for(let i=0;i<this.models.length;i++){var r=this.models[i];e&&0===i||r.isLayoutSegment()&&t.push(r.id)}if(t.length>0)return await this.deleteAssetIdsP(t)}validateLayoutSegmentsJP(){return(()=>{const e=[];for(let r=0;r<this.models.length;r++){var t=this.models[r];t.isLayoutSegment()?e.push(t.migrateNameToTitleP()):e.push(void 0)}return e})()}},nu.initClass(),nu);class ou extends jl{setAttributes(e){return this.order=e.payload?.order,super.setAttributes(e)}markAssetsDirty(){super.markAssetsDirty()}getOrder(){return this.order||""}_getAssetsLink(){return`${this.linkHref("self")}/assets`}_refreshP(e){return e=e||`${this.href}?embed=spaces;asset`,super._refreshP(e)}}class au extends ou{_createDefaultAssetOptions(){return{embed:"spaces;asset",order_after:"-",subtype:"image;video",exclude:"incomplete"}}removeManyAssetsP(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.assets.deleteAssetsP(e,t);{let t;t=e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?e:e.map((e=>e.id));const r=this.getAttribute("payload").cover?.id,i=null!=r&&t.includes(r),n=this.assets.deleteManyP(e,"removeAssetsFromAlbum");return i?n.then((()=>this.deleteAlbumCoverP())):n}}isShared(){return!0}}au.prototype.assetListClass=su;const lu=au;var uu,cu,du,hu,pu=r(595642);let fu,gu=(uu=class extends mn{constructor(e){super(),this.albumsPerFetch=10,this.maxParallelFetches=5,(0,b.A)(this,"initialized",cu,this),(0,b.A)(this,"requestQueue",du,this),(0,b.A)(this,"allPProgress",hu,this),this.loadAlbumsCallback=e,this.albums=[],this.reset()}_addAssets(e){let t;for(t of e)this._add(t);this.totalCount=this.length=this._models.length}reset(){return null==this.albums?this:this._dirty?(super.reset(),this.initialized=!1,this):this}_setupFetchUrls(){this.fetchUrls=[];let e=0;for(;e<this.albums.length;){const t=Math.min(this.albums.length,e+this.albumsPerFetch),r=this.albums.slice(e,t).map((e=>e.id));this.fetchUrls.push(T.A.catalogContext.href+`/albums/assets?album_ids=${r.join("%2C")}`),e+=this.albumsPerFetch}}_setupNextFetchUrl(){this.fetchUrl=this.fetchUrls.shift()}_fetchP(){if(null==this.fetchUrl)return pu.Deferred().reject().promise();if(this.fetching)return this.fetching;return(this.fetching=this.requestP("GET",this.fetchUrl)).always((()=>{this.fetching=void 0})).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this._dirty=!0})).done((e=>{const t=this._addFetchedData(e);if(this.page++,0===t.length)this.fetchUrl=void 0;else{const t=e.links?.[this.nextPageLink||"next"]?.href,r=new ye(e.base);this.fetchUrl=r.fullHref(t),null==this.fetchUrl&&this._setupNextFetchUrl()}null==this.fetchUrl&&(this.finished=!0,this.totalCount=this._models.length)}))}fetchP(){if(!this.initialized)return this.loadAlbumsCallback().then((e=>(this.albums=e,this._setupFetchUrls(),this._setupNextFetchUrl(),this.initialized=!0,this.fetchP())));if(this.finished)return pu.Deferred().reject().promise();if(this.fetching)return this.fetching.promise();const e=this.fetching=this._fetchP();return e.fail((()=>{this._dirty=!0})).always((()=>{this.fetching=void 0})),e}_addFetchedData(e){const{albums:t}=e;for(let n=0;n<t.length;n++){var r=t[n];const s=this.albums?.find((e=>e.id===r.id));if(null!=s)for(const o of r.resources){var i;o.base=e.base,i=new this.model(o,this),s.assets._add(i),n<t.length-1&&(s.assets.finished=!0),this._add(i)}}return t}_fetchAndAddAllP(e){if(null==e)return pu.Deferred().reject().promise();return this.requestWithRetryP("GET",e,void 0,void 0,1).fail(((e,t,r)=>{null!=this.modelName?this.reportOzFailure(`fetchP${this.modelName}Failure`,e,t,r):this.reportOzFailure("fetchPFailure",e,t,r),this._dirty=!0})).then((e=>{const t=e.albums.reduce(((e,t)=>e+t.resources.length),0);this.allPProgress+=e.albums.length/this.albums.length*100,n.A.is_enabled("debug_best_photos")&&console.log(`Adding ${t} assets from ${e.albums.length} albums, ~${this.allPProgress.toFixed(0)}% done`),this._addFetchedData(e);const r=e.links?.next?.href,i=new ye(e.base).fullHref(r);return!i||this._fetchAndAddAllP(i)}))}_parallelAllP(){if(!this.initialized)return this.loadAlbumsCallback().then((e=>(this.albums=e,this._setupFetchUrls(),this.initialized=!0,this._parallelAllP())));if(this.finished)return pu.Deferred().reject().promise();this.allPProgress=0,this.requestQueue=new ii(this.maxParallelFetches);const e=e=>()=>this._fetchAndAddAllP(e);for(;this.fetchUrls.length>0;){const t=this.fetchUrls.shift();this.requestQueue.enqueuePromise(e(t))}const t=this.requestQueue.promise();return t.fail((()=>{this._dirty=!0})).done((()=>{this.finished=!0})).always((()=>{this.requestQueue=null})),t}async allJP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return await this.allP(e)}allP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.finished?pu.Deferred().resolve(this.models.slice()).promise():this._parallelAllP().then((()=>this.allP(e))):super.allP()}totalCountP(){let e;const t=pu.Deferred(),r=[];for(e of this.albums)r.push(e.assets.totalCountP());return pu.when(...r).then((()=>{for(e of(this.totalCount=0,this.albums))this.totalCount+=e.assets.totalCount;t.resolve(this.totalCount)})).fail((()=>{t.reject()})),t.promise()}get hasLoadingProgress(){return null!=this.requestQueue}createP(e,t){n.A.is_enabled("debug")&&console.log("createP is unimplemented in this paged list")}_addCreatedP(e){n.A.is_enabled("debug")&&console.log("_addCreatedP is unimplemented in this paged list")}deleteP(e){n.A.is_enabled("debug")&&console.log("deleteP is unimplemented in this paged list")}},cu=(0,i.A)(uu.prototype,"initialized",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),du=(0,i.A)(uu.prototype,"requestQueue",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hu=(0,i.A)(uu.prototype,"allPProgress",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),uu);gu.prototype.model=Ll,gu.prototype.modelName="CatalogAlbumAsset";const mu=(fu=class extends $l{static initClass(){this.prototype.model=ou,this.prototype.modelName="TopicAlbum"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==t&&(t={subtype:"topic",order_after:"-"}),super(e,t),this.allAssets=new gu((()=>this.allP()))}setParentAlbum(e){return this.parentAlbum=e,this}get assets(){return this.allAssets}addAlbum(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.get(e.id)&&this._delete(this.index(e.id)),!t)for(var r of(t=0,this.models)){if(r.getOrder()>e.getOrder())break;++t}return this._models.splice(t,0,e),this._reindex(t),this.length=this.models.length,"cluster"===this.parentAlbum?.getSubtype()?this.allAssets?.markDirty():this.allAssets?.reinitialize(this.models)}getAssetPosition(e){for(let n=0,s=this.length;n<s;n++)for(var t=this.at(n),r=0,i=t.assets.length;r<i;r++)if(t.assets.at(r).id===e)return[n,r]}getTopicAlbumContaining(e){const[t,r]=this.getAssetPosition(e);if(t>=0)return this.at(t)}getAssetAt(e,t){return this.at(e)?.assets.at(t)}getAssetPositionBefore(e){let[t,r]=this.getAssetPosition(e);return--r,r<0&&--t,t<0?null:[t,r]}getAssetBefore(e){const t=this.getAssetPositionBefore(e);return t?this.getAssetAt(...t):null}getAssetPositionAfter(e){let[t,r]=this.getAssetPosition(e);return++r,r>=this.at(t).length&&++t,t>=this.length?null:[t,r]}getAssetAfter(e){const t=this.getAssetPositionAfter(e);return t?this.getAssetAt(...t):null}markAssetsDirty(){for(var e of this.models)e.assets.markDirty();return this.allAssets?.markDirty()}resetAssets(){for(var e of this.models)e.assets.reset(e.assets.options);return this.allAssets?.reset()}areAssetsDirty(){let e;return null!=(e=this.allAssets?.isDirty())&&e}areAllAssetsLoaded(){return null!=this.allAssets?.finished&&this.allAssets?.finished}get totalCount(){return this.allAssets?.finished?this.allAssets.length:0}set totalCount(e){}loadAssetsP(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.markAssetsDirty(),this.resetAssets()),this.allAssets.allP(e)}},fu.initClass(),fu);let yu;const vu=(yu=class extends mu{static initClass(){this.prototype.model=lu,this.prototype.modelName="CatalogTopicAlbum"}getCreateHref(){return`${T.A.catalogContext.href}/albums/${this.createUuid()}`}},yu.initClass(),yu),bu="viewer",_u="contributor",Au="editor";var wu,Pu;let Su=(wu=class extends er{constructor(){super(...arguments),(0,b.A)(this,"user",Pu,this)}setAttributes(e){return super.setAttributes(e),null!=e.user&&(this.user=new Or(e.user)),this}_refreshP(e){return e=e||`${this.href}?embed=user`,super._refreshP(e)}getFullName(){return this.attributes.full_name}async _setAbandonedJP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{const e={payload:{status:"abandoned"}};e.payload.userUpdated=(new Date).toISOString(),await this.requestJP("POST",this.href,JSON.stringify(e)),g.A.report("setStatusAbandoned")}catch(t){const[r,i,s]=t,o=2;n.A.is_enabled("debug")&&H._forceFailNextRequest&&(e=o);const a=e<o&&(0===i||i>=500);a?g.A.report("setStatusAbandonedRetry"):this.reportOzFailure("setStatusAbandonedFailure",r,i,s);try{if(a)return this._setAbandonedJP(e+1)}catch(e){}}}async setAbandonedJP(){return await this._setAbandonedJP()}isContributorRole(){return"accepted"===this.attributes.payload.status&&this.attributes.payload.role===_u}isEditorRole(){return"accepted"===this.attributes.payload.status&&this.attributes.payload.role===Au}canContribute(){return this.isContributorRole()||this.isEditorRole()}canEdit(){return this.isEditorRole()}get role(){return this.attributes.payload.role}},Pu=(0,i.A)(wu.prototype,"user",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wu);class xu extends Su{get status(){return this.attributes.payload.status}get userCreated(){return new Date(this.attributes.payload.userCreated)}async setRoleViewerJP(){return await this.updateAttributesP("setUserRoleViewer",{payload:{role:bu}})}async setRoleContributorJP(){return await this.updateAttributesP("setUserRoleContributor",{payload:{role:_u}})}async setRoleEditorJP(){return await this.updateAttributesP("setUserRoleEditor",{payload:{role:Au}})}async setStatusRemovedJP(){return await this.updateAttributesP("setUserStatusRemoved",{payload:{status:"removed"}})}}var Cu,Ou,ku;let Tu,Eu=(Cu=class extends er{constructor(){super(...arguments),(0,b.A)(this,"user",Ou,this),(0,b.A)(this,"spaceUser",ku,this)}setAttributes(e){return super.setAttributes(e),null!=e.user&&(this.user=new Or(e.user)),null!=e.space_user&&(this.spaceUser=new xu(e.space_user)),this}_refreshP(e){return e=e||`${this.href}?embed=user`,super._refreshP(e)}get status(){return this.attributes.payload.status}get role(){if(null!=this.attributes.payload.role)return this.attributes.payload.role}async acceptJP(){const e=await this.safeToJSPromise(this.updateAttributesP("inviteRequestAccept",{payload:{status:"approved",role:"viewer"}}));let t=1e3;for(;t<64e3&&(await this.refreshP(),null==this.attributes.space_user);)t*=2;return e}async declineJP(){return await this.updateAttributesP("inviteRequestDecline",{payload:{status:"rejected"}})}async setRoleViewerJP(){return await this.updateAttributesP("inviteRoleViewer",{payload:{role:bu}})}async setRoleContributorJP(){return await this.updateAttributesP("inviteRoleContributor",{payload:{role:_u}})}async setRoleEditorJP(){return await this.updateAttributesP("inviteRoleEditor",{payload:{role:Au}})}isSingleUse(){return"single_use"===this.attributes.subtype}isRequest(){return"request"===this.attributes.subtype}getEmail(){return this.attributes.payload?.email}},Ou=(0,i.A)(Cu.prototype,"user",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ku=(0,i.A)(Cu.prototype,"spaceUser",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cu);const Iu=(Tu=class extends mn{static initClass(){this.prototype.model=Eu,this.prototype.modelName="CatalogSpaceInvite"}createP(e){const t={subtype:"single_use",payload:{status:"open",role:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewer",email:e}};return super.createP(this.getCreateHref(),t)}async createJP(e,t){return await this.createP(e,t)}getCreateHref(){return`${new URL(this.href).pathname}/${this.createUuid()}`}_deleteP(e){const t=this.index(e),{href:r}=this.at(t);return this.requestP("DELETE",r).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)))}async deleteAllJP(){if(!(this.models.length>0))return;const e=[],t=[];return this.models.forEach((r=>(t.push(r.id),e.push(this._deleteP(r.id))))),await Promise.all(e),(()=>{const e=[];for(var r of t){var i=this.index(r);null!=i?e.push(this._delete(i)):e.push(void 0)}return e})()}},Tu.initClass(),Tu);let Du;const Ru=(Du=class extends mn{static initClass(){this.prototype.model=Or,this.prototype.modelName="User"}},Du.initClass(),Du);let ju;n.A.is_enabled("beholder")?(ju=class extends Ru{async createObserverUser(){const e=new URL(this.href),t=`${e.origin}${e.pathname}/${this.createUuid()}`;return await this.createJP(t,{payload:{role:"observer",status:"accepted"}})}},ju.prototype.model=Su,ju.prototype.modelName="SpaceUser"):(ju=class extends Ru{static initClass(){this.prototype.model=Su,this.prototype.modelName="SpaceUser"}},ju.initClass());const Fu=ju;let Nu;const Lu=(Nu=class extends Fu{static initClass(){this.prototype.model=xu,this.prototype.modelName="CatalogSpaceUser"}_deleteP(e){const t=this.index(e),{href:r}=this.at(t);return this.requestP("DELETE",r).fail(((e,t,r)=>null!=this.modelName?this.reportOzFailure(`delete${this.modelName}Failure`,e,t,r):this.reportOzFailure("deleteOzResourceFailure",e,t,r)))}async deleteAllJP(){if(!(this.models.length>0))return;const e=[],t=[];return this.models.forEach((r=>(t.push(r.id),e.push(this._deleteP(r.id))))),await Promise.all(e),(()=>{const e=[];for(var r of t){var i=this.index(r);null!=i?e.push(this._delete(i)):e.push(void 0)}return e})()}},Nu.initClass(),Nu);var Mu,Uu,$u=r(595642);let zu=(Mu=class e extends tn{constructor(e){super(),(0,b.A)(this,"_models",Uu,this),this.initializedWithAssetsP=$u.Deferred(),this.pageSize=100,this.reset(),this.addAssets(e)}setAssets(e){return this._dirty=!0,this.reset(),this.addAssets(e)}addAssets(e){if(null!=e){for(const t of e)this._add(t);return this.totalCount=e.length,this.initializedWithAssetsP.resolve()}}fetchP(){return this.finished||console.log("Finished is not true in LocalPagedlist"),$u.Deferred().reject().promise()}async allJP(){return await this.allP()}allP(){return $u.Deferred().resolve(this.models.slice()).promise()}indexP(t){return this.initializedWithAssetsP.then((()=>e.prototype.__proto__.indexP.call(this,t)))}get assets(){return this}},Uu=(0,i.A)(Mu.prototype,"_models",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mu);var Hu,Ju,qu,Vu=r(595642);const Bu=e=>e.asset.base=e.base;let Wu,Gu=(0,sn.A)(lo)((Ju=class extends oo{constructor(e){Bu(e),super(e.asset),(0,b.A)(this,"hackSpaceContext",qu,this),this.albumAssetRelativeUrl=e.links.self.href,this.order=e.payload?.order}getSpaceOwnerId(e){const t=this.hackSpaceContext?.owner?.id;return null==t&&console.error(`${e} ownerAccountId not retrievable`),t}refreshP(){const e=this._linkBase.fullHref(this.albumAssetRelativeUrl)+"?"+Vu.param({embed:"asset;user"});return this.requestP("GET",e).done((e=>(this.order=e.payload?.order,Bu(e),this.setAttributes(e.asset))))}setHackSpaceContext(e){this.hackSpaceContext=e}setCaptionP(e){if(!n.A.is_enabled("training_day"))return Vu.Deferred().resolve().promise();if(this.getCaption()===e||null==e){const t=Vu.Deferred();return null!=e?t.resolve():t.reject(),t.promise()}return this._createChildRevisionP("setCaption",{payload:{xmp:{dc:{description:e}}}})}setTitleP(e){if(!n.A.is_enabled("training_day"))return Vu.Deferred().resolve().promise();if(this.getTitle()===e||null==e){const t=Vu.Deferred();return null!=e?t.resolve():t.reject(),t.promise()}{const t=null!=this.attributes.payload?.xmp?.dc?this.attributes.payload?.xmp?.dc:{},r=Vu.extend(!0,{},t);return r.title=e,this._createChildRevisionP("setTitle",{payload:{xmp:{dc:r}}})}}async setAltTextJP(e){return n.A.is_enabled("training_day")?this.getAltText()===e?Promise.resolve():null==e?Promise.reject():void await this.createChildRevisionJP("setAltText",(()=>({payload:{xmp:{iptcCore:{AltTextAccessibility:""===e?null:e}}}}))):Promise.resolve()}async setExtendedDescriptionJP(e){return n.A.is_enabled("training_day")?this.getExtendedDescription()===e?Promise.resolve():null==e?Promise.reject():void await this.createChildRevisionJP("setExtendedDescription",(()=>({payload:{xmp:{iptcCore:{ExtDescrAccessibility:e}}}}))):Promise.resolve()}setFlagP(e){if(!n.A.is_enabled("training_day"))return Vu.Deferred().resolve().promise();if(e===this.getFlag())return Vu.Deferred.resolve().promise();const t=this.getSpaceOwnerId("SpaceAsset.setFlagP"),r={flag:e,date:(new Date).toISOString()},i={};return i[t]=r,this._createChildRevisionP("setFlag",{payload:{reviews:i}})}async setFlagJP(e){return await this.safeToJSPromise(this.setFlagP(e))}setRatingP(e){if(!n.A.is_enabled("training_day"))return Vu.Deferred().resolve().promise();if(e===this.getRating())return Vu.Deferred.resolve().promise();const t=this.getSpaceOwnerId("SpaceAsset.setRatingP"),r={rating:e,date:(new Date).toISOString()},i={};return i[t]=r,this._createChildRevisionP("setRating",{payload:{ratings:i}})}async setRatingJP(e){return await this.safeToJSPromise(this.setRatingP(e))}addKeywordP(e){if(!n.A.is_enabled("training_day"))return Vu.Deferred().resolve().promise();const t=(0,f.zt)("$$$/js/keyword_entry_delimiter=,"),r={payload:{xmp:{dc:{subject:{}}}}},i=e.split(t);let s=0;for(e of i){var o=e.trim();o.length>0&&(s++,r.payload.xmp.dc.subject[o]=!0)}return s>0?this._createChildRevisionP("addKeyword",r):Vu.Deferred().resolve().promise()}removeKeywordP(e){if(!n.A.is_enabled("training_day"))return Vu.Deferred().resolve().promise();const t=this.getKeywordsArray();return 1===t.length&&t.indexOf(e)>=0?1===Object.keys(this.xmp().dc).length?this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:null}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:null}}}}):this._createChildRevisionP("removeKeyword",{payload:{xmp:{dc:{subject:{[e]:null}}}}})}getRating(){const e=this.getSpaceOwnerId("SpaceAsset.getRating");return null==e?(console.error("SpaceAsset.getRating ownerAccountId not retrievable"),0):super.getRating(e)}getFlag(){const e=this.getSpaceOwnerId("SpaceAsset.getFlag");return super.getFlag(e)}getOrder(){return this.order||""}getReportAbuseHref(){return`/abuse_reports?asset-href=${this.linkFullPath("self")}`}getLikesCount(){return n.A.is_enabled("lots_of_likes")?7*this.attributes.links["/rels/favorites"]?.count:this.attributes.links["/rels/favorites"]?.count}getLikesHref(){return this.linkHref("/rels/favorites")}_getLikeUrl(){return this.linkHref("/rels/this_user_favorite")}isLiked(){return this.getLikesCount()>0}isLikedByUser(){return this.isLiked()&&null!=this._getLikeUrl()}likeP(){return this.requestP("PUT",`${this.getLikesHref()}/${this.createUuid()}`,"{}")}unLikeP(){const e=this._getLikeUrl();if(null!=e)return this.requestP("DELETE",e,"{}")}getCommentCount(){return this.attributes.links["/rels/comments"]?.count}getCommentsHref(){return this.linkHref("/rels/comments")}hasComments(){return this.getCommentCount()>0}},qu=(0,i.A)(Ju.prototype,"hackSpaceContext",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hu=Ju))||Hu;Gu.pollAssetUntilAvailableJP=function(e){let t=!1,r=!1;return oo.pollAssetUntilCheckJP(oo,e,(e=>!!e.hasAnyRendition()||(t?r:(t=!0,setTimeout((()=>r=!0),5e3),!1))))};const Xu=Wu=function(){var e,t;return e=class extends Bl{constructor(){super(...arguments),(0,b.A)(this,"hackSpaceContext",t,this)}static initClass(){this.prototype.model=Gu,this.prototype.modelName="SpaceAsset"}setHackSpaceContext(e){if(this.hackSpaceContext!==e)return this.hackSpaceContext=e,this.models.map((t=>t.setHackSpaceContext(e)))}_add(){return(arguments.length<=0?void 0:arguments[0]).setHackSpaceContext(this.hackSpaceContext),super._add(...arguments)}getReviewedAssetLikeCountP(e){return this.allP().then((t=>{for(var r of(this.reviewSelectedCount=0,t))r.isLikedByUser(e)&&(this.reviewSelectedCount+=1);return this.reviewSelectedCount}))}},t=(0,i.A)(e.prototype,"hackSpaceContext",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wu=e,Wu.initClass(),Wu}();class Ku extends jl{_createDefaultAssetOptions(){let e;return e=this.hasDisplaySettings()?"image;video;layout_segment":"image;video",{embed:"asset",order_after:"-",exclude:"incomplete",subtype:e}}set assets(e){this._assets=e}get assets(){return this.getAssets(this._defaultAssetOptions)}getAssets(){const e=super.getAssets(...arguments);return e.setHackSpaceContext(this.getAnySpaceHack()),e}_getAssetsLink(){return`${this.linkHref("self")}/assets`}isShared(){return!0}getGalleryLink(){return this.attributes.payload?.web_space_href}getName(e){let t=this.attributes.payload?.name||"";return null!=e&&t.length>e&&(t=t.substr(0,e)),t}getReportAbuseHref(){return`/abuse_reports?album-href=${this.linkFullPath("self")}`}getChildAlbumsLink(){return this.linkHref("/rels/child_albums")}getSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e),r=t.getSubType();if("gallery"!==r&&"review"!==r)return t}}setSpace(e){var t;return null!==(t=this.spaces)&&void 0!==t||(this.spaces=new zu([])),this.spaces.addAssets([e]),this.spaces}getReviewSpace(){return null}getAnySpaceHack(){return null!=this.spaces?this.spaces.at(0):null}}Ku.prototype.coverClass=go,Ku.prototype.assetListClass=Xu;const Yu=Ku;var Qu=r(595642);let Zu;const ec=(Zu=class extends mn{static initClass(){this.prototype.model=Yu,this.prototype.modelName="SpaceAlbum"}createManyP(e,t){const r=`${e.href}/resources`,i={resources:t};return this.requestP("PUT",r,JSON.stringify(i)).done((()=>this.markDirty())).fail(((e,t,r)=>this.reportOzFailure("addSpaceAlbumResourcesFailure",e,t,r)))}createP(e,t){const r=`${e.href}/resources`,i=`/v2/spaces/${e.id}/albums/${t.id}`,n={resources:[t]};return super.createP(r,n,i)}deleteManyP(e,t){const r={resource_ids:t.join(";")},i=`${e}/resources?`+Qu.param(r);return this.requestP("DELETE",i).done((()=>(()=>{const e=[];for(var r of t){var i=this.index(r);null!=i?e.push(this._delete(i)):e.push(void 0)}return e})())).fail(((e,t,r)=>this.reportOzFailure("deleteSpaceAlbumResourcesFailure",e,t,r)))}},Zu.initClass(),Zu);var tc,rc,ic,nc,sc,oc,ac,lc,uc=r(595642);let cc=(tc=class extends er{constructor(e,t){var r;super(e),(0,b.A)(this,"albums",rc,this),(0,b.A)(this,"userAndOwnerRefreshPromise",ic,this),(0,b.A)(this,"owner",nc,this),(0,b.A)(this,"user",sc,this),(0,b.A)(this,"users",oc,this),(0,b.A)(this,"inMaintenance",ac,this),(0,b.A)(this,"inInvalid",lc,this),null!==(r=this.users)&&void 0!==r||(this.users=new Fu(`${this.linkHref("self")}/users?embed=user`))}get author(){return this.attributes.payload.profile_info?.author}get description(){return this.attributes.payload.profile_info?.description}get firstAlbum(){return this.albums?.at(0)}get ownerCatalogId(){const e=this.linkFullPath("/rels/catalog");return e?.split("catalogs/")[1]}get userUpdated(){return this.attributes.payload.userUpdated}setAttributes(e){var t;let r;if(super.setAttributes(e),e.resources?.length>0){let t;r=[];for(const i of e.resources)"album"===i.type&&(i.base=e.base,t=new Yu(i),t.setSpace(this),r.push(t));if(null!=this.albums)for(let e=0;e<r.length;e++){t=r[e];const i=this.albums.at(e);if(i.id!==t.id||i.attributes.updated!==t.attributes.updated){r.length>0&&(this.albums=new zu(r));break}}else r.length>0&&(this.albums=new zu(r))}return null!==(t=this.albums)&&void 0!==t||(this.albums=new ec(this.linkHref("/rels/space_resources"))),null!=e.space_user&&(e.space_user.base=e.base,this.user=new Su(e.space_user)),null!=e.owner&&(e.owner.base=e.base,this.owner=new Or(e.owner)),this}get pollingForShortWebHref(){}webHref(){return this.linkHref("/rels/web_space")}hasShortWebHref(){return this.webHref()?.length<30}hasCatalog(){return null!=this.attributes.links?.["/rels/catalog"]}isOwner(){return this.hasCatalog()}hasLegacyFilters(){return!0!==this.attributes.payload.presentationFilters}canUpload(){if(this.owner?.attributes.entitlementExpired)return!1;const e=this.isOwner()||this.user?.canContribute(),t=this.openUploadEnabled()&&!this.isPrivate();return e||t}getSubType(){return this.attributes.subtype}getSharesHref(){return`${window.location.origin}/shares/${this.id}`}_refreshP(e){return e="shared"===this.getSubType()?e||`${this.href}?embed=owner%3Bspace_user%3Bfirst_resource`:e||`${this.href}?embed=owner%3Bspace_user`,super._refreshP(e).then((()=>{if(this.inMaintenance)return this.inMaintenance=!1})).fail(((e,t,r)=>{503===t&&(this.inMaintenance=!0),404===t&&(this.isInvalid=!0)}))}async addObserverUser(){try{this.user=await this.users.createObserverUser()}catch{await this.refreshJP()}}async ensureUserAndOwnerJP(){if(null!=T.A.account)try{null!=this.userAndOwnerRefreshPromise?await this.userAndOwnerRefreshPromise:this.isInvalid||this.inMaintenance||null!=this.user&&null!=this.owner||(this.userAndOwnerRefreshPromise=this.refreshJP(),await this.userAndOwnerRefreshPromise)}catch{}}getAvatarHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"large";const{host:t}=Jl,{ownerId:r}=window.SharesConfig;if(!t||!r)return;const i=e=>e<10?`0${e}`:`${e}`,n=new Date;return`${t}/v2/avatars/${r}/${`${n.getFullYear()}${i(n.getMonth()+1)}${i(n.getDate())}000000`}/${e}`}downloadEnabled(){return!0===this.attributes.payload.download||!0===this.user?.canEdit()}openUploadEnabled(){const e=this.attributes.payload.open_upload_until;if(null==e)return!1;try{if(new Date(e)>new Date)return!0}catch{}return!1}isPrivate(){return!0===this.attributes.payload.private}isMetadataVisible(){return!0===this.attributes.payload.metadata||!0===this.user?.canEdit()}isLocationVisible(){return!0===this.attributes.payload.location||!0===this.user?.canEdit()}isReview(){return"review"===this.attributes?.subtype&&!this.isPrivate()}getReviewCount(){return null!=this.attributes.payload?.count&&this.attributes.payload?.count>0?this.attributes.payload.count:null}hasReviewCount(){return this.getReviewCount>0}isGallerySpace(){return"gallery"===this.attributes?.subtype}_isCommentsFavoritesDisabled(e){return!(!this.isGallerySpace()||null!=e)||e}isCommentsDisabled(){return this._isCommentsFavoritesDisabled(this.attributes.payload.comments_disabled)}isFavoritesDisabled(){return this._isCommentsFavoritesDisabled(this.attributes.payload.favorites_disabled)}commentsAndLikesEnabled(){return!(!0===this.attributes.payload.comments_disabled||!0===this.attributes.payload.favorites_disabled)}async _ensureUploadPermissionsJP(){return await this.ensureUserAndOwnerJP(),this.canUpload()?null==this.owner?Promise.reject("The owner info must be loaded"):"shared"!==this.getSubType()?Promise.reject("Only shared subtype spaces can be contributed to."):null==this.firstAlbum?Promise.reject("This space has no space album to contribute to."):void 0:Promise.reject("You must have contribute access to the space")}async copyAssetToSpaceJP(e,t){let r,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];await this._ensureUploadPermissionsJP(),e.hasExternalDevelopSettings()&&(r=await e.getDevelopSettingsJP());const o=e.cloneAttributes().payload;if(delete o.copy,delete o.importSource?.localAssetId,delete o.importSource?.lrcatStoreProviderId,delete o.importSource?.lrcatImageId,delete o.importSource?.status,0===Object.keys(null!=o.importSource?o.importSource:{}).length&&delete o.importSource,delete o.autoTags,delete o.aesthetics,delete o.bestFrame,delete o.blur,delete o.cropHints,delete o.eye_quality,delete o.quality,delete o.changedAtTime,delete o.changedOnDevice,delete o.stacks,delete o.ratings,s.includes("ratings")||0!==e.getRating()&&(o.ratings={},o.ratings[this.owner.id]={rating:e.getRating(),date:(new Date).toISOString()}),delete o.reviews,s.includes("reviews")||"unflagged"!==e.getFlag()&&(o.reviews={},o.reviews[this.owner.id]={flag:e.getFlag(),date:(new Date).toISOString()}),s.includes("location")&&(delete o.location,null!=o.xmp?.iptcCore&&(delete o.xmp.iptcCore.CountryCode,delete o.xmp.iptcCore.Location,0===Object.keys(o.xmp.iptcCore).length&&delete o.xmp.iptcCore),null!=o.xmp?.photoshop&&(delete o.xmp.photoshop.City,delete o.xmp.photoshop.Country,delete o.xmp.photoshop.State,0===Object.keys(o.xmp.photoshop).length&&delete o.xmp.photoshop)),s.includes("keywords")&&null!=o.xmp?.dc&&(delete o.xmp.dc.subject,0===Object.keys(o.xmp.dc).length&&delete o.xmp.dc),e.developHasPixelMasks()){const t=e.getAux();o.aux=e.getDevelopPixelMaskIds().reduce(((e,r)=>(e[r]=Object.assign({},t[r]),e)),{})}const a=W()({},{payload:o},Bl.defaultPayloadForNewAsset(t));a.subtype=e.attributes.subtype,a.captureDate=e.attributes.captureDate;const l=this.createUuid(),u=`/v2/spaces/${this.id}/assets/${l}`,c=this.createUuid(),d=`${`${this.firstAlbum.href}/assets/${l}`}/revisions/${c}`;if(await this.requestJP("PUT",d,JSON.stringify(a)),null!=r){n.A.is_enabled("debug")&&console.log("Copying asset with external develop settings..."),e.developHasPixelMasks()&&await e.copyAuxToSpaceAssetJP(this.id,l,c);const t=`${u}/revisions/${c}/xmp/develop`;await this.requestJP("PUT",t,r,{contentType:"application/rdf+xml"})}if(e.hasMaster()){const t=`${u}/revisions/${c}/master`;i={"X-Generate-Renditions":"all","X-Async-Copy":!0},i["X-Generate-Proxies"]="all",s.length>0&&(i["X-Redact-Meta"]=s.join(",")),await this.requestJP("PUT",`${t}`,JSON.stringify({file_href:e.linkFullPath("/rels/master")}),{headers:i})}else if(e.isProxyOnly()){const t=`${u}/revisions/${c}/proxies/${this.createUuid()}`;await this.requestJP("PUT",`${t}`,JSON.stringify({file_href:e.linkFullPath("/rels/proxy_type/2560")}),{headers:{"X-Generate-Renditions":"all","X-Async-Copy":!0}})}await Gu.pollAssetUntilAvailableJP(u),this.firstAlbum.markAssetsDirty(!0)}createNewEmptyAssetP(e,t,r){const i=uc.Deferred();return this._ensureUploadPermissionsJP().then((()=>{if(null==r)return i.reject("You must provide a batch time for uploads.");const n=Bl.defaultPayloadForUpload(e,r);n.subtype=ur.ozSubtype(e.file),n.payload.captureDate="0000-00-00T00:00:00",n.payload.importSource.importedBy=t.id,null!=e.sha256&&(n.payload.importSource.sha256=e.sha256);const s=this.createUuid(),o=`/v2/spaces/${this.id}/assets/${s}`,a=this.createUuid(),l=`${`${this.firstAlbum.href}/assets/${s}`}/revisions/${a}`,u=`${o}/revisions/${a}`;return this.requestP("PUT",l,JSON.stringify(n)).then((()=>{i.resolve(u,s)})).fail(((e,t,r)=>{i.reject(e,t,r)}))}),(e=>{i.reject(e)})),i.promise()}getSlideshowEmbedHref(e){return null==e?`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%23191919&color=%23cccdcd`:"Light"===e.getPresentationStyleId()?`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%23FBFBFB&color=%23707070`:`${window.location.origin}/embed/shares/${this.id}/slideshow?background_color=%232D2D2D&color=%23999999`}getSlideshowEmbedCode(e){return`<div class='lr_embed' style='position: relative; padding-bottom: 50%; height: 0; overflow: hidden;'><iframe id='iframe' src='${this.getSlideshowEmbedHref(e)||""}' frameborder='0'style='width:100%; height:100%; position: absolute; top:0; left:0;' ></iframe></div>`}},rc=(0,i.A)(tc.prototype,"albums",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ic=(0,i.A)(tc.prototype,"userAndOwnerRefreshPromise",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nc=(0,i.A)(tc.prototype,"owner",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc=(0,i.A)(tc.prototype,"user",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc=(0,i.A)(tc.prototype,"users",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ac=(0,i.A)(tc.prototype,"inMaintenance",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lc=(0,i.A)(tc.prototype,"inInvalid",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tc);var dc,hc,pc,fc,gc,mc;let yc=(dc=ct.byVal,hc=class extends Gt{constructor(){super(...arguments),(0,b.A)(this,"private",pc,this)}},pc=(0,i.A)(hc.prototype,"private",[dc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hc),vc=(fc=ct.byRef(yc),gc=class extends Qt{constructor(){super(...arguments),(0,b.A)(this,"payload",mc,this)}},mc=(0,i.A)(gc.prototype,"payload",[fc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gc);var bc,_c,Ac,wc=r(595642);let Pc=(Ac=(0,Zr.A)("pollForShortWebHrefPromise"),bc=class extends cc{constructor(){super(...arguments),(0,b.A)(this,"invites",_c,this),Object.defineProperty(this,Ac,{writable:!0,value:null})}setAttributes(e){var t,r;super.setAttributes(e),null!==(t=this.invites)&&void 0!==t||(this.invites=new Iu(`${this.linkHref("self")}/invites?embed=user`)),null!==(r=this.users)&&void 0!==r||(this.users=new Lu(`${this.linkHref("self")}/users?embed=user`))}async loadAllInvitesAndUsersJP(){const e=[];return e.push(this.invites.allJP()),e.push(this.users.allJP()),await Promise.all(e)}get pollingForShortWebHref(){return null!=(0,Qr.A)(this,Ac)[Ac]}async pollForShortWebHrefJP(){if(null!=(0,Qr.A)(this,Ac)[Ac])return await(0,Qr.A)(this,Ac)[Ac];if(this.hasShortWebHref())return Promise.resolve();(0,Qr.A)(this,Ac)[Ac]=new Promise(((e,t)=>{let r=0;const i=async()=>{r++;try{if(await this.refreshJP(),this.hasShortWebHref())return void e();r>=10?(g.A.reportFailure("pollForShortUrlFailure"),t()):r<10&&setTimeout(i,150)}catch{return void t()}};i()}));try{await(0,Qr.A)(this,Ac)[Ac]}catch(e){throw e}finally{(0,Qr.A)(this,Ac)[Ac]=null}}getFilterFlags(){return this.attributes.payload.filters?.flags||[]}enableNewPresentationFiltersP(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.updateAttributesP("enableSpacePresentationFilters",{payload:{presentationFilters:e}})}setDownloadEnabledP(e){return this.downloadEnabled()===e?wc.Deferred().resolve():this.updateAttributesP("setSpaceDownloadEnabled",{payload:{download:e}})}async setAllowInviteRequestsJP(e){if("shared"===this.attributes.subtype)return await this.updateAttributesP("setAllowInviteRequests",{payload:{allowInviteRequests:e}})}get allowInviteRequests(){return!0===this.attributes.payload.allowInviteRequests}isOwner(){return!0}get hideUrl(){return!0===this.attributes.payload.hide_url}async reenableProofingJP(e){return await this.updateAttributesP("reshareAlbum",{payload:e})}async disableProofingJP(e){return await this.updateAttributesP("unshareAlbum",{payload:e})}},_c=(0,i.A)(bc.prototype,"invites",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc);Pc.prototype.attributeClass=vc;const Sc=Pc;var xc,Cc,Oc=r(595642);let kc=(xc=class extends zu{constructor(e){super(),(0,b.A)(this,"_models",Cc,this)}reset(){return this._dirty?(this._models=new Oe,this.indices={},this.page=0,this.pageSize=100,this.finished=!1,this.length=0,this.totalCount=null,this._dirty=!1,this):this}fetchP(){return this.finished?Oc.Deferred().reject().promise():Oc.Deferred()}get assets(){return this}},Cc=(0,i.A)(xc.prototype,"_models",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xc);var Tc,Ec,Ic,Dc,Rc,jc,Fc,Nc,Lc,Mc,Uc=r(595642);let $c=(Tc=class e extends jl{constructor(){super(...arguments),(0,b.A)(this,"currentProofingClient",Ec,this),(0,b.A)(this,"isProofLoading",Ic,this),(0,b.A)(this,"proofingClientList",Dc,this),(0,b.A)(this,"selectedAssetsForFiltering",Rc,this),(0,b.A)(this,"commentedAssetsForFiltering",jc,this),(0,b.A)(this,"spaces",Fc,this),(0,b.A)(this,"reviewAssets",Nc,this),(0,b.A)(this,"filteredCollection",Lc,this),(0,b.A)(this,"bestPhotosState",Mc,this)}_getAttributesMiddleware(){return[zl(this)]}setAttributes(e){var t;(super.setAttributes(e),"cluster"===this.getSubtype()&&(this.attributes.incomplete=e.incomplete),["cluster","project"].includes(this.getSubtype())&&null==this.topics&&(this.topics=this._createTopics()),this._initSpaces(),n.A.is_enabled("collaborative_proofing"))&&(null!==(t=this.reviewAssets)&&void 0!==t||(this.reviewAssets=new kc),this.reviewAssets.space=this.spaces)}markAssetsDirty(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super.markAssetsDirty(e),this.topics?.markAssetsDirty()}_createDefaultAssetOptions(){return{embed:"asset;spaces;user",order_after:"-",subtype:"image;video",exclude:"incomplete"}}_createTopics(){return new vu(this.linkHref("/rels/child_albums")).setParentAlbum(this)}set assets(e){this._assets=e}get assets(){return this.isCluster()||this.isProjectV1()?this.topics?.assets:this.getAssets(this._defaultAssetOptions)}_initSpaces(){if(this.spaces=new Oe,null!=this.attributes.spaces)for(const e of this.attributes.spaces)e.base=this.attributes.base,this.spaces.push(new Sc(e))}hasOpenInviteRequests(){const e=this.getSpace();if(!(e?.invites.length>0))return!1;return e.invites.models.filter((e=>e.isRequest()&&"open"===e.status)).length>0}isSharePublic(){const e=this.getSpace();return null!=e&&!e.isPrivate()}isShared(){const e=this.getSpace();if(null==e)return!1;if(!e.isPrivate())return!0;if(e.allowInviteRequests||!e.hideUrl)return!0;if(null!=e.users){if(null!=e.users.modelsBindable.find((e=>"accepted"===e.status)))return!0}if(null!=e.invites){if(null!=e.invites.modelsBindable.find((e=>"open"===e.status)))return!0}return!1}async isSharedJP(){if(this.isShared())return!0;const e=this.getSpace();return null!=e&&(await e.loadAllInvitesAndUsersJP(),this.isShared())}getFilterFlags(){let e=[];const t=this.getSpace();return null!=t&&(e=t.getFilterFlags()),e}getSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e),r=t.getSubType();if("gallery"!==r&&"review"!==r)return t}}async hasAnyRejectedAssetsJP(){return(await this.getAssets({flag:"reject",subtype:"image;video",limit:1},!0).pageP(0)).length>0}async canSafelyConvertLegacyShareFiltersJP(){const e=this.getSpace();if(null!=e){if(e.hasLegacyFilters()){const e=this.getFilterFlags();if(0===e.length||3===e.length){const e=await this.hasAnyRejectedAssetsJP();return Promise.resolve(!e)}return 1===e.length&&e.includes("pick")||e.includes("pick")&&e.includes("unflagged")?Promise.resolve(!0):Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)}async safeConvertLegacyShareFiltersJP(){const e=this.getSpace();if(null!=e&&e.hasLegacyFilters()){if(await this.canSafelyConvertLegacyShareFiltersJP()){const t=this.getFilterFlags();if(1===t.length&&t.includes("pick")){const t=this.updateAttributesP("safeConvertFilters",{presentation:{filters:{pickedOnly:!0}}}),r=e.enableNewPresentationFiltersP();await Uc.when([t,r]),g.A.report("albumSafeLegacyFilterConversion",{pickedOnly:!0})}else await e.enableNewPresentationFiltersP(),g.A.report("albumSafeLegacyFilterConversion");return Promise.resolve()}}return Promise.reject()}hasPublicReview(){let e=!1;const t=this.getReviewSpace();return null!=t&&(e=!t.isPrivate()),e}getReviewSpace(){if(null==this.spaces)return null;for(let e=0,t=this.spaces.length;e<t;e++){const t=this.spaces.at(e);if("review"===t.getSubType())return t}}hasGallerySpace(){if(null!=this.spaces)for(let e=0,t=this.spaces.length;e<t;e++){if("gallery"===this.spaces.at(e).getSubType())return!0}}updateAttributeP(e,t,r){const i={};return i[t]=r,super.updateAttributeP(e,"payload",i)}renameP(e){return this.updateAttributesP("renameAlbum",{payload:{name:e}})}async setNameJP(e){return await this.renameP(e)}pinnedP(e){return this.updateAttributesP("pinned",{payload:{pinned:e}})}async setPinnedJP(e){return await this.pinnedP(e)}async setStoryTitleJP(e){return await this.updateAttributesP("setAlbumTitle",{payload:{story:{title:e}}})}async deleteStoryTitleJP(){return await this.updateAttributesP("setAlbumTitle",{payload:{story:{title:null}}})}async setStoryAuthorJP(e){return await this.updateAttributesP("setAlbumAuthor",{payload:{story:{author:e}}})}async deleteStoryAuthorJP(){return await this.updateAttributesP("setAlbumAuthor",{payload:{story:{author:null}}})}reparentP(e){return null!=e?this.updateAttributesP("reparentAlbum",{payload:{parent:{id:e}}}):this.updateAttributesP("reparentAlbum",{payload:{parent:null}})}setSlideshowSettingsP(e){const t=this.getSlideshowSettings();return Uc.extend(t,e),this.updateAttributesP("setSlideshowSettings",{payload:{presentation:{slideshow:e}}})}setPresentationSettingsP(e){const t=this.getPresentationSettings();return Uc.extend(!0,t,e),this.updateAttributesP("setPresentationSettings",{payload:{presentation:e}})}setPresentationFilterPickedOnlyP(e){return this.updateAttributesP("setPresentationFilterPickedOnlyP",{payload:{presentation:{filters:{pickedOnly:e}}}}).then((()=>{this.markFilteredAssetsDirty()}))}setPresentationFilterRatingAtLeastP(e){let t;return t=0===e?"clearPresentationFilterRatingAtLeastP":"setPresentationFilterRatingAtLeastP",this.updateAttributesP(t,{payload:{presentation:{filters:{ratingAtLeast:e}}}}).then((()=>{this.markFilteredAssetsDirty()}))}clearPresentationFilterSettingsP(){return this.updateAttributesP("clearPresentationFiltersP",{payload:{presentation:{filters:null}}}).then((()=>{this.markFilteredAssetsDirty()}))}saveCoverSettingsP(e){const t=this.getCoverSettings();return Uc.extend(t,e),this.updateAttributesP("setCoverSettings",{payload:{presentation:{cover:e}}})}resetCoverCropSettingsP(){return this.updateAttributesP("setCoverCropSettings",{payload:{presentation:{cover:{cropHints:{}}}}})}hideInOrganizeP(){return this.updateAttributesP("hideInOrganize",{payload:{hideInOrganize:!0,parent:null}})}showInOrganizeP(){return this.updateAttributesP("hideInOrganize",{payload:{hideInOrganize:!1}})}deleteSpaceP(e){return this.requestP("DELETE",e.href).then((()=>(this.markAssetsDirty(),this.refreshP())))}async createSpaceJP(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"shared";if(!["review","shared"].includes(r))throw"This method needs to be updated for the new space subtype";const i=this._linkBase.fullHref(`spaces/${this.createUuid()}`),n=(new Date).toISOString();e.userCreated=n,e.userUpdated=n;const s={payload:e,subtype:r,resources:[{id:this.id,type:"album"}]};this.markAssetsDirty();try{const e={"If-None-Match":this.id};await this.requestJP("PUT",i,JSON.stringify(s),{headers:e}),await this.refreshP(),t="shared"===r?this.getSpace():this.getReviewSpace();try{return await t.pollForShortWebHrefJP()}catch{}}catch(e){const[i,n,s]=e;if(412!==n)throw this.reportOzFailure("createSpaceFailure",i,n,s),e;if(await this.refreshP(),t="shared"===r?this.getSpace():this.getReviewSpace(),null==t)throw this.reportOzFailure("createSpace412RefreshFailure",i,n,s),e}}createSpaceP(e){const t=Uc.Deferred();return this.createSpaceJP.then((e=>t.resolve(e)),(e=>t.reject(e))),t.promise()}_getAssetsLink(){return this.linkHref("self")+"/assets"}hasAssetsP(e){e=Uc.extend({limit:1},e);return new su(this._getAssetsLink(),e).pageP(0).then((e=>e.length>0))}removeManyAssetsP(e){let t,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.length>0&&("string"==typeof e[0]||e[0]instanceof String)?e:e.map((e=>e.id)),r=i?this.assets.deleteAssetsP(e):this.assets.deleteManyP(t,"removeAssetsFromAlbum"),this.assetsIdsRemoved(t,!0),r}assetsIdsRemoved(e){const t=this.getAttribute("payload").cover?.id,r=null!=t&&e.includes(t);r&&this.deleteAlbumCoverP();const i=this._coverFallbackAsset?.id;(null!=i&&e.includes(i)||r)&&this.markAssetsDirty(!0)}deleteAssetsLocally(e){this.assets.deleteLocally(e)}coverIsSet(){return null!=this.getAttribute("payload").cover}setAlbumCoverP(e){let t;null!=e?(t={},t.id=e):t=null;const r=Uc.Deferred().resolve().promise();return Uc.when(this.updateAttributesP("setAlbumCover",{payload:{cover:t}}),r).done((()=>null!=e?this.assets.getP(t.id).done((e=>this._setCover(e))):this._setCover(null)))}async setAlbumCoverJP(e){return await this.setAlbumCoverP(e)}deleteAlbumCoverP(){return this._setCover(null),this.updateAttributesP("deleteAlbumCover",{payload:{cover:null}})}addAsset(e){const t=new Ll(e);return t.refreshP().done((()=>{this.assets.index(t.id)>=0||this.assets._add(t)}))}_refreshP(e){return e=e||`${this.href}?embed=spaces`,super._refreshP(e)}isProjectV1(){return null!=this.attributes?.payload?.presentation?.portfolio||"project"===this.getSubtype()&&1===this.attributes?.payload?.publishInfo?.version}isCluster(){return"cluster"===this.getSubtype()}createClustersP(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=`${this.href}/clusters`;t.length>0&&(r+=`?${t}`);let i={};return n.A.is_enabled("best_photos_trust_oz_ignore_ratings_flags")&&(i={weights:{importance_weights:{rating:[0,0,0,0,0,0],hasTitle:0,hasCaption:0,flags:{pick:0,reject:0,unflagged:0}}}}),this.requestP("POST",r,JSON.stringify(i)).then(((t,r,i)=>{const s=i.getResponseHeader("Location"),o=new e(s);return n.A.is_enabled("debug_best_photos")&&(o.debugClusterRequestId=i.getResponseHeader("x-request-id")),o}))}refreshUntilClusteringCompletesP(e){const t=Uc.Deferred(),r=1e3;let i=0,s=0;var o=()=>null==e||e()?r*i>=18e4?(g.A.report("bestPhotosClusterTimeout"),void t.reject("timeout")):this.refreshP().done((()=>{s=0,++i,!0===this.attributes.incomplete||n.A.is_enabled("best_photos_load_forever")?(n.A.is_enabled("debug")&&console.log("Still clustering."),setTimeout(o,r)):(n.A.is_enabled("debug")&&console.log("Clustering complete!"),t.resolve())})).fail((()=>{++s,s<=2?(g.A.report("bestPhotosClusterRefreshRetry"),setTimeout(o,r)):(g.A.report("bestPhotosClusterFail"),t.reject("fail"))})):t.reject("aborted");return o(),t.promise()}loadClustersP(){return this.topics.loadAssetsP(!1,!0)}getReviewedAssetsP(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all_clients";const r=this.getReviewSpace();return null!=r?(this.isProofLoading=!0,e&&this.assets.markDirty().reset(),this.reviewAssets.markDirty().reset(),this.assets.getReviewedAssetsP(r,t).done((e=>{this.proofingClientList=this.assets.proofingClientList,this.selectedAssetsForFiltering=this.assets.selectedAssetsForFiltering,this.commentedAssetsForFiltering=this.assets.commentedAssetsForFiltering,this.reviewAssets.addAssets(e)})).always((()=>{this.currentProofingClient=t,this.reviewAssets.finished=!0,this.isProofLoading=!1}))):(this.reviewAssets.finished=!0,Uc.Deferred().resolve([]).promise())}splitAtAssetP(e,t,r,i){let n;return"first"===t?(n="left",e=this.assets.at(0).id):n=t,this.createNewLayoutSegmentP(e,n,r,i)}createNewLayoutSegmentP(e,t,r,i){const n=this.createUuid(),s=`${T.A.catalogContext.href}/assets/${n}/revisions/${this.createUuid()}`,o={payload:{name:null!=r?r:"",description:null!=i?i:""},subtype:"layout_segment"};return this.requestP("PUT",s,JSON.stringify(o)).then((()=>{const r=this.assets.index(e);if(!(r>=0))return Uc.Deferred().reject(`Unknown asset id ${e}`);let i=r;return"right"===t&&i++,this.assets.addOrderedAssetIdsP([n],i)}))}convertToDisplay(){0===this.attributes.payload.presentation.explore.version&&this.attributes.dispatch("convertToDisplay"),1===this.attributes.payload.presentation.slideshow?.version&&this.setSlideshowSettingsP(this.getSlideshowSettings().convertV1Properties().toJSON())}},Ec=(0,i.A)(Tc.prototype,"currentProofingClient",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ic=(0,i.A)(Tc.prototype,"isProofLoading",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=(0,i.A)(Tc.prototype,"proofingClientList",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rc=(0,i.A)(Tc.prototype,"selectedAssetsForFiltering",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jc=(0,i.A)(Tc.prototype,"commentedAssetsForFiltering",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fc=(0,i.A)(Tc.prototype,"spaces",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nc=(0,i.A)(Tc.prototype,"reviewAssets",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lc=(0,i.A)(Tc.prototype,"filteredCollection",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mc=(0,i.A)(Tc.prototype,"bestPhotosState",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tc);$c.prototype.coverClass=go,$c.prototype.assetListClass=su;const zc=$c;let Hc;const Jc=(Hc=class extends $l{static initClass(){this.prototype.model=zc,this.prototype.modelName="CatalogAlbum"}_add(e,t){if(t){const{models:t}=this;let n=0,s=t.length-1;for(;n<=s;){var r=Math.floor(n+(s-n)/2),i=Ko.localeCompare(t[r],e);if(i<0)n=r+1;else{if(!(i>0))break;s=r-1}}return this._models.splice(n,0,e),this._reindex(n)}return super._add(e)}deleteP(e){const t=this.get(e),r=t.getSpace();if(null!=r)this.requestP("DELETE",r.href).fail(((e,t,r)=>this.reportOzFailure("deleteSpaceForAlbumDeleteFailure",e,t,r)));else if(t.isCluster()||t.isProjectV1())return super.deleteP(e,{child_albums:!0});return super.deleteP(e)}getTotalCountHref(){return"topic"===this.options.subtype?`${this.href}/count?subtype=topic`:"smart"===this.options.subtype?`${this.href}/count?subtype=smart`:`${this.href}/count?subtype=collection`}},Hc.initClass(),Hc);var qc,Vc;let Bc=(qc=class extends er{constructor(){super(...arguments),(0,b.A)(this,"albums",Vc,this)}setAttributes(e){var t;super.setAttributes(e),null!==(t=this.albums)&&void 0!==t||(this.albums=new ec(this.linkHref("/rels/space_resources")))}addManyResourcesP(e){return this.albums.createManyP(this,e)}addResourceP(e){return this.albums.createP(this,e)}getResourcesP(){return this.albums.reset(),this.albums.allP()}deleteManyResourcesP(e){return this.albums.deleteManyP(this.href,e)}webHref(){return this.linkHref("/rels/web_space")}getLongWebHref(){return`${this._linkBase.hostUrl}/gallery/${this.id}`}getAuthor(){var e;return null!==(e=this.attributes.payload?.profile_info?.author)&&void 0!==e?e:""}getDescription(){var e;return null!==(e=this.attributes.payload?.profile_info?.description)&&void 0!==e?e:""}},Vc=(0,i.A)(qc.prototype,"albums",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qc);var Wc=r(595642);let Gc;const Xc=(Gc=class extends mn{static initClass(){this.prototype.model=Bc,this.prototype.modelName="CatalogGallerySpace",this.prototype.subtype="gallery"}createNewGallerySpaceP(e){const t=`${this.href}/${this.createUuid()}`,r={payload:{download:!1,location:!1,metadata:!1,private:!1,gallery_type:"public_profile",profile_info:{author:e},comments_disabled:!0,favorites_disabled:!0},subtype:this.subtype,resources:[]};return this.createP(t,r)}deleteAllGallerySpacesP(){return this.allP().then((e=>{const t=[];for(var r of e){var i=this.deleteP(r.id);t.push(i)}return Wc.when(...t)}))}},Gc.initClass(),Gc);class Kc extends oo{setAttributes(e){return super.setAttributes(e),this.name=e.payload.name,this}getName(){return this.name}}let Yc;const Qc=(Yc=class extends eu{static initClass(){this.prototype.model=Kc,this.prototype.modelName="CatalogPerson"}constructor(e){super(e,{subtype:"person"})}getNameForId(e){return this.get(e)?.getName()||""}},Yc.initClass(),Yc);class Zc extends jl{setAttributes(e){return this.order=e.payload?.order,super.setAttributes(e)}getOrder(){return this.order||""}}let ed;const td=(ed=class extends $l{static initClass(){this.prototype.model=Zc,this.prototype.modelName="CollectionSetAlbum"}constructor(e){super(e,{subtype:"collection_set"})}},ed.initClass(),ed);class rd extends Zc{reparentP(e){return null!=e?this.updateAttributesP("reparentFolder",{payload:{parent:{id:e}}}):this.updateAttributesP("reparentFolder",{payload:{parent:null}})}}rd.prototype.assetListClass=su;const id=rd;let nd;const sd=(nd=class extends td{static initClass(){this.prototype.model=id,this.prototype.modelName="CatalogCollectionSetAlbum"}},nd.initClass(),nd);var od,ad,ld,ud,cd,dd,hd,pd,fd,gd,md,yd,vd,bd,_d,Ad=r(595642);let wd,Pd=(bd=(0,Zr.A)("cachedSearchAssets"),_d=(0,Zr.A)("cachedAssets"),od=class extends er{constructor(e){super(e),(0,b.A)(this,"photoCount",ad,this),(0,b.A)(this,"videoCount",ld,this),(0,b.A)(this,"photoExcludedIncompleteCount",ud,this),(0,b.A)(this,"videoExcludedIncompleteCount",cd,this),(0,b.A)(this,"photoDeletedCount",dd,this),(0,b.A)(this,"videoDeletedCount",hd,this),(0,b.A)(this,"countsDirty",pd,this),(0,b.A)(this,"incompleteCountsDirty",fd,this),(0,b.A)(this,"deletedCountsDirty",gd,this),(0,b.A)(this,"allPhotosRestoreInProgress",md,this),(0,b.A)(this,"peopleCount",yd,this),(0,b.A)(this,"peopleCountDirty",vd,this),this.allPhotosMonthSegments=null,this.allPhotosDaySegments=null,Object.defineProperty(this,bd,{writable:!0,value:new Map}),Object.defineProperty(this,_d,{writable:!0,value:new Map}),this.uploadedAssets=new Oe,this.uploadTime=new Date}get assetCount(){return this.photoCount+this.videoCount}get assetIncompleteCount(){return this.photoExcludedIncompleteCount+this.videoExcludedIncompleteCount}get assetDeletedCount(){return this.photoDeletedCount+this.videoDeletedCount}get assetDeletedCountsLoaded(){return!this.deletedCountsDirty}get assetIncompleteCountsLoaded(){return!this.incompleteCountsDirty}get assetCountsLoaded(){return!this.countsDirty}get assetPeopleCount(){return this.peopleCount}get googlePhotosAlbum(){return this.importAlbums?.modelsBindable?.find((e=>e.attributes.payload.source===Zo))}setAttributes(e){var t,r,i,s,o,a;(super.setAttributes(e),null!==(t=this.assets)&&void 0!==t||(this.assets=new eu(`${this.linkHref("self")}/assets`,{subtype:"image;video"})),null!==(r=this.albums)&&void 0!==r||(this.albums=new Jc(`${this.linkHref("self")}/albums`,{subtype:"collection;smart",embed:"spaces",limit:500})),null!==(i=this.importAlbums)&&void 0!==i||(this.importAlbums=new Jc(`${this.linkHref("self")}/albums`,{subtype:"import"})),null!==(s=this.collectionSetAlbums)&&void 0!==s||(this.collectionSetAlbums=new sd(`${this.linkHref("self")}/albums`)),this.cachedUnwantedAssets=null,this.cachedDuplicateAssets=null,this.catalogUpdates=new Yl(this.linkHref("/rels/updates")),null!==(o=this.gallerySpaces)&&void 0!==o||(this.gallerySpaces=new Xc(`${this.linkHref("self")}/spaces`,{subtype:"gallery"})),n.A.is_enabled("face_detection"))&&(null!==(a=this.persons)&&void 0!==a||(this.persons=new Qc(`${this.linkHref("self")}/assets`)),this.persons.allP())}getPersonAssets(){var e;return null!==(e=this.personAssets)&&void 0!==e||(this.personAssets=new Qc(`${this.linkHref("self")}/assets`)),this.personAssets}getImageAssets(){var e;return null!==(e=this.photoAssets)&&void 0!==e||(this.photoAssets=new eu(`${this.linkHref("self")}/assets`,{subtype:"image"})),this.photoAssets}getProjectAlbums(){var e;return null!==(e=this.projectAlbums)&&void 0!==e||(this.projectAlbums=new Jc(`${this.linkHref("self")}/albums`,{subtype:"project"})),this.projectAlbums}getClusterAlbums(){return new Jc(`${this.linkHref("self")}/albums`,{subtype:"cluster"})}cleanupClusterAlbumsP(){const e=this.getClusterAlbums();return e.allP().done((()=>{e.models.sort(((e,t)=>t.getOzCreatedDate()-e.getOzCreatedDate()));const t=e.models.slice(5,7);n.A.is_enabled("debug")&&console.log(`Cleaning up ${t.length} albums`);const r=t.map((e=>e.id)),i=t=>()=>e.deleteP(t),s=new ii(1);for(const e of r)s.enqueuePromise(i(e));return s.promise().done((()=>{n.A.is_enabled("debug")&&console.log("Done cleaning up clusters.")}))}))}getName(){return this.attributes.name}getAssets(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=ti()(e);(0,Qr.A)(this,_d)[_d].has(r)||(0,Qr.A)(this,_d)[_d].set(r,new eu(`${this.href}/assets`,e));const i=(0,Qr.A)(this,_d)[_d].get(r);return t&&i.reset(),i}getSearchAssets(e,t,r,i,n){var s;const o={search:e,filters:t,sortBy:r,sortDir:i,insertedAssetsLength:null!==(s=n?.length)&&void 0!==s?s:0},a=ti()(o);return(0,Qr.A)(this,bd)[bd].has(a)||(0,Qr.A)(this,bd)[bd].set(a,new Do(this,e,t,r,i,n)),(0,Qr.A)(this,bd)[bd].get(a)}getQuickCollectionAssets(e){return new qo(this,e)}getUnwantedAssets(){var e;return null!==(e=this.cachedUnwantedAssets)&&void 0!==e?e:this.cachedUnwantedAssets=new No(this)}getUnwantedAssetsForPolling(){var e;return null!==(e=this.cachedUnwantedAssetsForPolling)&&void 0!==e?e:this.cachedUnwantedAssetsForPolling=new No(this)}getDuplicateAssets(){var e;return null!==(e=this.cachedDuplicateAssets)&&void 0!==e?e:this.cachedDuplicateAssets=new $o(this)}async getCatalogUpdateP(){try{const e=this.href;return await this.requestP("GET",e)}catch(e){console.error("getCatalogUpdate error",e)}return null}async findDuplicatesReonboardP(){const e=36e5,t={features:["find_duplicates"]};try{const{last_duplicate_asset_processed_updated_time:r}=await this.getCatalogUpdateP();if(!r){const t=T.A.account?.settings.getLastDuplicateQueryTime();if(!t)return n.A.is_enabled("debug_duplicates")&&console.log("findDuplicatesReonboardP no lastQueryTime, skipping reonboard",{last_duplicate_asset_processed_updated_time:r}),void await(T.A.account?.settings.setLastDuplicateQueryTimeP(new Date));{const i=Date.now()-new Date(t).getTime();if(i<e)return void(n.A.is_enabled("debug_duplicates")&&console.log("findDuplicatesReonboardP skipping due to cooldown",{last_duplicate_asset_processed_updated_time:r,timeSinceLastQuery:i/e}));n.A.is_enabled("debug_duplicates")&&console.log("findDuplicatesReonboardP force reonboard due to timeout",{last_duplicate_asset_processed_updated_time:r,timeSinceLastQuery:i/e})}}await(T.A.account?.settings.setLastDuplicateQueryTimeP(new Date));const i=this.href.replace("/v2/","/v2/lrml/")+"/reonboard",s=await this.requestP("POST",i,JSON.stringify(t));n.A.is_enabled("debug_duplicates")&&console.log("findDuplicatesReonboardP result",{last_duplicate_asset_processed_updated_time:r},s)}catch(e){console.error("findDuplicatesReonboardP error",e)}return t}markSearchAssetsDirty(e){const t=(0,Qr.A)(this,bd)[bd].keys(),r=new Map;for(const i of t){const t=(0,Qr.A)(this,bd)[bd].get(i);n.A.is_enabled("lrw_19692_keep_search_assets_dirty")?t!==e&&t.markDirty():t.markDirty(),e===t&&r.set(i,t)}(0,Qr.A)(this,bd)[bd].clear(),(0,Qr.A)(this,bd)[bd]=r}markAssetsDirty(e){this.assets?.markDirty(),this.countsDirty=!0,this.incompleteCountsDirty=!0,this.deletedCountsDirty=!0,this.allPhotosRestoreInProgress=!0,this.markSearchAssetsDirty(e),this.cachedUnwantedAssets?.markDirty(),this.cachedDuplicateAssets?.markDirty(),this.allPhotosDaySegments&&this.allPhotosDaySegments!==e&&this.allPhotosDaySegments.markDirty(),this.allPhotosMonthSegments&&this.allPhotosMonthSegments!==e&&this.allPhotosMonthSegments.markDirty();for(const e of(0,Qr.A)(this,_d)[_d].values())e.markDirty()}assetUpdated(){this.trigger("assetUpdated")}allCountsP(){return null!=this.loadingCountsP?this.loadingCountsP:this.countsDirty?this.loadingCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=image%3Bvideo&exclude=incomplete`).then((e=>(this.photoCount=e?.subtype_counts?.image||0,this.videoCount=e?.subtype_counts?.video||0,this.countsDirty=!1,this.allPhotosRestoreInProgress=!1,[this.photoCount,this.videoCount]))).always((()=>this.loadingCountsP=void 0)):Ad.Deferred().resolve([this.photoCount,this.videoCount])}errorCountsP(){return null!=this.loadingErrorCountsP?this.loadingErrorCountsP:this.incompleteCountsDirty?this.loadingErrorCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=image%3Bvideo&exclude=complete`).then((e=>(this.photoExcludedIncompleteCount=e?.subtype_counts?.image||0,this.videoExcludedIncompleteCount=e?.subtype_counts?.video||0,this.incompleteCountsDirty=!1,[this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount]))).always((()=>this.loadingErrorCountsP=void 0)):Ad.Deferred().resolve([this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount])}deletedCountsP(){return null!=this.loadingDeletedCountsP?this.loadingDeletedCountsP:this.deletedCountsDirty?this.loadingDeletedCountsP=this.requestP("GET",`${this.href}/assets/count?subtype=deleted_image%3Bdeleted_video`).then((e=>(this.photoDeletedCount=e?.subtype_counts?.deleted_image||0,this.videoDeletedCount=e?.subtype_counts?.deleted_video||0,this.deletedCountsDirty=!1,[this.photoDeletedCount,this.videoDeletedCount]))).always((()=>this.loadingDeletedCountsP=void 0)):Ad.Deferred().resolve([this.photoDeletedCount,this.videoDeletedCount])}peopleCountP(){return null!=this.loadingPeopleCountP?this.loadingPeopleCountP:this.peopleCountDirty?this.loadingPeopleCountP=this.requestP("GET",`${this.href}/assets/count?subtype=person`).then((e=>(this.peopleCount=e?.subtype_counts?.person||0,this.peopleCountDirty=!1,this.peopleCount))).always((()=>this.loadingPeopleCountP=void 0)):Ad.Deferred().resolve([this.photoExcludedIncompleteCount,this.videoExcludedIncompleteCount])}getConnections(){return this.attributes.payload.settings?.universal?.connections||{}}addConnectionToSettingsP(e){if(this.attributes.payload.settings?.universal?.connections?.[e])return Ad.Deferred().resolve();const t=(new Date).toISOString(),r={universal:{connections:{}}};r.universal.connections[e]={created:t};const i={payload:{settings:r}};return this.updateAttributesP("catalogConnection",i)}removeConnectionFromSettingsP(e){if(!this.attributes.payload.settings?.universal?.connections?.[e])return Ad.Deferred().resolve();const t={universal:{connections:{}}};t.universal.connections[e]=null;const r={payload:{settings:t}};return this.updateAttributesP("catalogConnection",r)}async submitSearchFeedbackJP(e){return await this.requestP("PUT",`${this.href}/feedback`,JSON.stringify(e))}},ad=(0,i.A)(od.prototype,"photoCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ld=(0,i.A)(od.prototype,"videoCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ud=(0,i.A)(od.prototype,"photoExcludedIncompleteCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cd=(0,i.A)(od.prototype,"videoExcludedIncompleteCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),dd=(0,i.A)(od.prototype,"photoDeletedCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),hd=(0,i.A)(od.prototype,"videoDeletedCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pd=(0,i.A)(od.prototype,"countsDirty",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fd=(0,i.A)(od.prototype,"incompleteCountsDirty",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),gd=(0,i.A)(od.prototype,"deletedCountsDirty",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),md=(0,i.A)(od.prototype,"allPhotosRestoreInProgress",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yd=(0,i.A)(od.prototype,"peopleCount",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),vd=(0,i.A)(od.prototype,"peopleCountDirty",[O.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),od);const Sd=(wd=class extends mn{static initClass(){this.prototype.model=Pd,this.prototype.modelName="Catalog"}constructor(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/v2/catalogs";e=n.A.is_enabled("hatch_catalog")?"hatch":"lightroom;X-lightroom",super(t,{role:"any",subtype:e,...n.A.is_enabled("on_the_house")&&{headers:{"X-All-Account-States":!0}}})}createCatalogP(){if(null!=this.creating)return this.creating;const e=`/v2/catalogs/${this.createUuid()}`;return this.creating=this.createP(e,{subtype:"lightroom",payload:{name:"lightroom"}}).always((()=>this.creating=null))}},wd.initClass(),wd);var xd=r(547826);const Cd=new class{getCatalogP(){if(this.catalogDeferred)return this.catalogDeferred.promise;this.catalogDeferred=new cn.A;let e=new Sd(`${T.A.hostOverride}/v2/catalogs`);return e.fetchP().done((()=>{0===e.numLoaded()?this.catalogDeferred.reject("failed to load catalog"):this.catalogDeferred.resolve(e.at(0))})).fail((e=>{a.A.noticeError(e),this.catalogDeferred.reject("failed to load catalog")})),this.catalogDeferred.promise}getProjectWithSourceAlbumIdForServiceIdP(e,t){return this.getProjectsForServiceIdP(t).then((t=>{let r;for(let i=t.length,n=0;n<i;n++){let i=t[n],s=i.attributes.payload.sourceAlbum,o=i.attributes.payload.publishInfo;if(s&&s.id===e&&!o.deleted){r=i;break}}return r}))}getProjectsP(){return this.getCatalogP().then((e=>e.getProjectAlbums().allP()))}getCollectionsP(){return this.getCatalogP().then((e=>e.albums.allP()))}getCollectionWithIdP(e){return this.getCatalogP().then((t=>t.albums.getP(e)))}getAssetsOfCollectionWithIdP(e){return this.getCollectionWithIdP(e).then((e=>{let t={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(t),e.assets.allP().then((t=>({album:e,assets:t})))}))}getProjectsForServiceIdP(e){return this.getProjectsP().then((t=>t.reduce(((t,r)=>{let i=r.attributes.payload.publishInfo;return i&&i.serviceId===e&&t.push(r),t}),[])))}publishProjectSnapshotOfCollectionWithIdForServiceIdP(e,t){return this.getProjectWithSourceAlbumIdForServiceIdP(e,t).then((r=>r?Promise.reject("source album is currently published"):this.getCatalogP().then((r=>r.albums.getP(e).then((e=>{if("collection"!==e.attributes.subtype)return Promise.reject("source album not of subtype collection");let i=r.getProjectAlbums(),n=[];return e.assets.allP().then((r=>{n=r.map((e=>e.id));let s=(new Date).toISOString(),o={subtype:"project",payload:{sourceAlbum:{id:e.id},publishInfo:{version:2,serviceId:t,created:s,updated:s}}},a=e.attributes.payload.cover;return a&&(o.payload.cover={id:a.id}),i.createP(e.name||e.id,o)})).then((e=>e.assets.addOrderedAssetIdsP(n,0).then((()=>e))))}))))))}republishSourceAlbumSnapshotOfProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t=e.attributes.payload.sourceAlbum;return t?this.getCollectionWithIdP(t.id).then((t=>{let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((t=>{let r=t[0],i=t[1],n=r.map((e=>e.id)),s=i.map((e=>e.id));return e.removeManyAssetsP(n).then((()=>e.assets.addOrderedAssetIdsP(s,0).then((()=>{let t={payload:{publishInfo:{updated:(new Date).toISOString()}}};return e.updateAttributesP("setPublishInfo",t)}))))}))}),(t=>e)):e}))}getProjectWithIdForServiceIdP(e,t){return this.getProjectsForServiceIdP(t).then((t=>t.find((t=>t.id===e))||Promise.reject("no matching album")))}updateProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t={payload:r};return e.updateAttributesP("setPublishInfo",t)}))}deleteProjectWithIdForServiceIdP(e,t){return this.getCatalogP().then((r=>this.getProjectWithIdForServiceIdP(e,t).then((e=>r.getProjectAlbums().deleteP(e.id)))))}deleteOrphanedProjectWithIdP(e){return this.getCatalogP().then((t=>this.getProjectsP().then((r=>{r.find((t=>t.id===e));return t.getProjectAlbums().deleteP(e)}))))}getAssetsOfProjectWithIdForServiceIdP(e,t){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(t),e.assets.allP().then((t=>({album:e,assets:t})))}))}updateAssetsOfProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>{let t={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(t),e.assets.allP().then((t=>{let i=r.map((e=>({id:e.id,payload:e.infoOverlay})));return e.assets._bulkUpdateAttributesP(i)}))}))}addAssetsToProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>e.assets.addOrderedAssetIdsP(r,0)))}removeAssetsFromProjectWithIdForServiceIdP(e,t,r){return this.getProjectWithIdForServiceIdP(e,t).then((e=>e.removeManyAssetsP(r)))}publishV1SnapshotOfAlbumWithIdForServiceIdP(e,t){return this.getProjectWithSourceAlbumIdForServiceIdP(e,t).then((r=>r?Promise.reject("source album is currently published"):this.getCatalogP().then((r=>r.albums.getP(e).then((e=>{if("collection"!==e.attributes.subtype)return Promise.reject("source album not of subtype collection");let i=r.getProjectAlbums();var n=[];return e.assets.allP().then((r=>{n=r.map((e=>e.id));let s=(new Date).toISOString(),o={subtype:"project",payload:{sourceAlbum:{id:e.id},publishInfo:{version:1,serviceId:t,created:s,updated:s}}};return i.createP(e.name||e.id,o)})).then((t=>{let r={subtype:"topic",payload:{order:"Uzzz",parent:{id:t.id}}},n=e.attributes.payload.cover;return n&&(r.payload.cover={id:n.id}),i.createP(e.name||e.id,r)})).then((e=>e.assets.addOrderedAssetIdsP(n,0).then((()=>e))))}))))))}deleteV1ProjectWithIdForServiceIdP(e,t){return this.getCatalogP().then((r=>this.getProjectWithIdForServiceIdP(e,t).then((e=>e.topics.allP().then((t=>r.getProjectAlbums().deleteP(e.id)))))))}deleteOrphanedTopicsP(){return this.getCatalogP().then((e=>{let t=new Jc(`${e.linkHref("self")}/albums`,{subtype:"topic"});return t.allP().then((e=>{let r=[];e.forEach((e=>{e.attributes.payload.parent||r.push(t.deleteP(e.id))}));let i=r.length;return Promise.all(r).then((function(){return"number of deleted topics without a parent: "+i}))}))}))}};var Od,kd,Td,Ed,Id,Dd,Rd,jd,Fd;const{LrSDK:Nd}=window,Ld=3e3;function Md(){return new Promise(((e,t)=>{let r=new Sd(`${T.A.hostOverride}/v2/catalogs`);r.fetchP().done((()=>{if(0===r.numLoaded())t("failed to load catalog");else{let t=r.at(0),i=new Jc(`${t.linkHref("self")}/albums`,{});e(i)}})).fail((e=>{a.A.noticeError(e),t("failed to load catalog")}))}))}function Ud(e){return e.assets.allP().then((()=>{let t=e.attributes.toJSON();return t.resources=e.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}})),t}))}function $d(e,t){if("project"!==t.attributes.subtype)return Promise.reject("not a valid project");let r=t.attributes.payload.sourceAlbum;return r?e.getP(r.id).then((e=>function(e,t){let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((r=>{let i=r[0],n=r[1],s=i.map((e=>e.id)),o=n.map((e=>e.id)),a=t.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}}));return e.removeManyAssetsP(s).then((()=>e.assets.addOrderedAssetIdsP(o,0).then((()=>a))))}))}(t,e).then((e=>{let r={payload:{publishInfo:{updated:(new Date).toISOString()}}};return t.updateAttributesP("setPublishInfo",r).then((()=>{let r=t.attributes.toJSON();return r.resources=e,r}))}))),(e=>Ud(t))):Ud(t)}let zd=(Od=o("debug_projects"),kd=o("debug_projects"),Td=o("debug_projects"),Ed=o("debug_projects"),Id=o("debug_projects"),Dd=o("debug_projects"),Rd=o("debug_projects"),jd=o("debug_projects"),Fd=class extends ce{initialize(e){try{if(e.features){let t=Object.getOwnPropertyNames(e.features);for(const r of t)n.A._override(r,e.features[r])}V.A.token=e.token,V.A.environment=Nd.environment,V.A.clientId=e.clientId,V.A.ozHost="prod"===Nd.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io",U.reset(),T.A.hostOverride=V.A.ozHost,xd.A.isReady||(xd.A.setGetTokenMethod((()=>this._token)),xd.A.setAuthReady()),ce.setAuthHeaders(V.A.token,V.A.clientId),T.A.authErrorCallback=()=>a.A.report("ozAuthError"),a.A.reportApiCall("LrCatalog.initialize")}catch(e){a.A.noticeError(e),console.log("Could not initialize LrCatalog",e)}e.disableAnalytics||(0,se.A)(V.A)}getEntitlementStatusP(){return a.A.reportApiCall("LrCatalog.getEntitlementStatusP"),Yr.getCurrentP().then((e=>{let t;return e&&(t=e.getStatus()),t||"unknown"}))}isEmptyP(){return new Promise(((e,t)=>{let r=new Sd(`${T.A.hostOverride}/v2/catalogs`);r.fetchP().done((()=>{let t=0===r.numLoaded();a.A.report("isCatalogEmptyCheck",{value:t?"empty":"not empty"}),e(t)})).fail((t=>{a.A.report("isCatalogEmptyCheck",{value:"missing"}),e(!0)}))}))}unpublishProjectP(e){return a.A.reportApiCall("LrCatalog.unpublishProjectP"),Md().then((t=>t.getP(e).then((e=>"topic"===e.attributes.subtype&&e.attributes.payload.parent?t.getP(e.attributes.payload.parent.id).then((e=>{let t=(new Date).toISOString();return e.updateAttributesP("setPublishInfo",{payload:{publishInfo:{updated:t,deleted:!0}}}).then((()=>!0))})):function(e){if("project"!==e.attributes.subtype)return Promise.reject("not a valid project");let t=(new Date).toISOString();return e.updateAttributesP("setPublishInfo",{payload:{publishInfo:{updated:t,deleted:!0}}}).then((()=>!0))}(e)))))}republishProjectP(e){return a.A.reportApiCall("LrCatalog.republishProjectP"),Md().then((t=>t.getP(e).then((e=>"topic"===e.attributes.subtype&&e.attributes.payload.parent?t.getP(e.attributes.payload.parent.id).then((r=>{let i=r.attributes.payload.sourceAlbum;return i?t.getP(i.id).then((t=>function(e,t){let r={subtype:"image",embed:"asset",order_after:"-",exclude:"incomplete"};return e.setDefaultAssetOptions(r),t.setDefaultAssetOptions(r),Promise.all([e.assets.allP(),t.assets.allP()]).then((r=>{let i=r[0],n=r[1],s=i.map((e=>e.id)),o=n.map((e=>e.id)),a=e.attributes.toJSON();return a.resources=t.assets.models.map((e=>{let t=e.attributes.toJSON();return delete t.base,{asset:t}})),e.removeManyAssetsP(s).then((()=>e.assets.addOrderedAssetIdsP(o,0).then((()=>a))))}))}(e,t).then((e=>{let t={payload:{publishInfo:{updated:(new Date).toISOString()}}};return r.updateAttributesP("setPublishInfo",t).then((()=>e))}))),(t=>Ud(e))):Ud(e)})):$d(t,e)))))}_isRenditionValidP(e){return ee.A.requestOzUrlP("HEAD",e).then((e=>!0)).catch((e=>!1))}get2560RenditionRelativeUrlP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a.A.reportApiCall("get2560RenditionRelativeUrlP");var i=t.links["/rels/rendition_type/2560"];if(i&&!i.invalid&&!r)return this._isRenditionValidP(e+i.href).then((r=>r?i.href:this.get2560RenditionRelativeUrlP(e,t,!0)));if(!t.links["/rels/master"]&&!t.links["/rels/proxy_type/2560"])return Promise.reject("no proxy or master file");if(!t.revision_ids||t.revision_ids.length<1)return Promise.reject("no revisions");let n=t.revision_ids[t.revision_ids.length-1],s=t.links["/rels/rendition_create"].href.replace("{revision_id}",n),o=e+s.replace("{rendition_id}","");return new Promise(((r,n)=>{var s=0;let a=e=>{(s+=Ld)>=9e4?n("timed out"):setTimeout((()=>{ee.A.requestOzUrlP("HEAD",e).then((e=>{r(i.href)})).catch((t=>{a(e)}))}),Ld)};ee.A.requestOzUrlP("POST",o,null,{"x-generate-renditions":"2560"}).then((r=>{(r=r.responseObject)&&r.links&&r.links["/rels/rendition_type/2560"]?(i=r.links["/rels/rendition_type/2560"],a(e+i.href)):n(`failed request to create rendition for asset id ${t.id}`)})).catch((e=>{n(`failed request to create rendition for asset id ${t.id}`)}))}))}getFullsizeRenditionRelativeUrlP(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a.A.reportApiCall("getFullsizeRenditionRelativeUrlP");let i=t.links["/rels/rendition_type/fullsize"];if(i&&!i.invalid&&!r)return this._isRenditionValidP(e+i.href).then((r=>r?i.href:this.getFullsizeRenditionRelativeUrlP(e,t,!0)));let n=t.links["/rels/master"];if(!n)return Promise.reject("no master file");if(!((t.payload||{}).develop||{}).xmpCameraRaw&&"image/jpeg"===n.content_type)return Promise.resolve(n.href);if(!t.revision_ids||t.revision_ids.length<1)return Promise.reject("no revisions");let s=t.revision_ids[t.revision_ids.length-1],o=t.links["/rels/rendition_create"].href.replace("{revision_id}",s),l=e+o.replace("{rendition_id}","");return new Promise(((r,n)=>{var s=0;let o=e=>{(s+=Ld)>=9e4?n("timed out"):setTimeout((()=>{ee.A.requestOzUrlP("HEAD",e).then((e=>{r(i.href)})).catch((t=>{o(e)}))}),Ld)};ee.A.requestOzUrlP("POST",l,null,{"x-generate-renditions":"fullsize"}).then((r=>{(r=r.responseObject)&&r.links&&r.links["/rels/rendition_type/fullsize"]?(i=r.links["/rels/rendition_type/fullsize"],o(e+i.href)):n(`failed request to create rendition for asset id ${t.id}`)})).catch((e=>{n(`failed request to create rendition for asset id ${t.id}`)}))}))}getImageP(e){return a.A.reportApiCall("LrCatalog.getImageP"),ee.A.getOzUrlP(e,"blob").then((e=>e.response))}assetUrlP(e){return a.A.reportApiCall("LrCatalog.assetUrlP"),new Promise(((t,r)=>{let i=new Sd(`${T.A.hostOverride}/v2/catalogs`);i.fetchP().done((()=>{let r=i.at(0),n=r._linkBase.fullHref(`catalogs/${r.id}/assets/${e}`);t(n)})).fail((e=>{a.A.noticeError(e),r(e)}))}))}getAssetP(e){return a.A.reportApiCall("LrCatalog.getAssetP"),new Promise(((t,r)=>{this.requestP("GET",e).done((e=>{t(e)})).fail((e=>{a.A.noticeError(e),r(e)}))}))}xmpForAssetP(e){return a.A.reportApiCall("LrCatalog.xmpForAssetP"),new Promise(((t,r)=>{let i=e.payload?.develop?.xmpCameraRaw;if(e.links["/rels/xmp"]){let n=`${e.base}${e.links["/rels/xmp"].href}`;this.requestP("GET",n,null,{contentType:null}).done((e=>{t(((e,t)=>{if(!e)return t;if(!t)return e;let i=new DOMParser,n=i.parseFromString(e,"text/xml"),s=n.documentElement.getElementsByTagName("parsererror");if(s&&s.length>0)return void r(s[0].innerText);let o=i.parseFromString(t,"text/xml");if(s=n.documentElement.getElementsByTagName("parsererror"),s&&s.length>0)r(s[0].innerText);else try{let e=n.getElementsByTagName("rdf:Description")[0]||n.getElementsByTagName("Description")[0],t=o.getElementsByTagName("rdf:Description")[0]||o.getElementsByTagName("Description")[0];for(const[r,i]of Object.entries(t.attributes))e.setAttribute(i.nodeName,i.nodeValue);for(;t.firstChild;)e.appendChild(t.firstChild);return(new XMLSerializer).serializeToString(n)}catch(e){throw new Error("Invalid XMP")}})(e,i))})).fail((e=>{a.A.noticeError(e),r(e)}))}else t(i)}))}async publishProjectSnapshotOfCollectionWithIdP(e){a.A.reportApiCall("LrCatalog.publishProjectSnapshotOfCollectionWithIdP");let t=await Z.getProjectManagerP(),r=await t.createProjectFromCollectionWithIdP(e),i=(new Date).toISOString(),n={userUpdated:i,publishInfo:{created:i,updated:i}};return await t.updateProjectWithIdP(r,n),r}async republishSourceAlbumSnapshotOfProjectWithIdP(e){a.A.reportApiCall("LrCatalog.republishSourceAlbumSnapshotOfProjectWithIdP");let t=await Z.getProjectManagerP();await t.resetProjectWithIdFromSourceCollectionP(e);let r=(new Date).toISOString(),i={userUpdated:r,publishInfo:{updated:r}};return t.updateProjectWithIdP(e,i)}async getProjectsP(){return a.A.reportApiCall("LrCatalog.getProjectsP"),(await Z.getProjectManagerP()).getDeepCopyOfProjectListP()}async getProjectWithIdP(e){return a.A.reportApiCall("LrCatalog.getProjectWithIdP"),(await Z.getProjectManagerP()).getDeepCopyOfProjectWithIdP(e)}async getCollectionWithIdP(e){a.A.reportApiCall("LrCatalog.getCollectionWithIdP");let t=await Z.getCollectionWithIdP(e);return JSON.parse(JSON.stringify(t))}async getAssetsOfCollectionWithIdP(e){return a.A.reportApiCall("LrCatalog.getAssetsOfCollectionWithIdP"),Z.getAssetsOfCollectionWithIdP(e)}async createProjectWithAssetIdsP(e,t){return a.A.reportApiCall("LrCatalog.createProjectWithAssetIdsP"),(await Z.getProjectManagerP()).createProjectWithAssetIdsP(e,t)}async createProjectFromCollectionWithIdP(e){return a.A.reportApiCall("LrCatalog.createProjectFromCollectionWithIdP"),(await Z.getProjectManagerP()).createProjectFromCollectionWithIdP(e)}async resetProjectWithIdFromSourceCollectionP(e){return a.A.reportApiCall("LrCatalog.resetProjectWithIdFromSourceCollectionP"),(await Z.getProjectManagerP()).resetProjectWithIdFromSourceCollectionP(e)}async updateProjectWithIdP(e,t){return a.A.reportApiCall("LrCatalog.updateProjectWithIdP"),(await Z.getProjectManagerP()).updateProjectWithIdP(e,t)}async deleteProjectWithIdP(e){return a.A.reportApiCall("LrCatalog.deleteProjectWithIdP"),(await Z.getProjectManagerP()).deleteProjectWithIdP(e)}async getAssetsOfProjectWithIdP(e){return a.A.reportApiCall("LrCatalog.getAssetsOfProjectWithIdP"),(await Z.getProjectManagerP()).getAssetsOfProjectWithIdP(e)}async getUncachedProjectsP(){return(await Z.getProjectManagerP()).getUncachedProjectsP()}async getUncachedProjectWithIdP(e){return(await Z.getProjectManagerP()).getUncachedProjectWithIdP(e)}async deleteProjectWithIdForServiceIdP(e,t){return(await Z.getProjectManagerForServiceIdP(t)).deleteProjectWithIdP(e)}async deleteChildAlbumsOfProjectWithIdForServiceIdP(e,t){return(await Z.getProjectManagerForServiceIdP(t)).deleteChildAlbumsOfProjectWithIdP(e)}deleteOrphanedProjectWithIdP(e){return Cd.deleteOrphanedProjectWithIdP(e)}publishV1SnapshotOfAlbumWithIdP(e){let t=V.A.clientId;return Cd.publishV1SnapshotOfAlbumWithIdForServiceIdP(e,t).then((e=>e.attributes.toJSON()))}deleteOrphanedTopicsP(){return Cd.deleteOrphanedTopicsP()}selfTestP(e){return ne.runP(e)}},(0,i.A)(Fd.prototype,"getUncachedProjectsP",[Od],Object.getOwnPropertyDescriptor(Fd.prototype,"getUncachedProjectsP"),Fd.prototype),(0,i.A)(Fd.prototype,"getUncachedProjectWithIdP",[kd],Object.getOwnPropertyDescriptor(Fd.prototype,"getUncachedProjectWithIdP"),Fd.prototype),(0,i.A)(Fd.prototype,"deleteProjectWithIdForServiceIdP",[Td],Object.getOwnPropertyDescriptor(Fd.prototype,"deleteProjectWithIdForServiceIdP"),Fd.prototype),(0,i.A)(Fd.prototype,"deleteChildAlbumsOfProjectWithIdForServiceIdP",[Ed],Object.getOwnPropertyDescriptor(Fd.prototype,"deleteChildAlbumsOfProjectWithIdForServiceIdP"),Fd.prototype),(0,i.A)(Fd.prototype,"deleteOrphanedProjectWithIdP",[Id],Object.getOwnPropertyDescriptor(Fd.prototype,"deleteOrphanedProjectWithIdP"),Fd.prototype),(0,i.A)(Fd.prototype,"publishV1SnapshotOfAlbumWithIdP",[Dd],Object.getOwnPropertyDescriptor(Fd.prototype,"publishV1SnapshotOfAlbumWithIdP"),Fd.prototype),(0,i.A)(Fd.prototype,"deleteOrphanedTopicsP",[Rd],Object.getOwnPropertyDescriptor(Fd.prototype,"deleteOrphanedTopicsP"),Fd.prototype),(0,i.A)(Fd.prototype,"selfTestP",[jd],Object.getOwnPropertyDescriptor(Fd.prototype,"selfTestP"),Fd.prototype),Fd);Nd.catalog||(Nd.catalog=new zd),Nd.provide&&Nd.provide("catalog",Nd.catalog);Nd.catalog},712942:(e,t,r)=>{"use strict";r.d(t,{A:()=>v});var i,n,s=r(956238),o=r(406190),a=r(594993),l=r(432203),u=r(750665),c=r(127507),d=r(573451),h=r(226405),p=a.A.filter,f={},g=[],m=!1;const y=function(){};let v=(0,s.A)({FirstExecutionMarker:f})((n=class e extends c.A{static pushMutator(t){e.mutatorsStack.push(e.mutator),e.mutator=t}static popMutator(t){e.mutator===t?e.mutator=e.mutatorsStack.pop():console.error("Trying to pop a mutator that is not in the top of the stack")}static run(t,r,i){var n=e.active;e.active=t;var s=i&&i.track;s&&(t.track=i,h.A.groupStart("Running "+(i.name||"bindings")));try{return r.call(i)}finally{s&&(h.A.groupEnd("Running "+(i.name||"binder")),t.track=null),e.active=n}}static recordEvent(t,r){var i=e.active;if(i){if(i.track){let e=(0,d.A)(t)+"-"+(t.constructor?t.constructor.name:"Anonymous");h.A.log("Recording",e,r)}i.push({obj:t,eventName:r})}}static recordChange(t,r,i,n){o.A.trigger(t,r);var s=e.mutator;s&&s.record(t,r,i,n)}constructor(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.A,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;var a;if(super(),this.previousValue=f,this.bindings=[],this.dirty=!!i,this.disposableParent=o,this.valueGetter="function"==typeof(a=t)?a:"object"==typeof a&&"function"==typeof a.get?a.get:y,this.set=function(e){return"object"==typeof e&&"function"==typeof e.set?e.set:y}(t),this.callback=r||y,n&&n instanceof u.A){var c=n,d=this.apply.bind(this);n=()=>c.push(d,s)}this.invalidate=()=>{if(e.active!==this){if(this.track){var t=new Error;Error.captureStackTrace(t),h.A.log("change detected",window._signal,t.stack)}n?(this.dirty=!0,n()):this.compute()}},i?this.get():this.compute()}removeBindings(){var e=this.bindings;if(e){for(var t=this.invalidate,r=0,i=e.length;r<i;++r){var n=e[r];n.ref.remove(t),n.dispose&&n.dispose()}this.bindings=null}}dispose(){this.removeBindings(),super.dispose()}update(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r=this.previousValue;if(r===f||r!==e)return this.previousValue=e,t&&this.callback(e),!0}apply(){if(!this.isDisposed&&this.dirty)return this.compute()}_computeInnerValue(){this.dirty=!1,this.removeBindings();var t=this.disposableParent;if(!t||!t.isDisposed){m&&(g=[]),m=!0;var r=g,i=e.run(r,this.valueGetter,this);if(i=p(r,i),m=!1,!r.length)return i;g=[];var n=this.invalidate;for(let e=0,t=r.length;e<t;++e){let t=r[e];t.ref=o.A.on(t.obj,t.eventName,n)}return this.bindings=r,i}}compute(){var e=this._computeInnerValue();return this.update(e,!0)}get(){var e=this._computeInnerValue();return this.update(e,!1),e}},n.mutatorsStack=[],n.active=null,n.mutator=null,i=n))||i},720307:(e,t,r)=>{var i=r(578887),n=r(366740),s=r(406227),o=r(647148),a=i.Object,l=n("".split);e.exports=s((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?l(e,""):a(e)}:a},720852:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(331456)),s=r(847924),o=function(){function e(){}return e.getInitialRedirectUri=function(e,t){var r=e.redirect_uri||t||window.location.href,i="function"==typeof r?r():r,n=i.indexOf("from_ims");return-1===n?i:("#"===i[n-1]&&n--,i.substr(0,n))},e.createDefaultRedirectUrl=function(e,t,r,i){var n=this.getInitialRedirectUri(r,e),s=this.createOldHash(n);return s.indexOf("?")>0?s+"&client_id="+t+"&api="+i:s+"?client_id="+t+"&api="+i},e.createRedirectUrl=function(e,t,r,i,n){void 0===n&&(n="");var s=this.createDefaultRedirectUrl(e,t,r,i);(n=n||r.scope||"")&&(s=s+"&scope="+n);var o=r.reauth||"";return o&&(s=s+"&reauth="+o),s},e.createOldHash=function(e){var t=e.indexOf("#");return t<0?e+"#old_hash=&from_ims=true":e.substring(0,t)+"#old_hash="+e.substring(t+1)+"&from_ims=true"},e.mergeApiParamsWithExternalParams=function(e,t,r){return s.merge(n.default.getCustomApiParameters(e,r),t)},e}();t.RedirectHelper=o},727691:(e,t,r)=>{var i=r(578887),n=r(658369);e.exports=function(e,t){return arguments.length<2?(r=i[e],n(r)?r:void 0):i[e]&&i[e][t];var r}},732486:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var i,n,s,o,a,l,u,c,d=r(529444),h=r(135708),p=r(355141);const f=new(i=class{constructor(){this.XMP_CAMERA_RAW_MAX_LENGTH=10240,this.MAX_COMMENT_LENGTH=1023,this.FEATURES={CLEAN_UP:"unwanted_photos",FIND_DUPLICATES:"find_duplicates",SEMANTIC_SEARCH_OPT_IN:"semantic_search_opt_in",SEMANTIC_SEARCH_MIGRATION_COMPLETE:"semantic_search_migration_complete"},(0,d.A)(this,"account",n,this),(0,d.A)(this,"userDefaults",s,this),(0,d.A)(this,"catalogContext",o,this),(0,d.A)(this,"spaceContext",a,this),(0,d.A)(this,"spaces",l,this),(0,d.A)(this,"lastAssetEditTime",u,this),(0,d.A)(this,"_savingEditCount",c,this),this._hostOverride="https://lightroom.adobe.com",this._callbacks=[],this.defaultPageSize=100,this.haveNginxProxy=!0,this.authErrorCallback=void 0}get hostOverride(){return this._hostConfig}set hostOverride(e){this._hostConfig=e,this._callbacks.forEach((e=>e(this)))}startAssetEdit(){this._savingEditCount++}endAssetEdit(){this._savingEditCount--}get savingEdit(){return this._savingEditCount>0}get isNewUser(){if(!this.account.isSubscriber())return!1;const e=this.account.subscriptionStartDate(),t=new Date;return Math.floor((t-e)/864e5)<7}get shouldShowOnboarding(){if(!this.account.isSubscriber())return!1;return this.account.subscriptionStartDate()>new Date(2024,4,23)}watch(e){this._callbacks.push(e)}},n=(0,h.A)(i.prototype,"account",[p.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,h.A)(i.prototype,"userDefaults",[p.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,h.A)(i.prototype,"catalogContext",[p.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,h.A)(i.prototype,"spaceContext",[p.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,h.A)(i.prototype,"spaces",[p.A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,h.A)(i.prototype,"lastAssetEditTime",[p.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=(0,h.A)(i.prototype,"_savingEditCount",[p.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i)},732725:(e,t,r)=>{var i=r(578887),n=r(950176),s=r(314369),o=r(945618),a=r(378531),l=r(558621),u=i.TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";t.f=n?o?function(e,t,r){if(a(e),t=l(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var i=d(e,t);i&&i[f]&&(e[t]=r.value,r={configurable:p in r?r[p]:i[p],enumerable:h in r?r[h]:i[h],writable:!1})}return c(e,t,r)}:c:function(e,t,r){if(a(e),t=l(t),a(r),s)try{return c(e,t,r)}catch(e){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},733211:(e,t,r)=>{"use strict";var i=r(697197),n=r(938327),s=n(i("String.prototype.indexOf"));e.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&s(e,".prototype.")>-1?n(r):r}},739506:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i=r(127507),n=r(406190),s=r(712942),o=r(374026),a=r(432203);const l=function(){};class u extends i.A{watch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.A,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new s.A(e,t,r,i,n,this))}watchCollection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.A,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new o.A(e,t,r,i,n,this))}multiWatch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.A,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.$_depth||0;return this.link(new s.A((()=>e.map((e=>e()))),(e=>t.apply(null,e)),r,i,n,this))}defineObservable(e,t){if(Object.prototype.hasOwnProperty.call(this,e))this[e]=t;else{var r="_"+e;this[r]=t;var i=this;Object.defineProperty(this,e,{configurable:!0,enumerable:!1,get:()=>(s.A.active&&s.A.recordEvent(i,e),i[r]),set(t){var n=i[r];n!==t&&(i[r]=t,s.A.recordChange(i,e,t,n))}})}}dispose(){this.stopListening(),super.dispose()}trigger(e){if(Object.prototype.hasOwnProperty.call(this,n.$)){var t=this[n.$][e];if(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];t.trigger.apply(t,i)}}}on(e,t){return n.A.on(this,e,t)}off(e,t){return n.A.off(this,e,t)}listenTo(e,t,r){return n.A.listenTo(this,e,t,r)}stopListening(e,t,r){return n.A.stopListening(this,e,t,r)}}},742623:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(406190);class n extends Promise{constructor(e){var t={resolved:!1,value:void 0};t.obj=t,super(((r,n)=>{const s=e=>{t.resolved=!0,t.value=e,i.A.trigger(t,"update")};e((e=>{s(e),r(e)}),(e=>{s(null),n(e)}))})),this._torq_binding=t}}},745950:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(568723)),s=i(r(847769)),o=i(r(388271));t.default=new(function(){function e(){this.triggerOnError=null}return e.prototype.post=function(e,t,r){var i=this;void 0===r&&(r={});var s=n.default.getCachedApiResponse(e,t);if(s){var a=s.status,l=s.data;return 200===a?Promise.resolve(l):Promise.reject(l)}return o.default.post(e,t,r).then((function(r){return i.storeApiResponse(e,JSON.stringify(t),r)})).catch((function(r){return i.verifyError(e,JSON.stringify(t),r)}))},e.prototype.get=function(e,t){var r=this;void 0===t&&(t={});var i=n.default.getCachedApiResponse(e);if(i){var s=i.status,a=i.data;return 200===s?Promise.resolve(a):Promise.reject(a)}return o.default.get(e,t).then((function(t){return r.storeApiResponse(e,"",t)})).catch((function(t){return r.verifyError(e,"",t)}))},e.prototype.verifyError=function(e,t,r){this.storeApiResponse(e,t,r);var i=s.default.verify(r,e);return Promise.reject(i||r.data)},e.prototype.storeApiResponse=function(e,t,r){return void 0===t&&(t=""),n.default.storeApiResponse(e,t,r),Promise.resolve(r.data)},e}())},747107:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const i=function(){let e=!1;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if("boolean"==typeof r[0]&&(e=r[0],r.shift()),!e)return Object.assign(...r);const s={},o=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&("[object Object]"===e[t]?.toString()?s[t]=i(!0,s[t],e[t]):void 0!==e[t]&&(s[t]=e[t]))};for(const e of r)o(e);return s},n={extend:i}},750665:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var i,n=r(135708),s=r(631811),o=r(900400),a=r(573451);let l=(i=class{constructor(){this.running=!1,this.registered=!1,this.itemMap={},this.maxBucket=-1,this.buckets=[],this.bucketMap={}}register(){}push(e,t,r){var i=(0,a.A)(e);t=Number(t)||0;var n=this.itemMap[i];if(n){if(n.lateBinder=r,n.cancel=!1,n.priority!==t){var s=n.bucket.items,o=s.indexOf(n);s[o]=null,n.priority=t}else if(!n.executed)return;n.executed=!1}else n={callback:e,priority:t,cancel:!1,executed:!1,lateBinder:r},this.itemMap[i]=n;var l=this.bucketMap[t]||this._makeBucket(t);this.maxBucket=Math.max(this.maxBucket,l.index),n.bucket=l,l.items.push(n),this.registerIfNeeded()}_makeBucket(e){for(var t=this.buckets,r=0,i=t.length-1;r<=i;){var n=Math.round((r+i)/2);t[n].priority<e?i=n-1:r=n+1}var s=this.bucketMap[e]={priority:e,items:[],index:r};this.buckets.splice(r,0,s),r<=this.maxBucket&&++this.maxBucket;for(var o=t.length;r<o;++r)t[r].index=r;return s}wrap(e,t,r){return()=>this.push(e,t||0,r)}registerIfNeeded(){this.registered||(this.registered=!0,this.register(this.inAfterCall))}get after(){var e=this._after;return e||(e=this._after=new u(this)),e}remove(e){var t=(0,a.A)(e),r=this.itemMap[t];r&&(r.executed=!1,r.cancel=!0)}execHoisted(e){for(;e.length;){var t=e.pop();t.cancel||(t.executed=!0,t.callback())}}execCallbacks(e){for(var t=this.buckets;this.maxBucket>=0;){var r=t[this.maxBucket].items;if(r.length){var i=r.pop();i&&!i.cancel&&(i.lateBinder?e?e.push(i):e=[i]:(i.executed=!0,i.callback()))}else--this.maxBucket}return e}run(){if(this.maxBucket>=0){this.running=!0;for(var e=null;this.maxBucket>=0||e;)try{for(;this.maxBucket>=0||e;)(e=this.execCallbacks(e))&&(this.execHoisted(e),e=null)}catch(e){console.error(e),console.error(e.stack)}this.running=!1}this.itemMap={},this.registered=!1;var t=this._after;t&&(this.inAfterCall=!0,t.run(),this.inAfterCall=!1)}quickRun(){if(this.maxBucket>=0){this.running=!0;for(var e=null;this.maxBucket>=0||e;)(e=this.execCallbacks(e))&&(this.execHoisted(e),e=null);this.running=!1}this.itemMap={},this.registered=!1;var t=this._after;t&&(this.inAfterCall=!0,t.run(),this.inAfterCall=!1)}},(0,n.A)(i.prototype,"register",[o.A],Object.getOwnPropertyDescriptor(i.prototype,"register"),i.prototype),(0,n.A)(i.prototype,"run",[s.A],Object.getOwnPropertyDescriptor(i.prototype,"run"),i.prototype),(0,n.A)(i.prototype,"quickRun",[s.A],Object.getOwnPropertyDescriptor(i.prototype,"quickRun"),i.prototype),i);class u extends l{constructor(e){super(),this.parent=e}register(){this.parent.registerIfNeeded()}}},753968:(e,t,r)=>{var i,n,s=r(578887),o=r(237692),a=s.process,l=s.Deno,u=a&&a.versions||l&&l.version,c=u&&u.v8;c&&(n=(i=c.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!n&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(n=+i[1]),e.exports=n},754871:(e,t,r)=>{var i="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=i&&n&&"function"==typeof n.get?n.get:null,o=i&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"==typeof l.get?l.get:null,c=a&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,g=Object.prototype.toString,m=Function.prototype.toString,y=String.prototype.match,v=String.prototype.slice,b=String.prototype.replace,_=String.prototype.toUpperCase,A=String.prototype.toLowerCase,w=RegExp.prototype.test,P=Array.prototype.concat,S=Array.prototype.join,x=Array.prototype.slice,C=Math.floor,O="function"==typeof BigInt?BigInt.prototype.valueOf:null,k=Object.getOwnPropertySymbols,T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,E="function"==typeof Symbol&&"object"==typeof Symbol.iterator,I="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===E||"symbol")?Symbol.toStringTag:null,D=Object.prototype.propertyIsEnumerable,R=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function j(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var i=e<0?-C(-e):C(e);if(i!==e){var n=String(i),s=v.call(t,n.length+1);return b.call(n,r,"$&_")+"."+b.call(b.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,r,"$&_")}var F=r(559522),N=F.custom,L=H(N)?N:null;function M(e,t,r){var i="double"===(r.quoteStyle||t)?'"':"'";return i+e+i}function U(e){return b.call(String(e),/"/g,"&quot;")}function $(e){return!("[object Array]"!==V(e)||I&&"object"==typeof e&&I in e)}function z(e){return!("[object RegExp]"!==V(e)||I&&"object"==typeof e&&I in e)}function H(e){if(E)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!T)return!1;try{return T.call(e),!0}catch(e){}return!1}e.exports=function e(t,i,n,a){var l=i||{};if(q(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(q(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=!q(l,"customInspect")||l.customInspect;if("boolean"!=typeof g&&"symbol"!==g)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(q(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(q(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var _=l.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return W(t,l);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return _?j(t,w):w}if("bigint"==typeof t){var C=String(t)+"n";return _?j(t,C):C}var k=void 0===l.depth?5:l.depth;if(void 0===n&&(n=0),n>=k&&k>0&&"object"==typeof t)return $(t)?"[Array]":"[Object]";var N=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=S.call(Array(e.indent+1)," ")}return{base:r,prev:S.call(Array(t+1),r)}}(l,n);if(void 0===a)a=[];else if(B(a,t)>=0)return"[Circular]";function J(t,r,i){if(r&&(a=x.call(a)).push(r),i){var s={depth:l.depth};return q(l,"quoteStyle")&&(s.quoteStyle=l.quoteStyle),e(t,s,n+1,a)}return e(t,l,n+1,a)}if("function"==typeof t&&!z(t)){var G=function(e){if(e.name)return e.name;var t=y.call(m.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=Z(t,J);return"[Function"+(G?": "+G:" (anonymous)")+"]"+(ee.length>0?" { "+S.call(ee,", ")+" }":"")}if(H(t)){var te=E?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):T.call(t);return"object"!=typeof t||E?te:X(te)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var re="<"+A.call(String(t.nodeName)),ie=t.attributes||[],ne=0;ne<ie.length;ne++)re+=" "+ie[ne].name+"="+M(U(ie[ne].value),"double",l);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+="</"+A.call(String(t.nodeName))+">"}if($(t)){if(0===t.length)return"[]";var se=Z(t,J);return N&&!function(e){for(var t=0;t<e.length;t++)if(B(e[t],"\n")>=0)return!1;return!0}(se)?"["+Q(se,N)+"]":"[ "+S.call(se,", ")+" ]"}if(function(e){return!("[object Error]"!==V(e)||I&&"object"==typeof e&&I in e)}(t)){var oe=Z(t,J);return"cause"in Error.prototype||!("cause"in t)||D.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+S.call(oe,", ")+" }":"{ ["+String(t)+"] "+S.call(P.call("[cause]: "+J(t.cause),oe),", ")+" }"}if("object"==typeof t&&g){if(L&&"function"==typeof t[L]&&F)return F(t,{depth:k-n});if("symbol"!==g&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return o&&o.call(t,(function(e,r){ae.push(J(r,t,!0)+" => "+J(e,t))})),Y("Map",s.call(t),ae,N)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{s.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var le=[];return c&&c.call(t,(function(e){le.push(J(e,t))})),Y("Set",u.call(t),le,N)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return K("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return K("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return K("WeakRef");if(function(e){return!("[object Number]"!==V(e)||I&&"object"==typeof e&&I in e)}(t))return X(J(Number(t)));if(function(e){if(!e||"object"!=typeof e||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}(t))return X(J(O.call(t)));if(function(e){return!("[object Boolean]"!==V(e)||I&&"object"==typeof e&&I in e)}(t))return X(f.call(t));if(function(e){return!("[object String]"!==V(e)||I&&"object"==typeof e&&I in e)}(t))return X(J(String(t)));if(t===window)return"{ [object Window] }";if(t===r.g)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==V(e)||I&&"object"==typeof e&&I in e)}(t)&&!z(t)){var ue=Z(t,J),ce=R?R(t)===Object.prototype:t instanceof Object||t.constructor===Object,de=t instanceof Object?"":"null prototype",he=!ce&&I&&Object(t)===t&&I in t?v.call(V(t),8,-1):de?"Object":"",pe=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||de?"["+S.call(P.call([],he||[],de||[]),": ")+"] ":"");return 0===ue.length?pe+"{}":N?pe+"{"+Q(ue,N)+"}":pe+"{ "+S.call(ue,", ")+" }"}return String(t)};var J=Object.prototype.hasOwnProperty||function(e){return e in this};function q(e,t){return J.call(e,t)}function V(e){return g.call(e)}function B(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function W(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return W(v.call(e,0,t.maxStringLength),t)+i}return M(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,G),"single",t)}function G(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+_.call(t.toString(16))}function X(e){return"Object("+e+")"}function K(e){return e+" { ? }"}function Y(e,t,r,i){return e+" ("+t+") {"+(i?Q(r,i):S.call(r,", "))+"}"}function Q(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+S.call(e,","+r)+"\n"+t.prev}function Z(e,t){var r=$(e),i=[];if(r){i.length=e.length;for(var n=0;n<e.length;n++)i[n]=q(e,n)?t(e[n],e):""}var s,o="function"==typeof k?k(e):[];if(E){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in e)q(e,l)&&(r&&String(Number(l))===l&&l<e.length||E&&s["$"+l]instanceof Symbol||(w.call(/[^\w$]/,l)?i.push(t(l,e)+": "+t(e[l],e)):i.push(l+": "+t(e[l],e))));if("function"==typeof k)for(var u=0;u<o.length;u++)D.call(e,o[u])&&i.push("["+t(o[u])+"]: "+t(e[o[u]],e));return i}},766740:(e,t)=>{"use strict";t.q=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var i={},s=t||{},a=e.split(n),l=s.decode||r,u=0;u<a.length;u++){var c=a[u],d=c.indexOf("=");if(!(d<0)){var h=c.substr(0,d).trim(),p=c.substr(++d,c.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==i[h]&&(i[h]=o(p,l))}}return i},t.l=function(e,t,r){var n=r||{},o=n.encode||i;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!s.test(e))throw new TypeError("argument name is invalid");var a=o(t);if(a&&!s.test(a))throw new TypeError("argument val is invalid");var l=e+"="+a;if(null!=n.maxAge){var u=n.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(u)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(l+="; HttpOnly");n.secure&&(l+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return l};var r=decodeURIComponent,i=encodeURIComponent,n=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){try{return t(e)}catch(t){return e}}},774020:(e,t,r)=>{"use strict";var i=r(697197),n=r(733211),s=r(754871),o=i("%TypeError%"),a=i("%WeakMap%",!0),l=i("%Map%",!0),u=n("WeakMap.prototype.get",!0),c=n("WeakMap.prototype.set",!0),d=n("WeakMap.prototype.has",!0),h=n("Map.prototype.get",!0),p=n("Map.prototype.set",!0),f=n("Map.prototype.has",!0),g=function(e,t){for(var r,i=e;null!==(r=i.next);i=r)if(r.key===t)return i.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,i={assert:function(e){if(!i.has(e))throw new o("Side channel does not contain "+s(e))},get:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return u(e,i)}else if(l){if(t)return h(t,i)}else if(r)return function(e,t){var r=g(e,t);return r&&r.value}(r,i)},has:function(i){if(a&&i&&("object"==typeof i||"function"==typeof i)){if(e)return d(e,i)}else if(l){if(t)return f(t,i)}else if(r)return function(e,t){return!!g(e,t)}(r,i);return!1},set:function(i,n){a&&i&&("object"==typeof i||"function"==typeof i)?(e||(e=new a),c(e,i,n)):l?(t||(t=new l),p(t,i,n)):(r||(r={key:{},next:null}),function(e,t,r){var i=g(e,t);i?i.value=r:e.next={key:t,next:e.next,value:r}}(r,i,n))}};return i}},774163:e=>{e.exports={"lightroom-production":{name:"prod",host:"adobesearch.adobe.io",unwanted_host:"uss-lr-organize.adobe.io",unwanted_app_token:"8494d9d7-11a2-48de-b0cc-f928d4ddb13f",host_fac:"adobesearch.adobe.io",host_lr:"adobesearch-lr.adobe.io",api_key:"LrWebUssService"},"lightroom-stage":{name:"stage",host:"adobesearch-stage.adobe.io",unwanted_host:"uss-lr-organize-stage.adobe.io",unwanted_app_token:"6ac45059-41a0-4fda-869b-14051fd7c71c",host_fac:"adobesearch-fac-stage.adobe.io",host_lr:"adobesearch-lr-stage.adobe.io",api_key:"LrWebUssService"}}},774665:e=>{e.exports={}},784040:(e,t,r)=>{e.exports=r(802393).defaults},791748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.appCode="",this.appVersion=""};t.AnalyticsParameters=r},797250:(e,t,r)=>{var i=r(470463),n=Math.min;e.exports=function(e){return e>0?n(i(e),9007199254740991):0}},797419:e=>{e.exports={pageNames:{"abuse-report":"abuse-report",academy:"academy",insights:"insights",author:"author",debug:"debug","community-blocking":"community-blocking","community-featured-edits":"community-featured-edits","community-guidelines":"community-guidelines",discover:"discover",downloader:"downloader",gallery:"gallery",home:"home",homepage:"Landing",landing:"Landing",learn:"learn",libraries:"libraries",news:"news",share:"share","try-edit":"try-edit","try-web":"try-web",tv:"tv",unauthorized:"unauthorized",unsupported:"unsupported",unknown:"unknown","update-lightroom":"update-lightroom"}}},798793:(e,t,r)=>{var i=r(720307),n=r(58626);e.exports=function(e){return i(n(e))}},800107:(e,t,r)=>{var i=r(409612),n=r(720307),s=r(452873),o=r(121570),a=function(e){var t=1==e;return function(r,a,l){for(var u,c=s(r),d=n(c),h=i(a,l),p=o(d);p-- >0;)if(h(u=d[p],p,c))switch(e){case 0:return u;case 1:return p}return t?-1:void 0}};e.exports={findLast:a(0),findLastIndex:a(1)}},802104:e=>{e.exports={hostnames:{"lightroom.adobe.com":{client_id:"LightroomMobileWeb1",client_id_yolo:"LightroomMobileWeb1Yolo",ims_url:"https://adobeid-na1.services.adobe.com"},"dev.adobelr.com":{client_id:"LightroomMobileWeb1",client_id_yolo:"LightroomMobileWeb1Yolo",ims_url:"https://adobeid-na1-stg1.services.adobe.com",env:"stg1"},default:{client_id:"LightroomMobileWeb1",client_id_yolo:"LightroomMobileWeb1Yolo",ims_url:"https://adobeid-na1-stg1.services.adobe.com",env:"stg1"}},scope:"AdobeID,openid,gnav,creative_sdk,creative_cloud,additional_info.roles,portfolio.sdk.accounts,portfolio.sdk.import,pps.read,pps.write,pps.image_write,firefly_api,dii_lr_ml_unlimited"}},802393:e=>{const t=Object.prototype,r=t.hasOwnProperty;e.exports={defaults:function(e){e=Object(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return n.forEach((i=>{if(null!==i){i=Object(i);for(const n in i){const s=e[n];(void 0===s||s===t[n]&&!r.call(e,n))&&(e[n]=i[n])}}})),e}}},803358:e=>{e.exports={supported:["cs-CZ","da-DK","de-DE","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","hi-IN","hu-HU","id-ID","it-IT","ja-JP","ko-KR","nb-NO","nl-NL","pl-PL","pt-BR","ru-RU","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-TW"],display_names:{"en-US":"English, US","en-GB":"English, UK","ja-JP":"","zh-CN":"","zh-TW":"","de-DE":"Deutsch","pt-BR":"Portugus, Brasil","es-ES":"Espaol, Espaa","es-MX":"Espaol, Mxico","fr-CA":"Franais, Canada","fr-FR":"Franais, France","id-ID":"Bahasa Indonesia","it-IT":"Italiano","ko-KR":"","ru-RU":"","nl-NL":"Nederlands","sv-SE":"Svenska","th-TH":"","uk-UA":"","hi-IN":"","hu-HU":"Magyar","cs-CZ":"etina","da-DK":"Dansk","fi-FI":"Suomi","nb-NO":"Norsk","pl-PL":"Polski","tr-TR":"Trke","vi-VN":"Ting Vit","zz-ZZ":"Mock Test"},urls:{ad_choices_url:"https://www.adobe.com/${adobecom_country_fragment}privacy/opt-out.html#interest-based-ads",privacy_url:"http://www.adobe.com/${adobecom_country_fragment}privacy.html",terms_url:"http://www.adobe.com/${adobecom_country_fragment}legal/terms.html",privacy_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}privacy/policy-linkfree.html",terms_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}legal/terms.html",support_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom-cc/web/user-guide.html",cpra_personal_info_url:"https://www.adobe.com/privacy/location-specific-notice.html",bonanza_feedback_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom-cc/using/in-app-feedback-program.html",signup_url:{locales:{"zh-CN":"https://www.adobe.com/creativecloud/photography.html",default:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography.html"}},renew_url:"https://account.adobe.com?promoid=2SLRC4PQ&mv=other",renew_stage_url:"https://stage.account.adobe.com?promoid=2SLRC4PQ&mv=other",subscribe_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=2NVQC8FR&mv=other",upgrade_storage_url:"http://www.adobe.com/go/lrcc_upgrade",hdr_blog_max23_url:"http://www.adobe.com/go/hdr_explained",stage_account_url:"https://stage.account.adobe.com",download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?locale=${locale}",welcome_download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?sdid=5F1G8NTM&mv=other&locale=${locale}",welcome_to_lightroom_try_for_free_url:"https://creative.adobe.com/products/download/lightroom?promoid=Z2G1FY7X&mv=other&locale=${locale}",pricing_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=XFWLHGM1&mv=other&locale=${locale}",pricing_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=D4P81RPV&mv=other&locale=${locale}",pricing_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DZTGZWKM&mv=other&locale=${locale}",pricing_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DW3G119N&mv=other&locale=${locale}",plans_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=VKW3KGR6&mv=other",plans_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FR7NZ55F&mv=other&locale=${locale}",plans_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DRCF151P&mv=other&locale=${locale}",plans_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FHRLZDMH&mv=other&locale=${locale}",trial_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=X2PHHV1S&mv=other",trial_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=D8F91MYT&mv=other&locale=${locale}",trial_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DD5B1J7S&mv=other&locale=${locale}",trial_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DMMD18RQ&mv=other&locale=${locale}",trial_header_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=F89JZN3K&mv=other&locale=${locale}",trial_header_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FVYPZ1FD&mv=other&locale=${locale}",trial_header_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FZPQYWPC&mv=other&locale=${locale}",trial_header_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=G4FRYRYB&mv=other&locale=${locale}",buy_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=F4KHZRTL&mv=other&locale=${locale}",buy_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=CZY71WFW&mv=other&locale=${locale}",buy_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FD1KZJCJ&mv=other&locale=${locale}",buy_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FMHMZ8WG&mv=other&locale=${locale}",lrmobile_academy_branch_url:"https://lightroom.app.link/friy7F70Xcb",lrmobile_landing_branch_url:"https://lightroom.app.link/OxxjkVP7ERb",lrmobile_branch_qrcode_url:"https://lightroom.app.link/TSsswqZnQxb",retired_trial_6_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LLVYT9J4&mv=other&locale=${locale}",retired_trial_7_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LVC1T222&mv=other&locale=${locale}",retired_buy_1_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DHWC1DHR&mv=other&locale=${locale}",ccp_help_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/how-to/get-started-photography.html",learn_more_url:"http://www.adobe.com/${adobecom_country_fragment}products/lightroom-mobile.html",lrmobile_iphone_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id878783582?ls=1&mt=8",lrmobile_ipad_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id804177739?ls=1&mt=8",lrmobile_android_url:"https://play.google.com/store/apps/details?id=com.adobe.lrmobile",photoshop_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop.html",support_file_sync_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/kb/sync-different-lightroom-desktop-catalog-with-mobile.html",support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html",lr_support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html",gen_ai_guidelines_url:"https://www.adobe.com/go/adobe-gen-ai-user-guidelines${go_url_country_code}",illegal_content_form_url:"https://survey.adobe.com/jfe/form/SV_000EM4ygC3tixLg"},adobecom_language_codes:{"bg-BG":"bg","cs-CZ":"cz","da-DK":"dk","de-AT":"at","de-CH":"ch_de","de-DE":"de","de-LU":"lu_de","en-AU":"au","en-BE":"be_en","en-CA":"ca","en-CY":"cy_en","en-GB":"uk","en-GR":"gr_en","en-HK":"hk_en","en-IE":"ie","en-IL":"il_en","en-IN":"in","en-LU":"lu_en","en-MT":"mt","en-NZ":"nz","en-sea":"sea","en-UK":"uk","en-US":null,"es-ES":"es","es-LA":"la","es-MX":"mx","et-EE":"ee","fi-FI":"fi","fr-BE":"be_fr","fr-CA":"ca_fr","fr-CH":"ch_fr","fr-FR":"fr","fr-LU":"lu_fr","he-IL":"il_he","hi-IN":"in_hi","hu-HU":"hu","it-CH":"ch_it","id-ID":"sea","it-IT":"it","ja-JP":"jp","ko-KR":"kr","lt-LT":"lt","lv-LV":"lv","nb-NO":"no","nl-BE":"be_nl","nl-NL":"nl","pl-PL":"pl","pt-BR":"br","pt-PT":"pt","ro-RO":"ro","ru-RU":"ru","sk-SK":"sk","sl-SI":"si","sv-SE":"se","th-TH":"sea","tr-TR":"tr","uk-UA":"ua","vi-VN":"sea","zh-CN":"cn","zh-HK":"hk_zh","zh-TW":"tw","zz-ZZ":null}}},806334:function(e,t,r){"use strict";r(315715);var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},n=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(82979)),a=r(63582),l=r(225512),u=s(r(57990)),c=r(958997),d=r(987562),h=r(21063),p=r(447891),f=r(336831),g=s(r(139573)),m=r(411010),y=r(650404),v=r(218971),b=r(403983),_=r(267555),A=r(551359),w=["authorize","check_token"],P=function(){function e(e,t){var r=this;this.getTokenAndProfile=function(e){void 0===e&&(e={});var t=r.getTokenFields();return t instanceof v.ModalSignInEvent||t instanceof c.FragmentException?Promise.reject(t):t instanceof y.AuthorizationCode?r.tokenServiceRequest.imsApis.getTokenFromCode(t,e).then((function(e){var r=e.access_token,i=e.state,s=e.expires_in,o=e.scope,a=void 0===o?"":o,u=n(e,["access_token","state","expires_in","scope"]),c=new l.TokenFields({scope:a,tokenValue:r,valid:!0,state:i,other:t.other},new Date((new Date).getTime()+parseFloat(s)));return Promise.resolve(new h.TokenProfileResponse(c,u))})):t instanceof l.TokenFields?t.fromFragment||!r.tokenServiceRequest.autoValidateToken?Promise.resolve(new h.TokenProfileResponse(t,null)):r.callValidateTokenApi(t.tokenValue,t.isGuestToken).then((function(){return new h.TokenProfileResponse(t,null)})).catch((function(){return r.callRefreshToken(e)})):r.callRefreshToken(e)};var i=e.useLocalStorage;this.csrfService=t,this.tokenServiceRequest=e,this.storage=o.default.getStorageByName(i?a.STORAGE_MODE.LocalStorage:a.STORAGE_MODE.SessionStorage)}return e.prototype.getTokenFields=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.scope,i=this.getTokenFromFragment();return i instanceof v.ModalSignInEvent||i instanceof c.FragmentException||i instanceof y.AuthorizationCode?i:i&&i.validate(t,r)?(i.fromFragment=!0,this.addTokenToStorage(i),i):this.getTokenFieldsFromStorage()},e.prototype.validateToken=function(){var e=this.getTokenFieldsFromStorage();return e?this.callValidateTokenApi(e.tokenValue,e.isGuestToken):Promise.reject(null)},e.prototype.getReleaseFlags=function(){var e=this.tokenServiceRequest,t=e.clientId,r=e.imsApis,i=this.getTokenFieldsFromStorage();return i?r.getReleaseFlags({token:i.tokenValue,client_id:t}):Promise.reject(null)},e.prototype.getDecodedReleaseFlags=function(){return this.getReleaseFlags().then((function(e){return A.decodeToBitstring(e.releaseFlags,!0)}))},e.prototype.callValidateTokenApi=function(e,t){var r=this;void 0===t&&(t=!1);var n=this.tokenServiceRequest,s=n.clientId,o=n.scope,a=n.imsApis,u={client_id:s,token:e,type:t?"at":void 0};return a.validateToken(u).then((function(t){g.default.info("validateToken response",t);var n=new l.TokenFields(i(i({},t),{tokenValue:e}),new Date(parseFloat(t.expires_at)));if(n.validate(s,o))return r.addTokenToStorage(n),Promise.resolve(n);throw new Error("could not validate tokenFields")})).catch((function(e){return g.default.error("validateToken response",e),e instanceof m.HttpErrorResponse||r.removeTokenFromLocalStorage(),Promise.reject(e)}))},e.prototype.getGuestToken=function(e,t){void 0===e&&(e={});var r=this.getTokenFields();return t.enableGuestAccounts&&(r instanceof c.FragmentException&&r.type===d.IFragmentExceptionType.LOGOUT&&t.enableGuestTokenForceRefresh||r instanceof l.TokenFields&&(null==r?void 0:r.isGuestToken)&&t.enableGuestTokenForceRefresh)?this.callRefreshToken(e):this.getTokenAndProfile(e)},e.prototype.getTokenFromFragment=function(e){var t=u.default.fragmentToObject(e);if(!t)return null;var r=t.access_token,s=t.scope,o=t.error,a=t.api,h=t.state,p=void 0===h?{}:h,f=t.expires_in,g=t.client_id,m=t.code,_=void 0===m?"":m,A=n(t,["access_token","scope","error","api","state","expires_in","client_id","code"]),P=p||{},S=P.imslibmodal,x=P.nonce;if(!0===S)return new v.ModalSignInEvent(x);if("logout"===a)return new c.FragmentException(d.IFragmentExceptionType.LOGOUT,"logout callback");if(!t.from_ims)return null;if(g!==this.tokenServiceRequest.clientId)return null;if(o)return new c.FragmentException(d.IFragmentExceptionType.FRAGMENT,o);if(!w.includes(a))return new c.FragmentException(d.IFragmentExceptionType.API_NOT_ALLOWED,"api should be authorize or check token and "+a+" is used");if(!this.csrfService.verify(x))return new c.FragmentException(d.IFragmentExceptionType.CSRF,"CSRF exception");if(_){var C=(new b.CodeChallenge).getVerifierByKey(x);if(!C)throw new Error("no verifier value has been found");return new y.AuthorizationCode(i(i({},t),{verifier:C}))}return r?new l.TokenFields({client_id:g,scope:s,tokenValue:r,valid:!0,state:p,other:A},new Date((new Date).getTime()+parseFloat(f))):null},e.prototype.getItemFromStorage=function(e){return this.storage.getItem(e)},e.prototype.getTokenFieldsFromStorage=function(e){void 0===e&&(e=!1);var t=this.tokenServiceRequest,r=t.clientId,i=t.scope,n=this.getAccessTokenKey(e),s=this.getItemFromStorage(n);if(!s)return null;var o=JSON.parse(s),a=o.expire?new Date(Date.parse(o.expire)):new Date(o.expiresAtMilliseconds),u=new l.TokenFields(o,a);return u.validate(r,i)?u:null},e.prototype.getAccessTokenKey=function(e){void 0===e&&(e=!1);var t=this.tokenServiceRequest,r=t.clientId,i=t.scope;return a.TOKEN_STORAGE_KEY+"/"+r+"/"+e+"/"+_.sortScopes(i)},e.prototype.addTokenToStorage=function(e){if(e){var t=e.isReauth(),r=this.getAccessTokenKey(t),n=i({},e);n.state={},n.other="{}";var s=JSON.stringify(n);this.storage.setItem(r,s)}},e.prototype.removeTokenFromLocalStorage=function(){var e=this.getAccessTokenKey();this.storage.removeItem(e)},e.prototype.removeReauthTokenFromLocalStorage=function(){var e=this.getAccessTokenKey(!0);this.storage.removeItem(e)},e.prototype.refreshToken=function(e){var t=this;void 0===e&&(e={});var r=this.tokenServiceRequest,s=r.clientId,o=r.imsApis,a=r.scope,l=this.getTokenFieldsFromStorage(),u=l?l.user_id:"";return o.checkToken({client_id:s,scope:a},e,u).then((function(e){if(!e)throw new Error("refresh token --\x3e no response");var r=e.access_token,s=e.expires_in,o=e.token_type,a=e.error,l=e.error_description,u=void 0===l?"":l,c=e.sid,d=n(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(a)throw new Error(a+" "+u);var h=Object.keys(d).length?d:null,p={token:r,expire:new Date(Date.now()+parseFloat(s)),token_type:o,sid:c},f=t.updateToken(p)||{},g={tokenInfo:i(i({},p),{impersonatorId:f.impersonatorId||"",isImpersonatedSession:f.isImpersonatedSession||!1,pbaSatisfiedPolicies:f.pbaSatisfiedPolicies||[],isGuestToken:f.isGuestToken,gse:f.gse}),profile:h};return Promise.resolve(g)})).catch((function(e){return void 0===e&&(e={}),e instanceof m.HttpErrorResponse||e instanceof p.RideException?Promise.reject(e):(t.removeTokenFromLocalStorage(),Promise.reject(new f.TokenExpiredException(e)))}))},e.prototype.switchProfile=function(e,t){var r=this;void 0===t&&(t={});var s=this.tokenServiceRequest,o=s.clientId,a=s.imsApis,l=s.scope;return a.switchProfile({client_id:o,scope:l},t,e).then((function(e){if(!e)throw new Error("refresh token --\x3e no response");var t=e.access_token,s=e.expires_in,o=e.token_type,a=e.error,l=e.error_description,u=void 0===l?"":l,c=e.sid,d=n(e,["access_token","expires_in","token_type","error","error_description","sid"]);if(a)throw new Error(a+" "+u);var h=Object.keys(d).length?d:null,p={token:t,expire:new Date(Date.now()+parseFloat(s)),token_type:o,sid:c},f=r.updateToken(p)||{},g={tokenInfo:i(i({},p),{impersonatorId:f.impersonatorId||"",isImpersonatedSession:f.isImpersonatedSession||!1}),profile:h};return Promise.resolve(g)})).catch((function(e){return void 0===e&&(e={}),Promise.reject(e)}))},e.prototype.callRefreshToken=function(e){return void 0===e&&(e={}),this.refreshToken(e).then((function(e){var t=e.tokenInfo,r=t.token,i=t.expire,n=e.profile,s=new l.TokenFields({valid:!0,tokenValue:r},i),o=new h.TokenProfileResponse(s,n);return Promise.resolve(o)})).catch((function(e){return Promise.reject(e)}))},e.prototype.updateToken=function(e){var t=e.token,r=e.expire,i=new l.TokenFields({tokenValue:t},r);return i?(i.tokenValue=t,this.addTokenToStorage(i),i):null},e.prototype.purge=function(){this.removeTokenFromLocalStorage(),this.removeReauthTokenFromLocalStorage()},e.prototype.setStandAloneToken=function(e){var t=e.token,r=e.sid,i=e.expirems,n=void 0===i?-1:i,s=this.tokenServiceRequest,o=s.clientId,a=s.scope,u=new Date((new Date).getTime()+n);if(!new l.TokenFields({valid:!0,tokenValue:t},u).validate(o,a))return!1;var c={expire:u,token:t,sid:r};return this.updateToken(c),!0},e.prototype.exchangeIjt=function(e){var t=this,r=this.tokenServiceRequest,i={client_id:r.clientId,scope:r.scope};return r.imsApis.exchangeIjt(i,e).then((function(e){var r=e.valid,i=e.access_token,n=e.expires_in,s=e.profile;if(!1===r)return Promise.reject(e);var o=new Date(Date.now()+1e3*parseFloat(n)),a=new l.TokenFields({valid:!0,tokenValue:i},o);t.addTokenToStorage(a);var u=new h.TokenProfileResponse(a,s);return Promise.resolve(u)}))},e}();t.TokenService=P},812732:(e,t,r)=>{var i=r(537592),n=r(626947).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,n)}},829405:(e,t,r)=>{var i=r(262535),n=r(927449);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:i?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},830382:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(843205);function n(e){return function(t){if(e){Array.isArray(e)||(e=[e]);for(const r of e)(0,i.A)(t,r)}}}},834601:(e,t,r)=>{var i=r(107647),n=r(172228),s=r(732725),o=i("unscopables"),a=Array.prototype;null==a[o]&&s.f(a,o,{configurable:!0,value:n(null)}),e.exports=function(e){a[o][e]=!0}},838110:(e,t,r)=>{var i=r(578887),n=r(658369),s=r(88717),o=r(555119),a=r(380936),l=r(42974),u=r(416625),c=r(333074).CONFIGURABLE,d=u.get,h=u.enforce,p=String(String).split("String");(e.exports=function(e,t,r,l){var u,d=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,g=!!l&&!!l.noTargetGet,m=l&&void 0!==l.name?l.name:t;n(r)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!s(r,"name")||c&&r.name!==m)&&o(r,"name",m),(u=h(r)).source||(u.source=p.join("string"==typeof m?m:""))),e!==i?(d?!g&&e[t]&&(f=!0):delete e[t],f?e[t]=r:o(e,t,r)):f?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return n(this)&&d(this).source||l(this)}))},840752:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i="GestureEvent"in window},843205:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const i=function(e,t){var r=function(e){return e.hasOwnProperty(t)?e.constructor.name:r(Object.getPrototypeOf(e))};return r(e.prototype)},n=function(e,t,r){let n;const s=Object.getOwnPropertyDescriptors(t.prototype);return r&&(n=new Set(r)),(()=>{const r=[];for(var o in s){var a=s[o];if(null!=n||"constructor"!==o)if(null==n||n.has(o)){if(null!=e.prototype[o])throw new Error(`Mixin method ${t.prototype.constructor?.name}.${o} hides ${i(e,o)}.${o}`);r.push(Object.defineProperty(e.prototype,o,a))}else r.push(void 0)}return r})()}},847769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(474521),n=r(447891),s=r(411010),o=function(){function e(){this.adobeIdThinData=null}return e.prototype.verify=function(e,t){void 0===t&&(t="");var r=e.status,i=e.data;if(!r)return new s.HttpErrorResponse({error:"networkError",message:i||""});if(401==r)return new s.HttpErrorResponse({error:"unauthorized"});var n=this.parseTokenResponseForRideErrors(i,t);return n||(409==r?i:429==r?new s.HttpErrorResponse({error:"rate_limited",retryAfter:i.retryAfter?parseInt(i.retryAfter):10}):r.toString().match(/5\d{2}/g)?new s.HttpErrorResponse({error:"server_error"}):null)},e.prototype.parseTokenResponseForRideErrors=function(e,t){if(!e)return null;var r=e.error,i=e.jump;if(!r)return null;if(!(0===r.indexOf("ride_")))return"token_expired"===r&&t.indexOf("check/v6/token")>=0?new n.RideException("ride_pba_idle_session","",!0):null;var s=this.addRedirectUriToJump(r,i);return new n.RideException(r,s)},e.prototype.addRedirectUriToJump=function(e,t){if(!t||"string"!=typeof t)return"";var r=t;this.adobeIdThinData||(this.adobeIdThinData=new i.AdobeIdThinData);var n=this.adobeIdThinData.computeRideRedirectUri(e);if(!n||0===n.length)return r;try{var s=new URL(r);return s.searchParams.append("redirect_uri",n),s.toString()}catch(e){return r}},e.prototype.isUnauthorizedException=function(e){var t=e.status;return 401===(void 0===t?0:t)},e}();t.default=new o},847924:(e,t)=>{"use strict";function r(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=r,t.merge=function e(t,i){if(null==t)return i;if(t===i)return t;if(!r(t))return t;var n=Object.assign({},t);return r(i)&&Object.keys(i).forEach((function(s){var o,a;r(i[s])?s in t?n[s]=e(t[s],i[s]):Object.assign(n,((o={})[s]=i[s],o)):Object.assign(n,((a={})[s]=i[s],a))})),n}},857005:(e,t,r)=>{var i=r(798793),n=r(459998),s=r(121570),o=function(e){return function(t,r,o){var a,l=i(t),u=s(l),c=n(o,u);if(e&&r!=r){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},863687:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.force="force",e.check="check"}(t.IReauth||(t.IReauth={}))},864113:(e,t,r)=>{"use strict";var i=r(912752),n=r(366740),s=r(563294),o=r(345654),a=i.aTypedArray,l=i.exportTypedArrayMethod,u=i.TYPED_ARRAY_CONSTRUCTOR,c=n(i.TypedArrayPrototype.sort);l("toSorted",(function(e){void 0!==e&&s(e);var t=a(this),r=o(t[u],t);return c(r,e)}),!0)},865556:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){void 0===e&&(e=!1),void 0===t&&(t=""),void 0===r&&(r=""),this.proxied=e,this.url=t,this.fallbackUrl=r}return e.computeEndpoint=function(t,i,n,s){var o,a;if(t){var l=n?e.THIRD_PARTY_DOMAINS_STAGE:e.THIRD_PARTY_DOMAINS_PROD;try{for(var u=r(Object.keys(l)),c=u.next();!c.done;c=u.next()){var d=c.value;if(i===d||i.endsWith("."+d))return new e(!0,l[d],s)}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}}return new e(!1,s)},e.prototype.shouldFallbackToAdobe=function(e){return!!this.proxied&&("feature_disabled"===e.error&&"cdsc"===e.error_description)},e.THIRD_PARTY_DOMAINS_PROD={"behance.net":"https://sso.behance.net"},e.THIRD_PARTY_DOMAINS_STAGE={"s2stagehance.com":"https://sso.s2stagehance.com"},e}();t.CheckTokenEndpoint=i},865584:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i=window},872636:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var i,n,s,o=r(529444),a=r(135708),l=r(355141),u=r(739506);const c=new(s=class e extends u.A{constructor(){super(),(0,o.A)(this,"_code",n,this),this._resolved=!1,e.readyJP=new Promise((e=>{this._readyResolve=e})),setTimeout((()=>{this._resolved||(this._resolved=!0,this._readyResolve())}),5e3)}get code(){return this._code}set code(e){this._code=e,null==e||this._resolved||(this._resolved=!0,this._readyResolve())}},s.readyJP=void 0,i=s,n=(0,a.A)(i.prototype,"_code",[l.A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i)},875472:(e,t,r)=>{"use strict";function i(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}r.d(t,{A:()=>i})},877276:(e,t,r)=>{"use strict";var i=r(697197)("%Object.defineProperty%",!0)||!1;if(i)try{i({},"a",{value:1})}catch(e){i=!1}e.exports=i},879979:(e,t,r)=>{var i=r(578887),n=r(658369),s=r(42974),o=i.WeakMap;e.exports=n(o)&&/native code/.test(s(o))},880594:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var i=r(481196),n=r(670734),s=r(891348),o=r(682826),a=r(215849),l=r(802104),u=r(224209),c=r(920343),d=r(547826),h=r(341857).A;const p=new n.A,f=e=>{const t=new Date,r=e-t;if(r<12e4){const e=864e5,i=t.getTime()+e-Math.max(0,r);return new Date(i)}return e};class g{static get cookieOptions(){return{path:"/",secure:!0,domain:window.location.hostname.replace(/^f\d+\./,""),sameSite:"lax"}}static setSignedIn(e,t){p.set("lrw_token",e,{expires:t,...this.cookieOptions})}static setSignedOut(){o.A.is_enabled("debug")&&console.error("lrw_token removed"),p.remove("lrw_token",this.cookieOptions)}constructor(){if(this.callbacks={},h.sdk||h.embed)g.readyJP=Promise.resolve(),this.readyOrRenderTimeoutDeferred=new s.A,this.readyOrRenderTimeoutDeferred.resolve();else{this.readyOrRenderTimeoutDeferred=new s.A,this.renderTimeout=!1,setTimeout((()=>{d.A.isReady||(this.renderTimeout=!0,this.readyOrRenderTimeoutDeferred.resolve())}),2e3);const{hostname:e}=window.location,t=document.documentElement.lang.replace("-","_"),{hostnames:r,scope:n}=l,{client_id:a,env:u}=r[e]||r.default;o.A.is_enabled("debug")&&console.log("init IMS",{client_id:a,env:u,locale:t});const c=!0===window.imsForceValidateToken,h={client_id:a,locale:t,scope:n,autoValidateToken:c,environment:u};d.A.setGetTokenMethod((()=>this.getToken())),g.readyJP=new Promise(((e,r)=>{const n={...h,onReady:()=>{if(s.isSignedInUser()){const{token:e,expire:t}=s.getAccessToken();if(o.A.is_enabled("imsb_4111153_mitigation")?g.setSignedIn(e,f(t)):g.setSignedIn(e,t),!this.isSignedIn()&&"/cookies"!==window.location.pathname)return void(window.location.href="/cookies")}else g.setSignedOut();o.A.is_enabled("debug_delay_ims_ready")?setTimeout((()=>e(s)),5e3):e(s)},onAccessToken:e=>{const{token:t,expire:r}=e;o.A.is_enabled("imsb_4111153_mitigation")?g.setSignedIn(t,f(r)):g.setSignedIn(t,r)},onReauthAccessToken:e=>{const{token:t,expire:r}=e;g.setSignedIn(t,r)},onAccessTokenHasExpired:function(){console.error("login expired, setting state to signed out"),g.setSignedOut()},onError:(e,t)=>{console.error("login status error:",e,t),g.setSignedOut(),r()}},s=new i.AdobeIMS(n);this.adobeid=n,window.adobeid={client_id:a,locale:t},this.adobeIMS=s,s.initialize()})),g.readyJP.then((()=>{this.renderTimeout||this.readyOrRenderTimeoutDeferred.resolve(),d.A.setAuthReady()})).catch((()=>{this.renderTimeout||this.readyOrRenderTimeoutDeferred.reject()}))}}get readyJP(){return g.readyJP}get readyOrRenderTimeoutJP(){return this.readyOrRenderTimeoutDeferred.promise}set locale(e){this.adobeid?this.adobeid.locale=e.replace("-","_"):window?.adobeid&&(window.adobeid.locale=e.replace("-","_"))}getFromConfigGlobal(){const{hostnames:e}=l,{hostname:t}=window.location;return e[t]||e.default}on(e,t){var r,i;null!==(i=(r=this.callbacks)[e])&&void 0!==i||(r[e]=[]),this.callbacks[e].push(t)}isSignedIn(){return null!=this.getToken()}getSigninRedirectUrl(e){const t=(0,c.A)(e),{hostname:r,href:i}=window.location;return`https://${r}/signin?redirect=${encodeURIComponent(null!=t?t:i)}`}getDCPContextId(){return u.A.isProd?"v:2,s,828d9a40-9228-11ef-b8ef-dff7d7be29ed":"v:2,s,81a8df90-9228-11ef-80a0-098f23670457"}signIn(e){a.A.flush(),this.adobeIMS.signIn({redirect_uri:this.getSigninRedirectUrl(e),dctx_id:this.getDCPContextId()})}signOut(e){this.signingOut||(a.A.flush(),this.signingOut=!0,g.setSignedOut(),this.callbacks.signOut?.forEach((e=>e())),e=(0,c.A)(e),o.A.is_enabled("debug")&&console.error("ImsUtils.signout called"),this.adobeIMS.signOut({redirect_uri:e}))}signUp(e){a.A.flush(),null==e?this.adobeIMS.signUp({el:!0,dctx_id:this.getDCPContextId()}):(e=(0,c.A)(e),this.adobeIMS.signUp({redirect_uri:this.getSigninRedirectUrl(e),el:!0,dctx_id:this.getDCPContextId()}))}socialSignIn(e,t){a.A.flush(),null==t?this.adobeIMS.signInWithSocialProvider(e):(t=(0,c.A)(t),this.adobeIMS.signInWithSocialProvider(e,{redirect_uri:this.getSigninRedirectUrl(t)}))}async socialNativeLogin(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"google";const{client_id_yolo:s}=this.getFromConfigGlobal(),{environment:a,locale:l,scope:u}=this.adobeid,d=null!==(r=(0,c.A)(t))&&void 0!==r?r:window.location.href,h={client_id:s,environment:a,locale:l,scope:u,redirect_url:d};o.A.is_enabled("debug")&&console.log("socialHeadlessSignIn yoloData",h);const p=new i.AdobeIMS(h);await p.initialize();try{o.A.is_enabled("debug")&&console.log("socialHeadlessSignIn",e),await p.socialHeadlessSignIn({client_id:s,scope:u,provider_id:n,idp_token:e,accepted_tou_list:["ADOBE_MASTER"]}),await this.adobeIMS.refreshToken(),window.location.assign(d)}catch(t){console.error("socialHeadlessSignIn error",t),"ride_AdobeID_social"===t.code&&this.socialNativeAuthorize(e,d,n)}}socialNativeAuthorize(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"google";const{client_id_yolo:i,ims_url:n}=this.getFromConfigGlobal(),{locale:s,scope:o}=this.adobeid,a=(e,t)=>{const r=document.createElement("input");return r.name=e,r.value=t,r.type="hidden",r},l=document.createElement("form");l.action=`${n}/ims/authorize/v3`,l.method="POST",l.hidden=!0,l.appendChild(a("idp_flow","social.native")),l.appendChild(a("provider_id",r)),l.appendChild(a("idp_token",e)),l.appendChild(a("client_id",i)),l.appendChild(a("scope",o)),l.appendChild(a("response_type","token")),l.appendChild(a("redirect_uri",t)),l.appendChild(a("hashed_device_id",crypto.randomUUID())),l.appendChild(a("locale",s)),document.body.appendChild(l),l.submit()}getToken(){return p.get("lrw_token")}async getTokenJP(){if(await this.readyJP,this.adobeIMS.isSignedInUser())return this.getToken();throw new Error("Cannot get token for unauthenticated user")}async getProfileJP(){if(await this.readyJP,!this.adobeIMS.isSignedInUser())throw new Error("Cannot get profile for unauthenticated user");try{return await this.adobeIMS.getProfile()}catch(e){throw console.error("getProfile error",e),e}}}g.readyJP=void 0;const m=new g},887852:e=>{e.exports={supported:["cs-CZ","da-DK","de-DE","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","hi-IN","hu-HU","id-ID","it-IT","ja-JP","ko-KR","nb-NO","nl-NL","pl-PL","pt-BR","ru-RU","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-TW"],display_names:{"en-US":"English, US","en-GB":"English, UK","ja-JP":"","zh-CN":"","zh-TW":"","de-DE":"Deutsch","pt-BR":"Portugus, Brasil","es-ES":"Espaol, Espaa","es-MX":"Espaol, Mxico","fr-CA":"Franais, Canada","fr-FR":"Franais, France","id-ID":"Bahasa Indonesia","it-IT":"Italiano","ko-KR":"","ru-RU":"","nl-NL":"Nederlands","sv-SE":"Svenska","th-TH":"","uk-UA":"","hi-IN":"","hu-HU":"Magyar","cs-CZ":"etina","da-DK":"Dansk","fi-FI":"Suomi","nb-NO":"Norsk","pl-PL":"Polski","tr-TR":"Trke","vi-VN":"Ting Vit","zz-ZZ":"Mock Test"},urls:{ad_choices_url:"https://www.adobe.com/${adobecom_country_fragment}privacy/opt-out.html#interest-based-ads",privacy_url:"http://www.adobe.com/${adobecom_country_fragment}privacy.html",terms_url:"http://www.adobe.com/${adobecom_country_fragment}legal/terms.html",privacy_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}privacy/policy-linkfree.html",terms_url_for_shares:"http://www.adobe.com/${adobecom_country_fragment}legal/terms.html",support_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom-cc/web/user-guide.html",cpra_personal_info_url:"https://www.adobe.com/privacy/location-specific-notice.html",bonanza_feedback_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom-cc/using/in-app-feedback-program.html",signup_url:{locales:{"zh-CN":"https://www.adobe.com/creativecloud/photography.html",default:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography.html"}},renew_url:"https://account.adobe.com?promoid=2SLRC4PQ&mv=other",renew_stage_url:"https://stage.account.adobe.com?promoid=2SLRC4PQ&mv=other",subscribe_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=2NVQC8FR&mv=other",upgrade_storage_url:"http://www.adobe.com/go/lrcc_upgrade",hdr_blog_max23_url:"http://www.adobe.com/go/hdr_explained",stage_account_url:"https://stage.account.adobe.com",download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?locale=${locale}",welcome_download_lightroom_url:"https://creative.adobe.com/products/download/lightroom?sdid=5F1G8NTM&mv=other&locale=${locale}",welcome_to_lightroom_try_for_free_url:"https://creative.adobe.com/products/download/lightroom?promoid=Z2G1FY7X&mv=other&locale=${locale}",pricing_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=XFWLHGM1&mv=other&locale=${locale}",pricing_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=D4P81RPV&mv=other&locale=${locale}",pricing_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DZTGZWKM&mv=other&locale=${locale}",pricing_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DW3G119N&mv=other&locale=${locale}",plans_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=VKW3KGR6&mv=other",plans_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FR7NZ55F&mv=other&locale=${locale}",plans_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DRCF151P&mv=other&locale=${locale}",plans_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FHRLZDMH&mv=other&locale=${locale}",trial_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=X2PHHV1S&mv=other",trial_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=D8F91MYT&mv=other&locale=${locale}",trial_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DD5B1J7S&mv=other&locale=${locale}",trial_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=DMMD18RQ&mv=other&locale=${locale}",trial_header_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=F89JZN3K&mv=other&locale=${locale}",trial_header_a_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FVYPZ1FD&mv=other&locale=${locale}",trial_header_b_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=FZPQYWPC&mv=other&locale=${locale}",trial_header_c_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=G4FRYRYB&mv=other&locale=${locale}",buy_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=F4KHZRTL&mv=other&locale=${locale}",buy_a_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=CZY71WFW&mv=other&locale=${locale}",buy_b_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FD1KZJCJ&mv=other&locale=${locale}",buy_c_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=FMHMZ8WG&mv=other&locale=${locale}",lrmobile_academy_branch_url:"https://lightroom.app.link/friy7F70Xcb",lrmobile_landing_branch_url:"https://lightroom.app.link/OxxjkVP7ERb",lrmobile_branch_qrcode_url:"https://lightroom.app.link/TSsswqZnQxb",retired_trial_6_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LLVYT9J4&mv=other&locale=${locale}",retired_trial_7_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop-lightroom/compare-plans.html?promoid=LVC1T222&mv=other&locale=${locale}",retired_buy_1_url:"https://www.adobe.com/${adobecom_country_fragment}creativecloud/photography/compare-plans.html?promoid=DHWC1DHR&mv=other&locale=${locale}",ccp_help_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/how-to/get-started-photography.html",learn_more_url:"http://www.adobe.com/${adobecom_country_fragment}products/lightroom-mobile.html",lrmobile_iphone_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id878783582?ls=1&mt=8",lrmobile_ipad_url:"https://itunes.apple.com/${country_code_downcase}/app/adobe-lightroom/id804177739?ls=1&mt=8",lrmobile_android_url:"https://play.google.com/store/apps/details?id=com.adobe.lrmobile",photoshop_url:"https://www.adobe.com/${adobecom_country_fragment}products/photoshop.html",support_file_sync_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/kb/sync-different-lightroom-desktop-catalog-with-mobile.html",support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html",lr_support_fileformats_url:"https://helpx.adobe.com/${adobecom_country_fragment}lightroom/help/supported-file-formats.html",gen_ai_guidelines_url:"https://www.adobe.com/go/adobe-gen-ai-user-guidelines${go_url_country_code}",illegal_content_form_url:"https://survey.adobe.com/jfe/form/SV_000EM4ygC3tixLg"},adobecom_language_codes:{"bg-BG":"bg","cs-CZ":"cz","da-DK":"dk","de-AT":"at","de-CH":"ch_de","de-DE":"de","de-LU":"lu_de","en-AU":"au","en-BE":"be_en","en-CA":"ca","en-CY":"cy_en","en-GB":"uk","en-GR":"gr_en","en-HK":"hk_en","en-IE":"ie","en-IL":"il_en","en-IN":"in","en-LU":"lu_en","en-MT":"mt","en-NZ":"nz","en-sea":"sea","en-UK":"uk","en-US":null,"es-ES":"es","es-LA":"la","es-MX":"mx","et-EE":"ee","fi-FI":"fi","fr-BE":"be_fr","fr-CA":"ca_fr","fr-CH":"ch_fr","fr-FR":"fr","fr-LU":"lu_fr","he-IL":"il_he","hi-IN":"in_hi","hu-HU":"hu","it-CH":"ch_it","id-ID":"sea","it-IT":"it","ja-JP":"jp","ko-KR":"kr","lt-LT":"lt","lv-LV":"lv","nb-NO":"no","nl-BE":"be_nl","nl-NL":"nl","pl-PL":"pl","pt-BR":"br","pt-PT":"pt","ro-RO":"ro","ru-RU":"ru","sk-SK":"sk","sl-SI":"si","sv-SE":"se","th-TH":"sea","tr-TR":"tr","uk-UA":"ua","vi-VN":"sea","zh-CN":"cn","zh-HK":"hk_zh","zh-TW":"tw","zz-ZZ":null},go_url_country_code:{"ar-AE":"ae","bg-BG":"bg","pt-BR":"br","fr-CA":"fr","en-CA":"ca","en-GB":"gb","zh-CN":"cn","cy-GB":"cy","cs-CZ":"cz","de-DE":"de","da-DK":"dk","et-EE":"ee","es-ES":"es","fi-FI":"fi","fr-FR":"fr","el-GR":"gr","hr-HR":"hr","hu-HU":"hu","id-ID":"id","he-IL":"il","it-IT":"it","ja-JP":"jp","ko-KR":"kr","kk-KZ":"kz","lt-LT":"lt","lv-LV":"lv","es-MX":"mx","ms-MY":"my","nl-NL":"nl","nb-NO":"no","pl-PL":"pl","ro-RO":"ro","ru-RU":"ru","sr-RS":"rs","sv-SE":"se","sk-SK":"sk","sl-SI":"si","th-TH":"th","tr-TR":"tr","zh-TW":"tw","uk-UA":"ua","vi-VN":"vn"}}},888281:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const i=/\+/g,n={parsePathFromUrl:e=>e.split("#")[0].split("?")[0],parseQueryFromUrl(e){let t=e.split("?")[1];return null==t?{}:(t=t.split("#")[0],this.parseQuery(t))},parseQuery(e){if(0===(null!=e?e:"").length)return{};const t={},r=e.split("&");for(var n of r){var s=n.split("=");if(1===s.length)t[n]="";else{if(2!==s.length)continue;var o=decodeURIComponent(s[1].replace(i," "));t[s[0]]=o}}return t}}},889387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(122450),n=r(865556),s=function(){function e(){this.baseUrlAdobe="",this.baseUrlServices="",this.checkTokenEndpoint=new n.CheckTokenEndpoint,this.jslibver="v2-v0.42.0-17-gf28592f"}return e.prototype.loadEnvironment=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r="");var s=e===i.IEnvironment.STAGE;s?(this.baseUrlAdobe="https://ims-na1-stg1.adobelogin.com",this.baseUrlServices="https://adobeid-na1-stg1.services.adobe.com"):(this.baseUrlAdobe="https://ims-na1.adobelogin.com",this.baseUrlServices="https://adobeid-na1.services.adobe.com"),this.checkTokenEndpoint=n.CheckTokenEndpoint.computeEndpoint(t,r,s,this.baseUrlServices)},e}();t.default=new s},891348:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var i=r(742623);class n{constructor(){this.promise=new i.A(((e,t)=>this._deferredApi={resolve:e,reject:t}))}resolve(e){this._deferredApi.resolve(e)}reject(e){this._deferredApi.reject(e)}}},894064:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},895545:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!r.call({1:2},1);t.f=n?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},900400:(e,t,r)=>{"use strict";function i(e,t,r){"function"==typeof r.get?r.get=function(){throw new Error(`Abstract getter ${t} called on ${e.constructor.name}`)}:"function"==typeof r.set?r.set=function(){throw new Error(`Abstract setter ${t} called on ${e.constructor.name}`)}:(r.writable=!0,r.value=function(){throw new Error(`Abstract method ${t} called on ${e.constructor.name}`)})}r.d(t,{A:()=>i})},904919:(e,t,r)=>{"use strict";var i=r(697197)("%Object.getOwnPropertyDescriptor%",!0);if(i)try{i([],"length")}catch(e){i=null}e.exports=i},906161:function(e,t,r){"use strict";r(315715);var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},n=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/,o=["https://auth.services.adobe.com","https://auth-stg1.services.adobe.com","https://localhost.corp.adobe.com:9000"],a=function(){var e=this;this.windowObjectReference=null,this.previousUrl="",this.openSignInWindow=function(t,r,i,n){e.onProcessLocation=n,e.allowOrigin=i.allowOrigin,e.timerId&&clearInterval(e.timerId),window.removeEventListener("message",e.receiveMessage),window.addEventListener("message",e.receiveMessage),e.broadcastChannel&&e.broadcastChannel.close(),e.broadcastChannel=new BroadcastChannel("imslib"),e.broadcastChannel.onmessage=e.receiveMessage;var s="popup=yes, width="+i.width+", height="+i.height+", top="+i.top+", left="+i.left;!e.windowObjectReference||e.windowObjectReference&&e.windowObjectReference.closed?e.windowObjectReference=window.open(t,i.title,s):e.previousUrl!==t?(e.windowObjectReference=window.open(t,i.title,s),e.windowObjectReference&&e.windowObjectReference.focus()):e.windowObjectReference.focus(),e.previousUrl=t},this.receiveMessage=function(t){if(n(o,[e.allowOrigin]).includes(t.origin)){try{if(!s.test(t.data))return void console.warn("refused to receive message containing unknown data format",t.data)}catch(e){return void console.error(e)}e.broadcastChannel&&e.broadcastChannel.close(),e.onProcessLocation&&e.onProcessLocation(t.data)}else console.warn("refused to receive message from origin not whitelisted",t.origin)}};t.default=new a},912752:(e,t,r)=>{"use strict";var i,n,s,o=r(894064),a=r(950176),l=r(578887),u=r(658369),c=r(178326),d=r(88717),h=r(162247),p=r(636763),f=r(555119),g=r(838110),m=r(732725).f,y=r(984557),v=r(297191),b=r(246627),_=r(107647),A=r(579764),w=l.Int8Array,P=w&&w.prototype,S=l.Uint8ClampedArray,x=S&&S.prototype,C=w&&v(w),O=P&&v(P),k=Object.prototype,T=l.TypeError,E=_("toStringTag"),I=A("TYPED_ARRAY_TAG"),D=A("TYPED_ARRAY_CONSTRUCTOR"),R=o&&!!b&&"Opera"!==h(l.opera),j=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},L=function(e){if(!c(e))return!1;var t=h(e);return d(F,t)||d(N,t)};for(i in F)(s=(n=l[i])&&n.prototype)?f(s,D,n):R=!1;for(i in N)(s=(n=l[i])&&n.prototype)&&f(s,D,n);if((!R||!u(C)||C===Function.prototype)&&(C=function(){throw T("Incorrect invocation")},R))for(i in F)l[i]&&b(l[i],C);if((!R||!O||O===k)&&(O=C.prototype,R))for(i in F)l[i]&&b(l[i].prototype,O);if(R&&v(x)!==O&&b(x,O),a&&!d(O,E))for(i in j=!0,m(O,E,{get:function(){return c(this)?this[I]:void 0}}),F)l[i]&&f(l[i],I,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:R,TYPED_ARRAY_CONSTRUCTOR:D,TYPED_ARRAY_TAG:j&&I,aTypedArray:function(e){if(L(e))return e;throw T("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!b||y(C,e)))return e;throw T(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,i){if(a){if(r)for(var n in F){var s=l[n];if(s&&d(s.prototype,e))try{delete s.prototype[e]}catch(r){try{s.prototype[e]=t}catch(e){}}}O[e]&&!r||g(O,e,r?t:R&&P[e]||t,i)}},exportTypedArrayStaticMethod:function(e,t,r){var i,n;if(a){if(b){if(r)for(i in F)if((n=l[i])&&d(n,e))try{delete n[e]}catch(e){}if(C[e]&&!r)return;try{return g(C,e,r?t:R&&C[e]||t)}catch(e){}}for(i in F)!(n=l[i])||n[e]&&!r||g(n,e,t)}},isView:function(e){if(!c(e))return!1;var t=h(e);return"DataView"===t||d(F,t)||d(N,t)},isTypedArray:L,TypedArray:C,TypedArrayPrototype:O}},912977:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var i,n=r(135708),s=r(63944),o=r(888281),a=r(739506),l=r(191448),u=o.A.parseQueryFromUrl(window.location.href),c=u.session,d=u.count||0;const h=new(i=class extends a.A{constructor(){super(),this.reset()}reset(){this.messages=[],this.timings=[],this.collectors=[],this.attributes={browseCount:d}}addCollector(e){for(const[t,r]of Object.entries(this.attributes))e.setAttribute(t,r);this.collectors.push(e)}_callCollectorMethods(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this.collectors.forEach((t=>t[e](...r)))}setAttribute(e,t){this.attributes[e]!==t&&(this._callCollectorMethods("setAttribute",e,t),this.attributes[e]=t)}noticeError(e){e||(e=new Error("Unknown error")),this._callCollectorMethods("noticeError",e)}report(e,t){this._callCollectorMethods("report",e,t)}reportApiCall(e,t){this._callCollectorMethods("reportApiCall",e,t)}beginTiming(e){this.timings[e]=performance.now()}reportWithTiming(e,t){var r=this.timings[e];if(r){var i=performance.now(),n=i-r;this._callCollectorMethods("reportTimed",e,r,i,n,t),delete this.timings[e]}else this.report(e,t)}get sessionGuid(){return c||this.generateGUID()}generateGUID(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}getUserGuidP(e){if(!this.guidPromise){let t=`${"prod"===e.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io"}/v2/accounts/00000000000000000000000000000000`;this.guidPromise=l.A.getOzUrlP(t).then((e=>`${e.responseObject.wcd_guid}@AdobeID`)).catch((e=>"UnknownUserGuid"))}return this.guidPromise}},(0,n.A)(i.prototype,"sessionGuid",[s.A],Object.getOwnPropertyDescriptor(i.prototype,"sessionGuid"),i.prototype),i)},914047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.token="token",e.code="code"}(t.IGrantTypes||(t.IGrantTypes={}))},916929:(e,t,r)=>{var i=r(727691);e.exports=i("document","documentElement")},920343:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){const r=e instanceof URL?e:new URL(e,window.location.href);return Object.entries(t).forEach((e=>{let[t,i]=e;r.searchParams.set(t,i)})),r.toString()}}},922583:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(139573)),s=["keyup","mousemove"],o=function(){function e(){var e=this;this.lastUserInteraction=Date.now(),this.userActive=!1,this.userInteractionHandler=function(){e.lastUserInteraction=Date.now(),e.userActive=!0},this.initializeDomEvents=function(){s.forEach((function(t){return window.addEventListener(t,e.userInteractionHandler)}))},this.clearDomEvents=function(){s.forEach((function(t){return window.removeEventListener(t,e.userInteractionHandler)}))}}return e.prototype.startAutoRefreshFlow=function(e){var t,r=this;if(e&&e.expire&&e.refreshTokenMethod){this.refreshParameters=e,this.refreshTimerId&&(n.default.info("Auto-refresh timer already set, clearing"),clearTimeout(this.refreshTimerId)),this.clearDomEvents(),this.initializeDomEvents();var i=this.fromNowToNMinutesBeforeDate(null===(t=this.refreshParameters)||void 0===t?void 0:t.expire,1);n.default.info("Auto-refresh timer will run after (seconds)",i/1e3),this.refreshTimerId=setTimeout((function(){var e;if(r.userActive){var t=Math.floor((Date.now()-r.lastUserInteraction)/1e3);null===(e=r.refreshParameters)||void 0===e||e.refreshTokenMethod({userInactiveSince:t},!0),n.default.info("Auto-refresh performed, user was inactive for (seconds)",t)}else n.default.info("Auto-refresh skipped, user was never active")}),i)}else n.default.info("Won't schedule token auto-refresh",!e,!e.expire,!e.refreshTokenMethod)},e.prototype.fromNowToNMinutesBeforeDate=function(e,t){var r=e.getTime()-Date.now()-6e4*t;return r<=0?6e4*t:r},e}();t.default=new o},923015:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(215849),n=r(586564),s=r(682826);const o=1e4;async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s.A.is_enabled("automation"))return await new Promise(((r,a)=>{const l=!(!n.A.iOS&&!n.A.android);let u=!!s.A.is_enabled("debug_target_timeout");setTimeout((()=>{u&&!s.A.is_enabled("debug_target_timeout")||(r(),u=!0,console.error("target initialization timeout error"),i.A.reportFailure("targetTimeoutFailure"))}),o);const c=t=>{if(t.detail.error)u||(s.A.is_enabled("debug")&&console.log("Target offer failed to load, resolving without a variant"),r(),u=!0);else{var i;const n=t.detail.result,o=(null!==(i=n?.decisions)&&void 0!==i?i:[]).filter((t=>t.scope===e))[0],a=o?.items?.at(0)?.data?.content?.variant;s.A.is_enabled("debug")&&console.log(`Target getOffer ${e} success, variant: ${a}, response:`,n),u||(null!=a?r(a):r(),u=!0),window.removeEventListener("alloy_propositionFetch",c),window._satellite.track("propositionDisplay",n.propositions)}};window.addEventListener("alloy_propositionFetch",c),window._satellite.track("propositionFetch",{data:{mobile:l,...t},decisionScopes:[e]})}))}},927449:(e,t,r)=>{var i=r(578887),n=r(380936),s="__core-js_shared__",o=i[s]||n(s,{});e.exports=o},928490:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},i(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(63582),a=r(531107),l=r(947492),u=r(863687),c=r(914047),d=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this,t)||this;r.onAccessTokenHasExpired=null,r.onAccessToken=null,r.onReauthAccessToken=null,r.onError=null,r.handlers={triggerOnAccessToken:function(e){r.onAccessToken&&r.onAccessToken(e)},triggerOnReauthAccessToken:function(e){r.onReauthAccessToken&&r.onReauthAccessToken(e)},triggerOnAccessTokenHasExpired:function(){r.onAccessTokenHasExpired&&r.onAccessTokenHasExpired()},triggerOnReady:function(e){void 0===e&&(e=null),r.onReady&&r.onReady(e)},triggerOnError:function(e,t){r.onError&&r.onError(e,t)}};var i=t||window[o.AdobeIdKey];if(!i||!i.client_id)throw new Error("Please provide required adobeId, client_id information");var n=i.standalone,s=i.autoValidateToken,u=i.modalSettings,c=void 0===u?{}:u,d=i.modalMode,h=void 0!==d&&d,p=i.onAccessToken,f=i.onReauthAccessToken,g=i.onAccessTokenHasExpired,m=i.onReady,y=i.onError,v=i.overrideErrorHandler,b=i.onModalModeSignInComplete,_=i.alwaysRemoveTokenFromUrl,A=i.enableGuestAccounts,w=i.enableGuestTokenForceRefresh;return n&&n.token&&(r.standalone=new l.StandaloneToken(n)),r.modalSettings=new a.PopupSettings(c),r.modalMode=h,r.autoValidateToken=!!s,r.onAccessToken=p||null,r.onReauthAccessToken=f||null,r.onAccessTokenHasExpired=g||null,r.onReady=m||null,r.onError=y||null,r.overrideErrorHandler=v,r.onModalModeSignInComplete=b,r.alwaysRemoveTokenFromUrl=_,r.enableGuestAccounts=!!A,r.enableGuestTokenForceRefresh=!!w,r}return n(t,e),t.prototype.createSocialProviderRedirectRequest=function(e,t,r,i,n){void 0===n&&(n=c.IGrantTypes.token);var o={idp_flow:"social.deep_link.web",provider_id:e},a=s(s({},t),o);return this.createRedirectRequest(a,r,i,n)},t.prototype.createReAuthenticateRedirectRequest=function(e,t,r,i,n){void 0===i&&(i=u.IReauth.check),void 0===n&&(n=c.IGrantTypes.token);var o={reauth:i},a=s(s({},e),o);return this.createRedirectRequest(a,t,r,n)},t.prototype.createSignUpRedirectRequest=function(e,t,r,i){void 0===i&&(i=c.IGrantTypes.token);var n=s(s({},e),{idp_flow:"create_account"});return this.createRedirectRequest(n,t,r,i)},t}(r(474521).AdobeIdThinData);t.AdobeIdData=d},938327:(e,t,r)=>{"use strict";var i=r(652896),n=r(697197),s=r(619766),o=r(512656),a=n("%Function.prototype.apply%"),l=n("%Function.prototype.call%"),u=n("%Reflect.apply%",!0)||i.call(l,a),c=r(877276),d=n("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new o("a function is required");var t=u(i,l,arguments);return s(t,1+d(0,e.length-(arguments.length-1)),!0)};var h=function(){return u(i,a,arguments)};c?c(e.exports,"apply",{value:h}):e.exports.apply=h},945618:(e,t,r)=>{var i=r(950176),n=r(406227);e.exports=i&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},946723:(e,t,r)=>{"use strict";r(341891);var i=r(151185);const n=new class{constructor(){this.standAloneMode="stand-alone",this.embeddedMode="embedded",this.returnAfterSingleSelect=!1,this.singleSelect=!1,this.showConnectedProjects=!1,this.publishProjects=!1,this.ignorePublishedProjects=!1,this.softImportLimit=1/0,this.allowImportEntireAlbum=!1,this.headerStyle="full",this.mode=this.standAloneMode,this.externalUrlHandler=void 0,this.initialSearch=void 0,this.browseOnlyCollections=!1,this.showConnectedProjects=!1,this.browseProjectId=void 0,this.browseAlbums=!1,this.preferredLanguage=void 0,this.colorStop="dark"}};function s(e,t){return e.createElement(t)}function o(e,t){e.appendChild(t)}var a=r(507521),l=r.n(a),u=r(135708);class c{constructor(){this._index=[],this._regexps=[]}register(e,t){if(e instanceof RegExp)this._regexps.push({name:e,fn:t});else if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r)this.register(e[r],t);else this._index["_"+e]=t}get(e){for(var t=this._regexps,r=0,i=t.length;r<i;++r){var n=t[r];if(n.name.test(e))return n.fn}return this._index["_"+e]}}var d=r(739506);class h extends d.A{constructor(){super(...arguments),this.exports=new c,this.imports=new c,this.templateImports=new c}getImport(e){return this.imports.get(e)}registerImport(e,t){this.imports.register(e,t)}getTemplateImport(e){return this.templateImports.get(e)}registerTemplateImport(e,t){this.templateImports.register(e,t)}}const p=new h;var f=r(157688);const g=f.A.makeClassDecorator((function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:p).exports.register(t,e),Object.defineProperty(e.prototype,"_export",{value:t,enumerable:!1,configurable:!0})}));var m=r(631811),y=r(432203);const v=f.A.makePropertyDecorator(((e,t,r,i,n)=>{"number"==typeof i?(n=i,i=y.A):(i||(i=y.A),"number"!=typeof n&&(n=0));let s=f.A.getInitialValue(r),o="_task_"+t;delete r.value,delete r.writable,r.get=function(){if(e===this)return s;let r,a=this[o];if(a)return a;let l=()=>{this.isDisposed||s.apply(this,r)};return a=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];r=t,i.push(l,n)},a.cancel=()=>{i.remove(l)},Object.defineProperty(this,o,{value:a,enumerable:!1}),Object.defineProperty(this,t,{value:a,enumerable:!1}),a}}));var b=r(900400);r(528510),r(317779),r(8534),r(864113),r(380190);const _={};class A extends d.A{constructor(){super(),Object.defineProperty(this,"_id",{enumerable:!1,value:_.id});var e=_.props;if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=this._port.importValue(e[t]))}dispose(){super.dispose(),this._port.disposeImport(this)}callMethod(e,t){this._port.callMethod(this,e,t)}callMethodWithPromise(e,t){return this._port.callMethodWithPromise(this,e,t)}}class w extends Error{constructor(e,t){super(e),this.remoteStack=t}toString(){return this.message+"\n"+this.remoteStack}}var P=r(573451),S=r(865584);class x{constructor(e){this.value=e}}var C,O,k=r(489756),T=r.n(k),E=r(171354),I=r.n(E);let D=g("Port")((O=class extends d.A{constructor(e){super(),this.exportedValues={},this.exportedTypes={},this.importedValues={},this.pendingResults={},this.pendingMessages=[],this.importedTypes={},this.register=e,this.loaded=new Promise(((e,t)=>this._loadedPromise={resolve:e,reject:t}))}dispose(){var e=this.importedValues;if(this.importedValues=null,e)for(let t in e){e[t].dispose()}if(this.exportedValues)for(let e in this.exportedValues){const t=this.exportedValues[e];t===this||t.selfManaged||t.dispose()}super.dispose()}postMessages(){}handleMessages(e){this.isDisposed||e&&e.forEach(this.handleMessage)}postMessage(e,t){this.pendingMessages.push({type:e,values:t}),this.flushMessagesSoon()}flushMessagesSoon(){var e=this.pendingMessages;this.pendingMessages=[],this.postMessages(e)}handleMessage(e){let{type:t,values:r}=e;switch(t){case"dispose":this.disposeExport(r._id);break;case"callMethod":this.handleCallMethod(r);break;case"result":this.handleResult(r);break;case"error":this.handleError(r);break;case"type":this.handleType(r);break;case"init":this.handleInit(r)}}postInit(){this._postInitPosted||(this._postInitPosted=!0,this.postMessage("init",{workerId:this.exportValue(this)}))}handleInit(e){let{workerId:t}=e;this.main=this.importValue(t),this.postInit(),this._loadedPromise.resolve(this)}handleType(e){let{className:t,methods:r,selfManaged:i}=e;this.getImportType(t,r,i)}getImportType(e,t,r){if(this.importedTypes.hasOwnProperty(e))return this.importedTypes[e];var i=this.register.getImport(e);if(i){var n=i;i=class extends n{}}else{var s=e.split("::"),o=this.register.getTemplateImport(s[0]);o?(i=o(s[1],e),Object.defineProperty(i.prototype,"_import",{enumerable:!1,value:e})):(i=class extends A{},this.register.registerImport(e,i),Object.defineProperty(i.prototype,"_import",{enumerable:!1,value:e}),Object.defineProperty(i.prototype,"_interceptor",{enumerable:!1,value:i}))}if(t&&t.length){var a=i.prototype._interceptor;if(!a)throw new Error("No @Import decorator found for "+e);t.forEach((e=>{let{name:t}=e;Object.defineProperty(a.prototype,t+"Async",{enumerable:!1,value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];this.callMethod(t,r)},configurable:!0}),Object.defineProperty(a.prototype,t,{enumerable:!1,value:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.callMethodWithPromise(t,r)},configurable:!0})})),Object.defineProperty(a.prototype,"_export",{enumerable:!1,value:e,configurable:!0}),Object.defineProperty(a.prototype,"_publicMethods",{enumerable:!1,value:t,configurable:!0})}return Object.defineProperty(i.prototype,"selfManaged",{enumerable:!1,value:r}),Object.defineProperty(i.prototype,"_port",{enumerable:!1,value:this}),this.importedTypes[e]=i,i}handleCallMethod(e){let{thisId:t,method:r,args:i,responseId:n}=e;var s=this.importValue(t);if(!s)throw new Error("Invalid this object for call method call.");var o,a=i&&this.importValue(i)||[];try{var l=s[r];if(!l)throw new Error(`No method ${r} detected on ${s._export}.`);if(!s._publicMethods||!I()(s._publicMethods,(e=>{let{name:t}=e;return t===r})))throw new Error(`Method ${r} is not public on ${s._export}.`);if("function"!=typeof l)throw new Error(`Property ${r} on ${s._export} is not a function.`);o=l.apply(s,a)}catch(e){return void(n?this.postMessage("error",{responseId:n,message:e.toString(),stack:e.stack}):console.error(e.toString()+e.stack))}if(n){if(o&&o.then&&"function"==typeof o.then)return void o.then((e=>{this.postMessage("result",{responseId:n,result:this.exportValue(e)})})).catch((e=>{this.postMessage("error",{responseId:n,message:e.toString(),stack:e.stack})}));this.postMessage("result",{responseId:n,result:this.exportValue(o)})}}popResponsePromise(e){var t=this.pendingResults;if(!t.hasOwnProperty(e))throw new Error(`Invalid response id received as result from the other thread: ${e}`);var r=t[e];return delete t[e],r}handleResult(e){let{responseId:t,result:r}=e;var i=this.popResponsePromise(t),n=this.importValue(r);i.resolve(n)}handleError(e){let{responseId:t,message:r,stack:i}=e;var n=this.popResponsePromise(t);console.error(i),n.reject(new w(r,i))}callMethod(e,t,r){this.postMessage("callMethod",{thisId:this.exportValue(e),method:t,args:r?this.exportValue(r):null})}callMethodWithPromise(e,t,r){return new Promise(((i,n)=>{var s=T()("responseId");this.pendingResults[s]={resolve:i,reject:n},this.postMessage("callMethod",{responseId:s,thisId:this.exportValue(e),method:t,args:r?this.exportValue(r):null})}))}exportObject(e){var t=(0,P.A)(e);return this.exportedValues.hasOwnProperty(t)||(this.exportedValues[t]=e,this.exportedTypes.hasOwnProperty(e._export)||(this.exportedTypes[e._export]=!0,this.postMessage("type",{className:e._export,methods:e._publicMethods,selfManaged:!e.dispose||e.selfManaged}))),{_id:t,_export:e._export}}disposeExport(e){var t=this.exportedValues;if(t.hasOwnProperty(e)){var r=t[e];if(!r||r.selfManaged)return;r.dispose(),r.isDisposed&&delete t[e]}}exportValue(e){if(e){if(this.isOpaqueValue(e))return e;if(Array.isArray(e))return e.map(this.exportValue);if("object"==typeof e){if(e instanceof x)return{_opaqueValue:!0,_wrappedValue:e.value};if(e._import&&e._port===this)return{_import:e._import,_id:e._id};if(e._export)return this.exportObject(e);let t={};for(let r in e)t[r]=this.exportValue(e[r]);return t}}return e}importObject(e){var t=e._id,r=this.importedValues.hasOwnProperty(t)?this.importedValues[t]:null;if(!r){var i=e._export||"BaseImport",n=this.getImportType(i);_.id=e._id,_.props=e._props,Array.isArray(e._ctorArgs)&&e._ctorArgs.length>0?S.A.Reflect&&S.A.Reflect.construct?r=S.A.Reflect.construct(n,e._ctorArgs):(r=Object.create(n.prototype),n.apply(r,e._ctorArgs)):r=new n,this.importedValues[t]=r}return r}disposeImport(e){var t=this.importedValues;t&&(delete t[e._id],e.selfManaged||this.postMessage("dispose",{_id:e._id}))}isOpaqueValue(e){return e instanceof ArrayBuffer||e instanceof Uint8Array||e instanceof Int8Array||S.A.Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array||S.A.NSObject&&e instanceof S.A.NSObject}importValue(e){if(e){if(this.isOpaqueValue(e))return e;if(Array.isArray(e))return e.map(this.importValue);if("object"==typeof e){if(e._opaqueValue)return new x(e._wrappedValue);if(e._export)return this.importObject(e);if(e._import)return this.exportedValues[e._id];let t={};for(let r in e)t[r]=this.importValue(e[r]);return t}}return e}},(0,u.A)(O.prototype,"postMessages",[b.A],Object.getOwnPropertyDescriptor(O.prototype,"postMessages"),O.prototype),(0,u.A)(O.prototype,"flushMessagesSoon",[v],Object.getOwnPropertyDescriptor(O.prototype,"flushMessagesSoon"),O.prototype),(0,u.A)(O.prototype,"handleMessage",[m.A],Object.getOwnPropertyDescriptor(O.prototype,"handleMessage"),O.prototype),(0,u.A)(O.prototype,"exportValue",[m.A],Object.getOwnPropertyDescriptor(O.prototype,"exportValue"),O.prototype),(0,u.A)(O.prototype,"importValue",[m.A],Object.getOwnPropertyDescriptor(O.prototype,"importValue"),O.prototype),C=O))||C;var R=r(891348);class j extends D{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p)}initiateConnection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";this.channel=new window.MessageChannel,this.port=this.channel.port1,e.postMessage(JSON.stringify({kind:"torq-message-channel-init",name:r}),t,[this.channel.port2]),this.channel.port1.onmessage=e=>{this.handleChannelMessage(e)}}waitForConnection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";var r=new R.A,i=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r,i)}(window,"message",(e=>{if(/torq-message-channel-init/.test(e.data))try{var n=JSON.parse(e.data);"torq-message-channel-init"===n.kind&&n.name===t&&(this.port=e.ports[0],this.port.onmessage=e=>{this.handleChannelMessage(e)},i(),this.postInit(),r.resolve())}catch(e){}}));return r.promise}handleInit(){super.handleInit(...arguments),this.postInit()}handleChannelMessage(e){try{this.handleMessages(e.data)}catch(e){return void console.error(e)}}postMessages(e){this.port.postMessage(e)}}const F=new h;var N=r(237338),L=r(912977),M=r(696820),U=(r(985625),r(712435),r(682826)),$=r(547826);const z=f.A.makePropertyDecorator((function(e,t,r){e.hasOwnProperty("_publicMethods")||Object.defineProperty(e,"_publicMethods",{enumerable:!1,value:e._publicMethods?e._publicMethods.slice():[]});for(var i=arguments.length,n=new Array(i>3?i-3:0),s=3;s<i;s++)n[s-3]=arguments[s];e._publicMethods.push({name:t,args:n}),r.value=f.A.getInitialValue(r)}));var H,J;let q=g("StreamDelegate")((J=class extends d.A{constructor(e){super(),this.stream=e,e.attach(this)}write(e){this.trigger("data",e)}dispose(){super.dispose(),this.stream&&(this.stream.detach(),this.stream=null)}},(0,u.A)(J.prototype,"write",[z],Object.getOwnPropertyDescriptor(J.prototype,"write"),J.prototype),H=J))||H;const{LrSDK:V}=window;class B extends d.A{initialize(e){try{if(e.features)for(const[t,r]of Object.entries(e.features))U.A._override(t,r);i.A.token=e.token,i.A.environment=V.environment,i.A.clientId=e.clientId,i.A.ozHost="prod"===V.environment?"https://photos.adobe.io":"https://photos-stage.adobe.io",$.A.isReady||($.A.setGetTokenMethod((()=>this._token)),$.A.setAuthReady()),this.disableAnalytics=!!e.disableAnalytics,this.disableAnalytics||(0,M.A)(i.A),Object.keys(n).forEach((t=>{e.hasOwnProperty(t)&&(n[t]=e[t])})),this._config=e,this._iframes={},this.browseCount=0}catch(e){L.A.noticeError(e),console.log("Could not initialize LrImporter",e)}}attachCatalogBrowserP(e){if(L.A.reportApiCall("LrImporter.attachCatalogBrowserP"),L.A.beginTiming("importerBrowse"),!i.A.token)return Promise.reject("There must be a valid IMS token");e.textContent="";var t=(0,P.A)(e);let r;return new Promise(((a,u)=>{var c=`${window.location.protocol}//${window.location.hostname}`+(window.location.port?":"+window.location.port:""),d=new j(F);d.waitForConnection(c,"lr-importer-browser");var h=s(document,"div");h.style.position="absolute",h.style.top=0,h.style.left=0,h.style.bottom=0,h.style.right=0;var p=s(document,"iframe");p.style.position="relative",p.style.width="100%",p.style.height="100%",p.style.border="none";var f={source:c,session:L.A.sessionGuid,count:++this.browseCount};return p.src=V.baseURL+`sdk/LrImporter.html?${l().stringify(f)}`,p.id="lrimporter-iframe",e.dataset.importerStatus="loading",r=t=>{e.dataset.importerStatus=t},o(h,p),o(e,h),this._iframes[t]=h,d.loaded.then((()=>{var e=d.main,t={disableAnalytics:this.disableAnalytics,features:this.features};Object.assign(t,i.A,n),t.externalUrlHandler=!!t.externalUrlHandler,e.initialize(t).then((t=>{t&&(this.streamDelegate=this.link(new q(t)),this.listenTo(this.streamDelegate,"data",this._handleRemoteMessage),this.on("status-change",r)),a({iframe:h,importer:e})})).catch((e=>{u(e),L.A.noticeError(e)}))}))})).then((e=>e.importer.browse().then((e=>(this.stopListening(this.streamDelegate,"data",this._handleRemoteMessage),this.disposeLink(this.streamDelegate),this.off("status-change",r),L.A.reportWithTiming("importerBrowse",{api:"LrImporter.attachCatalogBrowserP",value:e?1:0,count:e?e.resources.length:0}),e))))).catch((e=>(console.log("Could not create lr-importer iframe",e),L.A.noticeError(e),Promise.reject(e))))}detachCatalogBrowser(e){L.A.reportApiCall("LrImporter.detachCatalogBrowser");var t=(0,P.A)(e);t&&this._iframes[t]?function(e){if(e.remove)e.remove();else{var t=e.parentNode;t&&t.removeChild(e)}}(this._iframes[t]):console.error("No LrImporter found for",e)}browseCatalogInWindowP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxWidth:1920,maxHeight:1080};if(L.A.reportApiCall("LrImporter.browseCatalogInWindowP"),L.A.beginTiming("importerBrowse"),!i.A.token)return Promise.reject("There must be a valid IMS token");var t=`${window.location.protocol}//${window.location.hostname}`+(window.location.port?":"+window.location.port:""),r=new j(F);r.waitForConnection(t,"lr-importer-browser");var s=Math.min(e.maxHeight,window.screen.availHeight),o=Math.min(e.maxWidth,window.screen.availWidth),a=`menubar=yes,resizable=yes,scrollbars=no,status=yes,width=${o},height=${s},top=${window.screen.availTop+window.screen.availHeight/2-s/2},left=${window.screen.availLeft+window.screen.availWidth/2-o/2}`,u={source:t,session:L.A.sessionGuid},c=V.baseURL+`sdk/LrImporter.html?${l().stringify(u)}`,d=window.open(c,"lr_importer_window",a);(d.outerWidth<screen.availWidth||d.outerHeight<screen.availHeight)&&(d.moveTo(0,0),d.resizeTo(screen.availWidth,screen.availHeight));var h=N.A.background;return N.A.background=!0,new Promise(((e,t)=>{this._windowCloseHandler=t=>{L.A.reportWithTiming("importerBrowse",{api:"LrImporter.browseCatalogInWindowP",value:0,count:0}),e(null)},r.loaded.then((()=>{var e=r.main,t={disableAnalytics:this.disableAnalytics,features:this.features};return Object.assign(t,i.A,n),t.externalUrlHandler=!!t.externalUrlHandler,e.initialize(t).then((t=>(t&&(this.streamDelegate=this.link(new q(t)),this.listenTo(this.streamDelegate,"data",this._handleRemoteMessage)),e.browse()))).then((e=>(d.close(),N.A.background=h,r.dispose(),this.stopListening(this.streamDelegate,"data",this._handleRemoteMessage),this.disposeLink(this.streamDelegate),L.A.reportWithTiming("importerBrowse",{api:"LrImporter.browseCatalogInWindowP",value:e?1:0,count:e?e.resources.length:0}),this._windowCloseHandler=void 0,e))).catch((e=>(L.A.noticeError(e),this._windowCloseHandler=void 0,Promise.reject(e))))})).then((t=>{e(t)})).catch((e=>{t(e)}))}))}enableFeature(e){U.A._override(e,!0)}get softImportLimit(){return n.softImportLimit}set softImportLimit(e){L.A.setAttribute("softImportLimit",e),n.softImportLimit=e}set preferredLanguage(e){L.A.setAttribute("preferredLanguage",e),n.preferredLanguage=e}get returnAfterSingleSelect(){return n.returnAfterSingleSelect}set returnAfterSingleSelect(e){L.A.setAttribute("returnAfterSingleSelect",e),n.returnAfterSingleSelect=e}get singleSelect(){return n.singleSelect}set singleSelect(e){L.A.setAttribute("singleSelect",e),n.singleSelect=e}get initialSearch(){return n.initialSearch}set initialSearch(e){L.A.setAttribute("initialSearch",!0),n.initialSearch=e}get browseProjectId(){return n.browseProjectId}set browseProjectId(e){L.A.setAttribute("browseProjectId",!0),n.browseProjectId=e}get browseOnlyCollections(){return n.browseOnlyCollections}set browseOnlyCollections(e){L.A.setAttribute("browseOnlyCollections",e),n.browseOnlyCollections=e}get browseAlbums(){return n.browseAlbums}set browseAlbums(e){L.A.setAttribute("browseAlbums",e),n.browseAlbums=e}get showConnectedProjects(){return n.showConnectedProjects}set showConnectedProjects(e){L.A.setAttribute("showConnectedProjects",e),n.showConnectedProjects=e}get publishProjects(){return n.publishProjects}set publishProjects(e){L.A.setAttribute("publishProjects",e),n.publishProjects=e}get ignorePublishedProjects(){return n.ignorePublishedProjects}set ignorePublishedProjects(e){L.A.setAttribute("ignorePublishedProjects",e),n.ignorePublishedProjects=e}get allowImportEntireAlbum(){return n.allowImportEntireAlbum}set allowImportEntireAlbum(e){L.A.setAttribute("allowImportEntireAlbum",e),n.allowImportEntireAlbum=e}get headerStyle(){return n.headerStyle}set headerStyle(e){L.A.setAttribute("headerStyle",e),n.headerStyle=e}get mode(){return n.mode}set mode(e){L.A.setAttribute("mode",e),n.mode=e}get colorStop(){return n.colorStop}set colorStop(e){L.A.setAttribute("colorStop",e),n.colorStop=e}_handleRemoteMessage(e){switch(e.name){case"remote-analytics-set-attribute":let t=e.args[0];L.A.setAttribute(t.name,t.value);break;case"remote-analytics-report":let r=e.args[0];L.A.report(r.action,r.variables);break;case"remote-analytics-notice-error":let i=e.args[0];L.A.report("jsError",{message:i.message,errorName:i.name,errorStackTrace:i.stack,url:i.url,automation:U.A.is_enabled("automation"),noticed:!0}),L.A.noticeError(new Error("LrImporterRemote noticed error"));break;case"remote-status-change":let s={unknown:"loading",partial:"loading",complete:"ready",missing:"missing",empty:"empty",maintenance:"maintenance"};this.trigger("status-change",s[e.args[0]]);break;case"remote-open-url":n.externalUrlHandler(e.args[0]);break;case"remote-log":console.log("REMOTE LOG",e.args[0]);break;case"remote-window-close":this._windowCloseHandler&&this._windowCloseHandler();break;default:console.log("Unknown remote event",e.name)}}}V.importer||(V.importer=new B),V.provide&&V.provide("importer",V.importer);V.importer},947492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.token="",this.sid="",this.expirems=0;var t=e.token,r=e.expirems;this.token=t,this.expirems=r};t.StandaloneToken=r},950176:(e,t,r)=>{var i=r(406227);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},956238:(e,t,r)=>{"use strict";function i(e){return function(t){e&&Object.assign(t.prototype,e)}}r.d(t,{A:()=>i})},957959:e=>{var t,r,i,n,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},a=function(e){return e&&e!==r&&o("Expected '"+e+"' instead of '"+r+"'"),r=i.charAt(t),t+=1,r},l=function(){var e,t="";for("-"===r&&(t="-",a("-"));r>="0"&&r<="9";)t+=r,a();if("."===r)for(t+=".";a()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,a(),"-"!==r&&"+"!==r||(t+=r,a());r>="0"&&r<="9";)t+=r,a();if(e=+t,isFinite(e))return e;o("Bad number")},u=function(){var e,t,i,n="";if('"'===r)for(;a();){if('"'===r)return a(),n;if("\\"===r)if(a(),"u"===r){for(i=0,t=0;t<4&&(e=parseInt(a(),16),isFinite(e));t+=1)i=16*i+e;n+=String.fromCharCode(i)}else{if("string"!=typeof s[r])break;n+=s[r]}else n+=r}o("Bad string")},c=function(){for(;r&&r<=" ";)a()};n=function(){switch(c(),r){case"{":return function(){var e,t={};if("{"===r){if(a("{"),c(),"}"===r)return a("}"),t;for(;r;){if(e=u(),c(),a(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=n(),c(),"}"===r)return a("}"),t;a(","),c()}}o("Bad object")}();case"[":return function(){var e=[];if("["===r){if(a("["),c(),"]"===r)return a("]"),e;for(;r;){if(e.push(n()),c(),"]"===r)return a("]"),e;a(","),c()}}o("Bad array")}();case'"':return u();case"-":return l();default:return r>="0"&&r<="9"?l():function(){switch(r){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o("Unexpected '"+r+"'")}()}},e.exports=function(e,s){var a;return i=e,t=0,r=" ",a=n(),c(),r&&o("Syntax error"),"function"==typeof s?function e(t,r){var i,n,o=t[r];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(void 0!==(n=e(o,i))?o[i]=n:delete o[i]);return s.call(t,r,o)}({"":a},""):a}},958997:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.message="",this.type="",this.type=e,this.message=t};t.FragmentException=r},984557:(e,t,r)=>{var i=r(366740);e.exports=i({}.isPrototypeOf)},985452:(e,t,r)=>{"use strict";var i=r(457081),n=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)void 0!==e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var n=t[i],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],c=o[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:u}),r.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(s(r)){for(var i=[],n=0;n<r.length;++n)void 0!==r[n]&&i.push(r[n]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(e){return i}},encode:function(e,t,r,n,s){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",u=0;u<a.length;++u){var c=a.charCodeAt(u);45===c||46===c||95===c||126===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===i.RFC1738&&(40===c||41===c)?l+=a.charAt(u):c<128?l+=o[c]:c<2048?l+=o[192|c>>6]+o[128|63&c]:c<55296||c>=57344?l+=o[224|c>>12]+o[128|c>>6&63]+o[128|63&c]:(u+=1,c=65536+((1023&c)<<10|1023&a.charCodeAt(u)),l+=o[240|c>>18]+o[128|c>>12&63]+o[128|c>>6&63]+o[128|63&c])}return l},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(s(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(s(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var o=t;return s(t)&&!s(r)&&(o=a(t,i)),s(t)&&s(r)?(r.forEach((function(r,s){if(n.call(t,s)){var o=t[s];o&&"object"==typeof o&&r&&"object"==typeof r?t[s]=e(o,r,i):t.push(r)}else t[s]=r})),t):Object.keys(r).reduce((function(t,s){var o=r[s];return n.call(t,s)?t[s]=e(t[s],o,i):t[s]=o,t}),o)}}},985625:(e,t)=>{t.$=function(){return function(e){for(var t=0,r=0,i=0,n=1,s=[],o=0,a=function(){var e=4022871197,t=function(t){t=t.toString();for(var r=0;r<t.length;r++){var i=.02519603282416938*(e+=t.charCodeAt(r));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}return 2.3283064365386963e-10*(e>>>0)};return t.version="Mash 0.9",t}(),l=(t=a(" "),r=a(" "),i=a(" "),0);l<8;l++)s[l]=a(" ");0==e.length&&(e=[+new Date]);for(var u=0;u<e.length;u++){(t-=a(e[u]))<0&&(t+=1),(r-=a(e[u]))<0&&(r+=1),(i-=a(e[u]))<0&&(i+=1);for(l=0;l<8;l++)s[l]-=a(e[u]),s[l]<0&&(s[l]+=1)}var c=function(){o=8*s[o]|0;var e=s[o],a=2091639*t+2.3283064365386963e-10*n;return t=r,r=i,i=a-(n=0|a),s[o]-=i,s[o]<0&&(s[o]+=1),e};return c.uint32=function(){return 4294967296*c()},c.fract53=function(){return c()+11102230246251565e-32*(2097152*c()|0)},c.addNoise=function(){for(var e=arguments.length-1;e>=0;e--)for(l=0;l<8;l++)s[l]-=a(arguments[e]),s[l]<0&&(s[l]+=1)},c.version="Kybos 0.9",c.args=e,c}(Array.prototype.slice.call(arguments))}},987562:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FRAGMENT="fragment",e.CSRF="csrf",e.NOT_AUTHORIZE="not_authorize",e.API_NOT_ALLOWED="not_allowed",e.LOGOUT="logout"}(t.IFragmentExceptionType||(t.IFragmentExceptionType={}))},996829:(e,t,r)=>{var i=r(950176),n=r(945618),s=r(732725),o=r(378531),a=r(798793),l=r(339100);t.f=i&&!n?Object.defineProperties:function(e,t){o(e);for(var r,i=a(t),n=l(t),u=n.length,c=0;u>c;)s.f(e,r=n[c++],i[r]);return e}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.c=t,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);r(r.s=946723)})();